/**
 * Copyright 2020 Google Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Browser } from '../api/Browser.js';
import { Puppeteer } from '../common/Puppeteer.js';
import { BrowserWorker } from './BrowserWorker.js';
declare global {
    interface Response {
        readonly webSocket: WebSocket | null;
    }
    interface WebSocket {
        accept(): void;
    }
}
/**
 * @public
 */
export interface AcquireResponse {
    sessionId: string;
}
/**
 * @public
 */
export interface ActiveSession {
    sessionId: string;
    startTime: number;
    connectionId?: string;
    connectionStartTime?: string;
}
/**
 * @public
 */
export interface ClosedSession extends ActiveSession {
    endTime: number;
    closeReason: number;
    closeReasonText: string;
}
/**
 * @public
 */
export interface SessionsResponse {
    sessions: ActiveSession[];
}
/**
 * @public
 */
export interface HistoryResponse {
    history: ClosedSession[];
}
/**
 * @public
 */
export interface LimitsResponse {
    activeSessions: Array<{
        id: string;
    }>;
    maxConcurrentSessions: number;
    allowedBrowserAcquisitions: number;
    timeUntilNextAllowedBrowserAcquisition: number;
}
/**
 * @public
 */
export interface WorkersLaunchOptions {
    keep_alive?: number;
}
/**
 * @public
 */
export declare class PuppeteerWorkers extends Puppeteer {
    constructor();
    /**
     * Launch a browser session.
     *
     * @param endpoint - Cloudflare worker binding
     * @returns a browser session or throws
     */
    launch(endpoint: BrowserWorker, options?: WorkersLaunchOptions): Promise<Browser>;
    /**
     * Returns active sessions
     *
     * @remarks
     * Sessions with a connnectionId already have a worker connection established
     *
     * @param endpoint - Cloudflare worker binding
     * @returns List of active sessions
     */
    sessions(endpoint: BrowserWorker): Promise<ActiveSession[]>;
    /**
     * Returns recent sessions (active and closed)
     *
     * @param endpoint - Cloudflare worker binding
     * @returns List of recent sessions (active and closed)
     */
    history(endpoint: BrowserWorker): Promise<ClosedSession[]>;
    /**
     * Returns current limits
     *
     * @param endpoint - Cloudflare worker binding
     * @returns current limits
     */
    limits(endpoint: BrowserWorker): Promise<LimitsResponse>;
    /**
     * Establish a devtools connection to an existing session
     *
     * @param endpoint - Cloudflare worker binding
     * @param sessionId - sessionId obtained from a .sessions() call
     * @returns a browser instance
     */
    connect(endpoint: BrowserWorker, sessionId: string): Promise<Browser>;
}
//# sourceMappingURL=PuppeteerWorkers.d.ts.map