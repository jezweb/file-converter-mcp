{
  "version": 3,
  "sources": ["../bundle-8icYKa/checked-fetch.js", "wrangler-modules-watch:wrangler:modules-watch", "../../../node_modules/wrangler/templates/modules-watch-stub.js", "../../../node_modules/ms/index.js", "../../../node_modules/debug/src/common.js", "../../../node_modules/debug/src/browser.js", "../../../node_modules/ws/browser.js", "../../../node_modules/@cloudflare/puppeteer/src/generated/version.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/NodeWebSocketTransport.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/BrowserWebSocketTransport.ts", "../bundle-8icYKa/middleware-loader.entry.ts", "../bundle-8icYKa/middleware-insertion-facade.js", "../../../src/index.ts", "../../../node_modules/hono/dist/index.js", "../../../node_modules/hono/dist/hono.js", "../../../node_modules/hono/dist/hono-base.js", "../../../node_modules/hono/dist/compose.js", "../../../node_modules/hono/dist/context.js", "../../../node_modules/hono/dist/request.js", "../../../node_modules/hono/dist/http-exception.js", "../../../node_modules/hono/dist/request/constants.js", "../../../node_modules/hono/dist/utils/body.js", "../../../node_modules/hono/dist/utils/url.js", "../../../node_modules/hono/dist/utils/html.js", "../../../node_modules/hono/dist/router.js", "../../../node_modules/hono/dist/utils/constants.js", "../../../node_modules/hono/dist/router/reg-exp-router/index.js", "../../../node_modules/hono/dist/router/reg-exp-router/router.js", "../../../node_modules/hono/dist/router/reg-exp-router/matcher.js", "../../../node_modules/hono/dist/router/reg-exp-router/node.js", "../../../node_modules/hono/dist/router/reg-exp-router/trie.js", "../../../node_modules/hono/dist/router/reg-exp-router/prepared-router.js", "../../../node_modules/hono/dist/router/smart-router/index.js", "../../../node_modules/hono/dist/router/smart-router/router.js", "../../../node_modules/hono/dist/router/trie-router/index.js", "../../../node_modules/hono/dist/router/trie-router/router.js", "../../../node_modules/hono/dist/router/trie-router/node.js", "../../../node_modules/hono/dist/middleware/cors/index.js", "../../../src/mcp/server.ts", "../../../src/mcp/tools.ts", "../../../src/utils/responses.ts", "../../../src/handlers/browser-pdf.ts", "../../../node_modules/marked/src/defaults.ts", "../../../node_modules/marked/src/rules.ts", "../../../node_modules/marked/src/helpers.ts", "../../../node_modules/marked/src/Tokenizer.ts", "../../../node_modules/marked/src/Lexer.ts", "../../../node_modules/marked/src/Renderer.ts", "../../../node_modules/marked/src/TextRenderer.ts", "../../../node_modules/marked/src/Parser.ts", "../../../node_modules/marked/src/Hooks.ts", "../../../node_modules/marked/src/Instance.ts", "../../../node_modules/marked/src/marked.ts", "../../../src/lib/browser-client.ts", "../../../node_modules/@cloudflare/puppeteer/src/puppeteer-cloudflare.ts", "../../../node_modules/@cloudflare/puppeteer/src/cloudflare/PuppeteerWorkers.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Puppeteer.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/BrowserConnector.ts", "../../../node_modules/@cloudflare/puppeteer/src/environment.ts", "../../../node_modules/@cloudflare/puppeteer/src/util/assert.ts", "../../../node_modules/@cloudflare/puppeteer/src/util/ErrorLike.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Browser.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/Browser.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/EventEmitter.ts", "../../../node_modules/@cloudflare/puppeteer/lib/esm/third_party/mitt/index.js", "../../../node_modules/@cloudflare/puppeteer/src/common/util.ts", "../../../node_modules/@cloudflare/puppeteer/src/util/Deferred.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Errors.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Debug.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/ElementHandle.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/ElementHandle.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/GetQueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/AriaQueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/util/AsyncIterableUtil.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/QueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/util/Function.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/HandleIterator.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/LazyArg.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/CustomQueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/ScriptInjector.ts", "../../../node_modules/@cloudflare/puppeteer/src/generated/injected.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/PierceQueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/PQueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/TextQueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/XPathQueryHandler.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/JSHandle.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/JSHandle.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/BrowserContext.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/ChromeTargetManager.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Connection.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Target.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/Target.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Page.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/Page.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/NetworkManager.ts", "../../../node_modules/@cloudflare/puppeteer/src/util/DebuggableDeferred.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/HTTPRequest.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/HTTPRequest.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/HTTPResponse.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/HTTPResponse.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/SecurityDetails.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/NetworkEventManager.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/PDFOptions.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/locators.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/Locator.ts", "../../../node_modules/@cloudflare/puppeteer/lib/esm/third_party/rxjs/rxjs.js", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/NodeLocator.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/FilteredLocator.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/DelegatedLocator.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/RaceLocator.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/MappedLocator.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/locators/FunctionLocator.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Accessibility.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Binding.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/ConsoleMessage.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Coverage.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Dialog.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/Dialog.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/EmulationManager.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/FileChooser.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/FrameManager.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/DeviceRequestPrompt.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/ExecutionContext.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Frame.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/Frame.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/IsolatedWorld.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/IsolatedWorlds.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/LifecycleWatcher.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/WaitTask.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/FrameTree.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Input.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/Input.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/USKeyboardLayout.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/TimeoutSettings.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Tracing.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/WebWorker.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/FirefoxTargetManager.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/TaskQueue.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/fetch.ts", "../../../node_modules/@cloudflare/puppeteer/src/cloudflare/utils.ts", "../../../node_modules/@cloudflare/puppeteer/src/cloudflare/WorkersWebSocketTransport.ts", "../../../node_modules/@cloudflare/puppeteer/src/cloudflare/chunking.ts", "../../../node_modules/@cloudflare/puppeteer/src/api/api.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/common.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Configuration.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/ConnectionTransport.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Device.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/PredefinedNetworkConditions.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/Product.ts", "../../../node_modules/@cloudflare/puppeteer/lib/esm/puppeteer/common/PuppeteerViewport.js", "../../../node_modules/@cloudflare/puppeteer/src/common/TargetManager.ts", "../../../node_modules/@cloudflare/puppeteer/src/common/types.ts", "../../../node_modules/@cloudflare/puppeteer/src/revisions.ts", "../../../node_modules/@cloudflare/puppeteer/src/util/util.ts", "../../../node_modules/@cloudflare/puppeteer/lib/esm/puppeteer/cloudflare/BrowserWorker.js", "../../../src/lib/r2-storage.ts", "../../../src/handlers/browser-screenshot.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/common.ts"],
  "sourceRoot": "/home/jez/Documents/file-converter-mcp/.wrangler/tmp/dev-yhE8yw",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "", "// `esbuild` doesn't support returning `watch*` options from `onStart()`\n// plugin callbacks. Instead, we define an empty virtual module that is\n// imported by this injected file. Importing the module registers watchers.\nimport \"wrangler:modules-watch\";\n", "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n", "\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n", "/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n", "'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n", "/**\n * @internal\n */\nexport const packageVersion = '0.0.12';\n", "/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport NodeWebSocket from 'ws';\n\nimport {ConnectionTransport} from '../common/ConnectionTransport.js';\nimport {packageVersion} from '../generated/version.js';\n\n/**\n * @internal\n */\nexport class NodeWebSocketTransport implements ConnectionTransport {\n  static create(\n    url: string,\n    headers?: Record<string, string>\n  ): Promise<NodeWebSocketTransport> {\n    return new Promise((resolve, reject) => {\n      const ws = new NodeWebSocket(url, [], {\n        followRedirects: true,\n        perMessageDeflate: false,\n        maxPayload: 256 * 1024 * 1024, // 256Mb\n        headers: {\n          'User-Agent': `Puppeteer ${packageVersion}`,\n          ...headers,\n        },\n      });\n\n      ws.addEventListener('open', () => {\n        return resolve(new NodeWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  #ws: NodeWebSocket;\n  onmessage?: (message: NodeWebSocket.Data) => void;\n  onclose?: () => void;\n\n  constructor(ws: NodeWebSocket) {\n    this.#ws = ws;\n    this.#ws.addEventListener('message', event => {\n      setImmediate(() => {\n        if (this.onmessage) {\n          this.onmessage.call(null, event.data);\n        }\n      });\n    });\n    this.#ws.addEventListener('close', () => {\n      if (this.onclose) {\n        this.onclose.call(null);\n      }\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    this.#ws.addEventListener('error', () => {});\n  }\n\n  send(message: string): void {\n    this.#ws.send(message);\n  }\n\n  close(): void {\n    this.#ws.close();\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {ConnectionTransport} from './ConnectionTransport.js';\n\n/**\n * @internal\n */\nexport class BrowserWebSocketTransport implements ConnectionTransport {\n  static create(url: string): Promise<BrowserWebSocketTransport> {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url);\n\n      ws.addEventListener('open', () => {\n        return resolve(new BrowserWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  #ws: WebSocket;\n  onmessage?: (message: string) => void;\n  onclose?: () => void;\n\n  constructor(ws: WebSocket) {\n    this.#ws = ws;\n    this.#ws.addEventListener('message', event => {\n      if (this.onmessage) {\n        this.onmessage.call(null, event.data);\n      }\n    });\n    this.#ws.addEventListener('close', () => {\n      if (this.onclose) {\n        this.onclose.call(null);\n      }\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    this.#ws.addEventListener('error', () => {});\n  }\n\n  send(message: string): void {\n    this.#ws.send(message);\n  }\n\n  close(): void {\n    this.#ws.close();\n  }\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/home/jez/Documents/file-converter-mcp/.wrangler/tmp/bundle-8icYKa/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/home/jez/Documents/file-converter-mcp/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/home/jez/Documents/file-converter-mcp/.wrangler/tmp/bundle-8icYKa/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/home/jez/Documents/file-converter-mcp/.wrangler/tmp/bundle-8icYKa/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/home/jez/Documents/file-converter-mcp/src/index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/home/jez/Documents/file-converter-mcp/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\n\n\t\t\t\texport * from \"/home/jez/Documents/file-converter-mcp/src/index.ts\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "import { Hono } from 'hono';\nimport { cors } from 'hono/cors';\nimport { bearerAuth } from 'hono/bearer-auth';\nimport type { Bindings, MCPRequest } from './mcp/types';\nimport { handleMCPRequest } from './mcp/server';\nimport { createInvalidRequest, createParseError } from './utils/responses';\n\nconst app = new Hono<{ Bindings: Bindings }>();\n\n// CORS middleware - allow all origins for MCP\napp.use('/*', cors({\n  origin: '*',\n  allowMethods: ['GET', 'POST', 'OPTIONS'],\n  allowHeaders: ['Content-Type', 'Authorization'],\n}));\n\n// Health check endpoint (public)\napp.get('/health', (c) => {\n  return c.json({\n    status: 'ok',\n    version: '1.0.0',\n    tools: 5, // Phase 3: 5 tools implemented (3 PDF + 2 screenshots)\n    totalPlanned: 13,\n  });\n});\n\n// HTML discovery page (public)\napp.get('/', (c) => {\n  const deployUrl = c.req.url.replace(new URL(c.req.url).pathname, '');\n\n  const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>File Converter MCP Server</title>\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      min-height: 100vh;\n      padding: 2rem;\n    }\n    .container {\n      max-width: 900px;\n      margin: 0 auto;\n      background: white;\n      border-radius: 12px;\n      box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n      padding: 3rem;\n    }\n    h1 {\n      color: #2d3748;\n      font-size: 2.5rem;\n      margin-bottom: 0.5rem;\n    }\n    .subtitle {\n      color: #718096;\n      font-size: 1.1rem;\n      margin-bottom: 2rem;\n    }\n    .section {\n      margin: 2rem 0;\n    }\n    .section h2 {\n      color: #667eea;\n      font-size: 1.5rem;\n      margin-bottom: 1rem;\n      border-bottom: 2px solid #e2e8f0;\n      padding-bottom: 0.5rem;\n    }\n    .code-block {\n      background: #1a202c;\n      color: #68d391;\n      padding: 1.5rem;\n      border-radius: 8px;\n      overflow-x: auto;\n      font-family: 'Courier New', monospace;\n      font-size: 0.9rem;\n      line-height: 1.5;\n    }\n    .tool-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n      gap: 1rem;\n      margin-top: 1rem;\n    }\n    .tool-card {\n      background: #f7fafc;\n      padding: 1rem;\n      border-radius: 8px;\n      border-left: 4px solid #667eea;\n    }\n    .tool-name {\n      font-weight: 600;\n      color: #2d3748;\n      margin-bottom: 0.5rem;\n    }\n    .tool-desc {\n      color: #718096;\n      font-size: 0.9rem;\n    }\n    .warning {\n      background: #fff5f5;\n      border-left: 4px solid #f56565;\n      padding: 1rem;\n      border-radius: 4px;\n      color: #742a2a;\n      margin: 1rem 0;\n    }\n    .badge {\n      display: inline-block;\n      background: #667eea;\n      color: white;\n      padding: 0.25rem 0.75rem;\n      border-radius: 12px;\n      font-size: 0.85rem;\n      font-weight: 500;\n      margin-right: 0.5rem;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>\uD83D\uDCC4 File Converter MCP Server</h1>\n    <p class=\"subtitle\">Document conversion & processing for AI agents</p>\n\n    <div class=\"section\">\n      <h2>\uD83D\uDE80 MCP Configuration</h2>\n      <p style=\"margin-bottom: 1rem;\">Add this server to your MCP client:</p>\n      <div class=\"code-block\">{\n  \"name\": \"File Converter\",\n  \"url\": \"${deployUrl}/mcp\",\n  \"transport\": \"http\",\n  \"headers\": {\n    \"Authorization\": \"Bearer YOUR_TOKEN\"\n  }\n}</div>\n    </div>\n\n    <div class=\"section\">\n      <h2>\uD83D\uDD27 Available Tools (13)</h2>\n\n      <h3 style=\"margin-top: 1.5rem; color: #4a5568;\">PDF Generation (Browser Rendering)</h3>\n      <div class=\"tool-grid\">\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">html_to_pdf</div>\n          <div class=\"tool-desc\">Convert HTML/CSS to PDF</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">url_to_pdf</div>\n          <div class=\"tool-desc\">Convert webpages to PDF</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">markdown_to_pdf</div>\n          <div class=\"tool-desc\">Styled markdown PDFs</div>\n        </div>\n      </div>\n\n      <h3 style=\"margin-top: 1.5rem; color: #4a5568;\">Screenshots & Images</h3>\n      <div class=\"tool-grid\">\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">html_to_screenshot</div>\n          <div class=\"tool-desc\">HTML \u2192 PNG/JPG</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">url_to_screenshot</div>\n          <div class=\"tool-desc\">Webpage capture</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">pdf_to_images</div>\n          <div class=\"tool-desc\">PDF pages \u2192 images</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">document_to_images</div>\n          <div class=\"tool-desc\">Office \u2192 images</div>\n        </div>\n      </div>\n\n      <h3 style=\"margin-top: 1.5rem; color: #4a5568;\">Document Processing</h3>\n      <div class=\"tool-grid\">\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">document_to_markdown</div>\n          <div class=\"tool-desc\">Extract text as markdown (RAG-ready)</div>\n        </div>\n      </div>\n\n      <h3 style=\"margin-top: 1.5rem; color: #4a5568;\">Data Extraction & PDF Operations</h3>\n      <div class=\"tool-grid\">\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">excel_to_json</div>\n          <div class=\"tool-desc\">Parse spreadsheets</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">office_to_pdf</div>\n          <div class=\"tool-desc\">DOCX/PPTX/XLSX \u2192 PDF</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">merge_pdfs</div>\n          <div class=\"tool-desc\">Combine PDFs</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">split_pdf</div>\n          <div class=\"tool-desc\">Extract pages</div>\n        </div>\n        <div class=\"tool-card\">\n          <div class=\"tool-name\">extract_pdf_tables</div>\n          <div class=\"tool-desc\">Table data \u2192 CSV/JSON</div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"section\">\n      <h2>\uD83D\uDCCA Tech Stack</h2>\n      <p style=\"margin-bottom: 0.5rem;\">\n        <span class=\"badge\">Cloudflare Workers</span>\n        <span class=\"badge\">Browser Rendering</span>\n        <span class=\"badge\">Workers AI</span>\n        <span class=\"badge\">PDF.co</span>\n        <span class=\"badge\">R2 Storage</span>\n      </p>\n    </div>\n\n    <div class=\"warning\">\n      <strong>\u26A0\uFE0F Authentication Required:</strong> The /mcp endpoint requires a Bearer token.\n      Set AUTH_TOKEN in your environment or .dev.vars file.\n    </div>\n\n    <div class=\"section\">\n      <h2>\uD83D\uDCDD Example Request</h2>\n      <div class=\"code-block\">curl -X POST ${deployUrl}/mcp \\\\\n  -H \"Authorization: Bearer YOUR_TOKEN\" \\\\\n  -H \"Content-Type: application/json\" \\\\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"method\": \"tools/list\"\n  }'</div>\n    </div>\n\n    <div class=\"section\" style=\"text-align: center; color: #718096; padding-top: 2rem; border-top: 1px solid #e2e8f0;\">\n      <p>Built by Jeremy Dawes (Jez) | Powered by Cloudflare & PDF.co</p>\n      <p style=\"margin-top: 0.5rem; font-size: 0.9rem;\">\n        <a href=\"https://www.jezweb.com.au\" style=\"color: #667eea; text-decoration: none;\">jezweb.com.au</a> |\n        <a href=\"mailto:jeremy@jezweb.net\" style=\"color: #667eea; text-decoration: none;\">jeremy@jezweb.net</a>\n      </p>\n    </div>\n  </div>\n</body>\n</html>\n  `;\n\n  return c.html(html);\n});\n\n// MCP endpoint (protected with bearer auth)\napp.post('/mcp', async (c) => {\n  // Manual bearer token check\n  const authHeader = c.req.header('Authorization');\n  const token = authHeader?.replace('Bearer ', '');\n\n  if (!token || token !== c.env.AUTH_TOKEN) {\n    return c.text('Unauthorized', 401);\n  }\n\n  try {\n    const body = await c.req.json() as MCPRequest;\n\n    // Validate JSON-RPC format\n    if (!body || body.jsonrpc !== '2.0' || !body.method) {\n      return c.json(createInvalidRequest(body?.id || 0));\n    }\n\n    const response = await handleMCPRequest(body, c.env);\n    return c.json(response);\n  } catch (error) {\n    console.error('Failed to parse request:', error);\n    return c.json(createParseError());\n  }\n});\n\nexport default app;\n", "// src/index.ts\nimport { Hono } from \"./hono.js\";\nexport {\n  Hono\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    const res = err.getResponse();\n    return c.newResponse(res.body, res);\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  router;\n  getPath;\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const { strict, ...optionsWithoutStrict } = options;\n    Object.assign(this, optionsWithoutStrict);\n    this.getPath = strict ?? true ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.errorHandler = this.errorHandler;\n    clone.#notFoundHandler = this.#notFoundHandler;\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  errorHandler = errorHandler;\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        if (options.replaceRequest === false) {\n          replaceRequest = (request) => request;\n        } else {\n          replaceRequest = options.replaceRequest;\n        }\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { basePath: this._basePath, path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/compose.ts\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        context.req.routeIndex = i;\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (handler) {\n        try {\n          res = await handler(context, () => dispatch(i + 1));\n        } catch (err) {\n          if (err instanceof Error && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      } else {\n        if (context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setDefaultContentType = (contentType, headers) => {\n  return {\n    \"Content-Type\": contentType,\n    ...headers\n  };\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  env = {};\n  #var;\n  finalized = false;\n  error;\n  #status;\n  #executionCtx;\n  #res;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #preparedHeaders;\n  #matchResult;\n  #path;\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  get res() {\n    return this.#res ||= new Response(null, {\n      headers: this.#preparedHeaders ??= new Headers()\n    });\n  }\n  set res(_res) {\n    if (this.#res && _res) {\n      _res = new Response(_res.body, _res);\n      for (const [k, v] of this.#res.headers.entries()) {\n        if (k === \"content-type\") {\n          continue;\n        }\n        if (k === \"set-cookie\") {\n          const cookies = this.#res.headers.getSetCookie();\n          _res.headers.delete(\"set-cookie\");\n          for (const cookie of cookies) {\n            _res.headers.append(\"set-cookie\", cookie);\n          }\n        } else {\n          _res.headers.set(k, v);\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  setLayout = (layout) => this.#layout = layout;\n  getLayout = () => this.#layout;\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  header = (name, value, options) => {\n    if (this.finalized) {\n      this.#res = new Response(this.#res.body, this.#res);\n    }\n    const headers = this.#res ? this.#res.headers : this.#preparedHeaders ??= new Headers();\n    if (value === void 0) {\n      headers.delete(name);\n    } else if (options?.append) {\n      headers.append(name, value);\n    } else {\n      headers.set(name, value);\n    }\n  };\n  status = (status) => {\n    this.#status = status;\n  };\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    const responseHeaders = this.#res ? new Headers(this.#res.headers) : this.#preparedHeaders ?? new Headers();\n    if (typeof arg === \"object\" && \"headers\" in arg) {\n      const argHeaders = arg.headers instanceof Headers ? arg.headers : new Headers(arg.headers);\n      for (const [key, value] of argHeaders) {\n        if (key.toLowerCase() === \"set-cookie\") {\n          responseHeaders.append(key, value);\n        } else {\n          responseHeaders.set(key, value);\n        }\n      }\n    }\n    if (headers) {\n      for (const [k, v] of Object.entries(headers)) {\n        if (typeof v === \"string\") {\n          responseHeaders.set(k, v);\n        } else {\n          responseHeaders.delete(k);\n          for (const v2 of v) {\n            responseHeaders.append(k, v2);\n          }\n        }\n      }\n    }\n    const status = typeof arg === \"number\" ? arg : arg?.status ?? this.#status;\n    return new Response(data, { status, headers: responseHeaders });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  body = (data, arg, headers) => this.#newResponse(data, arg, headers);\n  text = (text, arg, headers) => {\n    return !this.#preparedHeaders && !this.#status && !arg && !headers && !this.finalized ? new Response(text) : this.#newResponse(\n      text,\n      arg,\n      setDefaultContentType(TEXT_PLAIN, headers)\n    );\n  };\n  json = (object, arg, headers) => {\n    return this.#newResponse(\n      JSON.stringify(object),\n      arg,\n      setDefaultContentType(\"application/json\", headers)\n    );\n  };\n  html = (html, arg, headers) => {\n    const res = (html2) => this.#newResponse(html2, arg, setDefaultContentType(\"text/html; charset=UTF-8\", headers));\n    return typeof html === \"object\" ? resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then(res) : res(html);\n  };\n  redirect = (location, status) => {\n    const locationString = String(location);\n    this.header(\n      \"Location\",\n      !/[^\\x00-\\xFF]/.test(locationString) ? locationString : encodeURI(locationString)\n    );\n    return this.newResponse(null, status ?? 302);\n  };\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/request.ts\nimport { HTTPException } from \"./http-exception.js\";\nimport { GET_MATCH_RESULT } from \"./request/constants.js\";\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  raw;\n  #validatedData;\n  #matchResult;\n  routeIndex = 0;\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param && /\\%/.test(param) ? tryDecodeURIComponent(param) : param;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value !== void 0) {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  json() {\n    return this.#cachedBody(\"text\").then((text) => JSON.parse(text));\n  }\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  get url() {\n    return this.raw.url;\n  }\n  get method() {\n    return this.raw.method;\n  }\n  get [GET_MATCH_RESULT]() {\n    return this.#matchResult;\n  }\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nvar cloneRawRequest = async (req) => {\n  if (!req.raw.bodyUsed) {\n    return req.raw.clone();\n  }\n  const cacheKey = Object.keys(req.bodyCache)[0];\n  if (!cacheKey) {\n    throw new HTTPException(500, {\n      message: \"Cannot clone request: body was already consumed and not cached. Please use HonoRequest methods (e.g., req.json(), req.text()) instead of consuming req.raw directly.\"\n    });\n  }\n  const requestInit = {\n    body: await req[cacheKey](),\n    cache: req.raw.cache,\n    credentials: req.raw.credentials,\n    headers: req.header(),\n    integrity: req.raw.integrity,\n    keepalive: req.raw.keepalive,\n    method: req.method,\n    mode: req.raw.mode,\n    redirect: req.raw.redirect,\n    referrer: req.raw.referrer,\n    referrerPolicy: req.raw.referrerPolicy,\n    signal: req.raw.signal\n  };\n  return new Request(req.url, requestInit);\n};\nexport {\n  HonoRequest,\n  cloneRawRequest\n};\n", "// src/http-exception.ts\nvar HTTPException = class extends Error {\n  res;\n  status;\n  constructor(status = 500, options) {\n    super(options?.message, { cause: options?.cause });\n    this.res = options?.res;\n    this.status = status;\n  }\n  getResponse() {\n    if (this.res) {\n      const newResponse = new Response(this.res.body, {\n        status: this.status,\n        headers: this.res.headers\n      });\n      return newResponse;\n    }\n    return new Response(this.message, {\n      status: this.status\n    });\n  }\n};\nexport {\n  HTTPException\n};\n", "// src/request/constants.ts\nvar GET_MATCH_RESULT = Symbol();\nexport {\n  GET_MATCH_RESULT\n};\n", "// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    if (!key.endsWith(\"[]\")) {\n      form[key] = value;\n    } else {\n      form[key] = [value];\n    }\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label, next) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    const cacheKey = `${label}#${next}`;\n    if (!patternCache[cacheKey]) {\n      if (match[2]) {\n        patternCache[cacheKey] = next && next[0] !== \":\" && next[0] !== \"*\" ? [cacheKey, match[1], new RegExp(`^${match[2]}(?=/${next})`)] : [label, match[1], new RegExp(`^${match[2]}$`)];\n      } else {\n        patternCache[cacheKey] = [label, match[1], true];\n      }\n    }\n    return patternCache[cacheKey];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", url.indexOf(\":\") + 4);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const path = url.slice(start, queryIndex === -1 ? void 0 : queryIndex);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (base, sub, ...rest) => {\n  if (rest.length) {\n    sub = mergePath(sub, ...rest);\n  }\n  return `${base?.[0] === \"/\" ? \"\" : \"/\"}${base}${sub === \"/\" ? \"\" : `${base?.at(-1) === \"/\" ? \"\" : \"/\"}${sub?.[0] === \"/\" ? sub.slice(1) : sub}`}`;\n};\nvar checkOptionalParameter = (path) => {\n  if (path.charCodeAt(path.length - 1) !== 63 || !path.includes(\":\")) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? tryDecode(value, decodeURIComponent_) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(`?${key}`, 8);\n    if (keyIndex2 === -1) {\n      keyIndex2 = url.indexOf(`&${key}`, 8);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/router/reg-exp-router/index.ts\nimport { RegExpRouter } from \"./router.js\";\nimport { PreparedRegExpRouter, buildInitParams, serializeInitParams } from \"./prepared-router.js\";\nexport {\n  PreparedRegExpRouter,\n  RegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match = match;\n  buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    clearWildcardRegExpCache();\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/reg-exp-router/matcher.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nvar emptyParam = [];\nfunction match(method, path) {\n  const matchers = this.buildAllMatchers();\n  const match2 = (method2, path2) => {\n    const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n    const staticMatch = matcher[2][path2];\n    if (staticMatch) {\n      return staticMatch;\n    }\n    const match3 = path2.match(matcher[0]);\n    if (!match3) {\n      return [[], emptyParam];\n    }\n    const index = match3.indexOf(\"\", 1);\n    return [matcher[1][index], match3];\n  };\n  this.match = match2;\n  return match2(method, path);\n}\nexport {\n  emptyParam,\n  match\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        if (regexpStr === \".*\") {\n          throw PATH_ERROR;\n        }\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/prepared-router.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { RegExpRouter } from \"./router.js\";\nvar PreparedRegExpRouter = class {\n  name = \"PreparedRegExpRouter\";\n  #matchers;\n  #relocateMap;\n  constructor(matchers, relocateMap) {\n    this.#matchers = matchers;\n    this.#relocateMap = relocateMap;\n  }\n  #addWildcard(method, handlerData) {\n    const matcher = this.#matchers[method];\n    matcher[1].forEach((list) => list && list.push(handlerData));\n    Object.values(matcher[2]).forEach((list) => list[0].push(handlerData));\n  }\n  #addPath(method, path, handler, indexes, map) {\n    const matcher = this.#matchers[method];\n    if (!map) {\n      matcher[2][path][0].push([handler, {}]);\n    } else {\n      indexes.forEach((index) => {\n        if (typeof index === \"number\") {\n          matcher[1][index].push([handler, map]);\n        } else {\n          ;\n          matcher[2][index || path][0].push([handler, map]);\n        }\n      });\n    }\n  }\n  add(method, path, handler) {\n    if (!this.#matchers[method]) {\n      const all = this.#matchers[METHOD_NAME_ALL];\n      const staticMap = {};\n      for (const key in all[2]) {\n        staticMap[key] = [all[2][key][0].slice(), emptyParam];\n      }\n      this.#matchers[method] = [\n        all[0],\n        all[1].map((list) => Array.isArray(list) ? list.slice() : 0),\n        staticMap\n      ];\n    }\n    if (path === \"/*\" || path === \"*\") {\n      const handlerData = [handler, {}];\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addWildcard(m, handlerData);\n        }\n      } else {\n        this.#addWildcard(method, handlerData);\n      }\n      return;\n    }\n    const data = this.#relocateMap[path];\n    if (!data) {\n      throw new Error(`Path ${path} is not registered`);\n    }\n    for (const [indexes, map] of data) {\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addPath(m, path, handler, indexes, map);\n        }\n      } else {\n        this.#addPath(method, path, handler, indexes, map);\n      }\n    }\n  }\n  buildAllMatchers() {\n    return this.#matchers;\n  }\n  match = match;\n};\nvar buildInitParams = ({ paths }) => {\n  const RegExpRouterWithMatcherExport = class extends RegExpRouter {\n    buildAndExportAllMatchers() {\n      return this.buildAllMatchers();\n    }\n  };\n  const router = new RegExpRouterWithMatcherExport();\n  for (const path of paths) {\n    router.add(METHOD_NAME_ALL, path, path);\n  }\n  const matchers = router.buildAndExportAllMatchers();\n  const all = matchers[METHOD_NAME_ALL];\n  const relocateMap = {};\n  for (const path of paths) {\n    if (path === \"/*\" || path === \"*\") {\n      continue;\n    }\n    all[1].forEach((list, i) => {\n      list.forEach(([p, map]) => {\n        if (p === path) {\n          if (relocateMap[path]) {\n            relocateMap[path][0][1] = {\n              ...relocateMap[path][0][1],\n              ...map\n            };\n          } else {\n            relocateMap[path] = [[[], map]];\n          }\n          if (relocateMap[path][0][0].findIndex((j) => j === i) === -1) {\n            relocateMap[path][0][0].push(i);\n          }\n        }\n      });\n    });\n    for (const path2 in all[2]) {\n      all[2][path2][0].forEach(([p]) => {\n        if (p === path) {\n          relocateMap[path] ||= [[[]]];\n          const value = path2 === path ? \"\" : path2;\n          if (relocateMap[path][0][0].findIndex((v) => v === value) === -1) {\n            relocateMap[path][0][0].push(value);\n          }\n        }\n      });\n    }\n  }\n  for (let i = 0, len = all[1].length; i < len; i++) {\n    all[1][i] = all[1][i] ? [] : 0;\n  }\n  for (const path in all[2]) {\n    all[2][path][0] = [];\n  }\n  return [matchers, relocateMap];\n};\nvar serializeInitParams = ([matchers, relocateMap]) => {\n  const matchersStr = JSON.stringify(\n    matchers,\n    (_, value) => value instanceof RegExp ? `##${value.toString()}##` : value\n  ).replace(/\"##(.+?)##\"/g, (_, str) => str.replace(/\\\\\\\\/g, \"\\\\\"));\n  const relocateMapStr = JSON.stringify(relocateMap);\n  return `[${matchersStr},${relocateMapStr}]`;\n};\nexport {\n  PreparedRegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/smart-router/index.ts\nimport { SmartRouter } from \"./router.js\";\nexport {\n  SmartRouter\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/index.ts\nimport { TrieRouter } from \"./router.js\";\nexport {\n  TrieRouter\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      const nextP = parts[i + 1];\n      const pattern = getPattern(p, nextP);\n      const key = Array.isArray(pattern) ? pattern[0] : p;\n      if (key in curNode.#children) {\n        curNode = curNode.#children[key];\n        if (pattern) {\n          possibleKeys.push(pattern[1]);\n        }\n        continue;\n      }\n      curNode.#children[key] = new Node();\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[key];\n    }\n    curNode.#methods.push({\n      [method]: {\n        handler,\n        possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n        score: this.#order\n      }\n    });\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    const curNodesQueue = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              astNode.#params = params;\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          if (!part && !(matcher instanceof RegExp)) {\n            continue;\n          }\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp) {\n            const m = matcher.exec(restPathString);\n            if (m) {\n              params[name] = m[0];\n              handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n              if (Object.keys(child.#children).length) {\n                child.#params = params;\n                const componentCount = m[0].match(/\\//)?.length ?? 0;\n                const targetCurNodes = curNodesQueue[componentCount] ||= [];\n                targetCurNodes.push(child);\n              }\n              continue;\n            }\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes.concat(curNodesQueue.shift() ?? []);\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "// src/middleware/cors/index.ts\nvar cors = (options) => {\n  const defaults = {\n    origin: \"*\",\n    allowMethods: [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\"],\n    allowHeaders: [],\n    exposeHeaders: []\n  };\n  const opts = {\n    ...defaults,\n    ...options\n  };\n  const findAllowOrigin = ((optsOrigin) => {\n    if (typeof optsOrigin === \"string\") {\n      if (optsOrigin === \"*\") {\n        return () => optsOrigin;\n      } else {\n        return (origin) => optsOrigin === origin ? origin : null;\n      }\n    } else if (typeof optsOrigin === \"function\") {\n      return optsOrigin;\n    } else {\n      return (origin) => optsOrigin.includes(origin) ? origin : null;\n    }\n  })(opts.origin);\n  const findAllowMethods = ((optsAllowMethods) => {\n    if (typeof optsAllowMethods === \"function\") {\n      return optsAllowMethods;\n    } else if (Array.isArray(optsAllowMethods)) {\n      return () => optsAllowMethods;\n    } else {\n      return () => [];\n    }\n  })(opts.allowMethods);\n  return async function cors2(c, next) {\n    function set(key, value) {\n      c.res.headers.set(key, value);\n    }\n    const allowOrigin = await findAllowOrigin(c.req.header(\"origin\") || \"\", c);\n    if (allowOrigin) {\n      set(\"Access-Control-Allow-Origin\", allowOrigin);\n    }\n    if (opts.credentials) {\n      set(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n    if (opts.exposeHeaders?.length) {\n      set(\"Access-Control-Expose-Headers\", opts.exposeHeaders.join(\",\"));\n    }\n    if (c.req.method === \"OPTIONS\") {\n      if (opts.origin !== \"*\") {\n        set(\"Vary\", \"Origin\");\n      }\n      if (opts.maxAge != null) {\n        set(\"Access-Control-Max-Age\", opts.maxAge.toString());\n      }\n      const allowMethods = await findAllowMethods(c.req.header(\"origin\") || \"\", c);\n      if (allowMethods.length) {\n        set(\"Access-Control-Allow-Methods\", allowMethods.join(\",\"));\n      }\n      let headers = opts.allowHeaders;\n      if (!headers?.length) {\n        const requestHeaders = c.req.header(\"Access-Control-Request-Headers\");\n        if (requestHeaders) {\n          headers = requestHeaders.split(/\\s*,\\s*/);\n        }\n      }\n      if (headers?.length) {\n        set(\"Access-Control-Allow-Headers\", headers.join(\",\"));\n        c.res.headers.append(\"Vary\", \"Access-Control-Request-Headers\");\n      }\n      c.res.headers.delete(\"Content-Length\");\n      c.res.headers.delete(\"Content-Type\");\n      return new Response(null, {\n        headers: c.res.headers,\n        status: 204,\n        statusText: \"No Content\"\n      });\n    }\n    await next();\n    if (opts.origin !== \"*\") {\n      c.header(\"Vary\", \"Origin\", { append: true });\n    }\n  };\n};\nexport {\n  cors\n};\n", "import type { Bindings, MCPRequest, MCPResponse } from './types';\nimport { tools, getToolByName } from './tools';\nimport {\n  createMCPResponse,\n  createMethodNotFound,\n  createInvalidParams,\n  createInternalError,\n  createJsonResult,\n} from '../utils/responses';\nimport { htmlToPdf, urlToPdf, markdownToPdf } from '../handlers/browser-pdf';\nimport { htmlToScreenshot, urlToScreenshot } from '../handlers/browser-screenshot';\n\nexport async function handleMCPRequest(\n  request: MCPRequest,\n  env: Bindings\n): Promise<MCPResponse> {\n  const { id, method, params } = request;\n\n  try {\n    // Handle MCP protocol methods\n    switch (method) {\n      case 'initialize':\n        return createMCPResponse(id, {\n          content: [\n            {\n              type: 'text',\n              text: JSON.stringify({\n                protocolVersion: '2024-11-05',\n                serverInfo: {\n                  name: 'file-converter-mcp',\n                  version: '1.0.0',\n                },\n                capabilities: {\n                  tools: {},\n                },\n              }),\n            },\n          ],\n        });\n\n      case 'tools/list':\n        return createMCPResponse(id, {\n          content: [\n            {\n              type: 'text',\n              text: JSON.stringify({ tools }),\n            },\n          ],\n        });\n\n      case 'tools/call': {\n        const toolName = params?.name;\n        const args = params?.arguments || {};\n\n        if (!toolName) {\n          return createInvalidParams(id, 'Tool name is required');\n        }\n\n        const tool = getToolByName(toolName);\n        if (!tool) {\n          return createMethodNotFound(id);\n        }\n\n        // Dispatch to tool handlers\n        try {\n          let result: any;\n\n          switch (toolName) {\n            // Phase 2: Browser Rendering PDFs\n            case 'html_to_pdf':\n              result = await htmlToPdf(args, env);\n              break;\n\n            case 'url_to_pdf':\n              result = await urlToPdf(args, env);\n              break;\n\n            case 'markdown_to_pdf':\n              result = await markdownToPdf(args, env);\n              break;\n\n            // Phase 3: Browser Rendering Screenshots\n            case 'html_to_screenshot':\n              result = await htmlToScreenshot(args, env);\n              break;\n\n            case 'url_to_screenshot':\n              result = await urlToScreenshot(args, env);\n              break;\n\n            // Future phases will add more tools here\n            default:\n              return createInternalError(\n                id,\n                `Tool \"${toolName}\" not yet implemented`\n              );\n          }\n\n          return createMCPResponse(id, {\n            content: [\n              {\n                type: 'text',\n                text: JSON.stringify(result),\n              },\n            ],\n          });\n        } catch (error: any) {\n          console.error(`Tool execution error (${toolName}):`, error);\n          return createInternalError(id, error.message);\n        }\n      }\n\n      default:\n        return createMethodNotFound(id);\n    }\n  } catch (error: any) {\n    console.error('MCP request error:', error);\n    return createInternalError(id, error.message);\n  }\n}\n", "import type { MCPTool } from './types';\n\n// Tool Registry\nexport const tools: MCPTool[] = [\n  // Phase 2: Browser Rendering PDFs (3 tools)\n  {\n    name: 'html_to_pdf',\n    description: 'Convert HTML/CSS to PDF document using Cloudflare Browser Rendering. Returns publicly accessible URL to generated PDF. Supports custom page formats, margins, and landscape orientation.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        html: {\n          type: 'string',\n          description: 'HTML content to convert (must be valid HTML). Can include inline CSS styles or <style> tags.',\n        },\n        format: {\n          type: 'string',\n          enum: ['A4', 'Letter', 'Legal'],\n          description: 'Paper size format. Default: A4 (210mm \u00D7 297mm). Letter: 8.5in \u00D7 11in. Legal: 8.5in \u00D7 14in.',\n        },\n        landscape: {\n          type: 'boolean',\n          description: 'Enable landscape orientation (width > height). Default: false (portrait).',\n        },\n        margin: {\n          type: 'object',\n          properties: {\n            top: { type: 'string', description: 'Top margin (e.g., \"1cm\", \"20px\", \"0.5in\")' },\n            right: { type: 'string', description: 'Right margin' },\n            bottom: { type: 'string', description: 'Bottom margin' },\n            left: { type: 'string', description: 'Left margin' },\n          },\n          description: 'Page margins. Default: 1cm all sides. Supports units: cm, mm, in, px.',\n        },\n      },\n      required: ['html'],\n    },\n  },\n  {\n    name: 'url_to_pdf',\n    description: 'Convert any publicly accessible webpage to PDF by URL using Cloudflare Browser Rendering. Captures the full rendered page including CSS, JavaScript, and images. Returns publicly accessible URL to generated PDF.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        url: {\n          type: 'string',\n          description: 'URL of webpage to convert (must be publicly accessible via HTTP/HTTPS). Example: https://example.com',\n        },\n        format: {\n          type: 'string',\n          enum: ['A4', 'Letter', 'Legal'],\n          description: 'Paper size format. Default: A4.',\n        },\n        landscape: {\n          type: 'boolean',\n          description: 'Enable landscape orientation. Default: false.',\n        },\n        margin: {\n          type: 'object',\n          properties: {\n            top: { type: 'string', description: 'Top margin (e.g., \"1cm\")' },\n            right: { type: 'string', description: 'Right margin' },\n            bottom: { type: 'string', description: 'Bottom margin' },\n            left: { type: 'string', description: 'Left margin' },\n          },\n          description: 'Page margins. Default: 1cm all sides.',\n        },\n      },\n      required: ['url'],\n    },\n  },\n  {\n    name: 'markdown_to_pdf',\n    description: 'Convert markdown to beautifully styled PDF document using Cloudflare Browser Rendering. Automatically applies professional typography, syntax highlighting for code blocks, and table styling. Returns publicly accessible URL to generated PDF.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        markdown: {\n          type: 'string',\n          description: 'Markdown content to convert. Supports full CommonMark syntax: headings, lists, code blocks, tables, blockquotes, links, images.',\n        },\n        format: {\n          type: 'string',\n          enum: ['A4', 'Letter', 'Legal'],\n          description: 'Paper size format. Default: A4.',\n        },\n        landscape: {\n          type: 'boolean',\n          description: 'Enable landscape orientation. Default: false.',\n        },\n        margin: {\n          type: 'object',\n          properties: {\n            top: { type: 'string', description: 'Top margin' },\n            right: { type: 'string', description: 'Right margin' },\n            bottom: { type: 'string', description: 'Bottom margin' },\n            left: { type: 'string', description: 'Left margin' },\n          },\n          description: 'Page margins. Default: 1cm all sides.',\n        },\n        css: {\n          type: 'string',\n          description: 'Optional custom CSS to append to default styles. Can override fonts, colors, spacing, etc.',\n        },\n      },\n      required: ['markdown'],\n    },\n  },\n\n  // Phase 3: Browser Rendering Screenshots (2 tools)\n  {\n    name: 'html_to_screenshot',\n    description: 'Convert HTML/CSS to screenshot image (PNG, JPEG, or WebP) using Cloudflare Browser Rendering. Captures full page or custom viewport. Returns publicly accessible URL to generated image. Ideal for visual previews, thumbnails, or capturing dynamically generated content.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        html: {\n          type: 'string',\n          description: 'HTML content to capture (must be valid HTML). Can include inline CSS styles or <style> tags.',\n        },\n        format: {\n          type: 'string',\n          enum: ['png', 'jpeg', 'webp'],\n          description: 'Image format. Default: png. PNG supports transparency, JPEG is smaller, WebP is most efficient.',\n        },\n        fullPage: {\n          type: 'boolean',\n          description: 'Capture full page height (true) or single viewport (false). Default: true.',\n        },\n        viewport: {\n          type: 'object',\n          properties: {\n            width: { type: 'number', description: 'Viewport width in pixels. Default: 1280' },\n            height: { type: 'number', description: 'Viewport height in pixels. Default: 720' },\n          },\n          description: 'Custom viewport size for screenshot. Uses 2x device scale for sharp images.',\n        },\n      },\n      required: ['html'],\n    },\n  },\n  {\n    name: 'url_to_screenshot',\n    description: 'Capture screenshot of any publicly accessible webpage by URL using Cloudflare Browser Rendering. Waits for page load and network idle. Supports full page capture or custom viewport. Returns publicly accessible URL to generated image.',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        url: {\n          type: 'string',\n          description: 'URL of webpage to capture (must be publicly accessible via HTTP/HTTPS). Example: https://example.com',\n        },\n        format: {\n          type: 'string',\n          enum: ['png', 'jpeg', 'webp'],\n          description: 'Image format. Default: png.',\n        },\n        fullPage: {\n          type: 'boolean',\n          description: 'Capture full page height (true) or single viewport (false). Default: true.',\n        },\n        viewport: {\n          type: 'object',\n          properties: {\n            width: { type: 'number', description: 'Viewport width in pixels. Default: 1280' },\n            height: { type: 'number', description: 'Viewport height in pixels. Default: 720' },\n          },\n          description: 'Custom viewport size for screenshot.',\n        },\n      },\n      required: ['url'],\n    },\n  },\n\n  // Phase 4: Workers AI Markdown\n  // - document_to_markdown\n\n  // Phase 5: PDF.co Data Extraction\n  // - excel_to_json\n\n  // Phase 6: PDF.co Office Conversions\n  // - office_to_pdf\n\n  // Phase 7: PDF.co PDF Operations\n  // - merge_pdfs\n  // - split_pdf\n  // - extract_pdf_tables\n\n  // Phase 8: Browser Rendering Images\n  // - pdf_to_images\n  // - document_to_images\n];\n\n// Total: 13 tools\nexport const getToolByName = (name: string): MCPTool | undefined => {\n  return tools.find((tool) => tool.name === name);\n};\n", "import type { MCPResponse, MCPError, MCPToolResult } from '../mcp/types';\n\n// JSON-RPC Error Codes\nexport const ErrorCodes = {\n  PARSE_ERROR: -32700,\n  INVALID_REQUEST: -32600,\n  METHOD_NOT_FOUND: -32601,\n  INVALID_PARAMS: -32602,\n  INTERNAL_ERROR: -32603,\n} as const;\n\n// Create successful MCP response\nexport function createMCPResponse(\n  id: number | string,\n  result: MCPToolResult\n): MCPResponse {\n  return {\n    jsonrpc: '2.0',\n    id,\n    result,\n  };\n}\n\n// Create error response\nexport function createMCPError(\n  id: number | string,\n  code: number,\n  message: string,\n  data?: any\n): MCPResponse {\n  return {\n    jsonrpc: '2.0',\n    id,\n    error: {\n      code,\n      message,\n      data,\n    },\n  };\n}\n\n// Specific error creators\nexport function createParseError(id: number | string = 0): MCPResponse {\n  return createMCPError(id, ErrorCodes.PARSE_ERROR, 'Parse error');\n}\n\nexport function createInvalidRequest(id: number | string = 0): MCPResponse {\n  return createMCPError(id, ErrorCodes.INVALID_REQUEST, 'Invalid request');\n}\n\nexport function createMethodNotFound(id: number | string): MCPResponse {\n  return createMCPError(id, ErrorCodes.METHOD_NOT_FOUND, 'Method not found');\n}\n\nexport function createInvalidParams(id: number | string, message?: string): MCPResponse {\n  return createMCPError(\n    id,\n    ErrorCodes.INVALID_PARAMS,\n    message || 'Invalid params'\n  );\n}\n\nexport function createInternalError(id: number | string, message?: string): MCPResponse {\n  return createMCPError(\n    id,\n    ErrorCodes.INTERNAL_ERROR,\n    message || 'Internal error'\n  );\n}\n\n// Create tool result with text content\nexport function createTextResult(text: string, isError = false): MCPToolResult {\n  return {\n    content: [\n      {\n        type: 'text',\n        text,\n      },\n    ],\n    isError,\n  };\n}\n\n// Create tool result from object (JSON stringified)\nexport function createJsonResult(data: any, isError = false): MCPToolResult {\n  return createTextResult(JSON.stringify(data, null, 2), isError);\n}\n", "import { marked } from 'marked';\nimport type { Bindings } from '../mcp/types';\nimport { launchBrowser, closeBrowser, generatePdfFromHtml, generatePdfFromUrl } from '../lib/browser-client';\nimport { uploadPdfToR2 } from '../lib/r2-storage';\n\n// Type definitions for handler arguments\nexport interface HtmlToPdfArgs {\n  html: string;\n  format?: 'A4' | 'Letter' | 'Legal';\n  landscape?: boolean;\n  margin?: {\n    top?: string;\n    right?: string;\n    bottom?: string;\n    left?: string;\n  };\n}\n\nexport interface UrlToPdfArgs {\n  url: string;\n  format?: 'A4' | 'Letter' | 'Legal';\n  landscape?: boolean;\n  margin?: {\n    top?: string;\n    right?: string;\n    bottom?: string;\n    left?: string;\n  };\n}\n\nexport interface MarkdownToPdfArgs {\n  markdown: string;\n  format?: 'A4' | 'Letter' | 'Legal';\n  landscape?: boolean;\n  margin?: {\n    top?: string;\n    right?: string;\n    bottom?: string;\n    left?: string;\n  };\n  css?: string;\n}\n\n/**\n * Convert HTML/CSS to PDF\n * @param args - HTML content and PDF options\n * @param env - Worker bindings\n * @returns Public URL to generated PDF\n */\nexport async function htmlToPdf(args: HtmlToPdfArgs, env: Bindings): Promise<{ pdfUrl: string }> {\n  const { html, format = 'A4', landscape = false, margin } = args;\n\n  // Validate HTML is not empty\n  if (!html || html.trim().length === 0) {\n    throw new Error('HTML content cannot be empty');\n  }\n\n  const browser = await launchBrowser(env.BROWSER);\n\n  try {\n    // Generate PDF with specified options\n    const pdfBuffer = await generatePdfFromHtml(browser, html, {\n      format,\n      landscape,\n      margin: margin || {\n        top: '1cm',\n        right: '1cm',\n        bottom: '1cm',\n        left: '1cm',\n      },\n    });\n\n    // Upload to R2 (detect dev mode by checking bucket name in error or via ENV)\n    const isDev = true; // For now, set to true in dev mode\n    const { publicUrl } = await uploadPdfToR2(env.R2_BUCKET, pdfBuffer, 'converted/html', isDev);\n\n    return { pdfUrl: publicUrl };\n  } catch (error: any) {\n    if (error.message.includes('timeout')) {\n      throw new Error('PDF generation timed out. Try simpler HTML or increase timeout.');\n    }\n    throw new Error(`Failed to generate PDF from HTML: ${error.message}`);\n  } finally {\n    await closeBrowser(browser);\n  }\n}\n\n/**\n * Convert webpage to PDF by URL\n * @param args - URL and PDF options\n * @param env - Worker bindings\n * @returns Public URL to generated PDF\n */\nexport async function urlToPdf(args: UrlToPdfArgs, env: Bindings): Promise<{ pdfUrl: string }> {\n  const { url, format = 'A4', landscape = false, margin } = args;\n\n  // Validate URL format\n  try {\n    new URL(url);\n  } catch {\n    throw new Error('Invalid URL provided. Must be a valid HTTP/HTTPS URL.');\n  }\n\n  const browser = await launchBrowser(env.BROWSER);\n\n  try {\n    // Generate PDF from URL\n    const pdfBuffer = await generatePdfFromUrl(browser, url, {\n      format,\n      landscape,\n      margin: margin || {\n        top: '1cm',\n        right: '1cm',\n        bottom: '1cm',\n        left: '1cm',\n      },\n    });\n\n    // Upload to R2\n    const isDev = true; // For now, set to true in dev mode\n    const { publicUrl } = await uploadPdfToR2(env.R2_BUCKET, pdfBuffer, 'converted/url', isDev);\n\n    return { pdfUrl: publicUrl };\n  } catch (error: any) {\n    if (error.message.includes('timeout')) {\n      throw new Error('PDF generation timed out. The webpage may be too complex or slow to load.');\n    }\n    if (error.message.includes('net::')) {\n      throw new Error('Failed to load URL. Check that the URL is publicly accessible.');\n    }\n    throw new Error(`Failed to generate PDF from URL: ${error.message}`);\n  } finally {\n    await closeBrowser(browser);\n  }\n}\n\n/**\n * Convert markdown to styled PDF\n * @param args - Markdown content and PDF options\n * @param env - Worker bindings\n * @returns Public URL to generated PDF\n */\nexport async function markdownToPdf(args: MarkdownToPdfArgs, env: Bindings): Promise<{ pdfUrl: string }> {\n  const { markdown, format = 'A4', landscape = false, margin, css = '' } = args;\n\n  // Validate markdown is not empty\n  if (!markdown || markdown.trim().length === 0) {\n    throw new Error('Markdown content cannot be empty');\n  }\n\n  // Convert markdown to HTML\n  const contentHtml = await marked(markdown);\n\n  // Wrap in styled template\n  const styledHtml = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Markdown PDF</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\n      line-height: 1.6;\n      color: #333;\n      max-width: 800px;\n      margin: 0 auto;\n      padding: 2rem;\n      background: white;\n    }\n\n    h1, h2, h3, h4, h5, h6 {\n      color: #111;\n      margin-top: 1.5rem;\n      margin-bottom: 0.75rem;\n      font-weight: 600;\n      line-height: 1.25;\n    }\n\n    h1 {\n      font-size: 2.5rem;\n      border-bottom: 2px solid #eee;\n      padding-bottom: 0.5rem;\n    }\n\n    h2 {\n      font-size: 2rem;\n      border-bottom: 1px solid #eee;\n      padding-bottom: 0.5rem;\n    }\n\n    h3 { font-size: 1.5rem; }\n    h4 { font-size: 1.25rem; }\n    h5 { font-size: 1.1rem; }\n    h6 { font-size: 1rem; }\n\n    p {\n      margin-bottom: 1rem;\n    }\n\n    a {\n      color: #0066cc;\n      text-decoration: none;\n    }\n\n    a:hover {\n      text-decoration: underline;\n    }\n\n    ul, ol {\n      margin-bottom: 1rem;\n      padding-left: 2rem;\n    }\n\n    li {\n      margin-bottom: 0.5rem;\n    }\n\n    blockquote {\n      border-left: 4px solid #ddd;\n      margin-left: 0;\n      margin-bottom: 1rem;\n      padding-left: 1rem;\n      color: #666;\n      font-style: italic;\n    }\n\n    code {\n      background: #f4f4f4;\n      padding: 0.2rem 0.4rem;\n      border-radius: 3px;\n      font-family: 'Monaco', 'Menlo', 'Courier New', monospace;\n      font-size: 0.9em;\n      color: #d73a49;\n    }\n\n    pre {\n      background: #f6f8fa;\n      border: 1px solid #e1e4e8;\n      border-radius: 6px;\n      padding: 1rem;\n      margin-bottom: 1rem;\n      overflow-x: auto;\n      line-height: 1.45;\n    }\n\n    pre code {\n      background: none;\n      padding: 0;\n      border-radius: 0;\n      color: #24292e;\n      font-size: 0.85rem;\n    }\n\n    table {\n      border-collapse: collapse;\n      width: 100%;\n      margin-bottom: 1rem;\n      border: 1px solid #ddd;\n    }\n\n    th, td {\n      border: 1px solid #ddd;\n      padding: 0.75rem;\n      text-align: left;\n    }\n\n    th {\n      background: #f6f8fa;\n      font-weight: 600;\n    }\n\n    tr:nth-child(even) {\n      background: #f9f9f9;\n    }\n\n    img {\n      max-width: 100%;\n      height: auto;\n      margin-bottom: 1rem;\n    }\n\n    hr {\n      border: none;\n      border-top: 2px solid #eee;\n      margin: 2rem 0;\n    }\n\n    /* Custom CSS from user */\n    ${css}\n  </style>\n</head>\n<body>\n${contentHtml}\n</body>\n</html>\n`;\n\n  const browser = await launchBrowser(env.BROWSER);\n\n  try {\n    // Generate PDF with styled HTML\n    const pdfBuffer = await generatePdfFromHtml(browser, styledHtml, {\n      format,\n      landscape,\n      margin: margin || {\n        top: '1cm',\n        right: '1cm',\n        bottom: '1cm',\n        left: '1cm',\n      },\n    });\n\n    // Upload to R2\n    const isDev = true; // For now, set to true in dev mode\n    const { publicUrl } = await uploadPdfToR2(env.R2_BUCKET, pdfBuffer, 'converted/markdown', isDev);\n\n    return { pdfUrl: publicUrl };\n  } catch (error: any) {\n    if (error.message.includes('timeout')) {\n      throw new Error('PDF generation timed out. Try simpler markdown content.');\n    }\n    throw new Error(`Failed to generate PDF from markdown: ${error.message}`);\n  } finally {\n    await closeBrowser(browser);\n  }\n}\n", "import type { MarkedOptions } from './MarkedOptions.ts';\n\n/**\n * Gets the original marked default options.\n */\nexport function _getDefaults<ParserOutput = string, RendererOutput = string>(): MarkedOptions<ParserOutput, RendererOutput> {\n  return {\n    async: false,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    hooks: null,\n    pedantic: false,\n    renderer: null,\n    silent: false,\n    tokenizer: null,\n    walkTokens: null,\n  };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport let _defaults: MarkedOptions<any, any> = _getDefaults();\n\nexport function changeDefaults<ParserOutput = string, RendererOutput = string>(newDefaults: MarkedOptions<ParserOutput, RendererOutput>) {\n  _defaults = newDefaults;\n}\n", "const noopTest = { exec: () => null } as unknown as RegExp;\n\nfunction edit(regex: string | RegExp, opt = '') {\n  let source = typeof regex === 'string' ? regex : regex.source;\n  const obj = {\n    replace: (name: string | RegExp, val: string | RegExp) => {\n      let valSource = typeof val === 'string' ? val : val.source;\n      valSource = valSource.replace(other.caret, '$1');\n      source = source.replace(name, valSource);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(source, opt);\n    },\n  };\n  return obj;\n}\n\nexport const other = {\n  codeRemoveIndent: /^(?: {1,4}| {0,3}\\t)/gm,\n  outputLinkReplace: /\\\\([\\[\\]])/g,\n  indentCodeCompensation: /^(\\s+)(?:```)/,\n  beginningSpace: /^\\s+/,\n  endingHash: /#$/,\n  startingSpaceChar: /^ /,\n  endingSpaceChar: / $/,\n  nonSpaceChar: /[^ ]/,\n  newLineCharGlobal: /\\n/g,\n  tabCharGlobal: /\\t/g,\n  multipleSpaceGlobal: /\\s+/g,\n  blankLine: /^[ \\t]*$/,\n  doubleBlankLine: /\\n[ \\t]*\\n[ \\t]*$/,\n  blockquoteStart: /^ {0,3}>/,\n  blockquoteSetextReplace: /\\n {0,3}((?:=+|-+) *)(?=\\n|$)/g,\n  blockquoteSetextReplace2: /^ {0,3}>[ \\t]?/gm,\n  listReplaceTabs: /^\\t+/,\n  listReplaceNesting: /^ {1,4}(?=( {4})*[^ ])/g,\n  listIsTask: /^\\[[ xX]\\] /,\n  listReplaceTask: /^\\[[ xX]\\] +/,\n  anyLine: /\\n.*\\n/,\n  hrefBrackets: /^<(.*)>$/,\n  tableDelimiter: /[:|]/,\n  tableAlignChars: /^\\||\\| *$/g,\n  tableRowBlankLine: /\\n[ \\t]*$/,\n  tableAlignRight: /^ *-+: *$/,\n  tableAlignCenter: /^ *:-+: *$/,\n  tableAlignLeft: /^ *:-+ *$/,\n  startATag: /^<a /i,\n  endATag: /^<\\/a>/i,\n  startPreScriptTag: /^<(pre|code|kbd|script)(\\s|>)/i,\n  endPreScriptTag: /^<\\/(pre|code|kbd|script)(\\s|>)/i,\n  startAngleBracket: /^</,\n  endAngleBracket: />$/,\n  pedanticHrefTitle: /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/,\n  unicodeAlphaNumeric: /[\\p{L}\\p{N}]/u,\n  escapeTest: /[&<>\"']/,\n  escapeReplace: /[&<>\"']/g,\n  escapeTestNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/,\n  escapeReplaceNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/g,\n  unescapeTest: /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig,\n  caret: /(^|[^\\[])\\^/g,\n  percentDecode: /%25/g,\n  findPipe: /\\|/g,\n  splitPipe: / \\|/,\n  slashPipe: /\\\\\\|/g,\n  carriageReturn: /\\r\\n|\\r/g,\n  spaceLine: /^ +$/gm,\n  notSpaceStart: /^\\S*/,\n  endingNewline: /\\n$/,\n  listItemRegex: (bull: string) => new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`),\n  nextBulletRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`),\n  hrRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`),\n  fencesBeginRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`),\n  headingBeginRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`),\n  htmlBeginRegex: (indent: number) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}<(?:[a-z].*>|!--)`, 'i'),\n};\n\n/**\n * Block-Level Grammar\n */\n\nconst newline = /^(?:[ \\t]*(?:\\n|$))+/;\nconst blockCode = /^((?: {4}| {0,3}\\t)[^\\n]+(?:\\n(?:[ \\t]*(?:\\n|$))*)?)+/;\nconst fences = /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/;\nconst hr = /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/;\nconst heading = /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/;\nconst bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nconst lheadingCore = /^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\\n(?!\\s*?\\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/;\nconst lheading = edit(lheadingCore)\n  .replace(/bull/g, bullet) // lists can interrupt\n  .replace(/blockCode/g, /(?: {4}| {0,3}\\t)/) // indented code blocks can interrupt\n  .replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/) // fenced code blocks can interrupt\n  .replace(/blockquote/g, / {0,3}>/) // blockquote can interrupt\n  .replace(/heading/g, / {0,3}#{1,6}/) // ATX heading can interrupt\n  .replace(/html/g, / {0,3}<[^\\n>]+>\\n/) // block html can interrupt\n  .replace(/\\|table/g, '') // table not in commonmark\n  .getRegex();\nconst lheadingGfm = edit(lheadingCore)\n  .replace(/bull/g, bullet) // lists can interrupt\n  .replace(/blockCode/g, /(?: {4}| {0,3}\\t)/) // indented code blocks can interrupt\n  .replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/) // fenced code blocks can interrupt\n  .replace(/blockquote/g, / {0,3}>/) // blockquote can interrupt\n  .replace(/heading/g, / {0,3}#{1,6}/) // ATX heading can interrupt\n  .replace(/html/g, / {0,3}<[^\\n>]+>\\n/) // block html can interrupt\n  .replace(/table/g, / {0,3}\\|?(?:[:\\- ]*\\|)+[\\:\\- ]*\\n/) // table can interrupt\n  .getRegex();\nconst _paragraph = /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/;\nconst blockText = /^[^\\n]+/;\nconst _blockLabel = /(?!\\s*\\])(?:\\\\[\\s\\S]|[^\\[\\]\\\\])+/;\nconst def = edit(/^ {0,3}\\[(label)\\]: *(?:\\n[ \\t]*)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n[ \\t]*)?| *\\n[ \\t]*)(title))? *(?:\\n+|$)/)\n  .replace('label', _blockLabel)\n  .replace('title', /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/)\n  .getRegex();\n\nconst list = edit(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/)\n  .replace(/bull/g, bullet)\n  .getRegex();\n\nconst _tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title'\n  + '|tr|track|ul';\nconst _comment = /<!--(?:-?>|[\\s\\S]*?(?:-->|$))/;\nconst html = edit(\n  '^ {0,3}(?:' // optional indentation\n+ '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n+ '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n+ '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n+ '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n+ '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n+ '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (6)\n+ '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (7) open tag\n+ '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (7) closing tag\n+ ')', 'i')\n  .replace('comment', _comment)\n  .replace('tag', _tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nconst paragraph = edit(_paragraph)\n  .replace('hr', hr)\n  .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n  .replace('|lheading', '') // setext headings don't interrupt commonmark paragraphs\n  .replace('|table', '')\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nconst blockquote = edit(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/)\n  .replace('paragraph', paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nconst blockNormal = {\n  blockquote,\n  code: blockCode,\n  def,\n  fences,\n  heading,\n  hr,\n  html,\n  lheading,\n  list,\n  newline,\n  paragraph,\n  table: noopTest,\n  text: blockText,\n};\n\ntype BlockKeys = keyof typeof blockNormal;\n\n/**\n * GFM Block Grammar\n */\n\nconst gfmTable = edit(\n  '^ *([^\\\\n ].*)\\\\n' // Header\n+ ' {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)' // Align\n+ '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)') // Cells\n  .replace('hr', hr)\n  .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', '(?: {4}| {0,3}\\t)[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', _tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\nconst blockGfm: Record<BlockKeys, RegExp> = {\n  ...blockNormal,\n  lheading: lheadingGfm,\n  table: gfmTable,\n  paragraph: edit(_paragraph)\n    .replace('hr', hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('|lheading', '') // setext headings don't interrupt commonmark paragraphs\n    .replace('table', gfmTable) // interrupt paragraphs with table\n    .replace('blockquote', ' {0,3}>')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n    .getRegex(),\n};\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nconst blockPedantic: Record<BlockKeys, RegExp> = {\n  ...blockNormal,\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', _comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  paragraph: edit(_paragraph)\n    .replace('hr', hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', lheading)\n    .replace('|table', '')\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .replace('|tag', '')\n    .getRegex(),\n};\n\n/**\n * Inline-Level Grammar\n */\n\nconst escape = /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/;\nconst inlineCode = /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/;\nconst br = /^( {2,}|\\\\)\\n(?!\\s*$)/;\nconst inlineText = /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/;\n\n// list of unicode punctuation marks, plus any missing characters from CommonMark spec\nconst _punctuation = /[\\p{P}\\p{S}]/u;\nconst _punctuationOrSpace = /[\\s\\p{P}\\p{S}]/u;\nconst _notPunctuationOrSpace = /[^\\s\\p{P}\\p{S}]/u;\nconst punctuation = edit(/^((?![*_])punctSpace)/, 'u')\n  .replace(/punctSpace/g, _punctuationOrSpace).getRegex();\n\n// GFM allows ~ inside strong and em for strikethrough\nconst _punctuationGfmStrongEm = /(?!~)[\\p{P}\\p{S}]/u;\nconst _punctuationOrSpaceGfmStrongEm = /(?!~)[\\s\\p{P}\\p{S}]/u;\nconst _notPunctuationOrSpaceGfmStrongEm = /(?:[^\\s\\p{P}\\p{S}]|~)/u;\n\n// sequences em should skip over [title](link), `code`, <html>\nconst blockSkip = edit(/link|code|html/, 'g')\n  .replace('link', /\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)/)\n  .replace('code', /(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)/)\n  .replace('html', /<(?! )[^<>]*?>/)\n  .getRegex();\n\nconst emStrongLDelimCore = /^(?:\\*+(?:((?!\\*)punct)|[^\\s*]))|^_+(?:((?!_)punct)|([^\\s_]))/;\n\nconst emStrongLDelim = edit(emStrongLDelimCore, 'u')\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst emStrongLDelimGfm = edit(emStrongLDelimCore, 'u')\n  .replace(/punct/g, _punctuationGfmStrongEm)\n  .getRegex();\n\nconst emStrongRDelimAstCore =\n  '^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)' // Skip orphan inside strong\n+ '|[^*]+(?=[^*])' // Consume to delim\n+ '|(?!\\\\*)punct(\\\\*+)(?=[\\\\s]|$)' // (1) #*** can only be a Right Delimiter\n+ '|notPunctSpace(\\\\*+)(?!\\\\*)(?=punctSpace|$)' // (2) a***#, a*** can only be a Right Delimiter\n+ '|(?!\\\\*)punctSpace(\\\\*+)(?=notPunctSpace)' // (3) #***a, ***a can only be Left Delimiter\n+ '|[\\\\s](\\\\*+)(?!\\\\*)(?=punct)' // (4) ***# can only be Left Delimiter\n+ '|(?!\\\\*)punct(\\\\*+)(?!\\\\*)(?=punct)' // (5) #***# can be either Left or Right Delimiter\n+ '|notPunctSpace(\\\\*+)(?=notPunctSpace)'; // (6) a***a can be either Left or Right Delimiter\n\nconst emStrongRDelimAst = edit(emStrongRDelimAstCore, 'gu')\n  .replace(/notPunctSpace/g, _notPunctuationOrSpace)\n  .replace(/punctSpace/g, _punctuationOrSpace)\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst emStrongRDelimAstGfm = edit(emStrongRDelimAstCore, 'gu')\n  .replace(/notPunctSpace/g, _notPunctuationOrSpaceGfmStrongEm)\n  .replace(/punctSpace/g, _punctuationOrSpaceGfmStrongEm)\n  .replace(/punct/g, _punctuationGfmStrongEm)\n  .getRegex();\n\n// (6) Not allowed for _\nconst emStrongRDelimUnd = edit(\n  '^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)' // Skip orphan inside strong\n+ '|[^_]+(?=[^_])' // Consume to delim\n+ '|(?!_)punct(_+)(?=[\\\\s]|$)' // (1) #___ can only be a Right Delimiter\n+ '|notPunctSpace(_+)(?!_)(?=punctSpace|$)' // (2) a___#, a___ can only be a Right Delimiter\n+ '|(?!_)punctSpace(_+)(?=notPunctSpace)' // (3) #___a, ___a can only be Left Delimiter\n+ '|[\\\\s](_+)(?!_)(?=punct)' // (4) ___# can only be Left Delimiter\n+ '|(?!_)punct(_+)(?!_)(?=punct)', 'gu') // (5) #___# can be either Left or Right Delimiter\n  .replace(/notPunctSpace/g, _notPunctuationOrSpace)\n  .replace(/punctSpace/g, _punctuationOrSpace)\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst anyPunctuation = edit(/\\\\(punct)/, 'gu')\n  .replace(/punct/g, _punctuation)\n  .getRegex();\n\nconst autolink = edit(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/)\n  .replace('scheme', /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/)\n  .replace('email', /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/)\n  .getRegex();\n\nconst _inlineComment = edit(_comment).replace('(?:-->|$)', '-->').getRegex();\nconst tag = edit(\n  '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>') // CDATA section\n  .replace('comment', _inlineComment)\n  .replace('attribute', /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nconst _inlineLabel = /(?:\\[(?:\\\\[\\s\\S]|[^\\[\\]\\\\])*\\]|\\\\[\\s\\S]|`+[^`]*?`+(?!`)|[^\\[\\]\\\\`])*?/;\n\nconst link = edit(/^!?\\[(label)\\]\\(\\s*(href)(?:(?:[ \\t]*(?:\\n[ \\t]*)?)(title))?\\s*\\)/)\n  .replace('label', _inlineLabel)\n  .replace('href', /<(?:\\\\.|[^\\n<>\\\\])+>|[^ \\t\\n\\x00-\\x1f]*/)\n  .replace('title', /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/)\n  .getRegex();\n\nconst reflink = edit(/^!?\\[(label)\\]\\[(ref)\\]/)\n  .replace('label', _inlineLabel)\n  .replace('ref', _blockLabel)\n  .getRegex();\n\nconst nolink = edit(/^!?\\[(ref)\\](?:\\[\\])?/)\n  .replace('ref', _blockLabel)\n  .getRegex();\n\nconst reflinkSearch = edit('reflink|nolink(?!\\\\()', 'g')\n  .replace('reflink', reflink)\n  .replace('nolink', nolink)\n  .getRegex();\n\nconst _caseInsensitiveProtocol = /[hH][tT][tT][pP][sS]?|[fF][tT][pP]/;\n\n/**\n * Normal Inline Grammar\n */\n\nconst inlineNormal = {\n  _backpedal: noopTest, // only used for GFM url\n  anyPunctuation,\n  autolink,\n  blockSkip,\n  br,\n  code: inlineCode,\n  del: noopTest,\n  emStrongLDelim,\n  emStrongRDelimAst,\n  emStrongRDelimUnd,\n  escape,\n  link,\n  nolink,\n  punctuation,\n  reflink,\n  reflinkSearch,\n  tag,\n  text: inlineText,\n  url: noopTest,\n};\n\ntype InlineKeys = keyof typeof inlineNormal;\n\n/**\n * Pedantic Inline Grammar\n */\n\nconst inlinePedantic: Record<InlineKeys, RegExp> = {\n  ...inlineNormal,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', _inlineLabel)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', _inlineLabel)\n    .getRegex(),\n};\n\n/**\n * GFM Inline Grammar\n */\n\nconst inlineGfm: Record<InlineKeys, RegExp> = {\n  ...inlineNormal,\n  emStrongRDelimAst: emStrongRDelimAstGfm,\n  emStrongLDelim: emStrongLDelimGfm,\n  url: edit(/^((?:protocol):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/)\n    .replace('protocol', _caseInsensitiveProtocol)\n    .replace('email', /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/)\n    .getRegex(),\n  _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])((?:\\\\[\\s\\S]|[^\\\\])*?(?:\\\\[\\s\\S]|[^\\s~\\\\]))\\1(?=[^~]|$)/,\n  text: edit(/^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|protocol:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/)\n    .replace('protocol', _caseInsensitiveProtocol)\n    .getRegex(),\n};\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\nconst inlineBreaks: Record<InlineKeys, RegExp> = {\n  ...inlineGfm,\n  br: edit(br).replace('{2,}', '*').getRegex(),\n  text: edit(inlineGfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex(),\n};\n\n/**\n * exports\n */\n\nexport const block = {\n  normal: blockNormal,\n  gfm: blockGfm,\n  pedantic: blockPedantic,\n};\n\nexport const inline = {\n  normal: inlineNormal,\n  gfm: inlineGfm,\n  breaks: inlineBreaks,\n  pedantic: inlinePedantic,\n};\n\nexport interface Rules {\n  other: typeof other\n  block: Record<BlockKeys, RegExp>\n  inline: Record<InlineKeys, RegExp>\n}\n", "import { other } from './rules.ts';\n\n/**\n * Helpers\n */\nconst escapeReplacements: { [index: string]: string } = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\nconst getEscapeReplacement = (ch: string) => escapeReplacements[ch];\n\nexport function escape(html: string, encode?: boolean) {\n  if (encode) {\n    if (other.escapeTest.test(html)) {\n      return html.replace(other.escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (other.escapeTestNoEncode.test(html)) {\n      return html.replace(other.escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nexport function unescape(html: string) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(other.unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nexport function cleanUrl(href: string) {\n  try {\n    href = encodeURI(href).replace(other.percentDecode, '%');\n  } catch {\n    return null;\n  }\n  return href;\n}\n\nexport function splitCells(tableRow: string, count?: number) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(other.findPipe, (match, offset, str) => {\n      let escaped = false;\n      let curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(other.splitPipe);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) {\n    cells.shift();\n  }\n  if (cells.length > 0 && !cells.at(-1)?.trim()) {\n    cells.pop();\n  }\n\n  if (count) {\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) cells.push('');\n    }\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(other.slashPipe, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param str\n * @param c\n * @param invert Remove suffix of non-c chars instead. Default falsey.\n */\nexport function rtrim(str: string, c: string, invert?: boolean) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nexport function findClosingBracket(str: string, b: string) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n\n  let level = 0;\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  if (level > 0) {\n    return -2;\n  }\n\n  return -1;\n}\n", "import { _defaults } from './defaults.ts';\nimport {\n  rtrim,\n  splitCells,\n  findClosingBracket,\n} from './helpers.ts';\nimport type { Rules } from './rules.ts';\nimport type { _Lexer } from './Lexer.ts';\nimport type { Links, Tokens, Token } from './Tokens.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\n\nfunction outputLink(cap: string[], link: Pick<Tokens.Link, 'href' | 'title'>, raw: string, lexer: _Lexer, rules: Rules): Tokens.Link | Tokens.Image {\n  const href = link.href;\n  const title = link.title || null;\n  const text = cap[1].replace(rules.other.outputLinkReplace, '$1');\n\n  lexer.state.inLink = true;\n  const token: Tokens.Link | Tokens.Image = {\n    type: cap[0].charAt(0) === '!' ? 'image' : 'link',\n    raw,\n    href,\n    title,\n    text,\n    tokens: lexer.inlineTokens(text),\n  };\n  lexer.state.inLink = false;\n  return token;\n}\n\nfunction indentCodeCompensation(raw: string, text: string, rules: Rules) {\n  const matchIndentToCode = raw.match(rules.other.indentCodeCompensation);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(rules.other.beginningSpace);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nexport class _Tokenizer<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  rules!: Rules; // set by the lexer\n  lexer!: _Lexer<ParserOutput, RendererOutput>; // set by the lexer\n\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n  }\n\n  space(src: string): Tokens.Space | undefined {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0],\n      };\n    }\n  }\n\n  code(src: string): Tokens.Code | undefined {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(this.rules.other.codeRemoveIndent, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text,\n      };\n    }\n  }\n\n  fences(src: string): Tokens.Code | undefined {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '', this.rules);\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim().replace(this.rules.inline.anyPunctuation, '$1') : cap[2],\n        text,\n      };\n    }\n  }\n\n  heading(src: string): Tokens.Heading | undefined {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (this.rules.other.endingHash.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || this.rules.other.endingSpaceChar.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text),\n      };\n    }\n  }\n\n  hr(src: string): Tokens.Hr | undefined {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: rtrim(cap[0], '\\n'),\n      };\n    }\n  }\n\n  blockquote(src: string): Tokens.Blockquote | undefined {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      let lines = rtrim(cap[0], '\\n').split('\\n');\n      let raw = '';\n      let text = '';\n      const tokens: Token[] = [];\n\n      while (lines.length > 0) {\n        let inBlockquote = false;\n        const currentLines = [];\n\n        let i;\n        for (i = 0; i < lines.length; i++) {\n          // get lines up to a continuation\n          if (this.rules.other.blockquoteStart.test(lines[i])) {\n            currentLines.push(lines[i]);\n            inBlockquote = true;\n          } else if (!inBlockquote) {\n            currentLines.push(lines[i]);\n          } else {\n            break;\n          }\n        }\n        lines = lines.slice(i);\n\n        const currentRaw = currentLines.join('\\n');\n        const currentText = currentRaw\n          // precede setext continuation with 4 spaces so it isn't a setext\n          .replace(this.rules.other.blockquoteSetextReplace, '\\n    $1')\n          .replace(this.rules.other.blockquoteSetextReplace2, '');\n        raw = raw ? `${raw}\\n${currentRaw}` : currentRaw;\n        text = text ? `${text}\\n${currentText}` : currentText;\n\n        // parse blockquote lines as top level tokens\n        // merge paragraphs if this is a continuation\n        const top = this.lexer.state.top;\n        this.lexer.state.top = true;\n        this.lexer.blockTokens(currentText, tokens, true);\n        this.lexer.state.top = top;\n\n        // if there is no continuation then we are done\n        if (lines.length === 0) {\n          break;\n        }\n\n        const lastToken = tokens.at(-1);\n\n        if (lastToken?.type === 'code') {\n          // blockquote continuation cannot be preceded by a code block\n          break;\n        } else if (lastToken?.type === 'blockquote') {\n          // include continuation in nested blockquote\n          const oldToken = lastToken as Tokens.Blockquote;\n          const newText = oldToken.raw + '\\n' + lines.join('\\n');\n          const newToken = this.blockquote(newText)!;\n          tokens[tokens.length - 1] = newToken;\n\n          raw = raw.substring(0, raw.length - oldToken.raw.length) + newToken.raw;\n          text = text.substring(0, text.length - oldToken.text.length) + newToken.text;\n          break;\n        } else if (lastToken?.type === 'list') {\n          // include continuation in nested list\n          const oldToken = lastToken as Tokens.List;\n          const newText = oldToken.raw + '\\n' + lines.join('\\n');\n          const newToken = this.list(newText)!;\n          tokens[tokens.length - 1] = newToken;\n\n          raw = raw.substring(0, raw.length - lastToken.raw.length) + newToken.raw;\n          text = text.substring(0, text.length - oldToken.raw.length) + newToken.raw;\n          lines = newText.substring(tokens.at(-1)!.raw.length).split('\\n');\n          continue;\n        }\n      }\n\n      return {\n        type: 'blockquote',\n        raw,\n        tokens,\n        text,\n      };\n    }\n  }\n\n  list(src: string): Tokens.List | undefined {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list: Tokens.List = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: [],\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = this.rules.other.listItemRegex(bull);\n      let endsWithBlankLine = false;\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        let endEarly = false;\n        let raw = '';\n        let itemContents = '';\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        let line = cap[2].split('\\n', 1)[0].replace(this.rules.other.listReplaceTabs, (t: string) => ' '.repeat(3 * t.length));\n        let nextLine = src.split('\\n', 1)[0];\n        let blankLine = !line.trim();\n\n        let indent = 0;\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimStart();\n        } else if (blankLine) {\n          indent = cap[1].length + 1;\n        } else {\n          indent = cap[2].search(this.rules.other.nonSpaceChar); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        if (blankLine && this.rules.other.blankLine.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = this.rules.other.nextBulletRegex(indent);\n          const hrRegex = this.rules.other.hrRegex(indent);\n          const fencesBeginRegex = this.rules.other.fencesBeginRegex(indent);\n          const headingBeginRegex = this.rules.other.headingBeginRegex(indent);\n          const htmlBeginRegex = this.rules.other.htmlBeginRegex(indent);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            const rawLine = src.split('\\n', 1)[0];\n            let nextLineWithoutTabs;\n            nextLine = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              nextLine = nextLine.replace(this.rules.other.listReplaceNesting, '  ');\n              nextLineWithoutTabs = nextLine;\n            } else {\n              nextLineWithoutTabs = nextLine.replace(this.rules.other.tabCharGlobal, '    ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of html block\n            if (htmlBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(nextLine)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(nextLine)) {\n              break;\n            }\n\n            if (nextLineWithoutTabs.search(this.rules.other.nonSpaceChar) >= indent || !nextLine.trim()) { // Dedent if possible\n              itemContents += '\\n' + nextLineWithoutTabs.slice(indent);\n            } else {\n              // not enough indentation\n              if (blankLine) {\n                break;\n              }\n\n              // paragraph continuation unless last line was a different block level element\n              if (line.replace(this.rules.other.tabCharGlobal, '    ').search(this.rules.other.nonSpaceChar) >= 4) { // indented code block\n                break;\n              }\n              if (fencesBeginRegex.test(line)) {\n                break;\n              }\n              if (headingBeginRegex.test(line)) {\n                break;\n              }\n              if (hrRegex.test(line)) {\n                break;\n              }\n\n              itemContents += '\\n' + nextLine;\n            }\n\n            if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n            line = nextLineWithoutTabs.slice(indent);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (this.rules.other.doubleBlankLine.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        let istask: RegExpExecArray | null = null;\n        let ischecked: boolean | undefined;\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = this.rules.other.listIsTask.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(this.rules.other.listReplaceTask, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents,\n          tokens: [],\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      const lastItem = list.items.at(-1);\n      if (lastItem) {\n        lastItem.raw = lastItem.raw.trimEnd();\n        lastItem.text = lastItem.text.trimEnd();\n      } else {\n        // not a list since there were no items\n        return;\n      }\n      list.raw = list.raw.trimEnd();\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (let i = 0; i < list.items.length; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n\n        if (!list.loose) {\n          // Check if list should be loose\n          const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => this.rules.other.anyLine.test(t.raw));\n\n          list.loose = hasMultipleLineBreaks;\n        }\n      }\n\n      // Set all items to loose if list is loose\n      if (list.loose) {\n        for (let i = 0; i < list.items.length; i++) {\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src: string): Tokens.HTML | undefined {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token: Tokens.HTML = {\n        type: 'html',\n        block: true,\n        raw: cap[0],\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n        text: cap[0],\n      };\n      return token;\n    }\n  }\n\n  def(src: string): Tokens.Def | undefined {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      const tag = cap[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal, ' ');\n      const href = cap[2] ? cap[2].replace(this.rules.other.hrefBrackets, '$1').replace(this.rules.inline.anyPunctuation, '$1') : '';\n      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline.anyPunctuation, '$1') : cap[3];\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href,\n        title,\n      };\n    }\n  }\n\n  table(src: string): Tokens.Table | undefined {\n    const cap = this.rules.block.table.exec(src);\n    if (!cap) {\n      return;\n    }\n\n    if (!this.rules.other.tableDelimiter.test(cap[2])) {\n      // delimiter row must have a pipe (|) or colon (:) otherwise it is a setext heading\n      return;\n    }\n\n    const headers = splitCells(cap[1]);\n    const aligns = cap[2].replace(this.rules.other.tableAlignChars, '').split('|');\n    const rows = cap[3]?.trim() ? cap[3].replace(this.rules.other.tableRowBlankLine, '').split('\\n') : [];\n\n    const item: Tokens.Table = {\n      type: 'table',\n      raw: cap[0],\n      header: [],\n      align: [],\n      rows: [],\n    };\n\n    if (headers.length !== aligns.length) {\n      // header and align columns must be equal, rows can be different.\n      return;\n    }\n\n    for (const align of aligns) {\n      if (this.rules.other.tableAlignRight.test(align)) {\n        item.align.push('right');\n      } else if (this.rules.other.tableAlignCenter.test(align)) {\n        item.align.push('center');\n      } else if (this.rules.other.tableAlignLeft.test(align)) {\n        item.align.push('left');\n      } else {\n        item.align.push(null);\n      }\n    }\n\n    for (let i = 0; i < headers.length; i++) {\n      item.header.push({\n        text: headers[i],\n        tokens: this.lexer.inline(headers[i]),\n        header: true,\n        align: item.align[i],\n      });\n    }\n\n    for (const row of rows) {\n      item.rows.push(splitCells(row, item.header.length).map((cell, i) => {\n        return {\n          text: cell,\n          tokens: this.lexer.inline(cell),\n          header: false,\n          align: item.align[i],\n        };\n      }));\n    }\n\n    return item;\n  }\n\n  lheading(src: string): Tokens.Heading | undefined {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1]),\n      };\n    }\n  }\n\n  paragraph(src: string): Tokens.Paragraph | undefined {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text),\n      };\n    }\n  }\n\n  text(src: string): Tokens.Text | undefined {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0]),\n      };\n    }\n  }\n\n  escape(src: string): Tokens.Escape | undefined {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: cap[1],\n      };\n    }\n  }\n\n  tag(src: string): Tokens.Tag | undefined {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && this.rules.other.startATag.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && this.rules.other.endATag.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && this.rules.other.startPreScriptTag.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && this.rules.other.endPreScriptTag.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        block: false,\n        text: cap[0],\n      };\n    }\n  }\n\n  link(src: string): Tokens.Link | Tokens.Image | undefined {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && this.rules.other.startAngleBracket.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(this.rules.other.endAngleBracket.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex === -2) {\n          // more open parens than closed\n          return;\n        }\n\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = this.rules.other.pedanticHrefTitle.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (this.rules.other.startAngleBracket.test(href)) {\n        if (this.options.pedantic && !(this.rules.other.endAngleBracket.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline.anyPunctuation, '$1') : href,\n        title: title ? title.replace(this.rules.inline.anyPunctuation, '$1') : title,\n      }, cap[0], this.lexer, this.rules);\n    }\n  }\n\n  reflink(src: string, links: Links): Tokens.Link | Tokens.Image | Tokens.Text | undefined {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n      || (cap = this.rules.inline.nolink.exec(src))) {\n      const linkString = (cap[2] || cap[1]).replace(this.rules.other.multipleSpaceGlobal, ' ');\n      const link = links[linkString.toLowerCase()];\n      if (!link) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text,\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer, this.rules);\n    }\n  }\n\n  emStrong(src: string, maskedSrc: string, prevChar = ''): Tokens.Em | Tokens.Strong | undefined {\n    let match = this.rules.inline.emStrongLDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(this.rules.other.unicodeAlphaNumeric)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || !prevChar || this.rules.inline.punctuation.exec(prevChar)) {\n      // unicode Regex counts emoji as 1 char; spread into array for proper count (used multiple times below)\n      const lLength = [...match[0]].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrongRDelimAst : this.rules.inline.emStrongRDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = [...rDelim].length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n        // char length can be >1 for unicode characters;\n        const lastCharLength = [...match[0]][0].length;\n        const raw = src.slice(0, lLength + match.index + lastCharLength + rLength);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = raw.slice(1, -1);\n          return {\n            type: 'em',\n            raw,\n            text,\n            tokens: this.lexer.inlineTokens(text),\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = raw.slice(2, -2);\n        return {\n          type: 'strong',\n          raw,\n          text,\n          tokens: this.lexer.inlineTokens(text),\n        };\n      }\n    }\n  }\n\n  codespan(src: string): Tokens.Codespan | undefined {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(this.rules.other.newLineCharGlobal, ' ');\n      const hasNonSpaceChars = this.rules.other.nonSpaceChar.test(text);\n      const hasSpaceCharsOnBothEnds = this.rules.other.startingSpaceChar.test(text) && this.rules.other.endingSpaceChar.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text,\n      };\n    }\n  }\n\n  br(src: string): Tokens.Br | undefined {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0],\n      };\n    }\n  }\n\n  del(src: string): Tokens.Del | undefined {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2]),\n      };\n    }\n  }\n\n  autolink(src: string): Tokens.Link | undefined {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = cap[1];\n        href = 'mailto:' + text;\n      } else {\n        text = cap[1];\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text,\n          },\n        ],\n      };\n    }\n  }\n\n  url(src: string): Tokens.Link | undefined {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = cap[0];\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])?.[0] ?? '';\n        } while (prevCapZero !== cap[0]);\n        text = cap[0];\n        if (cap[1] === 'www.') {\n          href = 'http://' + cap[0];\n        } else {\n          href = cap[0];\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text,\n          },\n        ],\n      };\n    }\n  }\n\n  inlineText(src: string): Tokens.Text | undefined {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      const escaped = this.lexer.state.inRawBlock;\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        escaped,\n      };\n    }\n  }\n}\n", "import { _Tokenizer } from './Tokenizer.ts';\nimport { _defaults } from './defaults.ts';\nimport { other, block, inline } from './rules.ts';\nimport type { Token, TokensList, Tokens } from './Tokens.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\n\n/**\n * Block Lexer\n */\nexport class _Lexer<ParserOutput = string, RendererOutput = string> {\n  tokens: TokensList;\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  state: {\n    inLink: boolean;\n    inRawBlock: boolean;\n    top: boolean;\n  };\n\n  private tokenizer: _Tokenizer<ParserOutput, RendererOutput>;\n  private inlineQueue: { src: string, tokens: Token[] }[];\n\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    // TokenList cannot be created in one go\n    this.tokens = [] as unknown as TokensList;\n    this.tokens.links = Object.create(null);\n    this.options = options || _defaults;\n    this.options.tokenizer = this.options.tokenizer || new _Tokenizer<ParserOutput, RendererOutput>();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true,\n    };\n\n    const rules = {\n      other,\n      block: block.normal,\n      inline: inline.normal,\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline,\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex<ParserOutput = string, RendererOutput = string>(src: string, options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const lexer = new _Lexer<ParserOutput, RendererOutput>(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline<ParserOutput = string, RendererOutput = string>(src: string, options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const lexer = new _Lexer<ParserOutput, RendererOutput>(options);\n    return lexer.inlineTokens(src);\n  }\n\n  /**\n   * Preprocessing\n   */\n  lex(src: string) {\n    src = src.replace(other.carriageReturn, '\\n');\n\n    this.blockTokens(src, this.tokens);\n\n    for (let i = 0; i < this.inlineQueue.length; i++) {\n      const next = this.inlineQueue[i];\n      this.inlineTokens(next.src, next.tokens);\n    }\n    this.inlineQueue = [];\n\n    return this.tokens;\n  }\n\n  /**\n   * Lexing\n   */\n  blockTokens(src: string, tokens?: Token[], lastParagraphClipped?: boolean): Token[];\n  blockTokens(src: string, tokens?: TokensList, lastParagraphClipped?: boolean): TokensList;\n  blockTokens(src: string, tokens: Token[] = [], lastParagraphClipped = false) {\n    if (this.options.pedantic) {\n      src = src.replace(other.tabCharGlobal, '    ').replace(other.spaceLine, '');\n    }\n\n    while (src) {\n      let token: Tokens.Generic | undefined;\n\n      if (this.options.extensions?.block?.some((extTokenizer) => {\n        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          return true;\n        }\n        return false;\n      })) {\n        continue;\n      }\n\n      // newline\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (token.raw.length === 1 && lastToken !== undefined) {\n          // if there's a single \\n as a spacer, it's terminating the last line,\n          // so move it there so that we don't get unnecessary paragraph tags\n          lastToken.raw += '\\n';\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken?.type === 'paragraph' || lastToken?.type === 'text') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // fences\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // heading\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // hr\n      if (token = this.tokenizer.hr(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // blockquote\n      if (token = this.tokenizer.blockquote(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // list\n      if (token = this.tokenizer.list(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // html\n      if (token = this.tokenizer.html(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // def\n      if (token = this.tokenizer.def(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === 'paragraph' || lastToken?.type === 'text') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.raw;\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else if (!this.tokens.links[token.tag]) {\n          this.tokens.links[token.tag] = {\n            href: token.href,\n            title: token.title,\n          };\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      // prevent paragraph consuming extensions by clipping 'src' to extension start\n      let cutSrc = src;\n      if (this.options.extensions?.startBlock) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startBlock.forEach((getStartIndex) => {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) {\n            startIndex = Math.min(startIndex, tempStart);\n          }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n        const lastToken = tokens.at(-1);\n        if (lastParagraphClipped && lastToken?.type === 'paragraph') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        lastParagraphClipped = cutSrc.length !== src.length;\n        src = src.substring(token.raw.length);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === 'text') {\n          lastToken.raw += (lastToken.raw.endsWith('\\n') ? '' : '\\n') + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue.at(-1)!.src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    this.state.top = true;\n    return tokens;\n  }\n\n  inline(src: string, tokens: Token[] = []) {\n    this.inlineQueue.push({ src, tokens });\n    return tokens;\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src: string, tokens: Token[] = []): Token[] {\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match: RegExpExecArray | null = null;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index)\n              + '[' + 'a'.repeat(match[0].length - 2) + ']'\n              + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n\n    // Mask out escaped characters\n    while ((match = this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);\n    }\n\n    // Mask out other blocks\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    // Mask out blocks from extensions\n    maskedSrc = this.options.hooks?.emStrongMask?.call({ lexer: this }, maskedSrc) ?? maskedSrc;\n\n    let keepPrevChar = false;\n    let prevChar = '';\n    while (src) {\n      if (!keepPrevChar) {\n        prevChar = '';\n      }\n      keepPrevChar = false;\n\n      let token: Tokens.Generic | undefined;\n\n      // extensions\n      if (this.options.extensions?.inline?.some((extTokenizer) => {\n        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          return true;\n        }\n        return false;\n      })) {\n        continue;\n      }\n\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (token.type === 'text' && lastToken?.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // em & strong\n      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.state.inLink && (token = this.tokenizer.url(src))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      // prevent inlineText consuming extensions by clipping 'src' to extension start\n      let cutSrc = src;\n      if (this.options.extensions?.startInline) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startInline.forEach((getStartIndex) => {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) {\n            startIndex = Math.min(startIndex, tempStart);\n          }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (token = this.tokenizer.inlineText(cutSrc)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n          prevChar = token.raw.slice(-1);\n        }\n        keepPrevChar = true;\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n}\n", "import { _defaults } from './defaults.ts';\nimport {\n  cleanUrl,\n  escape,\n} from './helpers.ts';\nimport { other } from './rules.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\nimport type { Tokens } from './Tokens.ts';\nimport type { _Parser } from './Parser.ts';\n\n/**\n * Renderer\n */\nexport class _Renderer<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  parser!: _Parser<ParserOutput, RendererOutput>; // set by the parser\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n  }\n\n  space(token: Tokens.Space): RendererOutput {\n    return '' as RendererOutput;\n  }\n\n  code({ text, lang, escaped }: Tokens.Code): RendererOutput {\n    const langString = (lang || '').match(other.notSpaceStart)?.[0];\n\n    const code = text.replace(other.endingNewline, '') + '\\n';\n\n    if (!langString) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>\\n' as RendererOutput;\n    }\n\n    return '<pre><code class=\"language-'\n      + escape(langString)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n' as RendererOutput;\n  }\n\n  blockquote({ tokens }: Tokens.Blockquote): RendererOutput {\n    const body = this.parser.parse(tokens);\n    return `<blockquote>\\n${body}</blockquote>\\n` as RendererOutput;\n  }\n\n  html({ text }: Tokens.HTML | Tokens.Tag): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  def(token: Tokens.Def): RendererOutput {\n    return '' as RendererOutput;\n  }\n\n  heading({ tokens, depth }: Tokens.Heading): RendererOutput {\n    return `<h${depth}>${this.parser.parseInline(tokens)}</h${depth}>\\n` as RendererOutput;\n  }\n\n  hr(token: Tokens.Hr): RendererOutput {\n    return '<hr>\\n' as RendererOutput;\n  }\n\n  list(token: Tokens.List): RendererOutput {\n    const ordered = token.ordered;\n    const start = token.start;\n\n    let body = '';\n    for (let j = 0; j < token.items.length; j++) {\n      const item = token.items[j];\n      body += this.listitem(item);\n    }\n\n    const type = ordered ? 'ol' : 'ul';\n    const startAttr = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startAttr + '>\\n' + body + '</' + type + '>\\n' as RendererOutput;\n  }\n\n  listitem(item: Tokens.ListItem): RendererOutput {\n    let itemBody = '';\n    if (item.task) {\n      const checkbox = this.checkbox({ checked: !!item.checked });\n      if (item.loose) {\n        if (item.tokens[0]?.type === 'paragraph') {\n          item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n          if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n            item.tokens[0].tokens[0].text = checkbox + ' ' + escape(item.tokens[0].tokens[0].text);\n            item.tokens[0].tokens[0].escaped = true;\n          }\n        } else {\n          item.tokens.unshift({\n            type: 'text',\n            raw: checkbox + ' ',\n            text: checkbox + ' ',\n            escaped: true,\n          });\n        }\n      } else {\n        itemBody += checkbox + ' ';\n      }\n    }\n\n    itemBody += this.parser.parse(item.tokens, !!item.loose);\n\n    return `<li>${itemBody}</li>\\n` as RendererOutput;\n  }\n\n  checkbox({ checked }: Tokens.Checkbox): RendererOutput {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\">' as RendererOutput;\n  }\n\n  paragraph({ tokens }: Tokens.Paragraph): RendererOutput {\n    return `<p>${this.parser.parseInline(tokens)}</p>\\n` as RendererOutput;\n  }\n\n  table(token: Tokens.Table): RendererOutput {\n    let header = '';\n\n    // header\n    let cell = '';\n    for (let j = 0; j < token.header.length; j++) {\n      cell += this.tablecell(token.header[j]);\n    }\n    header += this.tablerow({ text: cell as ParserOutput });\n\n    let body = '';\n    for (let j = 0; j < token.rows.length; j++) {\n      const row = token.rows[j];\n\n      cell = '';\n      for (let k = 0; k < row.length; k++) {\n        cell += this.tablecell(row[k]);\n      }\n\n      body += this.tablerow({ text: cell as ParserOutput });\n    }\n    if (body) body = `<tbody>${body}</tbody>`;\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n' as RendererOutput;\n  }\n\n  tablerow({ text }: Tokens.TableRow<ParserOutput>): RendererOutput {\n    return `<tr>\\n${text}</tr>\\n` as RendererOutput;\n  }\n\n  tablecell(token: Tokens.TableCell): RendererOutput {\n    const content = this.parser.parseInline(token.tokens);\n    const type = token.header ? 'th' : 'td';\n    const tag = token.align\n      ? `<${type} align=\"${token.align}\">`\n      : `<${type}>`;\n    return tag + content + `</${type}>\\n` as RendererOutput;\n  }\n\n  /**\n   * span level renderer\n   */\n  strong({ tokens }: Tokens.Strong): RendererOutput {\n    return `<strong>${this.parser.parseInline(tokens)}</strong>` as RendererOutput;\n  }\n\n  em({ tokens }: Tokens.Em): RendererOutput {\n    return `<em>${this.parser.parseInline(tokens)}</em>` as RendererOutput;\n  }\n\n  codespan({ text }: Tokens.Codespan): RendererOutput {\n    return `<code>${escape(text, true)}</code>` as RendererOutput;\n  }\n\n  br(token: Tokens.Br): RendererOutput {\n    return '<br>' as RendererOutput;\n  }\n\n  del({ tokens }: Tokens.Del): RendererOutput {\n    return `<del>${this.parser.parseInline(tokens)}</del>` as RendererOutput;\n  }\n\n  link({ href, title, tokens }: Tokens.Link): RendererOutput {\n    const text = this.parser.parseInline(tokens) as string;\n    const cleanHref = cleanUrl(href);\n    if (cleanHref === null) {\n      return text as RendererOutput;\n    }\n    href = cleanHref;\n    let out = '<a href=\"' + href + '\"';\n    if (title) {\n      out += ' title=\"' + (escape(title)) + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out as RendererOutput;\n  }\n\n  image({ href, title, text, tokens }: Tokens.Image): RendererOutput {\n    if (tokens) {\n      text = this.parser.parseInline(tokens, this.parser.textRenderer) as string;\n    }\n    const cleanHref = cleanUrl(href);\n    if (cleanHref === null) {\n      return escape(text) as RendererOutput;\n    }\n    href = cleanHref;\n\n    let out = `<img src=\"${href}\" alt=\"${text}\"`;\n    if (title) {\n      out += ` title=\"${escape(title)}\"`;\n    }\n    out += '>';\n    return out as RendererOutput;\n  }\n\n  text(token: Tokens.Text | Tokens.Escape): RendererOutput {\n    return 'tokens' in token && token.tokens\n      ? this.parser.parseInline(token.tokens) as unknown as RendererOutput\n      : ('escaped' in token && token.escaped ? token.text as RendererOutput : escape(token.text) as RendererOutput);\n  }\n}\n", "import type { Tokens } from './Tokens.ts';\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nexport class _TextRenderer<RendererOutput = string> {\n  // no need for block level renderers\n  strong({ text }: Tokens.Strong): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  em({ text }: Tokens.Em): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  codespan({ text }: Tokens.Codespan): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  del({ text }: Tokens.Del): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  html({ text }: Tokens.HTML | Tokens.Tag): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  text({ text }: Tokens.Text | Tokens.Escape | Tokens.Tag): RendererOutput {\n    return text as RendererOutput;\n  }\n\n  link({ text }: Tokens.Link): RendererOutput {\n    return '' + text as RendererOutput;\n  }\n\n  image({ text }: Tokens.Image): RendererOutput {\n    return '' + text as RendererOutput;\n  }\n\n  br(): RendererOutput {\n    return '' as RendererOutput;\n  }\n}\n", "import { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _defaults } from './defaults.ts';\nimport type { MarkedToken, Token, Tokens } from './Tokens.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\n\n/**\n * Parsing & Compiling\n */\nexport class _Parser<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  renderer: _Renderer<ParserOutput, RendererOutput>;\n  textRenderer: _TextRenderer<RendererOutput>;\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n    this.options.renderer = this.options.renderer || new _Renderer<ParserOutput, RendererOutput>();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.renderer.parser = this;\n    this.textRenderer = new _TextRenderer<RendererOutput>();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse<ParserOutput = string, RendererOutput = string>(tokens: Token[], options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const parser = new _Parser<ParserOutput, RendererOutput>(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline<ParserOutput = string, RendererOutput = string>(tokens: Token[], options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    const parser = new _Parser<ParserOutput, RendererOutput>(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens: Token[], top = true): ParserOutput {\n    let out = '';\n\n    for (let i = 0; i < tokens.length; i++) {\n      const anyToken = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions?.renderers?.[anyToken.type]) {\n        const genericToken = anyToken as Tokens.Generic;\n        const ret = this.options.extensions.renderers[genericToken.type].call({ parser: this }, genericToken);\n        if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'def', 'paragraph', 'text'].includes(genericToken.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      const token = anyToken as MarkedToken;\n\n      switch (token.type) {\n        case 'space': {\n          out += this.renderer.space(token);\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr(token);\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(token);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token);\n          continue;\n        }\n        case 'table': {\n          out += this.renderer.table(token);\n          continue;\n        }\n        case 'blockquote': {\n          out += this.renderer.blockquote(token);\n          continue;\n        }\n        case 'list': {\n          out += this.renderer.list(token);\n          continue;\n        }\n        case 'html': {\n          out += this.renderer.html(token);\n          continue;\n        }\n        case 'def': {\n          out += this.renderer.def(token);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(token);\n          continue;\n        }\n        case 'text': {\n          let textToken = token;\n          let body = this.renderer.text(textToken) as string;\n          while (i + 1 < tokens.length && tokens[i + 1].type === 'text') {\n            textToken = tokens[++i] as Tokens.Text;\n            body += ('\\n' + this.renderer.text(textToken));\n          }\n          if (top) {\n            out += this.renderer.paragraph({\n              type: 'paragraph',\n              raw: body,\n              text: body,\n              tokens: [{ type: 'text', raw: body, text: body, escaped: true }],\n            });\n          } else {\n            out += body;\n          }\n          continue;\n        }\n\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return '' as ParserOutput;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out as ParserOutput;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens: Token[], renderer: _Renderer<ParserOutput, RendererOutput> | _TextRenderer<RendererOutput> = this.renderer): ParserOutput {\n    let out = '';\n\n    for (let i = 0; i < tokens.length; i++) {\n      const anyToken = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions?.renderers?.[anyToken.type]) {\n        const ret = this.options.extensions.renderers[anyToken.type].call({ parser: this }, anyToken);\n        if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(anyToken.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      const token = anyToken as MarkedToken;\n\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token);\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(token);\n          break;\n        }\n        case 'em': {\n          out += renderer.em(token);\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token);\n          break;\n        }\n        case 'br': {\n          out += renderer.br(token);\n          break;\n        }\n        case 'del': {\n          out += renderer.del(token);\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return '' as ParserOutput;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out as ParserOutput;\n  }\n}\n", "import { _defaults } from './defaults.ts';\nimport { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport type { MarkedOptions } from './MarkedOptions.ts';\nimport type { Token, TokensList } from './Tokens.ts';\n\nexport class _Hooks<ParserOutput = string, RendererOutput = string> {\n  options: MarkedOptions<ParserOutput, RendererOutput>;\n  block?: boolean;\n\n  constructor(options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.options = options || _defaults;\n  }\n\n  static passThroughHooks = new Set([\n    'preprocess',\n    'postprocess',\n    'processAllTokens',\n    'emStrongMask',\n  ]);\n\n  static passThroughHooksRespectAsync = new Set([\n    'preprocess',\n    'postprocess',\n    'processAllTokens',\n  ]);\n\n  /**\n   * Process markdown before marked\n   */\n  preprocess(markdown: string) {\n    return markdown;\n  }\n\n  /**\n   * Process HTML after marked is finished\n   */\n  postprocess(html: ParserOutput) {\n    return html;\n  }\n\n  /**\n   * Process all tokens before walk tokens\n   */\n  processAllTokens(tokens: Token[] | TokensList) {\n    return tokens;\n  }\n\n  /**\n   * Mask contents that should not be interpreted as em/strong delimiters\n   */\n  emStrongMask(src: string) {\n    return src;\n  }\n\n  /**\n   * Provide function to tokenize markdown\n   */\n  provideLexer() {\n    return this.block ? _Lexer.lex : _Lexer.lexInline;\n  }\n\n  /**\n   * Provide function to parse tokens\n   */\n  provideParser() {\n    return this.block ? _Parser.parse<ParserOutput, RendererOutput> : _Parser.parseInline<ParserOutput, RendererOutput>;\n  }\n}\n", "import { _getDefaults } from './defaults.ts';\nimport { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { escape } from './helpers.ts';\nimport type { MarkedExtension, MarkedOptions } from './MarkedOptions.ts';\nimport type { Token, Tokens, TokensList } from './Tokens.ts';\n\nexport type MaybePromise = void | Promise<void>;\n\ntype UnknownFunction = (...args: unknown[]) => unknown;\ntype GenericRendererFunction = (...args: unknown[]) => string | false;\n\nexport class Marked<ParserOutput = string, RendererOutput = string> {\n  defaults = _getDefaults<ParserOutput, RendererOutput>();\n  options = this.setOptions;\n\n  parse = this.parseMarkdown(true);\n  parseInline = this.parseMarkdown(false);\n\n  Parser = _Parser<ParserOutput, RendererOutput>;\n  Renderer = _Renderer<ParserOutput, RendererOutput>;\n  TextRenderer = _TextRenderer<RendererOutput>;\n  Lexer = _Lexer;\n  Tokenizer = _Tokenizer<ParserOutput, RendererOutput>;\n  Hooks = _Hooks<ParserOutput, RendererOutput>;\n\n  constructor(...args: MarkedExtension<ParserOutput, RendererOutput>[]) {\n    this.use(...args);\n  }\n\n  /**\n   * Run callback for every token\n   */\n  walkTokens(tokens: Token[] | TokensList, callback: (token: Token) => MaybePromise | MaybePromise[]) {\n    let values: MaybePromise[] = [];\n    for (const token of tokens) {\n      values = values.concat(callback.call(this, token));\n      switch (token.type) {\n        case 'table': {\n          const tableToken = token as Tokens.Table;\n          for (const cell of tableToken.header) {\n            values = values.concat(this.walkTokens(cell.tokens, callback));\n          }\n          for (const row of tableToken.rows) {\n            for (const cell of row) {\n              values = values.concat(this.walkTokens(cell.tokens, callback));\n            }\n          }\n          break;\n        }\n        case 'list': {\n          const listToken = token as Tokens.List;\n          values = values.concat(this.walkTokens(listToken.items, callback));\n          break;\n        }\n        default: {\n          const genericToken = token as Tokens.Generic;\n          if (this.defaults.extensions?.childTokens?.[genericToken.type]) {\n            this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens) => {\n              const tokens = genericToken[childTokens].flat(Infinity) as Token[] | TokensList;\n              values = values.concat(this.walkTokens(tokens, callback));\n            });\n          } else if (genericToken.tokens) {\n            values = values.concat(this.walkTokens(genericToken.tokens, callback));\n          }\n        }\n      }\n    }\n    return values;\n  }\n\n  use(...args: MarkedExtension<ParserOutput, RendererOutput>[]) {\n    const extensions: MarkedOptions<ParserOutput, RendererOutput>['extensions'] = this.defaults.extensions || { renderers: {}, childTokens: {} };\n\n    args.forEach((pack) => {\n      // copy options to new object\n      const opts = { ...pack } as MarkedOptions<ParserOutput, RendererOutput>;\n\n      // set async to true if it was set to true before\n      opts.async = this.defaults.async || opts.async || false;\n\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        pack.extensions.forEach((ext) => {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n          if ('renderer' in ext) { // Renderer extensions\n            const prevRenderer = extensions.renderers[ext.name];\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function(...args) {\n                let ret = ext.renderer.apply(this, args);\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n          if ('tokenizer' in ext) { // Tokenizer Extensions\n            if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n            const extLevel = extensions[ext.level];\n            if (extLevel) {\n              extLevel.unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n            if (ext.start) { // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n          if ('childTokens' in ext && ext.childTokens) { // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n        opts.extensions = extensions;\n      }\n\n      // ==-- Parse \"overwrite\" extensions --== //\n      if (pack.renderer) {\n        const renderer = this.defaults.renderer || new _Renderer<ParserOutput, RendererOutput>(this.defaults);\n        for (const prop in pack.renderer) {\n          if (!(prop in renderer)) {\n            throw new Error(`renderer '${prop}' does not exist`);\n          }\n          if (['options', 'parser'].includes(prop)) {\n            // ignore options property\n            continue;\n          }\n          const rendererProp = prop as Exclude<keyof _Renderer<ParserOutput, RendererOutput>, 'options' | 'parser'>;\n          const rendererFunc = pack.renderer[rendererProp] as GenericRendererFunction;\n          const prevRenderer = renderer[rendererProp] as GenericRendererFunction;\n          // Replace renderer with func to run extension, but fall back if false\n          renderer[rendererProp] = (...args: unknown[]) => {\n            let ret = rendererFunc.apply(renderer, args);\n            if (ret === false) {\n              ret = prevRenderer.apply(renderer, args);\n            }\n            return (ret || '') as RendererOutput;\n          };\n        }\n        opts.renderer = renderer;\n      }\n      if (pack.tokenizer) {\n        const tokenizer = this.defaults.tokenizer || new _Tokenizer<ParserOutput, RendererOutput>(this.defaults);\n        for (const prop in pack.tokenizer) {\n          if (!(prop in tokenizer)) {\n            throw new Error(`tokenizer '${prop}' does not exist`);\n          }\n          if (['options', 'rules', 'lexer'].includes(prop)) {\n            // ignore options, rules, and lexer properties\n            continue;\n          }\n          const tokenizerProp = prop as Exclude<keyof _Tokenizer<ParserOutput, RendererOutput>, 'options' | 'rules' | 'lexer'>;\n          const tokenizerFunc = pack.tokenizer[tokenizerProp] as UnknownFunction;\n          const prevTokenizer = tokenizer[tokenizerProp] as UnknownFunction;\n          // Replace tokenizer with func to run extension, but fall back if false\n          // @ts-expect-error cannot type tokenizer function dynamically\n          tokenizer[tokenizerProp] = (...args: unknown[]) => {\n            let ret = tokenizerFunc.apply(tokenizer, args);\n            if (ret === false) {\n              ret = prevTokenizer.apply(tokenizer, args);\n            }\n            return ret;\n          };\n        }\n        opts.tokenizer = tokenizer;\n      }\n\n      // ==-- Parse Hooks extensions --== //\n      if (pack.hooks) {\n        const hooks = this.defaults.hooks || new _Hooks<ParserOutput, RendererOutput>();\n        for (const prop in pack.hooks) {\n          if (!(prop in hooks)) {\n            throw new Error(`hook '${prop}' does not exist`);\n          }\n          if (['options', 'block'].includes(prop)) {\n            // ignore options and block properties\n            continue;\n          }\n          const hooksProp = prop as Exclude<keyof _Hooks<ParserOutput, RendererOutput>, 'options' | 'block'>;\n          const hooksFunc = pack.hooks[hooksProp] as UnknownFunction;\n          const prevHook = hooks[hooksProp] as UnknownFunction;\n          if (_Hooks.passThroughHooks.has(prop)) {\n            // @ts-expect-error cannot type hook function dynamically\n            hooks[hooksProp] = (arg: unknown) => {\n              if (this.defaults.async && _Hooks.passThroughHooksRespectAsync.has(prop)) {\n                return (async() => {\n                  const ret = await hooksFunc.call(hooks, arg);\n                  return prevHook.call(hooks, ret);\n                })();\n              }\n\n              const ret = hooksFunc.call(hooks, arg);\n              return prevHook.call(hooks, ret);\n            };\n          } else {\n            // @ts-expect-error cannot type hook function dynamically\n            hooks[hooksProp] = (...args: unknown[]) => {\n              if (this.defaults.async) {\n                return (async() => {\n                  let ret = await hooksFunc.apply(hooks, args);\n                  if (ret === false) {\n                    ret = await prevHook.apply(hooks, args);\n                  }\n                  return ret;\n                })();\n              }\n\n              let ret = hooksFunc.apply(hooks, args);\n              if (ret === false) {\n                ret = prevHook.apply(hooks, args);\n              }\n              return ret;\n            };\n          }\n        }\n        opts.hooks = hooks;\n      }\n\n      // ==-- Parse WalkTokens extensions --== //\n      if (pack.walkTokens) {\n        const walkTokens = this.defaults.walkTokens;\n        const packWalktokens = pack.walkTokens;\n        opts.walkTokens = function(token) {\n          let values: MaybePromise[] = [];\n          values.push(packWalktokens.call(this, token));\n          if (walkTokens) {\n            values = values.concat(walkTokens.call(this, token));\n          }\n          return values;\n        };\n      }\n\n      this.defaults = { ...this.defaults, ...opts };\n    });\n\n    return this;\n  }\n\n  setOptions(opt: MarkedOptions<ParserOutput, RendererOutput>) {\n    this.defaults = { ...this.defaults, ...opt };\n    return this;\n  }\n\n  lexer(src: string, options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    return _Lexer.lex(src, options ?? this.defaults);\n  }\n\n  parser(tokens: Token[], options?: MarkedOptions<ParserOutput, RendererOutput>) {\n    return _Parser.parse<ParserOutput, RendererOutput>(tokens, options ?? this.defaults);\n  }\n\n  private parseMarkdown(blockType: boolean) {\n    type overloadedParse = {\n      (src: string, options: MarkedOptions<ParserOutput, RendererOutput> & { async: true }): Promise<ParserOutput>;\n      (src: string, options: MarkedOptions<ParserOutput, RendererOutput> & { async: false }): ParserOutput;\n      (src: string, options?: MarkedOptions<ParserOutput, RendererOutput> | null): ParserOutput | Promise<ParserOutput>;\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const parse: overloadedParse = (src: string, options?: MarkedOptions<ParserOutput, RendererOutput> | null): any => {\n      const origOpt = { ...options };\n      const opt = { ...this.defaults, ...origOpt };\n\n      const throwError = this.onError(!!opt.silent, !!opt.async);\n\n      // throw error if an extension set async to true but parse was called with async: false\n      if (this.defaults.async === true && origOpt.async === false) {\n        return throwError(new Error('marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.'));\n      }\n\n      // throw error in case of non string input\n      if (typeof src === 'undefined' || src === null) {\n        return throwError(new Error('marked(): input parameter is undefined or null'));\n      }\n      if (typeof src !== 'string') {\n        return throwError(new Error('marked(): input parameter is of type '\n          + Object.prototype.toString.call(src) + ', string expected'));\n      }\n\n      if (opt.hooks) {\n        opt.hooks.options = opt;\n        opt.hooks.block = blockType;\n      }\n\n      if (opt.async) {\n        return (async() => {\n          const processedSrc = opt.hooks ? await opt.hooks.preprocess(src) : src;\n          const lexer = opt.hooks ? await opt.hooks.provideLexer() : (blockType ? _Lexer.lex : _Lexer.lexInline);\n          const tokens = await lexer(processedSrc, opt);\n          const processedTokens = opt.hooks ? await opt.hooks.processAllTokens(tokens) : tokens;\n          if (opt.walkTokens) {\n            await Promise.all(this.walkTokens(processedTokens, opt.walkTokens));\n          }\n          const parser = opt.hooks ? await opt.hooks.provideParser() : (blockType ? _Parser.parse : _Parser.parseInline);\n          const html = await parser(processedTokens, opt);\n          return opt.hooks ? await opt.hooks.postprocess(html) : html;\n        })().catch(throwError);\n      }\n\n      try {\n        if (opt.hooks) {\n          src = opt.hooks.preprocess(src) as string;\n        }\n        const lexer = opt.hooks ? opt.hooks.provideLexer() : (blockType ? _Lexer.lex : _Lexer.lexInline);\n        let tokens = lexer(src, opt);\n        if (opt.hooks) {\n          tokens = opt.hooks.processAllTokens(tokens);\n        }\n        if (opt.walkTokens) {\n          this.walkTokens(tokens, opt.walkTokens);\n        }\n        const parser = opt.hooks ? opt.hooks.provideParser() : (blockType ? _Parser.parse : _Parser.parseInline);\n        let html = parser(tokens, opt);\n        if (opt.hooks) {\n          html = opt.hooks.postprocess(html);\n        }\n        return html;\n      } catch(e) {\n        return throwError(e as Error);\n      }\n    };\n\n    return parse;\n  }\n\n  private onError(silent: boolean, async: boolean) {\n    return (e: Error): string | Promise<string> => {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (silent) {\n        const msg = '<p>An error occurred:</p><pre>'\n          + escape(e.message + '', true)\n          + '</pre>';\n        if (async) {\n          return Promise.resolve(msg);\n        }\n        return msg;\n      }\n\n      if (async) {\n        return Promise.reject(e);\n      }\n      throw e;\n    };\n  }\n}\n", "import { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { Marked } from './Instance.ts';\nimport {\n  _getDefaults,\n  changeDefaults,\n  _defaults,\n} from './defaults.ts';\nimport type { MarkedExtension, MarkedOptions } from './MarkedOptions.ts';\nimport type { Token, TokensList } from './Tokens.ts';\nimport type { MaybePromise } from './Instance.ts';\n\nconst markedInstance = new Marked();\n\n/**\n * Compiles markdown to HTML asynchronously.\n *\n * @param src String of markdown source to be compiled\n * @param options Hash of options, having async: true\n * @return Promise of string of compiled HTML\n */\nexport function marked(src: string, options: MarkedOptions & { async: true }): Promise<string>;\n\n/**\n * Compiles markdown to HTML.\n *\n * @param src String of markdown source to be compiled\n * @param options Optional hash of options\n * @return String of compiled HTML. Will be a Promise of string if async is set to true by any extensions.\n */\nexport function marked(src: string, options: MarkedOptions & { async: false }): string;\nexport function marked(src: string, options: MarkedOptions & { async: true }): Promise<string>;\nexport function marked(src: string, options?: MarkedOptions | null): string | Promise<string>;\nexport function marked(src: string, opt?: MarkedOptions | null): string | Promise<string> {\n  return markedInstance.parse(src, opt);\n}\n\n/**\n * Sets the default options.\n *\n * @param options Hash of options\n */\nmarked.options =\nmarked.setOptions = function(options: MarkedOptions) {\n  markedInstance.setOptions(options);\n  marked.defaults = markedInstance.defaults;\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\n/**\n * Gets the original marked default options.\n */\nmarked.getDefaults = _getDefaults;\n\nmarked.defaults = _defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(...args: MarkedExtension[]) {\n  markedInstance.use(...args);\n  marked.defaults = markedInstance.defaults;\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens: Token[] | TokensList, callback: (token: Token) => MaybePromise | MaybePromise[]) {\n  return markedInstance.walkTokens(tokens, callback);\n};\n\n/**\n * Compiles markdown to HTML without enclosing `p` tag.\n *\n * @param src String of markdown source to be compiled\n * @param options Hash of options\n * @return String of compiled HTML\n */\nmarked.parseInline = markedInstance.parseInline;\n\n/**\n * Expose\n */\nmarked.Parser = _Parser;\nmarked.parser = _Parser.parse;\nmarked.Renderer = _Renderer;\nmarked.TextRenderer = _TextRenderer;\nmarked.Lexer = _Lexer;\nmarked.lexer = _Lexer.lex;\nmarked.Tokenizer = _Tokenizer;\nmarked.Hooks = _Hooks;\nmarked.parse = marked;\n\nexport const options = marked.options;\nexport const setOptions = marked.setOptions;\nexport const use = marked.use;\nexport const walkTokens = marked.walkTokens;\nexport const parseInline = marked.parseInline;\nexport const parse = marked;\nexport const parser = _Parser.parse;\nexport const lexer = _Lexer.lex;\nexport { _defaults as defaults, _getDefaults as getDefaults } from './defaults.ts';\nexport { _Lexer as Lexer } from './Lexer.ts';\nexport { _Parser as Parser } from './Parser.ts';\nexport { _Tokenizer as Tokenizer } from './Tokenizer.ts';\nexport { _Renderer as Renderer } from './Renderer.ts';\nexport { _TextRenderer as TextRenderer } from './TextRenderer.ts';\nexport { _Hooks as Hooks } from './Hooks.ts';\nexport { Marked } from './Instance.ts';\nexport type * from './MarkedOptions.ts';\nexport type * from './Tokens.ts';\n", "import puppeteer, { type Browser, type Page, type PDFOptions } from '@cloudflare/puppeteer';\nimport type { Bindings } from '../mcp/types';\n\n/**\n * Launch a new browser instance using Cloudflare Browser Rendering\n * @param binding - Browser binding from env.BROWSER\n * @returns Browser instance (must be closed after use)\n */\nexport async function launchBrowser(binding: Bindings['BROWSER']): Promise<Browser> {\n  return await puppeteer.launch(binding);\n}\n\n/**\n * Close browser and cleanup resources\n * @param browser - Browser instance to close\n */\nexport async function closeBrowser(browser: Browser): Promise<void> {\n  await browser.close();\n}\n\n/**\n * Generate PDF from HTML content\n * @param browser - Active browser instance\n * @param html - HTML content to convert\n * @param options - PDF generation options\n * @returns PDF buffer\n */\nexport async function generatePdfFromHtml(\n  browser: Browser,\n  html: string,\n  options: PDFOptions = {}\n): Promise<Buffer> {\n  const page = await browser.newPage();\n\n  try {\n    await page.setContent(html, { waitUntil: 'networkidle2' });\n\n    const pdfBuffer = await page.pdf({\n      format: 'A4',\n      printBackground: true, // CRITICAL: Enable CSS backgrounds/colors\n      margin: {\n        top: '1cm',\n        right: '1cm',\n        bottom: '1cm',\n        left: '1cm',\n      },\n      ...options,\n    });\n\n    return pdfBuffer;\n  } finally {\n    await page.close();\n  }\n}\n\n/**\n * Generate PDF from URL\n * @param browser - Active browser instance\n * @param url - URL to convert\n * @param options - PDF generation options\n * @returns PDF buffer\n */\nexport async function generatePdfFromUrl(\n  browser: Browser,\n  url: string,\n  options: PDFOptions = {}\n): Promise<Buffer> {\n  const page = await browser.newPage();\n\n  try {\n    await page.goto(url, {\n      waitUntil: 'networkidle2',\n      timeout: 30000,\n    });\n\n    const pdfBuffer = await page.pdf({\n      format: 'A4',\n      printBackground: true,\n      margin: {\n        top: '1cm',\n        right: '1cm',\n        bottom: '1cm',\n        left: '1cm',\n      },\n      ...options,\n    });\n\n    return pdfBuffer;\n  } finally {\n    await page.close();\n  }\n}\n\n/**\n * Generate screenshot from HTML content\n * @param browser - Active browser instance\n * @param html - HTML content to capture\n * @param format - Image format (png, jpeg, webp)\n * @param fullPage - Capture full page height\n * @returns Image buffer\n */\nexport async function generateScreenshotFromHtml(\n  browser: Browser,\n  html: string,\n  format: 'png' | 'jpeg' | 'webp' = 'png',\n  fullPage: boolean = true\n): Promise<Buffer> {\n  const page = await browser.newPage();\n\n  try {\n    await page.setContent(html, { waitUntil: 'networkidle2' });\n\n    const screenshotBuffer = await page.screenshot({\n      type: format,\n      fullPage,\n      omitBackground: format === 'png', // Transparent background for PNG\n    });\n\n    return screenshotBuffer as Buffer;\n  } finally {\n    await page.close();\n  }\n}\n\n/**\n * Generate screenshot from URL\n * @param browser - Active browser instance\n * @param url - URL to capture\n * @param format - Image format (png, jpeg, webp)\n * @param fullPage - Capture full page height\n * @returns Image buffer\n */\nexport async function generateScreenshotFromUrl(\n  browser: Browser,\n  url: string,\n  format: 'png' | 'jpeg' | 'webp' = 'png',\n  fullPage: boolean = true\n): Promise<Buffer> {\n  const page = await browser.newPage();\n\n  try {\n    await page.goto(url, {\n      waitUntil: 'networkidle2',\n      timeout: 30000,\n    });\n\n    const screenshotBuffer = await page.screenshot({\n      type: format,\n      fullPage,\n      omitBackground: format === 'png',\n    });\n\n    return screenshotBuffer as Buffer;\n  } finally {\n    await page.close();\n  }\n}\n", "import {PuppeteerWorkers} from './cloudflare/PuppeteerWorkers.js';\nexport * from './api/api.js';\nexport * from './common/common.js';\nexport * from './revisions.js';\nexport * from './util/util.js';\nexport * from './cloudflare/BrowserWorker.js';\n\nconst puppeteer = new PuppeteerWorkers();\n\nexport const {connect, history, launch, limits, sessions} = puppeteer;\n\nexport * from './cloudflare/PuppeteerWorkers.js';\n\nexport default puppeteer;\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Browser} from '../api/Browser.js';\nimport {ConnectionTransport} from '../common/ConnectionTransport.js';\nimport {Puppeteer} from '../common/Puppeteer.js';\n\nimport {BrowserWorker} from './BrowserWorker.js';\nimport {connectToCDPBrowser} from './utils.js';\nimport {WorkersWebSocketTransport} from './WorkersWebSocketTransport.js';\n\nconst FAKE_HOST = 'https://fake.host';\n\n// We can't include both workers-types and dom because they conflict\ndeclare global {\n  interface Response {\n    readonly webSocket: WebSocket | null;\n  }\n  interface WebSocket {\n    accept(): void;\n  }\n}\n/**\n * @public\n */\nexport interface AcquireResponse {\n  sessionId: string;\n}\n/**\n * @public\n */\nexport interface ActiveSession {\n  sessionId: string;\n  startTime: number; // timestamp\n  // connection info, if present means there's a connection established\n  // from a worker to that session\n  connectionId?: string;\n  connectionStartTime?: string;\n}\n/**\n * @public\n */\nexport interface ClosedSession extends ActiveSession {\n  endTime: number; // timestamp\n  closeReason: number; // close reason code\n  closeReasonText: string; // close reason description\n}\n/**\n * @public\n */\nexport interface SessionsResponse {\n  sessions: ActiveSession[];\n}\n/**\n * @public\n */\nexport interface HistoryResponse {\n  history: ClosedSession[];\n}\n/**\n * @public\n */\nexport interface LimitsResponse {\n  activeSessions: Array<{id: string}>;\n  maxConcurrentSessions: number;\n  allowedBrowserAcquisitions: number; // 1 if allowed, 0 otherwise\n  timeUntilNextAllowedBrowserAcquisition: number;\n}\n/**\n * @public\n */\nexport interface WorkersLaunchOptions {\n  keep_alive?: number; // milliseconds to keep browser alive even if it has no activity (from 10_000ms to 600_000ms, default is 60_000)\n}\n/**\n * @public\n */\nexport class PuppeteerWorkers extends Puppeteer {\n  public constructor() {\n    super({isPuppeteerCore: false});\n    this.connect = this.connect.bind(this);\n    this.launch = this.launch.bind(this);\n    this.sessions = this.sessions.bind(this);\n    this.history = this.history.bind(this);\n    this.limits = this.limits.bind(this);\n  }\n\n  /**\n   * Launch a browser session.\n   *\n   * @param endpoint - Cloudflare worker binding\n   * @returns a browser session or throws\n   */\n  public async launch(\n    endpoint: BrowserWorker,\n    options?: WorkersLaunchOptions\n  ): Promise<Browser> {\n    let acquireUrl = `${FAKE_HOST}/v1/acquire`;\n    if (options?.keep_alive) {\n      acquireUrl = `${acquireUrl}?keep_alive=${options.keep_alive}`;\n    }\n    const res = await endpoint.fetch(acquireUrl);\n    const status = res.status;\n    const text = await res.text();\n    if (status !== 200) {\n      throw new Error(\n        `Unable to create new browser: code: ${status}: message: ${text}`\n      );\n    }\n    // Got a 200, so response text is actually an AcquireResponse\n    const response: AcquireResponse = JSON.parse(text);\n    return this.connect(endpoint, response.sessionId);\n  }\n\n  /**\n   * Returns active sessions\n   *\n   * @remarks\n   * Sessions with a connnectionId already have a worker connection established\n   *\n   * @param endpoint - Cloudflare worker binding\n   * @returns List of active sessions\n   */\n  public async sessions(endpoint: BrowserWorker): Promise<ActiveSession[]> {\n    const res = await endpoint.fetch(`${FAKE_HOST}/v1/sessions`);\n    const status = res.status;\n    const text = await res.text();\n    if (status !== 200) {\n      throw new Error(\n        `Unable to fetch new sessions: code: ${status}: message: ${text}`\n      );\n    }\n    const data: SessionsResponse = JSON.parse(text);\n    return data.sessions;\n  }\n\n  /**\n   * Returns recent sessions (active and closed)\n   *\n   * @param endpoint - Cloudflare worker binding\n   * @returns List of recent sessions (active and closed)\n   */\n  public async history(endpoint: BrowserWorker): Promise<ClosedSession[]> {\n    const res = await endpoint.fetch(`${FAKE_HOST}/v1/history`);\n    const status = res.status;\n    const text = await res.text();\n    if (status !== 200) {\n      throw new Error(\n        `Unable to fetch account history: code: ${status}: message: ${text}`\n      );\n    }\n    const data: HistoryResponse = JSON.parse(text);\n    return data.history;\n  }\n\n  /**\n   * Returns current limits\n   *\n   * @param endpoint - Cloudflare worker binding\n   * @returns current limits\n   */\n  public async limits(endpoint: BrowserWorker): Promise<LimitsResponse> {\n    const res = await endpoint.fetch(`${FAKE_HOST}/v1/limits`);\n    const status = res.status;\n    const text = await res.text();\n    if (status !== 200) {\n      throw new Error(\n        `Unable to fetch account limits: code: ${status}: message: ${text}`\n      );\n    }\n    const data: LimitsResponse = JSON.parse(text);\n    return data;\n  }\n\n  /**\n   * Establish a devtools connection to an existing session\n   *\n   * @param endpoint - Cloudflare worker binding\n   * @param sessionId - sessionId obtained from a .sessions() call\n   * @returns a browser instance\n   */\n  // @ts-expect-error we use a diferent input here and completly ignore the original class\n  public override async connect(\n    endpoint: BrowserWorker,\n    sessionId: string\n  ): Promise<Browser>;\n\n  /**\n   * Establish a devtools connection to an existing session\n   *\n   * @param borwserWorker - BrowserWorker\n   * @returns a browser instance\n   */\n  // @ts-expect-error we use a diferent input here and completly ignore the original class\n  public override async connect(\n    endpoint: BrowserWorker,\n    sessionId: string\n  ): Promise<Browser> {\n    try {\n      const connectionTransport: ConnectionTransport =\n        await WorkersWebSocketTransport.create(endpoint, sessionId);\n      return connectToCDPBrowser(connectionTransport, {sessionId});\n    } catch (e) {\n      throw new Error(\n        `Unable to connect to existing session ${sessionId} (it may still be in use or not ready yet) - retry or launch a new browser: ${e}`\n      );\n    }\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Browser} from '../api/Browser.js';\n\nimport {\n  BrowserConnectOptions,\n  _connectToCDPBrowser,\n} from './BrowserConnector.js';\nimport {ConnectionTransport} from './ConnectionTransport.js';\nimport {CustomQueryHandler, customQueryHandlers} from './CustomQueryHandler.js';\n\n/**\n * Settings that are common to the Puppeteer class, regardless of environment.\n *\n * @internal\n */\nexport interface CommonPuppeteerSettings {\n  isPuppeteerCore: boolean;\n}\n/**\n * @public\n */\nexport interface ConnectOptions extends BrowserConnectOptions {\n  browserWSEndpoint?: string;\n  browserURL?: string;\n  transport?: ConnectionTransport;\n  /**\n   * Headers to use for the web socket connection.\n   * @remarks\n   * Only works in the Node.js environment.\n   */\n  headers?: Record<string, string>;\n}\n\n/**\n * The main Puppeteer class.\n *\n * IMPORTANT: if you are using Puppeteer in a Node environment, you will get an\n * instance of {@link PuppeteerNode} when you import or require `puppeteer`.\n * That class extends `Puppeteer`, so has all the methods documented below as\n * well as all that are defined on {@link PuppeteerNode}.\n *\n * @public\n */\nexport class Puppeteer {\n  /**\n   * Operations for {@link CustomQueryHandler | custom query handlers}. See\n   * {@link CustomQueryHandlerRegistry}.\n   *\n   * @internal\n   */\n  static customQueryHandlers = customQueryHandlers;\n\n  /**\n   * Registers a {@link CustomQueryHandler | custom query handler}.\n   *\n   * @remarks\n   * After registration, the handler can be used everywhere where a selector is\n   * expected by prepending the selection string with `<name>/`. The name is only\n   * allowed to consist of lower- and upper case latin letters.\n   *\n   * @example\n   *\n   * ```\n   * puppeteer.registerCustomQueryHandler('text', { \u2026 });\n   * const aHandle = await page.$('text/\u2026');\n   * ```\n   *\n   * @param name - The name that the custom query handler will be registered\n   * under.\n   * @param queryHandler - The {@link CustomQueryHandler | custom query handler}\n   * to register.\n   *\n   * @public\n   */\n  static registerCustomQueryHandler(\n    name: string,\n    queryHandler: CustomQueryHandler\n  ): void {\n    return this.customQueryHandlers.register(name, queryHandler);\n  }\n\n  /**\n   * Unregisters a custom query handler for a given name.\n   */\n  static unregisterCustomQueryHandler(name: string): void {\n    return this.customQueryHandlers.unregister(name);\n  }\n\n  /**\n   * Gets the names of all custom query handlers.\n   */\n  static customQueryHandlerNames(): string[] {\n    return this.customQueryHandlers.names();\n  }\n\n  /**\n   * Unregisters all custom query handlers.\n   */\n  static clearCustomQueryHandlers(): void {\n    return this.customQueryHandlers.clear();\n  }\n\n  /**\n   * @internal\n   */\n  _isPuppeteerCore: boolean;\n  /**\n   * @internal\n   */\n  protected _changedProduct = false;\n\n  /**\n   * @internal\n   */\n  constructor(settings: CommonPuppeteerSettings) {\n    this._isPuppeteerCore = settings.isPuppeteerCore;\n\n    this.connect = this.connect.bind(this);\n  }\n\n  /**\n   * This method attaches Puppeteer to an existing browser instance.\n   *\n   * @remarks\n   *\n   * @param options - Set of configurable options to set on the browser.\n   * @returns Promise which resolves to browser instance.\n   */\n  connect(options: ConnectOptions): Promise<Browser> {\n    return _connectToCDPBrowser(options);\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {IsPageTargetCallback, TargetFilterCallback} from '../api/Browser.js';\nimport {isNode} from '../environment.js';\nimport {assert} from '../util/assert.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport {CDPBrowser} from './Browser.js';\nimport {Connection} from './Connection.js';\nimport {ConnectionTransport} from './ConnectionTransport.js';\nimport {getFetch} from './fetch.js';\nimport type {ConnectOptions} from './Puppeteer.js';\nimport {Viewport} from './PuppeteerViewport.js';\nimport {debugError} from './util.js';\n/**\n * Generic browser options that can be passed when launching any browser or when\n * connecting to an existing browser instance.\n * @public\n */\nexport interface BrowserConnectOptions {\n  /**\n   * Whether to ignore HTTPS errors during navigation.\n   * @defaultValue `false`\n   */\n  ignoreHTTPSErrors?: boolean;\n  /**\n   * Sets the viewport for each page.\n   */\n  defaultViewport?: Viewport | null;\n  /**\n   * Slows down Puppeteer operations by the specified amount of milliseconds to\n   * aid debugging.\n   */\n  slowMo?: number;\n  /**\n   * Callback to decide if Puppeteer should connect to a given target or not.\n   */\n  targetFilter?: TargetFilterCallback;\n  /**\n   * @internal\n   */\n  _isPageTarget?: IsPageTargetCallback;\n  /**\n   * @defaultValue 'cdp'\n   * @internal\n   */\n  protocol?: 'cdp' | 'webDriverBiDi';\n  /**\n   * Timeout setting for individual protocol (CDP) calls.\n   *\n   * @defaultValue `180_000`\n   */\n  protocolTimeout?: number;\n}\n\nconst getWebSocketTransportClass = async () => {\n  return isNode\n    ? (await import('./NodeWebSocketTransport.js')).NodeWebSocketTransport\n    : (await import('./BrowserWebSocketTransport.js'))\n        .BrowserWebSocketTransport;\n};\n\n/**\n * Users should never call this directly; it's called when calling\n * `puppeteer.connect`.\n *\n * @internal\n */\nexport async function _connectToCDPBrowser(\n  options: BrowserConnectOptions & ConnectOptions\n): Promise<CDPBrowser> {\n  const {\n    browserWSEndpoint,\n    browserURL,\n    ignoreHTTPSErrors = false,\n    defaultViewport = {width: 800, height: 600},\n    transport,\n    headers = {},\n    slowMo = 0,\n    targetFilter,\n    _isPageTarget: isPageTarget,\n    protocolTimeout,\n  } = options;\n\n  assert(\n    Number(!!browserWSEndpoint) + Number(!!browserURL) + Number(!!transport) ===\n      1,\n    'Exactly one of browserWSEndpoint, browserURL or transport must be passed to puppeteer.connect'\n  );\n\n  let connection!: Connection;\n  if (transport) {\n    connection = new Connection('', transport, slowMo, protocolTimeout);\n  } else if (browserWSEndpoint) {\n    const WebSocketClass = await getWebSocketTransportClass();\n    const connectionTransport: ConnectionTransport =\n      await WebSocketClass.create(browserWSEndpoint, headers);\n    connection = new Connection(\n      browserWSEndpoint,\n      connectionTransport,\n      slowMo,\n      protocolTimeout\n    );\n  } else if (browserURL) {\n    const connectionURL = await getWSEndpoint(browserURL);\n    const WebSocketClass = await getWebSocketTransportClass();\n    const connectionTransport: ConnectionTransport =\n      await WebSocketClass.create(connectionURL);\n    connection = new Connection(\n      connectionURL,\n      connectionTransport,\n      slowMo,\n      protocolTimeout\n    );\n  }\n  const version = await connection.send('Browser.getVersion');\n\n  const product = version.product.toLowerCase().includes('firefox')\n    ? 'firefox'\n    : 'chrome';\n\n  const {browserContextIds} = await connection.send(\n    'Target.getBrowserContexts'\n  );\n  const browser = await CDPBrowser._create(\n    product || 'chrome',\n    connection,\n    browserContextIds,\n    ignoreHTTPSErrors,\n    defaultViewport,\n    undefined,\n    () => {\n      return connection.send('Browser.close').catch(debugError);\n    },\n    targetFilter,\n    isPageTarget\n  );\n  return browser;\n}\n\nasync function getWSEndpoint(browserURL: string): Promise<string> {\n  const endpointURL = new URL('/json/version', browserURL);\n\n  const fetch = await getFetch();\n  try {\n    const result = await fetch(endpointURL.toString(), {\n      method: 'GET',\n    });\n    if (!result.ok) {\n      throw new Error(`HTTP ${result.statusText}`);\n    }\n    const data = await result.json();\n    return data.webSocketDebuggerUrl;\n  } catch (error) {\n    if (isErrorLike(error)) {\n      error.message =\n        `Failed to fetch browser webSocket URL from ${endpointURL}: ` +\n        error.message;\n    }\n    throw error;\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @internal\n */\nexport const isNode = !!(typeof process !== 'undefined' && process.version);\n\n/**\n * @internal\n */\nexport const DEFERRED_PROMISE_DEBUG_TIMEOUT =\n  typeof process !== 'undefined' &&\n  typeof process.env['PUPPETEER_DEFERRED_PROMISE_DEBUG_TIMEOUT'] !== 'undefined'\n    ? Number(process.env['PUPPETEER_DEFERRED_PROMISE_DEBUG_TIMEOUT'])\n    : -1;\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Asserts that the given value is truthy.\n * @param value - some conditional statement\n * @param message - the error message to throw if the value is not truthy.\n *\n * @internal\n */\nexport const assert: (value: unknown, message?: string) => asserts value = (\n  value,\n  message\n) => {\n  if (!value) {\n    throw new Error(message);\n  }\n};\n", "/**\n * @internal\n */\n\nexport interface ErrorLike extends Error {\n  name: string;\n  message: string;\n}\n/**\n * @internal\n */\n\nexport function isErrorLike(obj: unknown): obj is ErrorLike {\n  return (\n    typeof obj === 'object' && obj !== null && 'name' in obj && 'message' in obj\n  );\n}\n/**\n * @internal\n */\n\nexport function isErrnoException(obj: unknown): obj is NodeJS.ErrnoException {\n  return (\n    isErrorLike(obj) &&\n    ('errno' in obj || 'code' in obj || 'path' in obj || 'syscall' in obj)\n  );\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ChildProcess} from 'child_process';\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {\n  Browser as BrowserBase,\n  BrowserCloseCallback,\n  TargetFilterCallback,\n  IsPageTargetCallback,\n  BrowserEmittedEvents,\n  BrowserContextEmittedEvents,\n  BrowserContextOptions,\n  WEB_PERMISSION_TO_PROTOCOL_PERMISSION,\n  Permission,\n} from '../api/Browser.js';\nimport {BrowserContext} from '../api/BrowserContext.js';\nimport {Page} from '../api/Page.js';\nimport {Target} from '../api/Target.js';\nimport {assert} from '../util/assert.js';\n\nimport {ChromeTargetManager} from './ChromeTargetManager.js';\nimport {CDPSession, Connection, ConnectionEmittedEvents} from './Connection.js';\nimport {FirefoxTargetManager} from './FirefoxTargetManager.js';\nimport {Viewport} from './PuppeteerViewport.js';\nimport {\n  InitializationStatus,\n  OtherTarget,\n  PageTarget,\n  CDPTarget,\n  WorkerTarget,\n} from './Target.js';\nimport {TargetManager, TargetManagerEmittedEvents} from './TargetManager.js';\nimport {TaskQueue} from './TaskQueue.js';\n\n/**\n * @internal\n */\nexport class CDPBrowser extends BrowserBase {\n  /**\n   * @internal\n   */\n  static async _create(\n    product: 'firefox' | 'chrome' | undefined,\n    connection: Connection,\n    contextIds: string[],\n    ignoreHTTPSErrors: boolean,\n    defaultViewport?: Viewport | null,\n    process?: ChildProcess,\n    closeCallback?: BrowserCloseCallback,\n    targetFilterCallback?: TargetFilterCallback,\n    isPageTargetCallback?: IsPageTargetCallback,\n    waitForInitiallyDiscoveredTargets = true,\n    sessionId?: string\n  ): Promise<CDPBrowser> {\n    const browser = new CDPBrowser(\n      product,\n      connection,\n      contextIds,\n      ignoreHTTPSErrors,\n      defaultViewport,\n      process,\n      closeCallback,\n      targetFilterCallback,\n      isPageTargetCallback,\n      waitForInitiallyDiscoveredTargets,\n      sessionId\n    );\n    await browser._attach();\n    return browser;\n  }\n  #ignoreHTTPSErrors: boolean;\n  #defaultViewport?: Viewport | null;\n  #process?: ChildProcess;\n  #connection: Connection;\n  #closeCallback: BrowserCloseCallback;\n  #targetFilterCallback: TargetFilterCallback;\n  #isPageTargetCallback!: IsPageTargetCallback;\n  #defaultContext: CDPBrowserContext;\n  #contexts = new Map<string, CDPBrowserContext>();\n  #screenshotTaskQueue: TaskQueue;\n  #targetManager: TargetManager;\n  #sessionId: string;\n\n  /**\n   * @internal\n   */\n  override get _targets(): Map<string, CDPTarget> {\n    return this.#targetManager.getAvailableTargets();\n  }\n\n  /**\n   * @internal\n   */\n  constructor(\n    product: 'chrome' | 'firefox' | undefined,\n    connection: Connection,\n    contextIds: string[],\n    ignoreHTTPSErrors: boolean,\n    defaultViewport?: Viewport | null,\n    process?: ChildProcess,\n    closeCallback?: BrowserCloseCallback,\n    targetFilterCallback?: TargetFilterCallback,\n    isPageTargetCallback?: IsPageTargetCallback,\n    waitForInitiallyDiscoveredTargets = true,\n    sessionId?: string\n  ) {\n    super();\n    product = product || 'chrome';\n    this.#ignoreHTTPSErrors = ignoreHTTPSErrors;\n    this.#defaultViewport = defaultViewport;\n    this.#process = process;\n    this.#screenshotTaskQueue = new TaskQueue();\n    this.#connection = connection;\n    this.#closeCallback = closeCallback || function (): void {};\n    this.#targetFilterCallback =\n      targetFilterCallback ||\n      ((): boolean => {\n        return true;\n      });\n    this.#setIsPageTargetCallback(isPageTargetCallback);\n    if (product === 'firefox') {\n      this.#targetManager = new FirefoxTargetManager(\n        connection,\n        this.#createTarget,\n        this.#targetFilterCallback\n      );\n    } else {\n      this.#targetManager = new ChromeTargetManager(\n        connection,\n        this.#createTarget,\n        this.#targetFilterCallback,\n        waitForInitiallyDiscoveredTargets\n      );\n    }\n    this.#defaultContext = new CDPBrowserContext(this.#connection, this);\n    for (const contextId of contextIds) {\n      this.#contexts.set(\n        contextId,\n        new CDPBrowserContext(this.#connection, this, contextId)\n      );\n    }\n    this.#sessionId = sessionId || 'unknown';\n  }\n\n  /**\n   * Get the BISO session ID associated with this browser\n   *\n   * @public\n   */\n  override sessionId(): string {\n    return this.#sessionId;\n  }\n\n  #emitDisconnected = () => {\n    this.emit(BrowserEmittedEvents.Disconnected);\n  };\n\n  /**\n   * @internal\n   */\n  override async _attach(): Promise<void> {\n    this.#connection.on(\n      ConnectionEmittedEvents.Disconnected,\n      this.#emitDisconnected\n    );\n    this.#targetManager.on(\n      TargetManagerEmittedEvents.TargetAvailable,\n      this.#onAttachedToTarget\n    );\n    this.#targetManager.on(\n      TargetManagerEmittedEvents.TargetGone,\n      this.#onDetachedFromTarget\n    );\n    this.#targetManager.on(\n      TargetManagerEmittedEvents.TargetChanged,\n      this.#onTargetChanged\n    );\n    this.#targetManager.on(\n      TargetManagerEmittedEvents.TargetDiscovered,\n      this.#onTargetDiscovered\n    );\n    await this.#targetManager.initialize();\n  }\n\n  /**\n   * @internal\n   */\n  override _detach(): void {\n    this.#connection.off(\n      ConnectionEmittedEvents.Disconnected,\n      this.#emitDisconnected\n    );\n    this.#targetManager.off(\n      TargetManagerEmittedEvents.TargetAvailable,\n      this.#onAttachedToTarget\n    );\n    this.#targetManager.off(\n      TargetManagerEmittedEvents.TargetGone,\n      this.#onDetachedFromTarget\n    );\n    this.#targetManager.off(\n      TargetManagerEmittedEvents.TargetChanged,\n      this.#onTargetChanged\n    );\n    this.#targetManager.off(\n      TargetManagerEmittedEvents.TargetDiscovered,\n      this.#onTargetDiscovered\n    );\n  }\n\n  /**\n   * The spawned browser process. Returns `null` if the browser instance was created with\n   * {@link Puppeteer.connect}.\n   */\n  override process(): ChildProcess | null {\n    return this.#process ?? null;\n  }\n\n  /**\n   * @internal\n   */\n  _targetManager(): TargetManager {\n    return this.#targetManager;\n  }\n\n  #setIsPageTargetCallback(isPageTargetCallback?: IsPageTargetCallback): void {\n    this.#isPageTargetCallback =\n      isPageTargetCallback ||\n      ((target: Target): boolean => {\n        return (\n          target.type() === 'page' ||\n          target.type() === 'background_page' ||\n          target.type() === 'webview'\n        );\n      });\n  }\n\n  /**\n   * @internal\n   */\n  override _getIsPageTargetCallback(): IsPageTargetCallback | undefined {\n    return this.#isPageTargetCallback;\n  }\n\n  /**\n   * Creates a new incognito browser context. This won't share cookies/cache with other\n   * browser contexts.\n   *\n   * @example\n   *\n   * ```ts\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   // Create a new incognito browser context.\n   *   const context = await browser.createIncognitoBrowserContext();\n   *   // Create a new page in a pristine context.\n   *   const page = await context.newPage();\n   *   // Do stuff\n   *   await page.goto('https://example.com');\n   * })();\n   * ```\n   */\n  override async createIncognitoBrowserContext(\n    options: BrowserContextOptions = {}\n  ): Promise<CDPBrowserContext> {\n    const {proxyServer, proxyBypassList} = options;\n\n    const {browserContextId} = await this.#connection.send(\n      'Target.createBrowserContext',\n      {\n        proxyServer,\n        proxyBypassList: proxyBypassList && proxyBypassList.join(','),\n      }\n    );\n    const context = new CDPBrowserContext(\n      this.#connection,\n      this,\n      browserContextId\n    );\n    this.#contexts.set(browserContextId, context);\n    return context;\n  }\n\n  /**\n   * Returns an array of all open browser contexts. In a newly created browser, this will\n   * return a single instance of {@link BrowserContext}.\n   */\n  override browserContexts(): CDPBrowserContext[] {\n    return [this.#defaultContext, ...Array.from(this.#contexts.values())];\n  }\n\n  /**\n   * Returns the default browser context. The default browser context cannot be closed.\n   */\n  override defaultBrowserContext(): CDPBrowserContext {\n    return this.#defaultContext;\n  }\n\n  /**\n   * @internal\n   */\n  override async _disposeContext(contextId?: string): Promise<void> {\n    if (!contextId) {\n      return;\n    }\n    await this.#connection.send('Target.disposeBrowserContext', {\n      browserContextId: contextId,\n    });\n    this.#contexts.delete(contextId);\n  }\n\n  #createTarget = (\n    targetInfo: Protocol.Target.TargetInfo,\n    session?: CDPSession\n  ) => {\n    const {browserContextId} = targetInfo;\n    const context =\n      browserContextId && this.#contexts.has(browserContextId)\n        ? this.#contexts.get(browserContextId)\n        : this.#defaultContext;\n\n    if (!context) {\n      throw new Error('Missing browser context');\n    }\n\n    const createSession = (isAutoAttachEmulated: boolean) => {\n      return this.#connection._createSession(targetInfo, isAutoAttachEmulated);\n    };\n    const targetForFilter = new OtherTarget(\n      targetInfo,\n      session,\n      context,\n      this.#targetManager,\n      createSession\n    );\n    if (this.#isPageTargetCallback(targetForFilter)) {\n      return new PageTarget(\n        targetInfo,\n        session,\n        context,\n        this.#targetManager,\n        createSession,\n        this.#ignoreHTTPSErrors,\n        this.#defaultViewport ?? null,\n        this.#screenshotTaskQueue\n      );\n    }\n    if (\n      targetInfo.type === 'service_worker' ||\n      targetInfo.type === 'shared_worker'\n    ) {\n      return new WorkerTarget(\n        targetInfo,\n        session,\n        context,\n        this.#targetManager,\n        createSession\n      );\n    }\n    return new OtherTarget(\n      targetInfo,\n      session,\n      context,\n      this.#targetManager,\n      createSession\n    );\n  };\n\n  #onAttachedToTarget = async (target: CDPTarget) => {\n    if (\n      (await target._initializedDeferred.valueOrThrow()) ===\n      InitializationStatus.SUCCESS\n    ) {\n      this.emit(BrowserEmittedEvents.TargetCreated, target);\n      target\n        .browserContext()\n        .emit(BrowserContextEmittedEvents.TargetCreated, target);\n    }\n  };\n\n  #onDetachedFromTarget = async (target: CDPTarget): Promise<void> => {\n    target._initializedDeferred.resolve(InitializationStatus.ABORTED);\n    target._isClosedDeferred.resolve();\n    if (\n      (await target._initializedDeferred.valueOrThrow()) ===\n      InitializationStatus.SUCCESS\n    ) {\n      this.emit(BrowserEmittedEvents.TargetDestroyed, target);\n      target\n        .browserContext()\n        .emit(BrowserContextEmittedEvents.TargetDestroyed, target);\n    }\n  };\n\n  #onTargetChanged = ({target}: {target: CDPTarget}): void => {\n    this.emit(BrowserEmittedEvents.TargetChanged, target);\n    target\n      .browserContext()\n      .emit(BrowserContextEmittedEvents.TargetChanged, target);\n  };\n\n  #onTargetDiscovered = (targetInfo: Protocol.Target.TargetInfo): void => {\n    this.emit('targetdiscovered', targetInfo);\n  };\n\n  /**\n   * The browser websocket endpoint which can be used as an argument to\n   * {@link Puppeteer.connect}.\n   *\n   * @returns The Browser websocket url.\n   *\n   * @remarks\n   *\n   * The format is `ws://${host}:${port}/devtools/browser/<id>`.\n   *\n   * You can find the `webSocketDebuggerUrl` from `http://${host}:${port}/json/version`.\n   * Learn more about the\n   * {@link https://chromedevtools.github.io/devtools-protocol | devtools protocol} and\n   * the {@link\n   * https://chromedevtools.github.io/devtools-protocol/#how-do-i-access-the-browser-target\n   * | browser endpoint}.\n   */\n  override wsEndpoint(): string {\n    return this.#connection.url();\n  }\n\n  /**\n   * Promise which resolves to a new {@link Page} object. The Page is created in\n   * a default browser context.\n   */\n  override async newPage(): Promise<Page> {\n    return this.#defaultContext.newPage();\n  }\n\n  /**\n   * @internal\n   */\n  override async _createPageInContext(contextId?: string): Promise<Page> {\n    const {targetId} = await this.#connection.send('Target.createTarget', {\n      url: 'about:blank',\n      browserContextId: contextId || undefined,\n    });\n    const target = this.#targetManager.getAvailableTargets().get(targetId);\n    if (!target) {\n      throw new Error(`Missing target for page (id = ${targetId})`);\n    }\n    const initialized =\n      (await target._initializedDeferred.valueOrThrow()) ===\n      InitializationStatus.SUCCESS;\n    if (!initialized) {\n      throw new Error(`Failed to create target for page (id = ${targetId})`);\n    }\n    const page = await target.page();\n    if (!page) {\n      throw new Error(\n        `Failed to create a page for context (id = ${contextId})`\n      );\n    }\n    return page;\n  }\n\n  /**\n   * All active targets inside the Browser. In case of multiple browser contexts, returns\n   * an array with all the targets in all browser contexts.\n   */\n  override targets(): CDPTarget[] {\n    return Array.from(\n      this.#targetManager.getAvailableTargets().values()\n    ).filter(target => {\n      return (\n        target._initializedDeferred.value() === InitializationStatus.SUCCESS\n      );\n    });\n  }\n\n  /**\n   * The target associated with the browser.\n   */\n  override target(): CDPTarget {\n    const browserTarget = this.targets().find(target => {\n      return target.type() === 'browser';\n    });\n    if (!browserTarget) {\n      throw new Error('Browser target is not found');\n    }\n    return browserTarget;\n  }\n\n  override async version(): Promise<string> {\n    const version = await this.#getVersion();\n    return version.product;\n  }\n\n  /**\n   * The browser's original user agent. Pages can override the browser user agent with\n   * {@link Page.setUserAgent}.\n   */\n  override async userAgent(): Promise<string> {\n    const version = await this.#getVersion();\n    return version.userAgent;\n  }\n\n  override async close(): Promise<void> {\n    await this.#closeCallback.call(null);\n    this.disconnect();\n  }\n\n  override disconnect(): void {\n    this.#targetManager.dispose();\n    this.#connection.dispose();\n    this._detach();\n  }\n\n  /**\n   * Indicates that the browser is connected.\n   */\n  override isConnected(): boolean {\n    return !this.#connection._closed;\n  }\n\n  #getVersion(): Promise<Protocol.Browser.GetVersionResponse> {\n    return this.#connection.send('Browser.getVersion');\n  }\n}\n\n/**\n * @internal\n */\nexport class CDPBrowserContext extends BrowserContext {\n  #connection: Connection;\n  #browser: CDPBrowser;\n  #id?: string;\n\n  /**\n   * @internal\n   */\n  constructor(connection: Connection, browser: CDPBrowser, contextId?: string) {\n    super();\n    this.#connection = connection;\n    this.#browser = browser;\n    this.#id = contextId;\n  }\n\n  override get id(): string | undefined {\n    return this.#id;\n  }\n\n  /**\n   * An array of all active targets inside the browser context.\n   */\n  override targets(): CDPTarget[] {\n    return this.#browser.targets().filter(target => {\n      return target.browserContext() === this;\n    });\n  }\n\n  /**\n   * This searches for a target in this specific browser context.\n   *\n   * @example\n   * An example of finding a target for a page opened via `window.open`:\n   *\n   * ```ts\n   * await page.evaluate(() => window.open('https://www.example.com/'));\n   * const newWindowTarget = await browserContext.waitForTarget(\n   *   target => target.url() === 'https://www.example.com/'\n   * );\n   * ```\n   *\n   * @param predicate - A function to be run for every target\n   * @param options - An object of options. Accepts a timeout,\n   * which is the maximum wait time in milliseconds.\n   * Pass `0` to disable the timeout. Defaults to 30 seconds.\n   * @returns Promise which resolves to the first target found\n   * that matches the `predicate` function.\n   */\n  override waitForTarget(\n    predicate: (x: Target) => boolean | Promise<boolean>,\n    options: {timeout?: number} = {}\n  ): Promise<Target> {\n    return this.#browser.waitForTarget(target => {\n      return target.browserContext() === this && predicate(target);\n    }, options);\n  }\n\n  /**\n   * An array of all pages inside the browser context.\n   *\n   * @returns Promise which resolves to an array of all open pages.\n   * Non visible pages, such as `\"background_page\"`, will not be listed here.\n   * You can find them using {@link CDPTarget.page | the target page}.\n   */\n  override async pages(): Promise<Page[]> {\n    const pages = await Promise.all(\n      this.targets()\n        .filter(target => {\n          return (\n            target.type() === 'page' ||\n            (target.type() === 'other' &&\n              this.#browser._getIsPageTargetCallback()?.(target))\n          );\n        })\n        .map(target => {\n          return target.page();\n        })\n    );\n    return pages.filter((page): page is Page => {\n      return !!page;\n    });\n  }\n\n  /**\n   * Returns whether BrowserContext is incognito.\n   * The default browser context is the only non-incognito browser context.\n   *\n   * @remarks\n   * The default browser context cannot be closed.\n   */\n  override isIncognito(): boolean {\n    return !!this.#id;\n  }\n\n  /**\n   * @example\n   *\n   * ```ts\n   * const context = browser.defaultBrowserContext();\n   * await context.overridePermissions('https://html5demos.com', [\n   *   'geolocation',\n   * ]);\n   * ```\n   *\n   * @param origin - The origin to grant permissions to, e.g. \"https://example.com\".\n   * @param permissions - An array of permissions to grant.\n   * All permissions that are not listed here will be automatically denied.\n   */\n  override async overridePermissions(\n    origin: string,\n    permissions: Permission[]\n  ): Promise<void> {\n    const protocolPermissions = permissions.map(permission => {\n      const protocolPermission =\n        WEB_PERMISSION_TO_PROTOCOL_PERMISSION.get(permission);\n      if (!protocolPermission) {\n        throw new Error('Unknown permission: ' + permission);\n      }\n      return protocolPermission;\n    });\n    await this.#connection.send('Browser.grantPermissions', {\n      origin,\n      browserContextId: this.#id || undefined,\n      permissions: protocolPermissions,\n    });\n  }\n\n  /**\n   * Clears all permission overrides for the browser context.\n   *\n   * @example\n   *\n   * ```ts\n   * const context = browser.defaultBrowserContext();\n   * context.overridePermissions('https://example.com', ['clipboard-read']);\n   * // do stuff ..\n   * context.clearPermissionOverrides();\n   * ```\n   */\n  override async clearPermissionOverrides(): Promise<void> {\n    await this.#connection.send('Browser.resetPermissions', {\n      browserContextId: this.#id || undefined,\n    });\n  }\n\n  /**\n   * Creates a new page in the browser context.\n   */\n  override newPage(): Promise<Page> {\n    return this.#browser._createPageInContext(this.#id);\n  }\n\n  /**\n   * The browser this browser context belongs to.\n   */\n  override browser(): CDPBrowser {\n    return this.#browser;\n  }\n\n  /**\n   * Closes the browser context. All the targets that belong to the browser context\n   * will be closed.\n   *\n   * @remarks\n   * Only incognito browser contexts can be closed.\n   */\n  override async close(): Promise<void> {\n    assert(this.#id, 'Non-incognito profiles cannot be closed!');\n    await this.#browser._disposeContext(this.#id);\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport {ChildProcess} from 'child_process';\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {EventEmitter} from '../common/EventEmitter.js';\nimport {waitWithTimeout} from '../common/util.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport type {BrowserContext} from './BrowserContext.js';\nimport type {Page} from './Page.js';\nimport type {Target} from './Target.js';\n\n/**\n * BrowserContext options.\n *\n * @public\n */\nexport interface BrowserContextOptions {\n  /**\n   * Proxy server with optional port to use for all requests.\n   * Username and password can be set in `Page.authenticate`.\n   */\n  proxyServer?: string;\n  /**\n   * Bypass the proxy for the given list of hosts.\n   */\n  proxyBypassList?: string[];\n}\n\n/**\n * @internal\n */\nexport type BrowserCloseCallback = () => Promise<void> | void;\n\n/**\n * @public\n */\nexport type TargetFilterCallback = (target: Target) => boolean;\n\n/**\n * @internal\n */\nexport type IsPageTargetCallback = (target: Target) => boolean;\n\n/**\n * @internal\n */\nexport const WEB_PERMISSION_TO_PROTOCOL_PERMISSION = new Map<\n  Permission,\n  Protocol.Browser.PermissionType\n>([\n  ['geolocation', 'geolocation'],\n  ['midi', 'midi'],\n  ['notifications', 'notifications'],\n  // TODO: push isn't a valid type?\n  // ['push', 'push'],\n  ['camera', 'videoCapture'],\n  ['microphone', 'audioCapture'],\n  ['background-sync', 'backgroundSync'],\n  ['ambient-light-sensor', 'sensors'],\n  ['accelerometer', 'sensors'],\n  ['gyroscope', 'sensors'],\n  ['magnetometer', 'sensors'],\n  ['accessibility-events', 'accessibilityEvents'],\n  ['clipboard-read', 'clipboardReadWrite'],\n  ['clipboard-write', 'clipboardReadWrite'],\n  ['clipboard-sanitized-write', 'clipboardSanitizedWrite'],\n  ['payment-handler', 'paymentHandler'],\n  ['persistent-storage', 'durableStorage'],\n  ['idle-detection', 'idleDetection'],\n  // chrome-specific permissions we have.\n  ['midi-sysex', 'midiSysex'],\n]);\n\n/**\n * @public\n */\nexport type Permission =\n  | 'geolocation'\n  | 'midi'\n  | 'notifications'\n  | 'camera'\n  | 'microphone'\n  | 'background-sync'\n  | 'ambient-light-sensor'\n  | 'accelerometer'\n  | 'gyroscope'\n  | 'magnetometer'\n  | 'accessibility-events'\n  | 'clipboard-read'\n  | 'clipboard-write'\n  | 'clipboard-sanitized-write'\n  | 'payment-handler'\n  | 'persistent-storage'\n  | 'idle-detection'\n  | 'midi-sysex';\n\n/**\n * @public\n */\nexport interface WaitForTargetOptions {\n  /**\n   * Maximum wait time in milliseconds. Pass `0` to disable the timeout.\n   * @defaultValue `30_000`\n   */\n  timeout?: number;\n}\n\n/**\n * All the events a {@link Browser | browser instance} may emit.\n *\n * @public\n */\nexport const enum BrowserEmittedEvents {\n  /**\n   * Emitted when Puppeteer gets disconnected from the browser instance. This\n   * might happen because of one of the following:\n   *\n   * - browser is closed or crashed\n   *\n   * - The {@link Browser.disconnect | browser.disconnect } method was called.\n   */\n  Disconnected = 'disconnected',\n\n  /**\n   * Emitted when the url of a target changes. Contains a {@link Target} instance.\n   *\n   * @remarks\n   *\n   * Note that this includes target changes in incognito browser contexts.\n   */\n  TargetChanged = 'targetchanged',\n\n  /**\n   * Emitted when a target is created, for example when a new page is opened by\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/Window/open | window.open}\n   * or by {@link Browser.newPage | browser.newPage}\n   *\n   * Contains a {@link Target} instance.\n   *\n   * @remarks\n   *\n   * Note that this includes target creations in incognito browser contexts.\n   */\n  TargetCreated = 'targetcreated',\n  /**\n   * Emitted when a target is destroyed, for example when a page is closed.\n   * Contains a {@link Target} instance.\n   *\n   * @remarks\n   *\n   * Note that this includes target destructions in incognito browser contexts.\n   */\n  TargetDestroyed = 'targetdestroyed',\n}\n\n/**\n * A Browser is created when Puppeteer connects to a browser instance, either through\n * {@link PuppeteerNode.launch} or {@link Puppeteer.connect}.\n *\n * @remarks\n *\n * The Browser class extends from Puppeteer's {@link EventEmitter} class and will\n * emit various events which are documented in the {@link BrowserEmittedEvents} enum.\n *\n * @example\n * An example of using a {@link Browser} to create a {@link Page}:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://example.com');\n *   await browser.close();\n * })();\n * ```\n *\n * @example\n * An example of disconnecting from and reconnecting to a {@link Browser}:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   // Store the endpoint to be able to reconnect to the browser.\n *   const browserWSEndpoint = browser.wsEndpoint();\n *   // Disconnect puppeteer from the browser.\n *   browser.disconnect();\n *\n *   // Use the endpoint to reestablish a connection\n *   const browser2 = await puppeteer.connect({browserWSEndpoint});\n *   // Close the browser.\n *   await browser2.close();\n * })();\n * ```\n *\n * @public\n */\nexport class Browser extends EventEmitter {\n  /**\n   * @internal\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * @internal\n   */\n  _attach(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  _detach(): void {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  get _targets(): Map<string, Target> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The spawned browser process. Returns `null` if the browser instance was created with\n   * {@link Puppeteer.connect}.\n   */\n  process(): ChildProcess | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  _getIsPageTargetCallback(): IsPageTargetCallback | undefined {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Creates a new incognito browser context. This won't share cookies/cache with other\n   * browser contexts.\n   *\n   * @example\n   *\n   * ```ts\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   // Create a new incognito browser context.\n   *   const context = await browser.createIncognitoBrowserContext();\n   *   // Create a new page in a pristine context.\n   *   const page = await context.newPage();\n   *   // Do stuff\n   *   await page.goto('https://example.com');\n   * })();\n   * ```\n   */\n  createIncognitoBrowserContext(\n    options?: BrowserContextOptions\n  ): Promise<BrowserContext>;\n  createIncognitoBrowserContext(): Promise<BrowserContext> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Returns an array of all open browser contexts. In a newly created browser, this will\n   * return a single instance of {@link BrowserContext}.\n   */\n  browserContexts(): BrowserContext[] {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Returns the default browser context. The default browser context cannot be closed.\n   */\n  defaultBrowserContext(): BrowserContext {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  _disposeContext(contextId?: string): Promise<void>;\n  _disposeContext(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The browser websocket endpoint which can be used as an argument to\n   * {@link Puppeteer.connect}.\n   *\n   * @returns The Browser websocket url.\n   *\n   * @remarks\n   *\n   * The format is `ws://${host}:${port}/devtools/browser/<id>`.\n   *\n   * You can find the `webSocketDebuggerUrl` from `http://${host}:${port}/json/version`.\n   * Learn more about the\n   * {@link https://chromedevtools.github.io/devtools-protocol | devtools protocol} and\n   * the {@link\n   * https://chromedevtools.github.io/devtools-protocol/#how-do-i-access-the-browser-target\n   * | browser endpoint}.\n   */\n  wsEndpoint(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Promise which resolves to a new {@link Page} object. The Page is created in\n   * a default browser context.\n   */\n  newPage(): Promise<Page> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  _createPageInContext(contextId?: string): Promise<Page>;\n  _createPageInContext(): Promise<Page> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * All active targets inside the Browser. In case of multiple browser contexts, returns\n   * an array with all the targets in all browser contexts.\n   */\n  targets(): Target[] {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The target associated with the browser.\n   */\n  target(): Target {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Searches for a target in all browser contexts.\n   *\n   * @param predicate - A function to be run for every target.\n   * @returns The first target found that matches the `predicate` function.\n   *\n   * @example\n   *\n   * An example of finding a target for a page opened via `window.open`:\n   *\n   * ```ts\n   * await page.evaluate(() => window.open('https://www.example.com/'));\n   * const newWindowTarget = await browser.waitForTarget(\n   *   target => target.url() === 'https://www.example.com/'\n   * );\n   * ```\n   */\n  async waitForTarget(\n    predicate: (x: Target) => boolean | Promise<boolean>,\n    options: WaitForTargetOptions = {}\n  ): Promise<Target> {\n    const {timeout = 30000} = options;\n    const targetDeferred = Deferred.create<Target | PromiseLike<Target>>();\n\n    this.on(BrowserEmittedEvents.TargetCreated, check);\n    this.on(BrowserEmittedEvents.TargetChanged, check);\n    try {\n      this.targets().forEach(check);\n      if (!timeout) {\n        return await targetDeferred.valueOrThrow();\n      }\n      return await waitWithTimeout(\n        targetDeferred.valueOrThrow(),\n        'target',\n        timeout\n      );\n    } finally {\n      this.off(BrowserEmittedEvents.TargetCreated, check);\n      this.off(BrowserEmittedEvents.TargetChanged, check);\n    }\n\n    async function check(target: Target): Promise<void> {\n      if ((await predicate(target)) && !targetDeferred.resolved()) {\n        targetDeferred.resolve(target);\n      }\n    }\n  }\n\n  /**\n   * An array of all open pages inside the Browser.\n   *\n   * @remarks\n   *\n   * In case of multiple browser contexts, returns an array with all the pages in all\n   * browser contexts. Non-visible pages, such as `\"background_page\"`, will not be listed\n   * here. You can find them using {@link Target.page}.\n   */\n  async pages(): Promise<Page[]> {\n    const contextPages = await Promise.all(\n      this.browserContexts().map(context => {\n        return context.pages();\n      })\n    );\n    // Flatten array.\n    return contextPages.reduce((acc, x) => {\n      return acc.concat(x);\n    }, []);\n  }\n\n  /**\n   * Get the BISO session ID associated with this browser\n   *\n   * @public\n   */\n  sessionId(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * A string representing the browser name and version.\n   *\n   * @remarks\n   *\n   * For headless browser, this is similar to `HeadlessChrome/61.0.3153.0`. For\n   * non-headless or new-headless, this is similar to `Chrome/61.0.3153.0`. For\n   * Firefox, it is similar to `Firefox/116.0a1`.\n   *\n   * The format of browser.version() might change with future releases of\n   * browsers.\n   */\n  version(): Promise<string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The browser's original user agent. Pages can override the browser user agent with\n   * {@link Page.setUserAgent}.\n   */\n  userAgent(): Promise<string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Closes the browser and all of its pages (if any were opened). The\n   * {@link Browser} object itself is considered to be disposed and cannot be\n   * used anymore.\n   */\n  close(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Disconnects Puppeteer from the browser, but leaves the browser process running.\n   * After calling `disconnect`, the {@link Browser} object is considered disposed and\n   * cannot be used anymore.\n   */\n  disconnect(): void {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Indicates that the browser is connected.\n   */\n  isConnected(): boolean {\n    throw new Error('Not implemented');\n  }\n}\n/**\n * @public\n */\nexport const enum BrowserContextEmittedEvents {\n  /**\n   * Emitted when the url of a target inside the browser context changes.\n   * Contains a {@link Target} instance.\n   */\n  TargetChanged = 'targetchanged',\n\n  /**\n   * Emitted when a target is created within the browser context, for example\n   * when a new page is opened by\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/Window/open | window.open}\n   * or by {@link BrowserContext.newPage | browserContext.newPage}\n   *\n   * Contains a {@link Target} instance.\n   */\n  TargetCreated = 'targetcreated',\n  /**\n   * Emitted when a target is destroyed within the browser context, for example\n   * when a page is closed. Contains a {@link Target} instance.\n   */\n  TargetDestroyed = 'targetdestroyed',\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport mitt, {Emitter, EventHandlerMap} from '../../third_party/mitt/index.js';\n\n/**\n * @public\n */\nexport type EventType = string | symbol;\n/**\n * @public\n */\nexport type Handler<T = unknown> = (event: T) => void;\n\n/**\n * @public\n */\nexport interface CommonEventEmitter {\n  on(event: EventType, handler: Handler): this;\n  off(event: EventType, handler: Handler): this;\n  /* To maintain parity with the built in NodeJS event emitter which uses removeListener\n   * rather than `off`.\n   * If you're implementing new code you should use `off`.\n   */\n  addListener(event: EventType, handler: Handler): this;\n  removeListener(event: EventType, handler: Handler): this;\n  emit(event: EventType, eventData?: unknown): boolean;\n  once(event: EventType, handler: Handler): this;\n  listenerCount(event: string): number;\n\n  removeAllListeners(event?: EventType): this;\n}\n\n/**\n * The EventEmitter class that many Puppeteer classes extend.\n *\n * @remarks\n *\n * This allows you to listen to events that Puppeteer classes fire and act\n * accordingly. Therefore you'll mostly use {@link EventEmitter.on | on} and\n * {@link EventEmitter.off | off} to bind\n * and unbind to event listeners.\n *\n * @public\n */\nexport class EventEmitter implements CommonEventEmitter {\n  private emitter: Emitter<Record<string | symbol, any>>;\n  private eventsMap: EventHandlerMap<Record<string | symbol, any>> = new Map();\n\n  /**\n   * @internal\n   */\n  constructor() {\n    this.emitter = mitt(this.eventsMap);\n  }\n\n  /**\n   * Bind an event listener to fire when an event occurs.\n   * @param event - the event type you'd like to listen to. Can be a string or symbol.\n   * @param handler - the function to be called when the event occurs.\n   * @returns `this` to enable you to chain method calls.\n   */\n  on(event: EventType, handler: Handler<any>): this {\n    this.emitter.on(event, handler);\n    return this;\n  }\n\n  /**\n   * Remove an event listener from firing.\n   * @param event - the event type you'd like to stop listening to.\n   * @param handler - the function that should be removed.\n   * @returns `this` to enable you to chain method calls.\n   */\n  off(event: EventType, handler: Handler<any>): this {\n    this.emitter.off(event, handler);\n    return this;\n  }\n\n  /**\n   * Remove an event listener.\n   * @deprecated please use {@link EventEmitter.off} instead.\n   */\n  removeListener(event: EventType, handler: Handler<any>): this {\n    this.off(event, handler);\n    return this;\n  }\n\n  /**\n   * Add an event listener.\n   * @deprecated please use {@link EventEmitter.on} instead.\n   */\n  addListener(event: EventType, handler: Handler<any>): this {\n    this.on(event, handler);\n    return this;\n  }\n\n  /**\n   * Emit an event and call any associated listeners.\n   *\n   * @param event - the event you'd like to emit\n   * @param eventData - any data you'd like to emit with the event\n   * @returns `true` if there are any listeners, `false` if there are not.\n   */\n  emit(event: EventType, eventData?: unknown): boolean {\n    this.emitter.emit(event, eventData);\n    return this.eventListenersCount(event) > 0;\n  }\n\n  /**\n   * Like `on` but the listener will only be fired once and then it will be removed.\n   * @param event - the event you'd like to listen to\n   * @param handler - the handler function to run when the event occurs\n   * @returns `this` to enable you to chain method calls.\n   */\n  once(event: EventType, handler: Handler<any>): this {\n    const onceHandler: Handler<any> = eventData => {\n      handler(eventData);\n      this.off(event, onceHandler);\n    };\n\n    return this.on(event, onceHandler);\n  }\n\n  /**\n   * Gets the number of listeners for a given event.\n   *\n   * @param event - the event to get the listener count for\n   * @returns the number of listeners bound to the given event\n   */\n  listenerCount(event: EventType): number {\n    return this.eventListenersCount(event);\n  }\n\n  /**\n   * Removes all listeners. If given an event argument, it will remove only\n   * listeners for that event.\n   * @param event - the event to remove listeners for.\n   * @returns `this` to enable you to chain method calls.\n   */\n  removeAllListeners(event?: EventType): this {\n    if (event) {\n      this.eventsMap.delete(event);\n    } else {\n      this.eventsMap.clear();\n    }\n    return this;\n  }\n\n  private eventListenersCount(event: EventType): number {\n    return this.eventsMap.get(event)?.length || 0;\n  }\n}\n", "function n(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map((function(n){n(e)})),(i=n.get(\"*\"))&&i.slice().map((function(n){n(t,e)}))}}}export{n as default};\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Buffer} from 'node:buffer';\nimport type {Readable} from 'node:stream';\n\nimport type {Protocol} from 'devtools-protocol';\n\nimport type {ElementHandle} from '../api/ElementHandle.js';\nimport type {JSHandle} from '../api/JSHandle.js';\nimport {Page} from '../api/Page.js';\n// import {isNode} from '../environment.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport type {CDPSession} from './Connection.js';\nimport {debug} from './Debug.js';\nimport {CDPElementHandle} from './ElementHandle.js';\nimport type {CommonEventEmitter} from './EventEmitter.js';\nimport type {ExecutionContext} from './ExecutionContext.js';\nimport {CDPJSHandle} from './JSHandle.js';\n\n/**\n * @internal\n */\nexport const debugError = debug('puppeteer:error');\n\n/**\n * @internal\n */\nexport function createEvaluationError(\n  details: Protocol.Runtime.ExceptionDetails\n): unknown {\n  let name: string;\n  let message: string;\n  if (!details.exception) {\n    name = 'Error';\n    message = details.text;\n  } else if (\n    (details.exception.type !== 'object' ||\n      details.exception.subtype !== 'error') &&\n    !details.exception.objectId\n  ) {\n    return valueFromRemoteObject(details.exception);\n  } else {\n    const detail = getErrorDetails(details);\n    name = detail.name;\n    message = detail.message;\n  }\n  const messageHeight = message.split('\\n').length;\n  const error = new Error(message);\n  error.name = name;\n  const stackLines = error.stack!.split('\\n');\n  const messageLines = stackLines.splice(0, messageHeight);\n\n  // The first line is this function which we ignore.\n  stackLines.shift();\n  if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n    for (const frame of details.stackTrace.callFrames.reverse()) {\n      if (\n        PuppeteerURL.isPuppeteerURL(frame.url) &&\n        frame.url !== PuppeteerURL.INTERNAL_URL\n      ) {\n        const url = PuppeteerURL.parse(frame.url);\n        stackLines.unshift(\n          `    at ${frame.functionName || url.functionName} (${\n            url.functionName\n          } at ${url.siteString}, <anonymous>:${frame.lineNumber}:${\n            frame.columnNumber\n          })`\n        );\n      } else {\n        stackLines.push(\n          `    at ${frame.functionName || '<anonymous>'} (${frame.url}:${\n            frame.lineNumber\n          }:${frame.columnNumber})`\n        );\n      }\n      if (stackLines.length >= Error.stackTraceLimit) {\n        break;\n      }\n    }\n  }\n\n  error.stack = [...messageLines, ...stackLines].join('\\n');\n  return error;\n}\n\n/**\n * @internal\n */\nexport function createClientError(\n  details: Protocol.Runtime.ExceptionDetails\n): unknown {\n  let name: string;\n  let message: string;\n  if (!details.exception) {\n    name = 'Error';\n    message = details.text;\n  } else if (\n    (details.exception.type !== 'object' ||\n      details.exception.subtype !== 'error') &&\n    !details.exception.objectId\n  ) {\n    return valueFromRemoteObject(details.exception);\n  } else {\n    const detail = getErrorDetails(details);\n    name = detail.name;\n    message = detail.message;\n  }\n  const messageHeight = message.split('\\n').length;\n  const error = new Error(message);\n  error.name = name;\n\n  const stackLines = [];\n  const messageLines = error.stack!.split('\\n').splice(0, messageHeight);\n  if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n    for (const frame of details.stackTrace.callFrames.reverse()) {\n      stackLines.push(\n        `    at ${frame.functionName || '<anonymous>'} (${frame.url}:${\n          frame.lineNumber\n        }:${frame.columnNumber})`\n      );\n      if (stackLines.length >= Error.stackTraceLimit) {\n        break;\n      }\n    }\n  }\n\n  error.stack = [...messageLines, ...stackLines].join('\\n');\n  return error;\n}\n\nconst getErrorDetails = (details: Protocol.Runtime.ExceptionDetails) => {\n  let name = '';\n  let message: string;\n  const lines = details.exception?.description?.split('\\n    at ') ?? [];\n  const size = Math.min(\n    details.stackTrace?.callFrames.length ?? 0,\n    lines.length - 1\n  );\n  lines.splice(-size, size);\n  if (details.exception?.className) {\n    name = details.exception.className;\n  }\n  message = lines.join('\\n');\n  if (name && message.startsWith(`${name}: `)) {\n    message = message.slice(name.length + 2);\n  }\n  return {message, name};\n};\n\n/**\n * @internal\n */\nconst SOURCE_URL = Symbol('Source URL for Puppeteer evaluation scripts');\n\n/**\n * @internal\n */\nexport class PuppeteerURL {\n  static INTERNAL_URL = 'pptr:internal';\n\n  static fromCallSite(\n    functionName: string,\n    site: NodeJS.CallSite\n  ): PuppeteerURL {\n    const url = new PuppeteerURL();\n    url.#functionName = functionName;\n    url.#siteString = site.toString();\n    return url;\n  }\n\n  static parse = (url: string): PuppeteerURL => {\n    url = url.slice('pptr:'.length);\n    const [functionName = '', siteString = ''] = url.split(';');\n    const puppeteerUrl = new PuppeteerURL();\n    puppeteerUrl.#functionName = functionName;\n    puppeteerUrl.#siteString = decodeURIComponent(siteString);\n    return puppeteerUrl;\n  };\n\n  static isPuppeteerURL = (url: string): boolean => {\n    return url.startsWith('pptr:');\n  };\n\n  #functionName!: string;\n  #siteString!: string;\n\n  get functionName(): string {\n    return this.#functionName;\n  }\n\n  get siteString(): string {\n    return this.#siteString;\n  }\n\n  toString(): string {\n    return `pptr:${[\n      this.#functionName,\n      encodeURIComponent(this.#siteString),\n    ].join(';')}`;\n  }\n}\n\n/**\n * @internal\n */\nexport const withSourcePuppeteerURLIfNone = <T extends NonNullable<unknown>>(\n  functionName: string,\n  object: T\n): T => {\n  if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n    return object;\n  }\n  const original = Error.prepareStackTrace;\n  Error.prepareStackTrace = (_, stack) => {\n    // First element is the function. Second element is the caller of this\n    // function. Third element is the caller of the caller of this function\n    // which is precisely what we want.\n    return stack[2];\n  };\n  const site = new Error().stack as unknown as NodeJS.CallSite;\n  Error.prepareStackTrace = original;\n  return Object.assign(object, {\n    [SOURCE_URL]: PuppeteerURL.fromCallSite(functionName, site),\n  });\n};\n\n/**\n * @internal\n */\nexport const getSourcePuppeteerURLIfAvailable = <\n  T extends NonNullable<unknown>,\n>(\n  object: T\n): PuppeteerURL | undefined => {\n  if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n    return object[SOURCE_URL as keyof T] as PuppeteerURL;\n  }\n  return undefined;\n};\n\n/**\n * @internal\n */\nexport function valueFromRemoteObject(\n  remoteObject: Protocol.Runtime.RemoteObject\n): any {\n  assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint') {\n      return BigInt(remoteObject.unserializableValue.replace('n', ''));\n    }\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n      case 'NaN':\n        return NaN;\n      case 'Infinity':\n        return Infinity;\n      case '-Infinity':\n        return -Infinity;\n      default:\n        throw new Error(\n          'Unsupported unserializable value: ' +\n            remoteObject.unserializableValue\n        );\n    }\n  }\n  return remoteObject.value;\n}\n\n/**\n * @internal\n */\nexport async function releaseObject(\n  client: CDPSession,\n  remoteObject: Protocol.Runtime.RemoteObject\n): Promise<void> {\n  if (!remoteObject.objectId) {\n    return;\n  }\n  await client\n    .send('Runtime.releaseObject', {objectId: remoteObject.objectId})\n    .catch(error => {\n      // Exceptions might happen in case of a page been navigated or closed.\n      // Swallow these since they are harmless and we don't leak anything in this case.\n      debugError(error);\n    });\n}\n\n/**\n * @internal\n */\nexport interface PuppeteerEventListener {\n  emitter: CommonEventEmitter;\n  eventName: string | symbol;\n  handler: (...args: any[]) => void;\n}\n\n/**\n * @internal\n */\nexport function addEventListener(\n  emitter: CommonEventEmitter,\n  eventName: string | symbol,\n  handler: (...args: any[]) => void\n): PuppeteerEventListener {\n  emitter.on(eventName, handler);\n  return {emitter, eventName, handler};\n}\n\n/**\n * @internal\n */\nexport function removeEventListeners(\n  listeners: Array<{\n    emitter: CommonEventEmitter;\n    eventName: string | symbol;\n    handler: (...args: any[]) => void;\n  }>\n): void {\n  for (const listener of listeners) {\n    listener.emitter.removeListener(listener.eventName, listener.handler);\n  }\n  listeners.length = 0;\n}\n\n/**\n * @internal\n */\nexport const isString = (obj: unknown): obj is string => {\n  return typeof obj === 'string' || obj instanceof String;\n};\n\n/**\n * @internal\n */\nexport const isNumber = (obj: unknown): obj is number => {\n  return typeof obj === 'number' || obj instanceof Number;\n};\n\n/**\n * @internal\n */\nexport const isPlainObject = (obj: unknown): obj is Record<any, unknown> => {\n  return typeof obj === 'object' && obj?.constructor === Object;\n};\n\n/**\n * @internal\n */\nexport const isRegExp = (obj: unknown): obj is RegExp => {\n  return typeof obj === 'object' && obj?.constructor === RegExp;\n};\n\n/**\n * @internal\n */\nexport const isDate = (obj: unknown): obj is Date => {\n  return typeof obj === 'object' && obj?.constructor === Date;\n};\n\n/**\n * @internal\n */\nexport async function waitForEvent<T>(\n  emitter: CommonEventEmitter,\n  eventName: string | symbol,\n  predicate: (event: T) => Promise<boolean> | boolean,\n  timeout: number,\n  abortPromise: Promise<Error> | Deferred<Error>\n): Promise<T> {\n  const deferred = Deferred.create<T>({\n    message: `Timeout exceeded while waiting for event ${String(eventName)}`,\n    timeout,\n  });\n  const listener = addEventListener(emitter, eventName, async event => {\n    if (await predicate(event)) {\n      deferred.resolve(event);\n    }\n  });\n\n  try {\n    const response = await Deferred.race<T | Error>([deferred, abortPromise]);\n    if (isErrorLike(response)) {\n      throw response;\n    }\n\n    return response;\n  } catch (error) {\n    throw error;\n  } finally {\n    removeEventListeners([listener]);\n  }\n}\n\n/**\n * @internal\n */\nexport function createJSHandle(\n  context: ExecutionContext,\n  remoteObject: Protocol.Runtime.RemoteObject\n): JSHandle | ElementHandle<Node> {\n  if (remoteObject.subtype === 'node' && context._world) {\n    return new CDPElementHandle(context, remoteObject, context._world.frame());\n  }\n  return new CDPJSHandle(context, remoteObject);\n}\n\n/**\n * @internal\n */\nexport function evaluationString(\n  fun: Function | string,\n  ...args: unknown[]\n): string {\n  if (isString(fun)) {\n    assert(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n\n  function serializeArgument(arg: unknown): string {\n    if (Object.is(arg, undefined)) {\n      return 'undefined';\n    }\n    return JSON.stringify(arg);\n  }\n\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n\n/**\n * @internal\n */\nexport function addPageBinding(type: string, name: string): void {\n  // This is the CDP binding.\n  // @ts-expect-error: In a different context.\n  const callCDP = globalThis[name];\n\n  // We replace the CDP binding with a Puppeteer binding.\n  Object.assign(globalThis, {\n    [name](...args: unknown[]): Promise<unknown> {\n      // This is the Puppeteer binding.\n      // @ts-expect-error: In a different context.\n      const callPuppeteer = globalThis[name];\n      callPuppeteer.args ??= new Map();\n      callPuppeteer.callbacks ??= new Map();\n\n      const seq = (callPuppeteer.lastSeq ?? 0) + 1;\n      callPuppeteer.lastSeq = seq;\n      callPuppeteer.args.set(seq, args);\n\n      callCDP(\n        JSON.stringify({\n          type,\n          name,\n          seq,\n          args,\n          isTrivial: !args.some(value => {\n            return value instanceof Node;\n          }),\n        })\n      );\n\n      return new Promise((resolve, reject) => {\n        callPuppeteer.callbacks.set(seq, {\n          resolve(value: unknown) {\n            callPuppeteer.args.delete(seq);\n            resolve(value);\n          },\n          reject(value?: unknown) {\n            callPuppeteer.args.delete(seq);\n            reject(value);\n          },\n        });\n      });\n    },\n  });\n}\n\n/**\n * @internal\n */\nexport function pageBindingInitString(type: string, name: string): string {\n  return evaluationString(addPageBinding, type, name);\n}\n\n/**\n * @internal\n */\nexport async function waitWithTimeout<T>(\n  promise: Promise<T>,\n  taskName: string,\n  timeout: number\n): Promise<T> {\n  const deferred = Deferred.create<never>({\n    message: `waiting for ${taskName} failed: timeout ${timeout}ms exceeded`,\n    timeout,\n  });\n\n  return await Deferred.race([promise, deferred]);\n}\n\n/**\n * @internal\n */\nlet fs: typeof import('fs/promises') | null = null;\n/**\n * @internal\n */\nexport async function importFSPromises(): Promise<\n  typeof import('fs/promises')\n> {\n  if (!fs) {\n    try {\n      fs = await import('fs/promises');\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error(\n          'Cannot write to a path outside of a Node-like environment. fs'\n        );\n      }\n      throw error;\n    }\n  }\n  return fs;\n}\n\n/**\n * @internal\n */\nexport async function getReadableAsBuffer(\n  readable: Readable,\n  path?: string\n): Promise<Buffer | null> {\n  const buffers = [];\n  if (path) {\n    throw new Error(\n      'Cannot write to a path outside of a Node-like environment.'\n    );\n  } else {\n    for await (const chunk of readable) {\n      buffers.push(chunk);\n    }\n  }\n  try {\n    return Buffer.concat(buffers);\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n}\n\n/**\n * @internal\n */\nexport async function getReadableFromProtocolStream(\n  client: CDPSession,\n  handle: string\n): Promise<Readable> {\n  // TODO: Once Node 18 becomes the lowest supported version, we can migrate to\n  // ReadableStream.\n  // if (!isNode) {\n  //   throw new Error('Cannot create a stream outside of Node.js environment.');\n  // }\n\n  const {Readable} = await import('node:stream');\n\n  let eof = false;\n  return new Readable({\n    async read(size: number) {\n      if (eof) {\n        return;\n      }\n\n      try {\n        const response = await client.send('IO.read', {handle, size});\n        this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n        if (response.eof) {\n          eof = true;\n          await client.send('IO.close', {handle});\n          this.push(null);\n        }\n      } catch (error) {\n        if (isErrorLike(error)) {\n          this.destroy(error);\n          return;\n        }\n        throw error;\n      }\n    },\n  });\n}\n\n/**\n * @internal\n */\nexport async function setPageContent(\n  page: Pick<Page, 'evaluate'>,\n  content: string\n): Promise<void> {\n  // We rely upon the fact that document.open() will reset frame lifecycle with \"init\"\n  // lifecycle event. @see https://crrev.com/608658\n  return page.evaluate(html => {\n    document.open();\n    document.write(html);\n    document.close();\n  }, content);\n}\n\n/**\n * @internal\n */\nexport function getPageContent(): string {\n  let content = '';\n  for (const node of document.childNodes) {\n    switch (node) {\n      case document.documentElement:\n        content += document.documentElement.outerHTML;\n        break;\n      default:\n        content += new XMLSerializer().serializeToString(node);\n        break;\n    }\n  }\n\n  return content;\n}\n\n/**\n * @internal\n */\nexport function validateDialogType(\n  type: string\n): 'alert' | 'confirm' | 'prompt' | 'beforeunload' {\n  let dialogType = null;\n  const validDialogTypes = new Set([\n    'alert',\n    'confirm',\n    'prompt',\n    'beforeunload',\n  ]);\n\n  if (validDialogTypes.has(type)) {\n    dialogType = type;\n  }\n  assert(dialogType, `Unknown javascript dialog type: ${type}`);\n  return dialogType as 'alert' | 'confirm' | 'prompt' | 'beforeunload';\n}\n", "import {TimeoutError} from '../common/Errors.js';\n\n/**\n * @internal\n */\nexport interface DeferredOptions {\n  message: string;\n  timeout: number;\n}\n\n/**\n * Creates and returns a deferred object along with the resolve/reject functions.\n *\n * If the deferred has not been resolved/rejected within the `timeout` period,\n * the deferred gets resolves with a timeout error. `timeout` has to be greater than 0 or\n * it is ignored.\n *\n * @internal\n */\nexport class Deferred<T> {\n  #isResolved = false;\n  #isRejected = false;\n  #value: T | Error | undefined;\n  #resolver: (value: void) => void = () => {};\n  #taskPromise = new Promise<void>(resolve => {\n    this.#resolver = resolve;\n  });\n  #timeoutId: ReturnType<typeof setTimeout> | undefined;\n\n  constructor(opts?: DeferredOptions) {\n    this.#timeoutId =\n      opts && opts.timeout > 0\n        ? setTimeout(() => {\n            this.reject(new TimeoutError(opts.message));\n          }, opts.timeout)\n        : undefined;\n  }\n\n  #finish(value: T | Error) {\n    clearTimeout(this.#timeoutId);\n    this.#value = value;\n    this.#resolver();\n  }\n\n  resolve(value: T): void {\n    if (this.#isRejected || this.#isResolved) {\n      return;\n    }\n    this.#isResolved = true;\n    this.#finish(value);\n  }\n\n  reject(error: Error): void {\n    if (this.#isRejected || this.#isResolved) {\n      return;\n    }\n    this.#isRejected = true;\n    this.#finish(error);\n  }\n\n  resolved(): boolean {\n    return this.#isResolved;\n  }\n\n  finished(): boolean {\n    return this.#isResolved || this.#isRejected;\n  }\n\n  value(): T | Error | undefined {\n    return this.#value;\n  }\n\n  async valueOrThrow(): Promise<T> {\n    await this.#taskPromise;\n    if (this.#isRejected) {\n      throw this.#value;\n    }\n    return this.#value as T;\n  }\n\n  static create<R>(opts?: DeferredOptions): Deferred<R> {\n    return new Deferred<R>(opts);\n  }\n\n  static async race<R>(\n    awaitables: Array<Promise<R> | Deferred<R>>\n  ): Promise<R> {\n    const deferredWithTimeout = new Set<Deferred<R>>();\n    try {\n      const promises = awaitables.map(value => {\n        if (value instanceof Deferred) {\n          if (value.#timeoutId) {\n            deferredWithTimeout.add(value);\n          }\n\n          return value.valueOrThrow();\n        }\n\n        return value;\n      });\n      // eslint-disable-next-line no-restricted-syntax\n      return await Promise.race(promises);\n    } finally {\n      for (const deferred of deferredWithTimeout) {\n        // We need to stop the timeout else\n        // Node.JS will keep running the event loop till the\n        // timer executes\n        deferred.reject(new Error('Timeout cleared'));\n      }\n    }\n  }\n}\n", "/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @deprecated Do not use.\n *\n * @public\n */\nexport class CustomError extends Error {\n  /**\n   * @internal\n   */\n  constructor(message?: string) {\n    super(message);\n    this.name = this.constructor.name;\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\n/**\n * TimeoutError is emitted whenever certain operations are terminated due to\n * timeout.\n *\n * @remarks\n * Example operations are {@link Page.waitForSelector | page.waitForSelector} or\n * {@link PuppeteerNode.launch | puppeteer.launch}.\n *\n * @public\n */\nexport class TimeoutError extends CustomError {}\n\n/**\n * ProtocolError is emitted whenever there is an error from the protocol.\n *\n * @public\n */\nexport class ProtocolError extends CustomError {\n  #code?: number;\n  #originalMessage = '';\n\n  set code(code: number | undefined) {\n    this.#code = code;\n  }\n  /**\n   * @readonly\n   * @public\n   */\n  get code(): number | undefined {\n    return this.#code;\n  }\n\n  set originalMessage(originalMessage: string) {\n    this.#originalMessage = originalMessage;\n  }\n  /**\n   * @readonly\n   * @public\n   */\n  get originalMessage(): string {\n    return this.#originalMessage;\n  }\n}\n\n/**\n * @internal\n */\nexport class TargetCloseError extends ProtocolError {}\n\n/**\n * @deprecated Do not use.\n *\n * @public\n */\nexport interface PuppeteerErrors {\n  TimeoutError: typeof TimeoutError;\n  ProtocolError: typeof ProtocolError;\n}\n\n/**\n * @deprecated Import error classes directly.\n *\n * Puppeteer methods might throw errors if they are unable to fulfill a request.\n * For example, `page.waitForSelector(selector[, options])` might fail if the\n * selector doesn't match any nodes during the given timeframe.\n *\n * For certain types of errors Puppeteer uses specific error classes. These\n * classes are available via `puppeteer.errors`.\n *\n * @example\n * An example of handling a timeout error:\n *\n * ```ts\n * try {\n *   await page.waitForSelector('.foo');\n * } catch (e) {\n *   if (e instanceof TimeoutError) {\n *     // Do something if this is a timeout.\n *   }\n * }\n * ```\n *\n * @public\n */\nexport const errors: PuppeteerErrors = Object.freeze({\n  TimeoutError,\n  ProtocolError,\n});\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isNode} from '../environment.js';\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var __PUPPETEER_DEBUG: string;\n}\n\n/**\n * @internal\n */\nlet debugModule: typeof import('debug') | null = null;\n/**\n * @internal\n */\nexport async function importDebug(): Promise<typeof import('debug')> {\n  if (!debugModule) {\n    debugModule = (await import('debug')).default;\n  }\n  return debugModule;\n}\n\n/**\n * A debug function that can be used in any environment.\n *\n * @remarks\n * If used in Node, it falls back to the\n * {@link https://www.npmjs.com/package/debug | debug module}. In the browser it\n * uses `console.log`.\n *\n * In Node, use the `DEBUG` environment variable to control logging:\n *\n * ```\n * DEBUG=* // logs all channels\n * DEBUG=foo // logs the `foo` channel\n * DEBUG=foo* // logs any channels starting with `foo`\n * ```\n *\n * In the browser, set `window.__PUPPETEER_DEBUG` to a string:\n *\n * ```\n * window.__PUPPETEER_DEBUG='*'; // logs all channels\n * window.__PUPPETEER_DEBUG='foo'; // logs the `foo` channel\n * window.__PUPPETEER_DEBUG='foo*'; // logs any channels starting with `foo`\n * ```\n *\n * @example\n *\n * ```\n * const log = debug('Page');\n *\n * log('new page created')\n * // logs \"Page: new page created\"\n * ```\n *\n * @param prefix - this will be prefixed to each log.\n * @returns a function that can be called to log to that debug channel.\n *\n * @internal\n */\nexport const debug = (prefix: string): ((...args: unknown[]) => void) => {\n  if (isNode) {\n    return async (...logArgs: unknown[]) => {\n      if (captureLogs) {\n        capturedLogs.push(prefix + logArgs);\n      }\n      (await importDebug())(prefix)(logArgs);\n    };\n  }\n\n  return (...logArgs: unknown[]): void => {\n    const debugLevel = (globalThis as any).__PUPPETEER_DEBUG;\n    if (!debugLevel) {\n      return;\n    }\n\n    const everythingShouldBeLogged = debugLevel === '*';\n\n    const prefixMatchesDebugLevel =\n      everythingShouldBeLogged ||\n      /**\n       * If the debug level is `foo*`, that means we match any prefix that\n       * starts with `foo`. If the level is `foo`, we match only the prefix\n       * `foo`.\n       */\n      (debugLevel.endsWith('*')\n        ? prefix.startsWith(debugLevel)\n        : prefix === debugLevel);\n\n    if (!prefixMatchesDebugLevel) {\n      return;\n    }\n\n    // eslint-disable-next-line no-console\n    console.log(`${prefix}:`, ...logArgs);\n  };\n};\n\n/**\n * @internal\n */\nlet capturedLogs: string[] = [];\n/**\n * @internal\n */\nlet captureLogs = false;\n\n/**\n * @internal\n */\nexport function setLogCapture(value: boolean): void {\n  capturedLogs = [];\n  captureLogs = value;\n}\n\n/**\n * @internal\n */\nexport function getCapturedLogs(): string[] {\n  return capturedLogs;\n}\n", "/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {\n  AutofillData,\n  BoundingBox,\n  BoxModel,\n  ClickOptions,\n  ElementHandle,\n  Offset,\n  Point,\n} from '../api/ElementHandle.js';\nimport {KeyPressOptions, KeyboardTypeOptions} from '../api/Input.js';\nimport {Page, ScreenshotOptions} from '../api/Page.js';\nimport {assert} from '../util/assert.js';\n\nimport {CDPSession} from './Connection.js';\nimport {ExecutionContext} from './ExecutionContext.js';\nimport {Frame} from './Frame.js';\nimport {FrameManager} from './FrameManager.js';\nimport {WaitForSelectorOptions} from './IsolatedWorld.js';\nimport {CDPJSHandle} from './JSHandle.js';\nimport {CDPPage} from './Page.js';\nimport {NodeFor} from './types.js';\nimport {KeyInput} from './USKeyboardLayout.js';\nimport {debugError} from './util.js';\n\nconst applyOffsetsToQuad = (\n  quad: Point[],\n  offsetX: number,\n  offsetY: number\n) => {\n  return quad.map(part => {\n    return {x: part.x + offsetX, y: part.y + offsetY};\n  });\n};\n\n/**\n * The CDPElementHandle extends ElementHandle now to keep compatibility\n * with `instanceof` because of that we need to have methods for\n * CDPJSHandle to in this implementation as well.\n *\n * @internal\n */\nexport class CDPElementHandle<\n  ElementType extends Node = Element,\n> extends ElementHandle<ElementType> {\n  #frame: Frame;\n  declare handle: CDPJSHandle<ElementType>;\n\n  constructor(\n    context: ExecutionContext,\n    remoteObject: Protocol.Runtime.RemoteObject,\n    frame: Frame\n  ) {\n    super(new CDPJSHandle(context, remoteObject));\n    this.#frame = frame;\n  }\n\n  /**\n   * @internal\n   */\n  override executionContext(): ExecutionContext {\n    return this.handle.executionContext();\n  }\n\n  /**\n   * @internal\n   */\n  override get client(): CDPSession {\n    return this.handle.client;\n  }\n\n  override remoteObject(): Protocol.Runtime.RemoteObject {\n    return this.handle.remoteObject();\n  }\n\n  get #frameManager(): FrameManager {\n    return this.#frame._frameManager;\n  }\n\n  get #page(): Page {\n    return this.#frame.page();\n  }\n\n  override get frame(): Frame {\n    return this.#frame;\n  }\n\n  override async $<Selector extends string>(\n    selector: Selector\n  ): Promise<CDPElementHandle<NodeFor<Selector>> | null> {\n    return super.$(selector) as Promise<CDPElementHandle<\n      NodeFor<Selector>\n    > | null>;\n  }\n\n  override async $$<Selector extends string>(\n    selector: Selector\n  ): Promise<Array<CDPElementHandle<NodeFor<Selector>>>> {\n    return super.$$(selector) as Promise<\n      Array<CDPElementHandle<NodeFor<Selector>>>\n    >;\n  }\n\n  override async waitForSelector<Selector extends string>(\n    selector: Selector,\n    options?: WaitForSelectorOptions\n  ): Promise<CDPElementHandle<NodeFor<Selector>> | null> {\n    return (await super.waitForSelector(selector, options)) as CDPElementHandle<\n      NodeFor<Selector>\n    > | null;\n  }\n\n  override async contentFrame(): Promise<Frame | null> {\n    const nodeInfo = await this.client.send('DOM.describeNode', {\n      objectId: this.id,\n    });\n    if (typeof nodeInfo.node.frameId !== 'string') {\n      return null;\n    }\n    return this.#frameManager.frame(nodeInfo.node.frameId);\n  }\n\n  override async scrollIntoView(\n    this: CDPElementHandle<Element>\n  ): Promise<void> {\n    await this.assertConnectedElement();\n    try {\n      await this.client.send('DOM.scrollIntoViewIfNeeded', {\n        objectId: this.id,\n      });\n    } catch (error) {\n      debugError(error);\n      // Fallback to Element.scrollIntoView if DOM.scrollIntoViewIfNeeded is not supported\n      await super.scrollIntoView();\n    }\n  }\n\n  async #getOOPIFOffsets(\n    frame: Frame\n  ): Promise<{offsetX: number; offsetY: number}> {\n    let offsetX = 0;\n    let offsetY = 0;\n    let currentFrame: Frame | null = frame;\n    while (currentFrame && currentFrame.parentFrame()) {\n      const parent = currentFrame.parentFrame();\n      if (!currentFrame.isOOPFrame() || !parent) {\n        currentFrame = parent;\n        continue;\n      }\n      const {backendNodeId} = await parent._client().send('DOM.getFrameOwner', {\n        frameId: currentFrame._id,\n      });\n      const result = await parent._client().send('DOM.getBoxModel', {\n        backendNodeId: backendNodeId,\n      });\n      if (!result) {\n        break;\n      }\n      const contentBoxQuad = result.model.content;\n      const topLeftCorner = this.#fromProtocolQuad(contentBoxQuad)[0];\n      offsetX += topLeftCorner!.x;\n      offsetY += topLeftCorner!.y;\n      currentFrame = parent;\n    }\n    return {offsetX, offsetY};\n  }\n\n  override async clickablePoint(offset?: Offset): Promise<Point> {\n    const [result, layoutMetrics] = await Promise.all([\n      this.client\n        .send('DOM.getContentQuads', {\n          objectId: this.id,\n        })\n        .catch(debugError),\n      (this.#page as CDPPage)._client().send('Page.getLayoutMetrics'),\n    ]);\n    if (!result || !result.quads.length) {\n      throw new Error('Node is either not clickable or not an HTMLElement');\n    }\n    // Filter out quads that have too small area to click into.\n    // Fallback to `layoutViewport` in case of using Firefox.\n    const {clientWidth, clientHeight} =\n      layoutMetrics.cssLayoutViewport || layoutMetrics.layoutViewport;\n    const {offsetX, offsetY} = await this.#getOOPIFOffsets(this.#frame);\n    const quads = result.quads\n      .map(quad => {\n        return this.#fromProtocolQuad(quad);\n      })\n      .map(quad => {\n        return applyOffsetsToQuad(quad, offsetX, offsetY);\n      })\n      .map(quad => {\n        return this.#intersectQuadWithViewport(quad, clientWidth, clientHeight);\n      })\n      .filter(quad => {\n        return computeQuadArea(quad) > 1;\n      });\n    if (!quads.length) {\n      throw new Error('Node is either not clickable or not an HTMLElement');\n    }\n    const quad = quads[0]!;\n    if (offset) {\n      // Return the point of the first quad identified by offset.\n      let minX = Number.MAX_SAFE_INTEGER;\n      let minY = Number.MAX_SAFE_INTEGER;\n      for (const point of quad) {\n        if (point.x < minX) {\n          minX = point.x;\n        }\n        if (point.y < minY) {\n          minY = point.y;\n        }\n      }\n      if (\n        minX !== Number.MAX_SAFE_INTEGER &&\n        minY !== Number.MAX_SAFE_INTEGER\n      ) {\n        return {\n          x: minX + offset.x,\n          y: minY + offset.y,\n        };\n      }\n    }\n    // Return the middle point of the first quad.\n    let x = 0;\n    let y = 0;\n    for (const point of quad) {\n      x += point.x;\n      y += point.y;\n    }\n    return {\n      x: x / 4,\n      y: y / 4,\n    };\n  }\n\n  #getBoxModel(): Promise<void | Protocol.DOM.GetBoxModelResponse> {\n    const params: Protocol.DOM.GetBoxModelRequest = {\n      objectId: this.id,\n    };\n    return this.client.send('DOM.getBoxModel', params).catch(error => {\n      return debugError(error);\n    });\n  }\n\n  #fromProtocolQuad(quad: number[]): Point[] {\n    return [\n      {x: quad[0]!, y: quad[1]!},\n      {x: quad[2]!, y: quad[3]!},\n      {x: quad[4]!, y: quad[5]!},\n      {x: quad[6]!, y: quad[7]!},\n    ];\n  }\n\n  #intersectQuadWithViewport(\n    quad: Point[],\n    width: number,\n    height: number\n  ): Point[] {\n    return quad.map(point => {\n      return {\n        x: Math.min(Math.max(point.x, 0), width),\n        y: Math.min(Math.max(point.y, 0), height),\n      };\n    });\n  }\n\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page.mouse} to hover over the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  override async hover(this: CDPElementHandle<Element>): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const {x, y} = await this.clickablePoint();\n    await this.#page.mouse.move(x, y);\n  }\n\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page.mouse} to click in the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  override async click(\n    this: CDPElementHandle<Element>,\n    options: Readonly<ClickOptions> = {}\n  ): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const {x, y} = await this.clickablePoint(options.offset);\n    await this.#page.mouse.click(x, y, options);\n  }\n\n  /**\n   * This method creates and captures a dragevent from the element.\n   */\n  override async drag(\n    this: CDPElementHandle<Element>,\n    target: Point\n  ): Promise<Protocol.Input.DragData> {\n    assert(\n      this.#page.isDragInterceptionEnabled(),\n      'Drag Interception is not enabled!'\n    );\n    await this.scrollIntoViewIfNeeded();\n    const start = await this.clickablePoint();\n    return await this.#page.mouse.drag(start, target);\n  }\n\n  override async dragEnter(\n    this: CDPElementHandle<Element>,\n    data: Protocol.Input.DragData = {items: [], dragOperationsMask: 1}\n  ): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const target = await this.clickablePoint();\n    await this.#page.mouse.dragEnter(target, data);\n  }\n\n  override async dragOver(\n    this: CDPElementHandle<Element>,\n    data: Protocol.Input.DragData = {items: [], dragOperationsMask: 1}\n  ): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const target = await this.clickablePoint();\n    await this.#page.mouse.dragOver(target, data);\n  }\n\n  override async drop(\n    this: CDPElementHandle<Element>,\n    data: Protocol.Input.DragData = {items: [], dragOperationsMask: 1}\n  ): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const destination = await this.clickablePoint();\n    await this.#page.mouse.drop(destination, data);\n  }\n\n  override async dragAndDrop(\n    this: CDPElementHandle<Element>,\n    target: CDPElementHandle<Node>,\n    options?: {delay: number}\n  ): Promise<void> {\n    assert(\n      this.#page.isDragInterceptionEnabled(),\n      'Drag Interception is not enabled!'\n    );\n    await this.scrollIntoViewIfNeeded();\n    const startPoint = await this.clickablePoint();\n    const targetPoint = await target.clickablePoint();\n    await this.#page.mouse.dragAndDrop(startPoint, targetPoint, options);\n  }\n\n  override async uploadFile(\n    this: CDPElementHandle<HTMLInputElement>,\n    ...filePaths: string[]\n  ): Promise<void> {\n    const isMultiple = await this.evaluate(element => {\n      return element.multiple;\n    });\n    assert(\n      filePaths.length <= 1 || isMultiple,\n      'Multiple file uploads only work with <input type=file multiple>'\n    );\n\n    // Locate all files and confirm that they exist.\n    let path: typeof import('path');\n    try {\n      path = await import('path');\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error(\n          `JSHandle#uploadFile can only be used in Node-like environments.`\n        );\n      }\n      throw error;\n    }\n    const files = filePaths.map(filePath => {\n      if (path.win32.isAbsolute(filePath) || path.posix.isAbsolute(filePath)) {\n        return filePath;\n      } else {\n        return path.resolve(filePath);\n      }\n    });\n    const {node} = await this.client.send('DOM.describeNode', {\n      objectId: this.id,\n    });\n    const {backendNodeId} = node;\n\n    /*  The zero-length array is a special case, it seems that\n         DOM.setFileInputFiles does not actually update the files in that case,\n         so the solution is to eval the element value to a new FileList directly.\n     */\n    if (files.length === 0) {\n      await this.evaluate(element => {\n        element.files = new DataTransfer().files;\n\n        // Dispatch events for this case because it should behave akin to a user action.\n        element.dispatchEvent(new Event('input', {bubbles: true}));\n        element.dispatchEvent(new Event('change', {bubbles: true}));\n      });\n    } else {\n      await this.client.send('DOM.setFileInputFiles', {\n        objectId: this.id,\n        files,\n        backendNodeId,\n      });\n    }\n  }\n\n  override async tap(this: CDPElementHandle<Element>): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const {x, y} = await this.clickablePoint();\n    await this.#page.touchscreen.touchStart(x, y);\n    await this.#page.touchscreen.touchEnd();\n  }\n\n  override async touchStart(this: CDPElementHandle<Element>): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const {x, y} = await this.clickablePoint();\n    await this.#page.touchscreen.touchStart(x, y);\n  }\n\n  override async touchMove(this: CDPElementHandle<Element>): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    const {x, y} = await this.clickablePoint();\n    await this.#page.touchscreen.touchMove(x, y);\n  }\n\n  override async touchEnd(this: CDPElementHandle<Element>): Promise<void> {\n    await this.scrollIntoViewIfNeeded();\n    await this.#page.touchscreen.touchEnd();\n  }\n\n  override async type(\n    text: string,\n    options?: Readonly<KeyboardTypeOptions>\n  ): Promise<void> {\n    await this.focus();\n    await this.#page.keyboard.type(text, options);\n  }\n\n  override async press(\n    key: KeyInput,\n    options?: Readonly<KeyPressOptions>\n  ): Promise<void> {\n    await this.focus();\n    await this.#page.keyboard.press(key, options);\n  }\n\n  override async boundingBox(): Promise<BoundingBox | null> {\n    const result = await this.#getBoxModel();\n\n    if (!result) {\n      return null;\n    }\n\n    const {offsetX, offsetY} = await this.#getOOPIFOffsets(this.#frame);\n    const quad = result.model.border;\n    const x = Math.min(quad[0]!, quad[2]!, quad[4]!, quad[6]!);\n    const y = Math.min(quad[1]!, quad[3]!, quad[5]!, quad[7]!);\n    const width = Math.max(quad[0]!, quad[2]!, quad[4]!, quad[6]!) - x;\n    const height = Math.max(quad[1]!, quad[3]!, quad[5]!, quad[7]!) - y;\n\n    return {x: x + offsetX, y: y + offsetY, width, height};\n  }\n\n  override async boxModel(): Promise<BoxModel | null> {\n    const result = await this.#getBoxModel();\n\n    if (!result) {\n      return null;\n    }\n\n    const {offsetX, offsetY} = await this.#getOOPIFOffsets(this.#frame);\n\n    const {content, padding, border, margin, width, height} = result.model;\n    return {\n      content: applyOffsetsToQuad(\n        this.#fromProtocolQuad(content),\n        offsetX,\n        offsetY\n      ),\n      padding: applyOffsetsToQuad(\n        this.#fromProtocolQuad(padding),\n        offsetX,\n        offsetY\n      ),\n      border: applyOffsetsToQuad(\n        this.#fromProtocolQuad(border),\n        offsetX,\n        offsetY\n      ),\n      margin: applyOffsetsToQuad(\n        this.#fromProtocolQuad(margin),\n        offsetX,\n        offsetY\n      ),\n      width,\n      height,\n    };\n  }\n\n  override async screenshot(\n    this: CDPElementHandle<Element>,\n    options: ScreenshotOptions = {}\n  ): Promise<string | Buffer> {\n    let needsViewportReset = false;\n\n    let boundingBox = await this.boundingBox();\n    assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n\n    const viewport = this.#page.viewport();\n\n    if (\n      viewport &&\n      (boundingBox.width > viewport.width ||\n        boundingBox.height > viewport.height)\n    ) {\n      const newViewport = {\n        width: Math.max(viewport.width, Math.ceil(boundingBox.width)),\n        height: Math.max(viewport.height, Math.ceil(boundingBox.height)),\n      };\n      await this.#page.setViewport(Object.assign({}, viewport, newViewport));\n\n      needsViewportReset = true;\n    }\n\n    await this.scrollIntoViewIfNeeded();\n\n    boundingBox = await this.boundingBox();\n    assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n    assert(boundingBox.width !== 0, 'Node has 0 width.');\n    assert(boundingBox.height !== 0, 'Node has 0 height.');\n\n    const layoutMetrics = await this.client.send('Page.getLayoutMetrics');\n    // Fallback to `layoutViewport` in case of using Firefox.\n    const {pageX, pageY} =\n      layoutMetrics.cssVisualViewport || layoutMetrics.layoutViewport;\n\n    const clip = Object.assign({}, boundingBox);\n    clip.x += pageX;\n    clip.y += pageY;\n\n    const imageData = await this.#page.screenshot(\n      Object.assign(\n        {},\n        {\n          clip,\n        },\n        options\n      )\n    );\n\n    if (needsViewportReset && viewport) {\n      await this.#page.setViewport(viewport);\n    }\n\n    return imageData;\n  }\n\n  override async autofill(data: AutofillData): Promise<void> {\n    const nodeInfo = await this.client.send('DOM.describeNode', {\n      objectId: this.handle.id,\n    });\n    const fieldId = nodeInfo.node.backendNodeId;\n    const frameId = this.#frame._id;\n    await this.client.send('Autofill.trigger', {\n      fieldId,\n      frameId,\n      card: data.creditCard,\n    });\n  }\n}\n\nfunction computeQuadArea(quad: Point[]): number {\n  /* Compute sum of all directed areas of adjacent triangles\n     https://en.wikipedia.org/wiki/Polygon#Simple_polygons\n   */\n  let area = 0;\n  for (let i = 0; i < quad.length; ++i) {\n    const p1 = quad[i]!;\n    const p2 = quad[(i + 1) % quad.length]!;\n    area += (p1.x * p2.y - p2.x * p1.y) / 2;\n  }\n  return Math.abs(area);\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {Frame} from '../api/Frame.js';\nimport {CDPSession} from '../common/Connection.js';\nimport {ExecutionContext} from '../common/ExecutionContext.js';\nimport {getQueryHandlerAndSelector} from '../common/GetQueryHandler.js';\nimport {WaitForSelectorOptions} from '../common/IsolatedWorld.js';\nimport {LazyArg} from '../common/LazyArg.js';\nimport {\n  ElementFor,\n  EvaluateFuncWith,\n  HandleFor,\n  HandleOr,\n  NodeFor,\n} from '../common/types.js';\nimport {KeyInput} from '../common/USKeyboardLayout.js';\nimport {isString, withSourcePuppeteerURLIfNone} from '../common/util.js';\nimport {assert} from '../util/assert.js';\nimport {AsyncIterableUtil} from '../util/AsyncIterableUtil.js';\n\nimport {\n  KeyPressOptions,\n  MouseClickOptions,\n  KeyboardTypeOptions,\n} from './Input.js';\nimport {JSHandle} from './JSHandle.js';\nimport {ScreenshotOptions} from './Page.js';\n\n/**\n * @public\n */\nexport interface BoxModel {\n  content: Point[];\n  padding: Point[];\n  border: Point[];\n  margin: Point[];\n  width: number;\n  height: number;\n}\n\n/**\n * @public\n */\nexport interface BoundingBox extends Point {\n  /**\n   * the width of the element in pixels.\n   */\n  width: number;\n  /**\n   * the height of the element in pixels.\n   */\n  height: number;\n}\n\n/**\n * @public\n */\nexport interface Offset {\n  /**\n   * x-offset for the clickable point relative to the top-left corner of the border box.\n   */\n  x: number;\n  /**\n   * y-offset for the clickable point relative to the top-left corner of the border box.\n   */\n  y: number;\n}\n\n/**\n * @public\n */\nexport interface ClickOptions extends MouseClickOptions {\n  /**\n   * Offset for the clickable point relative to the top-left corner of the border box.\n   */\n  offset?: Offset;\n}\n\n/**\n * @public\n */\nexport interface Point {\n  x: number;\n  y: number;\n}\n\n/**\n * ElementHandle represents an in-page DOM element.\n *\n * @remarks\n * ElementHandles can be created with the {@link Page.$} method.\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://example.com');\n *   const hrefElement = await page.$('a');\n *   await hrefElement.click();\n *   // ...\n * })();\n * ```\n *\n * ElementHandle prevents the DOM element from being garbage-collected unless the\n * handle is {@link JSHandle.dispose | disposed}. ElementHandles are auto-disposed\n * when their origin frame gets navigated.\n *\n * ElementHandle instances can be used as arguments in {@link Page.$eval} and\n * {@link Page.evaluate} methods.\n *\n * If you're using TypeScript, ElementHandle takes a generic argument that\n * denotes the type of element the handle is holding within. For example, if you\n * have a handle to a `<select>` element, you can type it as\n * `ElementHandle<HTMLSelectElement>` and you get some nicer type checks.\n *\n * @public\n */\n\nexport class ElementHandle<\n  ElementType extends Node = Element,\n> extends JSHandle<ElementType> {\n  /**\n   * @internal\n   */\n  protected handle;\n\n  /**\n   * @internal\n   */\n  constructor(handle: JSHandle<ElementType>) {\n    super();\n    this.handle = handle;\n  }\n\n  /**\n   * @internal\n   */\n  override get id(): string | undefined {\n    return this.handle.id;\n  }\n\n  /**\n   * @internal\n   */\n  override get disposed(): boolean {\n    return this.handle.disposed;\n  }\n\n  /**\n   * @internal\n   */\n  override async getProperty<K extends keyof ElementType>(\n    propertyName: HandleOr<K>\n  ): Promise<HandleFor<ElementType[K]>>;\n  /**\n   * @internal\n   */\n  override async getProperty(propertyName: string): Promise<JSHandle<unknown>>;\n  override async getProperty<K extends keyof ElementType>(\n    propertyName: HandleOr<K>\n  ): Promise<HandleFor<ElementType[K]>> {\n    return this.handle.getProperty(propertyName);\n  }\n\n  /**\n   * @internal\n   */\n  override async getProperties(): Promise<Map<string, JSHandle>> {\n    return this.handle.getProperties();\n  }\n\n  /**\n   * @internal\n   */\n  override async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<ElementType, Params> = EvaluateFuncWith<\n      ElementType,\n      Params\n    >,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    return this.handle.evaluate(pageFunction, ...args);\n  }\n\n  /**\n   * @internal\n   */\n  override evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<ElementType, Params> = EvaluateFuncWith<\n      ElementType,\n      Params\n    >,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    return this.handle.evaluateHandle(pageFunction, ...args);\n  }\n\n  /**\n   * @internal\n   */\n  override async jsonValue(): Promise<ElementType> {\n    return this.handle.jsonValue();\n  }\n\n  /**\n   * @internal\n   */\n  override toString(): string {\n    return this.handle.toString();\n  }\n\n  /**\n   * @internal\n   */\n  override async dispose(): Promise<void> {\n    return await this.handle.dispose();\n  }\n\n  override asElement(): ElementHandle<ElementType> {\n    return this;\n  }\n\n  /**\n   * @internal\n   */\n  override executionContext(): ExecutionContext {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  override get client(): CDPSession {\n    throw new Error('Not implemented');\n  }\n\n  get frame(): Frame {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Queries the current element for an element matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns A {@link ElementHandle | element handle} to the first element\n   * matching the given selector. Otherwise, `null`.\n   */\n  async $<Selector extends string>(\n    selector: Selector\n  ): Promise<ElementHandle<NodeFor<Selector>> | null> {\n    const {updatedSelector, QueryHandler} =\n      getQueryHandlerAndSelector(selector);\n    return (await QueryHandler.queryOne(\n      this,\n      updatedSelector\n    )) as ElementHandle<NodeFor<Selector>> | null;\n  }\n\n  /**\n   * Queries the current element for all elements matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns An array of {@link ElementHandle | element handles} that point to\n   * elements matching the given selector.\n   */\n  async $$<Selector extends string>(\n    selector: Selector\n  ): Promise<Array<ElementHandle<NodeFor<Selector>>>> {\n    const {updatedSelector, QueryHandler} =\n      getQueryHandlerAndSelector(selector);\n    return AsyncIterableUtil.collect(\n      QueryHandler.queryAll(this, updatedSelector)\n    ) as Promise<Array<ElementHandle<NodeFor<Selector>>>>;\n  }\n\n  /**\n   * Runs the given function on the first element matching the given selector in\n   * the current element.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   *\n   * ```ts\n   * const tweetHandle = await page.$('.tweet');\n   * expect(await tweetHandle.$eval('.like', node => node.innerText)).toBe(\n   *   '100'\n   * );\n   * expect(await tweetHandle.$eval('.retweets', node => node.innerText)).toBe(\n   *   '10'\n   * );\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in this element's page's\n   * context. The first element matching the selector will be passed in as the\n   * first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<NodeFor<Selector>, Params> = EvaluateFuncWith<\n      NodeFor<Selector>,\n      Params\n    >,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$eval.name, pageFunction);\n    const elementHandle = await this.$(selector);\n    if (!elementHandle) {\n      throw new Error(\n        `Error: failed to find element matching selector \"${selector}\"`\n      );\n    }\n    const result = await elementHandle.evaluate(pageFunction, ...args);\n    await elementHandle.dispose();\n    return result;\n  }\n\n  /**\n   * Runs the given function on an array of elements matching the given selector\n   * in the current element.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   * HTML:\n   *\n   * ```html\n   * <div class=\"feed\">\n   *   <div class=\"tweet\">Hello!</div>\n   *   <div class=\"tweet\">Hi!</div>\n   * </div>\n   * ```\n   *\n   * JavaScript:\n   *\n   * ```js\n   * const feedHandle = await page.$('.feed');\n   * expect(\n   *   await feedHandle.$$eval('.tweet', nodes => nodes.map(n => n.innerText))\n   * ).toEqual(['Hello!', 'Hi!']);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in the element's page's\n   * context. An array of elements matching the given selector will be passed to\n   * the function as its first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $$eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<\n      Array<NodeFor<Selector>>,\n      Params\n    > = EvaluateFuncWith<Array<NodeFor<Selector>>, Params>,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$$eval.name, pageFunction);\n    const results = await this.$$(selector);\n    const elements = await this.evaluateHandle(\n      (_, ...elements) => {\n        return elements;\n      },\n      ...results\n    );\n    const [result] = await Promise.all([\n      elements.evaluate(pageFunction, ...args),\n      ...results.map(results => {\n        return results.dispose();\n      }),\n    ]);\n    await elements.dispose();\n    return result;\n  }\n\n  /**\n   * @deprecated Use {@link ElementHandle.$$} with the `xpath` prefix.\n   *\n   * Example: `await elementHandle.$$('xpath/' + xpathExpression)`\n   *\n   * The method evaluates the XPath expression relative to the elementHandle.\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   *\n   * If there are no such elements, the method will resolve to an empty array.\n   * @param expression - Expression to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate | evaluate}\n   */\n  async $x(expression: string): Promise<Array<ElementHandle<Node>>> {\n    if (expression.startsWith('//')) {\n      expression = `.${expression}`;\n    }\n    return this.$$(`xpath/${expression}`);\n  }\n\n  /**\n   * Wait for an element matching the given selector to appear in the current\n   * element.\n   *\n   * Unlike {@link Frame.waitForSelector}, this method does not work across\n   * navigations or if the element is detached from DOM.\n   *\n   * @example\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   let currentURL;\n   *   page\n   *     .mainFrame()\n   *     .waitForSelector('img')\n   *     .then(() => console.log('First URL with image: ' + currentURL));\n   *\n   *   for (currentURL of [\n   *     'https://example.com',\n   *     'https://google.com',\n   *     'https://bbc.com',\n   *   ]) {\n   *     await page.goto(currentURL);\n   *   }\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param selector - The selector to query and wait for.\n   * @param options - Options for customizing waiting behavior.\n   * @returns An element matching the given selector.\n   * @throws Throws if an element matching the given selector doesn't appear.\n   */\n  async waitForSelector<Selector extends string>(\n    selector: Selector,\n    options: WaitForSelectorOptions = {}\n  ): Promise<ElementHandle<NodeFor<Selector>> | null> {\n    const {updatedSelector, QueryHandler} =\n      getQueryHandlerAndSelector(selector);\n    return (await QueryHandler.waitFor(\n      this,\n      updatedSelector,\n      options\n    )) as ElementHandle<NodeFor<Selector>> | null;\n  }\n\n  async #checkVisibility(visibility: boolean): Promise<boolean> {\n    const element = await this.frame.isolatedRealm().adoptHandle(this);\n    try {\n      return await this.frame.isolatedRealm().evaluate(\n        async (PuppeteerUtil, element, visibility) => {\n          return Boolean(PuppeteerUtil.checkVisibility(element, visibility));\n        },\n        LazyArg.create(context => {\n          return context.puppeteerUtil;\n        }),\n        element,\n        visibility\n      );\n    } finally {\n      await element.dispose();\n    }\n  }\n\n  /**\n   * Checks if an element is visible using the same mechanism as\n   * {@link ElementHandle.waitForSelector}.\n   */\n  async isVisible(): Promise<boolean> {\n    return this.#checkVisibility(true);\n  }\n\n  /**\n   * Checks if an element is hidden using the same mechanism as\n   * {@link ElementHandle.waitForSelector}.\n   */\n  async isHidden(): Promise<boolean> {\n    return this.#checkVisibility(false);\n  }\n\n  /**\n   * @deprecated Use {@link ElementHandle.waitForSelector} with the `xpath`\n   * prefix.\n   *\n   * Example: `await elementHandle.waitForSelector('xpath/' + xpathExpression)`\n   *\n   * The method evaluates the XPath expression relative to the elementHandle.\n   *\n   * Wait for the `xpath` within the element. If at the moment of calling the\n   * method the `xpath` already exists, the method will return immediately. If\n   * the `xpath` doesn't appear after the `timeout` milliseconds of waiting, the\n   * function will throw.\n   *\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   *\n   * @example\n   * This method works across navigation.\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   let currentURL;\n   *   page\n   *     .waitForXPath('//img')\n   *     .then(() => console.log('First URL with image: ' + currentURL));\n   *   for (currentURL of [\n   *     'https://example.com',\n   *     'https://google.com',\n   *     'https://bbc.com',\n   *   ]) {\n   *     await page.goto(currentURL);\n   *   }\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param xpath - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/XPath | xpath} of an\n   * element to wait for\n   * @param options - Optional waiting parameters\n   * @returns Promise which resolves when element specified by xpath string is\n   * added to DOM. Resolves to `null` if waiting for `hidden: true` and xpath is\n   * not found in DOM, otherwise resolves to `ElementHandle`.\n   * @remarks\n   * The optional Argument `options` have properties:\n   *\n   * - `visible`: A boolean to wait for element to be present in DOM and to be\n   *   visible, i.e. to not have `display: none` or `visibility: hidden` CSS\n   *   properties. Defaults to `false`.\n   *\n   * - `hidden`: A boolean wait for element to not be found in the DOM or to be\n   *   hidden, i.e. have `display: none` or `visibility: hidden` CSS properties.\n   *   Defaults to `false`.\n   *\n   * - `timeout`: A number which is maximum time to wait for in milliseconds.\n   *   Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The\n   *   default value can be changed by using the {@link Page.setDefaultTimeout}\n   *   method.\n   */\n  async waitForXPath(\n    xpath: string,\n    options: {\n      visible?: boolean;\n      hidden?: boolean;\n      timeout?: number;\n    } = {}\n  ): Promise<ElementHandle<Node> | null> {\n    if (xpath.startsWith('//')) {\n      xpath = `.${xpath}`;\n    }\n    return this.waitForSelector(`xpath/${xpath}`, options);\n  }\n\n  /**\n   * Converts the current handle to the given element type.\n   *\n   * @example\n   *\n   * ```ts\n   * const element: ElementHandle<Element> = await page.$(\n   *   '.class-name-of-anchor'\n   * );\n   * // DO NOT DISPOSE `element`, this will be always be the same handle.\n   * const anchor: ElementHandle<HTMLAnchorElement> = await element.toElement(\n   *   'a'\n   * );\n   * ```\n   *\n   * @param tagName - The tag name of the desired element type.\n   * @throws An error if the handle does not match. **The handle will not be\n   * automatically disposed.**\n   */\n  async toElement<\n    K extends keyof HTMLElementTagNameMap | keyof SVGElementTagNameMap,\n  >(tagName: K): Promise<HandleFor<ElementFor<K>>> {\n    const isMatchingTagName = await this.evaluate((node, tagName) => {\n      return node.nodeName === tagName.toUpperCase();\n    }, tagName);\n    if (!isMatchingTagName) {\n      throw new Error(`Element is not a(n) \\`${tagName}\\` element`);\n    }\n    return this as unknown as HandleFor<ElementFor<K>>;\n  }\n\n  /**\n   * Resolves to the content frame for element handles referencing\n   * iframe nodes, or null otherwise\n   */\n  async contentFrame(): Promise<Frame | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Returns the middle point within an element unless a specific offset is provided.\n   */\n  async clickablePoint(offset?: Offset): Promise<Point>;\n  async clickablePoint(): Promise<Point> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page} to hover over the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  async hover(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page | Page.mouse} to click in the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  async click(\n    this: ElementHandle<Element>,\n    options?: ClickOptions\n  ): Promise<void>;\n  async click(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method creates and captures a dragevent from the element.\n   */\n  async drag(\n    this: ElementHandle<Element>,\n    target: Point\n  ): Promise<Protocol.Input.DragData>;\n  async drag(this: ElementHandle<Element>): Promise<Protocol.Input.DragData> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method creates a `dragenter` event on the element.\n   */\n  async dragEnter(\n    this: ElementHandle<Element>,\n    data?: Protocol.Input.DragData\n  ): Promise<void>;\n  async dragEnter(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method creates a `dragover` event on the element.\n   */\n  async dragOver(\n    this: ElementHandle<Element>,\n    data?: Protocol.Input.DragData\n  ): Promise<void>;\n  async dragOver(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method triggers a drop on the element.\n   */\n  async drop(\n    this: ElementHandle<Element>,\n    data?: Protocol.Input.DragData\n  ): Promise<void>;\n  async drop(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method triggers a dragenter, dragover, and drop on the element.\n   */\n  async dragAndDrop(\n    this: ElementHandle<Element>,\n    target: ElementHandle<Node>,\n    options?: {delay: number}\n  ): Promise<void>;\n  async dragAndDrop(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Triggers a `change` and `input` event once all the provided options have been\n   * selected. If there's no `<select>` element matching `selector`, the method\n   * throws an error.\n   *\n   * @example\n   *\n   * ```ts\n   * handle.select('blue'); // single selection\n   * handle.select('red', 'green', 'blue'); // multiple selections\n   * ```\n   *\n   * @param values - Values of options to select. If the `<select>` has the\n   * `multiple` attribute, all values are considered, otherwise only the first\n   * one is taken into account.\n   */\n  async select(...values: string[]): Promise<string[]> {\n    for (const value of values) {\n      assert(\n        isString(value),\n        'Values must be strings. Found value \"' +\n          value +\n          '\" of type \"' +\n          typeof value +\n          '\"'\n      );\n    }\n\n    return this.evaluate((element, vals): string[] => {\n      const values = new Set(vals);\n      if (!(element instanceof HTMLSelectElement)) {\n        throw new Error('Element is not a <select> element.');\n      }\n\n      const selectedValues = new Set<string>();\n      if (!element.multiple) {\n        for (const option of element.options) {\n          option.selected = false;\n        }\n        for (const option of element.options) {\n          if (values.has(option.value)) {\n            option.selected = true;\n            selectedValues.add(option.value);\n            break;\n          }\n        }\n      } else {\n        for (const option of element.options) {\n          option.selected = values.has(option.value);\n          if (option.selected) {\n            selectedValues.add(option.value);\n          }\n        }\n      }\n      element.dispatchEvent(new Event('input', {bubbles: true}));\n      element.dispatchEvent(new Event('change', {bubbles: true}));\n      return [...selectedValues.values()];\n    }, values);\n  }\n\n  /**\n   * Sets the value of an\n   * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input | input element}\n   * to the given file paths.\n   *\n   * @remarks This will not validate whether the file paths exists. Also, if a\n   * path is relative, then it is resolved against the\n   * {@link https://nodejs.org/api/process.html#process_process_cwd | current working directory}.\n   * For locals script connecting to remote chrome environments, paths must be\n   * absolute.\n   */\n  async uploadFile(\n    this: ElementHandle<HTMLInputElement>,\n    ...paths: string[]\n  ): Promise<void>;\n  async uploadFile(this: ElementHandle<HTMLInputElement>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method scrolls element into view if needed, and then uses\n   * {@link Touchscreen.tap} to tap in the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  async tap(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  async touchStart(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  async touchMove(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  async touchEnd(this: ElementHandle<Element>): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Calls {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus | focus} on the element.\n   */\n  async focus(): Promise<void> {\n    await this.evaluate(element => {\n      if (!(element instanceof HTMLElement)) {\n        throw new Error('Cannot focus non-HTMLElement');\n      }\n      return element.focus();\n    });\n  }\n\n  /**\n   * Focuses the element, and then sends a `keydown`, `keypress`/`input`, and\n   * `keyup` event for each character in the text.\n   *\n   * To press a special key, like `Control` or `ArrowDown`,\n   * use {@link ElementHandle.press}.\n   *\n   * @example\n   *\n   * ```ts\n   * await elementHandle.type('Hello'); // Types instantly\n   * await elementHandle.type('World', {delay: 100}); // Types slower, like a user\n   * ```\n   *\n   * @example\n   * An example of typing into a text field and then submitting the form:\n   *\n   * ```ts\n   * const elementHandle = await page.$('input');\n   * await elementHandle.type('some text');\n   * await elementHandle.press('Enter');\n   * ```\n   *\n   * @param options - Delay in milliseconds. Defaults to 0.\n   */\n  async type(\n    text: string,\n    options?: Readonly<KeyboardTypeOptions>\n  ): Promise<void>;\n  async type(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Focuses the element, and then uses {@link Keyboard.down} and {@link Keyboard.up}.\n   *\n   * @remarks\n   * If `key` is a single character and no modifier keys besides `Shift`\n   * are being held down, a `keypress`/`input` event will also be generated.\n   * The `text` option can be specified to force an input event to be generated.\n   *\n   * **NOTE** Modifier keys DO affect `elementHandle.press`. Holding down `Shift`\n   * will type the text in upper case.\n   *\n   * @param key - Name of key to press, such as `ArrowLeft`.\n   * See {@link KeyInput} for a list of all key names.\n   */\n  async press(\n    key: KeyInput,\n    options?: Readonly<KeyPressOptions>\n  ): Promise<void>;\n  async press(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method returns the bounding box of the element (relative to the main frame),\n   * or `null` if the element is not visible.\n   */\n  async boundingBox(): Promise<BoundingBox | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method returns boxes of the element, or `null` if the element is not visible.\n   *\n   * @remarks\n   *\n   * Boxes are represented as an array of points;\n   * Each Point is an object `{x, y}`. Box points are sorted clock-wise.\n   */\n  async boxModel(): Promise<BoxModel | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method scrolls element into view if needed, and then uses\n   * {@link Page.(screenshot:3) } to take a screenshot of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  async screenshot(\n    this: ElementHandle<Element>,\n    options?: ScreenshotOptions\n  ): Promise<string | Buffer>;\n  async screenshot(this: ElementHandle<Element>): Promise<string | Buffer> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  protected async assertConnectedElement(): Promise<void> {\n    const error = await this.evaluate(\n      async (element): Promise<string | undefined> => {\n        if (!element.isConnected) {\n          return 'Node is detached from document';\n        }\n        if (element.nodeType !== Node.ELEMENT_NODE) {\n          return 'Node is not of type HTMLElement';\n        }\n        return;\n      }\n    );\n\n    if (error) {\n      throw new Error(error);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  protected async scrollIntoViewIfNeeded(\n    this: ElementHandle<Element>\n  ): Promise<void> {\n    if (\n      await this.isIntersectingViewport({\n        threshold: 1,\n      })\n    ) {\n      return;\n    }\n    await this.scrollIntoView();\n  }\n\n  /**\n   * Resolves to true if the element is visible in the current viewport. If an\n   * element is an SVG, we check if the svg owner element is in the viewport\n   * instead. See https://crbug.com/963246.\n   *\n   * @param options - Threshold for the intersection between 0 (no intersection) and 1\n   * (full intersection). Defaults to 1.\n   */\n  async isIntersectingViewport(\n    this: ElementHandle<Element>,\n    options?: {\n      threshold?: number;\n    }\n  ): Promise<boolean> {\n    await this.assertConnectedElement();\n\n    const {threshold = 0} = options ?? {};\n    const svgHandle = await this.#asSVGElementHandle(this);\n    const intersectionTarget: ElementHandle<Element> = svgHandle\n      ? await this.#getOwnerSVGElement(svgHandle)\n      : this;\n\n    try {\n      return await intersectionTarget.evaluate(async (element, threshold) => {\n        const visibleRatio = await new Promise<number>(resolve => {\n          const observer = new IntersectionObserver(entries => {\n            resolve(entries[0]!.intersectionRatio);\n            observer.disconnect();\n          });\n          observer.observe(element);\n        });\n        return threshold === 1 ? visibleRatio === 1 : visibleRatio > threshold;\n      }, threshold);\n    } finally {\n      if (intersectionTarget !== this) {\n        await intersectionTarget.dispose();\n      }\n    }\n  }\n\n  /**\n   * Scrolls the element into view using either the automation protocol client\n   * or by calling element.scrollIntoView.\n   */\n  async scrollIntoView(this: ElementHandle<Element>): Promise<void> {\n    await this.assertConnectedElement();\n    await this.evaluate(async (element): Promise<void> => {\n      element.scrollIntoView({\n        block: 'center',\n        inline: 'center',\n        behavior: 'instant',\n      });\n    });\n  }\n\n  /**\n   * Returns true if an element is an SVGElement (included svg, path, rect\n   * etc.).\n   */\n  async #asSVGElementHandle(\n    handle: ElementHandle<Element>\n  ): Promise<ElementHandle<SVGElement> | null> {\n    if (\n      await handle.evaluate(element => {\n        return element instanceof SVGElement;\n      })\n    ) {\n      return handle as ElementHandle<SVGElement>;\n    } else {\n      return null;\n    }\n  }\n\n  async #getOwnerSVGElement(\n    handle: ElementHandle<SVGElement>\n  ): Promise<ElementHandle<SVGSVGElement>> {\n    // SVGSVGElement.ownerSVGElement === null.\n    return await handle.evaluateHandle(element => {\n      if (element instanceof SVGSVGElement) {\n        return element;\n      }\n      return element.ownerSVGElement!;\n    });\n  }\n\n  /**\n   * @internal\n   */\n  assertElementHasWorld(): asserts this {\n    assert(this.executionContext()._world);\n  }\n\n  /**\n   * If the element is a form input, you can use {@link ElementHandle.autofill}\n   * to test if the form is compatible with the browser's autofill\n   * implementation. Throws an error if the form cannot be autofilled.\n   *\n   * @remarks\n   *\n   * Currently, Puppeteer supports auto-filling credit card information only and\n   * in Chrome in the new headless and headful modes only.\n   *\n   * ```ts\n   * // Select an input on the credit card form.\n   * const name = await page.waitForSelector('form #name');\n   * // Trigger autofill with the desired data.\n   * await name.autofill({\n   *   creditCard: {\n   *     number: '4444444444444444',\n   *     name: 'John Smith',\n   *     expiryMonth: '01',\n   *     expiryYear: '2030',\n   *     cvc: '123',\n   *   },\n   * });\n   * ```\n   */\n  autofill(data: AutofillData): Promise<void>;\n  autofill(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n}\n\n/**\n * @public\n */\nexport interface AutofillData {\n  creditCard: {\n    // See https://chromedevtools.github.io/devtools-protocol/tot/Autofill/#type-CreditCard.\n    number: string;\n    name: string;\n    expiryMonth: string;\n    expiryYear: string;\n    cvc: string;\n  };\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ARIAQueryHandler} from './AriaQueryHandler.js';\nimport {customQueryHandlers} from './CustomQueryHandler.js';\nimport {PierceQueryHandler} from './PierceQueryHandler.js';\nimport {PQueryHandler} from './PQueryHandler.js';\nimport type {QueryHandler} from './QueryHandler.js';\nimport {TextQueryHandler} from './TextQueryHandler.js';\nimport {XPathQueryHandler} from './XPathQueryHandler.js';\n\nexport const BUILTIN_QUERY_HANDLERS = Object.freeze({\n  aria: ARIAQueryHandler,\n  pierce: PierceQueryHandler,\n  xpath: XPathQueryHandler,\n  text: TextQueryHandler,\n});\n\nconst QUERY_SEPARATORS = ['=', '/'];\n\n/**\n * @internal\n */\nexport function getQueryHandlerByName(\n  name: string\n): typeof QueryHandler | undefined {\n  if (name in BUILTIN_QUERY_HANDLERS) {\n    return BUILTIN_QUERY_HANDLERS[name as 'aria'];\n  }\n  return customQueryHandlers.get(name);\n}\n\n/**\n * @internal\n */\nexport function getQueryHandlerAndSelector(selector: string): {\n  updatedSelector: string;\n  QueryHandler: typeof QueryHandler;\n} {\n  for (const handlerMap of [\n    customQueryHandlers.names().map(name => {\n      return [name, customQueryHandlers.get(name)!] as const;\n    }),\n    Object.entries(BUILTIN_QUERY_HANDLERS),\n  ]) {\n    for (const [name, QueryHandler] of handlerMap) {\n      for (const separator of QUERY_SEPARATORS) {\n        const prefix = `${name}${separator}`;\n        if (selector.startsWith(prefix)) {\n          selector = selector.slice(prefix.length);\n          return {updatedSelector: selector, QueryHandler};\n        }\n      }\n    }\n  }\n  return {updatedSelector: selector, QueryHandler: PQueryHandler};\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {ElementHandle} from '../api/ElementHandle.js';\nimport {assert} from '../util/assert.js';\nimport {AsyncIterableUtil} from '../util/AsyncIterableUtil.js';\n\nimport {CDPSession} from './Connection.js';\nimport {QueryHandler, QuerySelector} from './QueryHandler.js';\nimport {AwaitableIterable} from './types.js';\n\nconst queryAXTree = async (\n  client: CDPSession,\n  element: ElementHandle<Node>,\n  accessibleName?: string,\n  role?: string\n): Promise<Protocol.Accessibility.AXNode[]> => {\n  const {nodes} = await client.send('Accessibility.queryAXTree', {\n    objectId: element.id,\n    accessibleName,\n    role,\n  });\n  return nodes.filter((node: Protocol.Accessibility.AXNode) => {\n    return !node.role || node.role.value !== 'StaticText';\n  });\n};\n\ninterface ARIASelector {\n  name?: string;\n  role?: string;\n}\n\nconst KNOWN_ATTRIBUTES = Object.freeze(['name', 'role']);\nconst isKnownAttribute = (\n  attribute: string\n): attribute is keyof ARIASelector => {\n  return KNOWN_ATTRIBUTES.includes(attribute);\n};\n\nconst normalizeValue = (value: string): string => {\n  return value.replace(/ +/g, ' ').trim();\n};\n\n/**\n * The selectors consist of an accessible name to query for and optionally\n * further aria attributes on the form `[<attribute>=<value>]`.\n * Currently, we only support the `name` and `role` attribute.\n * The following examples showcase how the syntax works wrt. querying:\n *\n * - 'title[role=\"heading\"]' queries for elements with name 'title' and role 'heading'.\n * - '[role=\"img\"]' queries for elements with role 'img' and any name.\n * - 'label' queries for elements with name 'label' and any role.\n * - '[name=\"\"][role=\"button\"]' queries for elements with no name and role 'button'.\n */\nconst ATTRIBUTE_REGEXP =\n  /\\[\\s*(?<attribute>\\w+)\\s*=\\s*(?<quote>\"|')(?<value>\\\\.|.*?(?=\\k<quote>))\\k<quote>\\s*\\]/g;\nconst parseARIASelector = (selector: string): ARIASelector => {\n  const queryOptions: ARIASelector = {};\n  const defaultName = selector.replace(\n    ATTRIBUTE_REGEXP,\n    (_, attribute, __, value) => {\n      attribute = attribute.trim();\n      assert(\n        isKnownAttribute(attribute),\n        `Unknown aria attribute \"${attribute}\" in selector`\n      );\n      queryOptions[attribute] = normalizeValue(value);\n      return '';\n    }\n  );\n  if (defaultName && !queryOptions.name) {\n    queryOptions.name = normalizeValue(defaultName);\n  }\n  return queryOptions;\n};\n\n/**\n * @internal\n */\nexport class ARIAQueryHandler extends QueryHandler {\n  static override querySelector: QuerySelector = async (\n    node,\n    selector,\n    {ariaQuerySelector}\n  ) => {\n    return ariaQuerySelector(node, selector);\n  };\n\n  static override async *queryAll(\n    element: ElementHandle<Node>,\n    selector: string\n  ): AwaitableIterable<ElementHandle<Node>> {\n    const context = element.executionContext();\n    const {name, role} = parseARIASelector(selector);\n    const results = await queryAXTree(context._client, element, name, role);\n    const world = context._world!;\n    yield* AsyncIterableUtil.map(results, node => {\n      return world.adoptBackendNode(node.backendDOMNodeId) as Promise<\n        ElementHandle<Node>\n      >;\n    });\n  }\n\n  static override queryOne = async (\n    element: ElementHandle<Node>,\n    selector: string\n  ): Promise<ElementHandle<Node> | null> => {\n    return (\n      (await AsyncIterableUtil.first(this.queryAll(element, selector))) ?? null\n    );\n  };\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {AwaitableIterable} from '../common/types.js';\n\n/**\n * @internal\n */\nexport class AsyncIterableUtil {\n  static async *map<T, U>(\n    iterable: AwaitableIterable<T>,\n    map: (item: T) => Promise<U>\n  ): AsyncIterable<U> {\n    for await (const value of iterable) {\n      yield await map(value);\n    }\n  }\n\n  static async *flatMap<T, U>(\n    iterable: AwaitableIterable<T>,\n    map: (item: T) => AwaitableIterable<U>\n  ): AsyncIterable<U> {\n    for await (const value of iterable) {\n      yield* map(value);\n    }\n  }\n\n  static async collect<T>(iterable: AwaitableIterable<T>): Promise<T[]> {\n    const result = [];\n    for await (const value of iterable) {\n      result.push(value);\n    }\n    return result;\n  }\n\n  static async first<T>(\n    iterable: AwaitableIterable<T>\n  ): Promise<T | undefined> {\n    for await (const value of iterable) {\n      return value;\n    }\n    return;\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ElementHandle} from '../api/ElementHandle.js';\nimport type {Frame} from '../api/Frame.js';\nimport type PuppeteerUtil from '../injected/injected.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\nimport {interpolateFunction, stringifyFunction} from '../util/Function.js';\n\nimport {transposeIterableHandle} from './HandleIterator.js';\nimport type {WaitForSelectorOptions} from './IsolatedWorld.js';\nimport {LazyArg} from './LazyArg.js';\nimport type {Awaitable, AwaitableIterable} from './types.js';\n\n/**\n * @internal\n */\nexport type QuerySelectorAll = (\n  node: Node,\n  selector: string,\n  PuppeteerUtil: PuppeteerUtil\n) => AwaitableIterable<Node>;\n\n/**\n * @internal\n */\nexport type QuerySelector = (\n  node: Node,\n  selector: string,\n  PuppeteerUtil: PuppeteerUtil\n) => Awaitable<Node | null>;\n\n/**\n * @internal\n */\nexport class QueryHandler {\n  // Either one of these may be implemented, but at least one must be.\n  static querySelectorAll?: QuerySelectorAll;\n  static querySelector?: QuerySelector;\n\n  static get _querySelector(): QuerySelector {\n    if (this.querySelector) {\n      return this.querySelector;\n    }\n    if (!this.querySelectorAll) {\n      throw new Error('Cannot create default `querySelector`.');\n    }\n\n    return (this.querySelector = interpolateFunction(\n      async (node, selector, PuppeteerUtil) => {\n        const querySelectorAll: QuerySelectorAll =\n          PLACEHOLDER('querySelectorAll');\n        const results = querySelectorAll(node, selector, PuppeteerUtil);\n        for await (const result of results) {\n          return result;\n        }\n        return null;\n      },\n      {\n        querySelectorAll: stringifyFunction(this.querySelectorAll),\n      }\n    ));\n  }\n\n  static get _querySelectorAll(): QuerySelectorAll {\n    if (this.querySelectorAll) {\n      return this.querySelectorAll;\n    }\n    if (!this.querySelector) {\n      throw new Error('Cannot create default `querySelectorAll`.');\n    }\n\n    return (this.querySelectorAll = interpolateFunction(\n      async function* (node, selector, PuppeteerUtil) {\n        const querySelector: QuerySelector = PLACEHOLDER('querySelector');\n        const result = await querySelector(node, selector, PuppeteerUtil);\n        if (result) {\n          yield result;\n        }\n      },\n      {\n        querySelector: stringifyFunction(this.querySelector),\n      }\n    ));\n  }\n\n  /**\n   * Queries for multiple nodes given a selector and {@link ElementHandle}.\n   *\n   * Akin to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll | Document.querySelectorAll()}.\n   */\n  static async *queryAll(\n    element: ElementHandle<Node>,\n    selector: string\n  ): AwaitableIterable<ElementHandle<Node>> {\n    element.assertElementHasWorld();\n    const handle = await element.evaluateHandle(\n      this._querySelectorAll,\n      selector,\n      LazyArg.create(context => {\n        return context.puppeteerUtil;\n      })\n    );\n    yield* transposeIterableHandle(handle);\n  }\n\n  /**\n   * Queries for a single node given a selector and {@link ElementHandle}.\n   *\n   * Akin to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector}.\n   */\n  static async queryOne(\n    element: ElementHandle<Node>,\n    selector: string\n  ): Promise<ElementHandle<Node> | null> {\n    element.assertElementHasWorld();\n    const result = await element.evaluateHandle(\n      this._querySelector,\n      selector,\n      LazyArg.create(context => {\n        return context.puppeteerUtil;\n      })\n    );\n    if (!(result instanceof ElementHandle)) {\n      await result.dispose();\n      return null;\n    }\n    return result;\n  }\n\n  /**\n   * Waits until a single node appears for a given selector and\n   * {@link ElementHandle}.\n   *\n   * This will always query the handle in the Puppeteer world and migrate the\n   * result to the main world.\n   */\n  static async waitFor(\n    elementOrFrame: ElementHandle<Node> | Frame,\n    selector: string,\n    options: WaitForSelectorOptions\n  ): Promise<ElementHandle<Node> | null> {\n    let frame: Frame;\n    let element: ElementHandle<Node> | undefined;\n    if (!(elementOrFrame instanceof ElementHandle)) {\n      frame = elementOrFrame;\n    } else {\n      frame = elementOrFrame.frame;\n      element = await frame.isolatedRealm().adoptHandle(elementOrFrame);\n    }\n\n    const {visible = false, hidden = false, timeout, signal} = options;\n\n    try {\n      signal?.throwIfAborted();\n\n      const handle = await frame.isolatedRealm().waitForFunction(\n        async (PuppeteerUtil, query, selector, root, visible) => {\n          const querySelector = PuppeteerUtil.createFunction(\n            query\n          ) as QuerySelector;\n          const node = await querySelector(\n            root ?? document,\n            selector,\n            PuppeteerUtil\n          );\n          return PuppeteerUtil.checkVisibility(node, visible);\n        },\n        {\n          polling: visible || hidden ? 'raf' : 'mutation',\n          root: element,\n          timeout,\n          signal,\n        },\n        LazyArg.create(context => {\n          return context.puppeteerUtil;\n        }),\n        stringifyFunction(this._querySelector),\n        selector,\n        element,\n        visible ? true : hidden ? false : undefined\n      );\n\n      if (signal?.aborted) {\n        await handle.dispose();\n        throw signal.reason;\n      }\n\n      if (!(handle instanceof ElementHandle)) {\n        await handle.dispose();\n        return null;\n      }\n      return frame.mainRealm().transferHandle(handle);\n    } catch (error) {\n      if (!isErrorLike(error)) {\n        throw error;\n      }\n      if (error.name === 'AbortError') {\n        throw error;\n      }\n      error.message = `Waiting for selector \\`${selector}\\` failed: ${error.message}`;\n      throw error;\n    } finally {\n      if (element) {\n        await element.dispose();\n      }\n    }\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst createdFunctions = new Map<string, (...args: unknown[]) => unknown>();\n\n/**\n * Creates a function from a string.\n *\n * @internal\n */\nexport const createFunction = (\n  functionValue: string\n): ((...args: unknown[]) => unknown) => {\n  let fn = createdFunctions.get(functionValue);\n  if (fn) {\n    return fn;\n  }\n  fn = new Function(`return ${functionValue}`)() as (\n    ...args: unknown[]\n  ) => unknown;\n  createdFunctions.set(functionValue, fn);\n  return fn;\n};\n\n/**\n * @internal\n */\nexport function stringifyFunction(fn: (...args: never) => unknown): string {\n  const value = fn.toString();\n  /**\n   * We remove the check for the ability for dynamic javascript to be\n   * serializable, because the Workers runtime does not allow dynamic\n   * javascript to be executed, as a security precaution. In the\n   * future, we can consider the serialization check in the back end\n   * but before the message gets to the remote browser.\n   */\n  // original implementationn\n  // try {\n  //   new Function(`(${value})`);\n  // } catch {\n  //   // This means we might have a function shorthand (e.g. `test(){}`). Let's\n  //   // try prefixing.\n  //   let prefix = 'function ';\n  //   if (value.startsWith('async ')) {\n  //     prefix = `async ${prefix}`;\n  //     value = value.substring('async '.length);\n  //   }\n  //   value = `${prefix}${value}`;\n  //   try {\n  //     new Function(`(${value})`);\n  //   } catch {\n  //     console.log('functions::::', value);\n  //     // We tried hard to serialize, but there's a weird beast here.\n  //     throw new Error('Passed function cannot be serialized!');\n  //   }\n  // }\n  return value;\n}\n\n/**\n * Replaces `PLACEHOLDER`s with the given replacements.\n *\n * All replacements must be valid JS code.\n *\n * @example\n *\n * ```ts\n * interpolateFunction(() => PLACEHOLDER('test'), {test: 'void 0'});\n * // Equivalent to () => void 0\n * ```\n *\n * @internal\n */\nexport const interpolateFunction = <T extends (...args: never[]) => unknown>(\n  fn: T,\n  replacements: Record<string, string>\n): T => {\n  let value = stringifyFunction(fn);\n  for (const [name, jsValue] of Object.entries(replacements)) {\n    value = value.replace(\n      new RegExp(`PLACEHOLDER\\\\(\\\\s*(?:'${name}'|\"${name}\")\\\\s*\\\\)`, 'g'),\n      // Wrapping this ensures tersers that accidently inline PLACEHOLDER calls\n      // are still valid. Without, we may get calls like ()=>{...}() which is\n      // not valid.\n      `(${jsValue})`\n    );\n  }\n  return createFunction(value) as unknown as T;\n};\n\ndeclare global {\n  /**\n   * Used for interpolation with {@link interpolateFunction}.\n   *\n   * @internal\n   */\n  function PLACEHOLDER<T>(name: string): T;\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {JSHandle} from '../api/JSHandle.js';\n\nimport {AwaitableIterable, HandleFor} from './types.js';\n\nconst DEFAULT_BATCH_SIZE = 20;\n\n/**\n * This will transpose an iterator JSHandle into a fast, Puppeteer-side iterator\n * of JSHandles.\n *\n * @param size - The number of elements to transpose. This should be something\n * reasonable.\n */\nasync function* fastTransposeIteratorHandle<T>(\n  iterator: JSHandle<AwaitableIterator<T>>,\n  size: number\n) {\n  const array = await iterator.evaluateHandle(async (iterator, size) => {\n    const results = [];\n    while (results.length < size) {\n      const result = await iterator.next();\n      if (result.done) {\n        break;\n      }\n      results.push(result.value);\n    }\n    return results;\n  }, size);\n  const properties = (await array.getProperties()) as Map<string, HandleFor<T>>;\n  await array.dispose();\n  yield* properties.values();\n  return properties.size === 0;\n}\n\n/**\n * This will transpose an iterator JSHandle in batches based on the default size\n * of {@link fastTransposeIteratorHandle}.\n */\n\nasync function* transposeIteratorHandle<T>(\n  iterator: JSHandle<AwaitableIterator<T>>\n) {\n  let size = DEFAULT_BATCH_SIZE;\n  try {\n    while (!(yield* fastTransposeIteratorHandle(iterator, size))) {\n      size <<= 1;\n    }\n  } finally {\n    await iterator.dispose();\n  }\n}\n\ntype AwaitableIterator<T> = Iterator<T> | AsyncIterator<T>;\n\n/**\n * @internal\n */\nexport async function* transposeIterableHandle<T>(\n  handle: JSHandle<AwaitableIterable<T>>\n): AsyncIterableIterator<HandleFor<T>> {\n  yield* transposeIteratorHandle(\n    await handle.evaluateHandle(iterable => {\n      return (async function* () {\n        yield* iterable;\n      })();\n    })\n  );\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {JSHandle} from '../api/JSHandle.js';\nimport PuppeteerUtil from '../injected/injected.js';\n\n/**\n * @internal\n */\nexport interface PuppeteerUtilWrapper {\n  puppeteerUtil: Promise<JSHandle<PuppeteerUtil>>;\n}\n\n/**\n * @internal\n */\nexport class LazyArg<T, Context = PuppeteerUtilWrapper> {\n  static create = <T>(\n    get: (context: PuppeteerUtilWrapper) => Promise<T> | T\n  ): T => {\n    // We don't want to introduce LazyArg to the type system, otherwise we would\n    // have to make it public.\n    return new LazyArg(get) as unknown as T;\n  };\n\n  #get: (context: Context) => Promise<T> | T;\n  private constructor(get: (context: Context) => Promise<T> | T) {\n    this.#get = get;\n  }\n\n  async get(context: Context): Promise<T> {\n    return this.#get(context);\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type PuppeteerUtil from '../injected/injected.js';\nimport {assert} from '../util/assert.js';\nimport {interpolateFunction, stringifyFunction} from '../util/Function.js';\n\nimport {QueryHandler, QuerySelector, QuerySelectorAll} from './QueryHandler.js';\nimport {scriptInjector} from './ScriptInjector.js';\n\n/**\n * @public\n */\nexport interface CustomQueryHandler {\n  /**\n   * Searches for a {@link https://developer.mozilla.org/en-US/docs/Web/API/Node | Node} matching the given `selector` from {@link https://developer.mozilla.org/en-US/docs/Web/API/Node | node}.\n   */\n  queryOne?: (node: Node, selector: string) => Node | null;\n  /**\n   * Searches for some {@link https://developer.mozilla.org/en-US/docs/Web/API/Node | Nodes} matching the given `selector` from {@link https://developer.mozilla.org/en-US/docs/Web/API/Node | node}.\n   */\n  queryAll?: (node: Node, selector: string) => Iterable<Node>;\n}\n\n/**\n * The registry of {@link CustomQueryHandler | custom query handlers}.\n *\n * @example\n *\n * ```ts\n * Puppeteer.customQueryHandlers.register('lit', { \u2026 });\n * const aHandle = await page.$('lit/\u2026');\n * ```\n *\n * @internal\n */\nexport class CustomQueryHandlerRegistry {\n  #handlers = new Map<\n    string,\n    [registerScript: string, Handler: typeof QueryHandler]\n  >();\n\n  /**\n   * @internal\n   */\n  get(name: string): typeof QueryHandler | undefined {\n    const handler = this.#handlers.get(name);\n    return handler ? handler[1] : undefined;\n  }\n\n  /**\n   * Registers a {@link CustomQueryHandler | custom query handler}.\n   *\n   * @remarks\n   * After registration, the handler can be used everywhere where a selector is\n   * expected by prepending the selection string with `<name>/`. The name is\n   * only allowed to consist of lower- and upper case latin letters.\n   *\n   * @example\n   *\n   * ```ts\n   * Puppeteer.customQueryHandlers.register('lit', { \u2026 });\n   * const aHandle = await page.$('lit/\u2026');\n   * ```\n   *\n   * @param name - Name to register under.\n   * @param queryHandler - {@link CustomQueryHandler | Custom query handler} to\n   * register.\n   *\n   * @internal\n   */\n  register(name: string, handler: CustomQueryHandler): void {\n    assert(\n      !this.#handlers.has(name),\n      `Cannot register over existing handler: ${name}`\n    );\n    assert(\n      /^[a-zA-Z]+$/.test(name),\n      `Custom query handler names may only contain [a-zA-Z]`\n    );\n    assert(\n      handler.queryAll || handler.queryOne,\n      `At least one query method must be implemented.`\n    );\n\n    const Handler = class extends QueryHandler {\n      static override querySelectorAll: QuerySelectorAll = interpolateFunction(\n        (node, selector, PuppeteerUtil) => {\n          return PuppeteerUtil.customQuerySelectors\n            .get(PLACEHOLDER('name'))!\n            .querySelectorAll(node, selector);\n        },\n        {name: JSON.stringify(name)}\n      );\n      static override querySelector: QuerySelector = interpolateFunction(\n        (node, selector, PuppeteerUtil) => {\n          return PuppeteerUtil.customQuerySelectors\n            .get(PLACEHOLDER('name'))!\n            .querySelector(node, selector);\n        },\n        {name: JSON.stringify(name)}\n      );\n    };\n    const registerScript = interpolateFunction(\n      (PuppeteerUtil: PuppeteerUtil) => {\n        PuppeteerUtil.customQuerySelectors.register(PLACEHOLDER('name'), {\n          queryAll: PLACEHOLDER('queryAll'),\n          queryOne: PLACEHOLDER('queryOne'),\n        });\n      },\n      {\n        name: JSON.stringify(name),\n        queryAll: handler.queryAll\n          ? stringifyFunction(handler.queryAll)\n          : String(undefined),\n        queryOne: handler.queryOne\n          ? stringifyFunction(handler.queryOne)\n          : String(undefined),\n      }\n    ).toString();\n\n    this.#handlers.set(name, [registerScript, Handler]);\n    scriptInjector.append(registerScript);\n  }\n\n  /**\n   * Unregisters the {@link CustomQueryHandler | custom query handler} for the\n   * given name.\n   *\n   * @throws `Error` if there is no handler under the given name.\n   *\n   * @internal\n   */\n  unregister(name: string): void {\n    const handler = this.#handlers.get(name);\n    if (!handler) {\n      throw new Error(`Cannot unregister unknown handler: ${name}`);\n    }\n    scriptInjector.pop(handler[0]);\n    this.#handlers.delete(name);\n  }\n\n  /**\n   * Gets the names of all {@link CustomQueryHandler | custom query handlers}.\n   *\n   * @internal\n   */\n  names(): string[] {\n    return [...this.#handlers.keys()];\n  }\n\n  /**\n   * Unregisters all custom query handlers.\n   *\n   * @internal\n   */\n  clear(): void {\n    for (const [registerScript] of this.#handlers) {\n      scriptInjector.pop(registerScript);\n    }\n    this.#handlers.clear();\n  }\n}\n\n/**\n * @internal\n */\nexport const customQueryHandlers = new CustomQueryHandlerRegistry();\n\n/**\n * @deprecated Import {@link Puppeteer} and use the static method\n * {@link Puppeteer.registerCustomQueryHandler}\n *\n * @public\n */\nexport function registerCustomQueryHandler(\n  name: string,\n  handler: CustomQueryHandler\n): void {\n  customQueryHandlers.register(name, handler);\n}\n\n/**\n * @deprecated Import {@link Puppeteer} and use the static method\n * {@link Puppeteer.unregisterCustomQueryHandler}\n *\n * @public\n */\nexport function unregisterCustomQueryHandler(name: string): void {\n  customQueryHandlers.unregister(name);\n}\n\n/**\n * @deprecated Import {@link Puppeteer} and use the static method\n * {@link Puppeteer.customQueryHandlerNames}\n *\n * @public\n */\nexport function customQueryHandlerNames(): string[] {\n  return customQueryHandlers.names();\n}\n\n/**\n * @deprecated Import {@link Puppeteer} and use the static method\n * {@link Puppeteer.clearCustomQueryHandlers}\n *\n * @public\n */\nexport function clearCustomQueryHandlers(): void {\n  customQueryHandlers.clear();\n}\n", "import {source as injectedSource} from '../generated/injected.js';\n\nclass ScriptInjector {\n  #updated = false;\n  #amendments = new Set<string>();\n\n  // Appends a statement of the form `(PuppeteerUtil) => {...}`.\n  append(statement: string): void {\n    this.#update(() => {\n      this.#amendments.add(statement);\n    });\n  }\n\n  pop(statement: string): void {\n    this.#update(() => {\n      this.#amendments.delete(statement);\n    });\n  }\n\n  inject(inject: (script: string) => void, force = false) {\n    if (this.#updated || force) {\n      inject(this.#get());\n    }\n    this.#updated = false;\n  }\n\n  #update(callback: () => void): void {\n    callback();\n    this.#updated = true;\n  }\n\n  #get(): string {\n    return `(() => {\n      const module = {};\n      ${injectedSource}\n      ${[...this.#amendments]\n        .map(statement => {\n          return `(${statement})(module.exports.default);`;\n        })\n        .join('')}\n      return module.exports.default;\n    })()`;\n  }\n}\n\n/**\n * @internal\n */\nexport const scriptInjector = new ScriptInjector();\n", "/**\n * JavaScript code that provides the puppeteer utilities. See the\n * [README](https://github.com/puppeteer/puppeteer/blob/main/src/injected/README.md)\n * for injection for more information.\n *\n * @internal\n */\nexport const source = \"\\\"use strict\\\";var C=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var se=Object.prototype.hasOwnProperty;var u=(t,e)=>{for(var n in e)C(t,n,{get:e[n],enumerable:!0})},ie=(t,e,n,r)=>{if(e&&typeof e==\\\"object\\\"||typeof e==\\\"function\\\")for(let o of oe(e))!se.call(t,o)&&o!==n&&C(t,o,{get:()=>e[o],enumerable:!(r=ne(e,o))||r.enumerable});return t};var le=t=>ie(C({},\\\"__esModule\\\",{value:!0}),t);var Oe={};u(Oe,{default:()=>Re});module.exports=le(Oe);var T=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},S=class extends T{},I=class extends T{#e;#t=\\\"\\\";set code(e){this.#e=e}get code(){return this.#e}set originalMessage(e){this.#t=e}get originalMessage(){return this.#t}};var qe=Object.freeze({TimeoutError:S,ProtocolError:I});var f=class t{#e=!1;#t=!1;#n;#r=()=>{};#o=new Promise(e=>{this.#r=e});#s;constructor(e){this.#s=e&&e.timeout>0?setTimeout(()=>{this.reject(new S(e.message))},e.timeout):void 0}#i(e){clearTimeout(this.#s),this.#n=e,this.#r()}resolve(e){this.#t||this.#e||(this.#e=!0,this.#i(e))}reject(e){this.#t||this.#e||(this.#t=!0,this.#i(e))}resolved(){return this.#e}finished(){return this.#e||this.#t}value(){return this.#n}async valueOrThrow(){if(await this.#o,this.#t)throw this.#n;return this.#n}static create(e){return new t(e)}static async race(e){let n=new Set;try{let r=e.map(o=>o instanceof t?(o.#s&&n.add(o),o.valueOrThrow()):o);return await Promise.race(r)}finally{for(let r of n)r.reject(new Error(\\\"Timeout cleared\\\"))}}};var G=new Map,X=t=>{let e=G.get(t);return e||(e=new Function(`return ${t}`)(),G.set(t,e),e)};var R={};u(R,{ariaQuerySelector:()=>ae,ariaQuerySelectorAll:()=>k});var ae=(t,e)=>window.__ariaQuerySelector(t,e),k=async function*(t,e){yield*await window.__ariaQuerySelectorAll(t,e)};var q={};u(q,{customQuerySelectors:()=>M});var O=class{#e=new Map;register(e,n){if(!n.queryOne&&n.queryAll){let r=n.queryAll;n.queryOne=(o,i)=>{for(let s of r(o,i))return s;return null}}else if(n.queryOne&&!n.queryAll){let r=n.queryOne;n.queryAll=(o,i)=>{let s=r(o,i);return s?[s]:[]}}else if(!n.queryOne||!n.queryAll)throw new Error(\\\"At least one query method must be defined.\\\");this.#e.set(e,{querySelector:n.queryOne,querySelectorAll:n.queryAll})}unregister(e){this.#e.delete(e)}get(e){return this.#e.get(e)}clear(){this.#e.clear()}},M=new O;var D={};u(D,{pierceQuerySelector:()=>ce,pierceQuerySelectorAll:()=>ue});var ce=(t,e)=>{let n=null,r=o=>{let i=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&r(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==o&&!n&&s.matches(e)&&(n=s)}while(!n&&i.nextNode())};return t instanceof Document&&(t=t.documentElement),r(t),n},ue=(t,e)=>{let n=[],r=o=>{let i=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&r(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==o&&s.matches(e)&&n.push(s)}while(i.nextNode())};return t instanceof Document&&(t=t.documentElement),r(t),n};var m=(t,e)=>{if(!t)throw new Error(e)};var P=class{#e;#t;#n;#r;constructor(e,n){this.#e=e,this.#t=n}async start(){let e=this.#r=f.create(),n=await this.#e();if(n){e.resolve(n);return}this.#n=new MutationObserver(async()=>{let r=await this.#e();r&&(e.resolve(r),await this.stop())}),this.#n.observe(this.#t,{childList:!0,subtree:!0,attributes:!0})}async stop(){m(this.#r,\\\"Polling never started.\\\"),this.#r.finished()||this.#r.reject(new Error(\\\"Polling stopped\\\")),this.#n&&(this.#n.disconnect(),this.#n=void 0)}result(){return m(this.#r,\\\"Polling never started.\\\"),this.#r.valueOrThrow()}},E=class{#e;#t;constructor(e){this.#e=e}async start(){let e=this.#t=f.create(),n=await this.#e();if(n){e.resolve(n);return}let r=async()=>{if(e.finished())return;let o=await this.#e();if(!o){window.requestAnimationFrame(r);return}e.resolve(o),await this.stop()};window.requestAnimationFrame(r)}async stop(){m(this.#t,\\\"Polling never started.\\\"),this.#t.finished()||this.#t.reject(new Error(\\\"Polling stopped\\\"))}result(){return m(this.#t,\\\"Polling never started.\\\"),this.#t.valueOrThrow()}},N=class{#e;#t;#n;#r;constructor(e,n){this.#e=e,this.#t=n}async start(){let e=this.#r=f.create(),n=await this.#e();if(n){e.resolve(n);return}this.#n=setInterval(async()=>{let r=await this.#e();r&&(e.resolve(r),await this.stop())},this.#t)}async stop(){m(this.#r,\\\"Polling never started.\\\"),this.#r.finished()||this.#r.reject(new Error(\\\"Polling stopped\\\")),this.#n&&(clearInterval(this.#n),this.#n=void 0)}result(){return m(this.#r,\\\"Polling never started.\\\"),this.#r.valueOrThrow()}};var H={};u(H,{pQuerySelector:()=>Ie,pQuerySelectorAll:()=>re});var c=class{static async*map(e,n){for await(let r of e)yield await n(r)}static async*flatMap(e,n){for await(let r of e)yield*n(r)}static async collect(e){let n=[];for await(let r of e)n.push(r);return n}static async first(e){for await(let n of e)return n}};var p={attribute:/\\\\[\\\\s*(?:(?<namespace>\\\\*|[-\\\\w\\\\P{ASCII}]*)\\\\|)?(?<name>[-\\\\w\\\\P{ASCII}]+)\\\\s*(?:(?<operator>\\\\W?=)\\\\s*(?<value>.+?)\\\\s*(\\\\s(?<caseSensitive>[iIsS]))?\\\\s*)?\\\\]/gu,id:/#(?<name>[-\\\\w\\\\P{ASCII}]+)/gu,class:/\\\\.(?<name>[-\\\\w\\\\P{ASCII}]+)/gu,comma:/\\\\s*,\\\\s*/g,combinator:/\\\\s*[\\\\s>+~]\\\\s*/g,\\\"pseudo-element\\\":/::(?<name>[-\\\\w\\\\P{ASCII}]+)(?:\\\\((?<argument>\u00B6+)\\\\))?/gu,\\\"pseudo-class\\\":/:(?<name>[-\\\\w\\\\P{ASCII}]+)(?:\\\\((?<argument>\u00B6+)\\\\))?/gu,universal:/(?:(?<namespace>\\\\*|[-\\\\w\\\\P{ASCII}]*)\\\\|)?\\\\*/gu,type:/(?:(?<namespace>\\\\*|[-\\\\w\\\\P{ASCII}]*)\\\\|)?(?<name>[-\\\\w\\\\P{ASCII}]+)/gu},fe=new Set([\\\"combinator\\\",\\\"comma\\\"]);var de=t=>{switch(t){case\\\"pseudo-element\\\":case\\\"pseudo-class\\\":return new RegExp(p[t].source.replace(\\\"(?<argument>\\\\xB6+)\\\",\\\"(?<argument>.+)\\\"),\\\"gu\\\");default:return p[t]}};function me(t,e){let n=0,r=\\\"\\\";for(;e<t.length;e++){let o=t[e];switch(o){case\\\"(\\\":++n;break;case\\\")\\\":--n;break}if(r+=o,n===0)return r}return r}function he(t,e=p){if(!t)return[];let n=[t];for(let[o,i]of Object.entries(e))for(let s=0;s<n.length;s++){let l=n[s];if(typeof l!=\\\"string\\\")continue;i.lastIndex=0;let a=i.exec(l);if(!a)continue;let h=a.index-1,d=[],V=a[0],B=l.slice(0,h+1);B&&d.push(B),d.push({...a.groups,type:o,content:V});let z=l.slice(h+V.length+1);z&&d.push(z),n.splice(s,1,...d)}let r=0;for(let o of n)switch(typeof o){case\\\"string\\\":throw new Error(`Unexpected sequence ${o} found at index ${r}`);case\\\"object\\\":r+=o.content.length,o.pos=[r-o.content.length,r],fe.has(o.type)&&(o.content=o.content.trim()||\\\" \\\");break}return n}var pe=/(['\\\"])([^\\\\\\\\\\\\n]+?)\\\\1/g,ge=/\\\\\\\\./g;function K(t,e=p){if(t=t.trim(),t===\\\"\\\")return[];let n=[];t=t.replace(ge,(i,s)=>(n.push({value:i,offset:s}),\\\"\\\\uE000\\\".repeat(i.length))),t=t.replace(pe,(i,s,l,a)=>(n.push({value:i,offset:a}),`${s}${\\\"\\\\uE001\\\".repeat(l.length)}${s}`));{let i=0,s;for(;(s=t.indexOf(\\\"(\\\",i))>-1;){let l=me(t,s);n.push({value:l,offset:s}),t=`${t.substring(0,s)}(${\\\"\\\\xB6\\\".repeat(l.length-2)})${t.substring(s+l.length)}`,i=s+l.length}}let r=he(t,e),o=new Set;for(let i of n.reverse())for(let s of r){let{offset:l,value:a}=i;if(!(s.pos[0]<=l&&l+a.length<=s.pos[1]))continue;let{content:h}=s,d=l-s.pos[0];s.content=h.slice(0,d)+a+h.slice(d+a.length),s.content!==h&&o.add(s)}for(let i of o){let s=de(i.type);if(!s)throw new Error(`Unknown token type: ${i.type}`);s.lastIndex=0;let l=s.exec(i.content);if(!l)throw new Error(`Unable to parse content for ${i.type}: ${i.content}`);Object.assign(i,l.groups)}return r}function*x(t,e){switch(t.type){case\\\"list\\\":for(let n of t.list)yield*x(n,t);break;case\\\"complex\\\":yield*x(t.left,t),yield*x(t.right,t);break;case\\\"compound\\\":yield*t.list.map(n=>[n,t]);break;default:yield[t,e]}}function g(t){let e;return Array.isArray(t)?e=t:e=[...x(t)].map(([n])=>n),e.map(n=>n.content).join(\\\"\\\")}p.combinator=/\\\\s*(>>>>?|[\\\\s>+~])\\\\s*/g;var ye=/\\\\\\\\[\\\\s\\\\S]/g,we=t=>t.length<=1?t:((t[0]==='\\\"'||t[0]===\\\"'\\\")&&t.endsWith(t[0])&&(t=t.slice(1,-1)),t.replace(ye,e=>e[1]));function Y(t){let e=!0,n=K(t);if(n.length===0)return[[],e];let r=[],o=[r],i=[o],s=[];for(let l of n){switch(l.type){case\\\"combinator\\\":switch(l.content){case\\\">>>\\\":e=!1,s.length&&(r.push(g(s)),s.splice(0)),r=[],o.push(\\\">>>\\\"),o.push(r);continue;case\\\">>>>\\\":e=!1,s.length&&(r.push(g(s)),s.splice(0)),r=[],o.push(\\\">>>>\\\"),o.push(r);continue}break;case\\\"pseudo-element\\\":if(!l.name.startsWith(\\\"-p-\\\"))break;e=!1,s.length&&(r.push(g(s)),s.splice(0)),r.push({name:l.name.slice(3),value:we(l.argument??\\\"\\\")});continue;case\\\"comma\\\":s.length&&(r.push(g(s)),s.splice(0)),r=[],o=[r],i.push(o);continue}s.push(l)}return s.length&&r.push(g(s)),[i,e]}var Q={};u(Q,{textQuerySelectorAll:()=>b});var Se=new Set([\\\"checkbox\\\",\\\"image\\\",\\\"radio\\\"]),be=t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement&&!Se.has(t.type),Te=new Set([\\\"SCRIPT\\\",\\\"STYLE\\\"]),w=t=>!Te.has(t.nodeName)&&!document.head?.contains(t),_=new WeakMap,Z=t=>{for(;t;)_.delete(t),t instanceof ShadowRoot?t=t.host:t=t.parentNode},J=new WeakSet,Pe=new MutationObserver(t=>{for(let e of t)Z(e.target)}),y=t=>{let e=_.get(t);if(e||(e={full:\\\"\\\",immediate:[]},!w(t)))return e;let n=\\\"\\\";if(be(t))e.full=t.value,e.immediate.push(t.value),t.addEventListener(\\\"input\\\",r=>{Z(r.target)},{once:!0,capture:!0});else{for(let r=t.firstChild;r;r=r.nextSibling){if(r.nodeType===Node.TEXT_NODE){e.full+=r.nodeValue??\\\"\\\",n+=r.nodeValue??\\\"\\\";continue}n&&e.immediate.push(n),n=\\\"\\\",r.nodeType===Node.ELEMENT_NODE&&(e.full+=y(r).full)}n&&e.immediate.push(n),t instanceof Element&&t.shadowRoot&&(e.full+=y(t.shadowRoot).full),J.has(t)||(Pe.observe(t,{childList:!0,characterData:!0}),J.add(t))}return _.set(t,e),e};var b=function*(t,e){let n=!1;for(let r of t.childNodes)if(r instanceof Element&&w(r)){let o;r.shadowRoot?o=b(r.shadowRoot,e):o=b(r,e);for(let i of o)yield i,n=!0}n||t instanceof Element&&w(t)&&y(t).full.includes(e)&&(yield t)};var U={};u(U,{checkVisibility:()=>Ne,pierce:()=>A,pierceAll:()=>L});var Ee=[\\\"hidden\\\",\\\"collapse\\\"],Ne=(t,e)=>{if(!t)return e===!1;if(e===void 0)return t;let n=t.nodeType===Node.TEXT_NODE?t.parentElement:t,r=window.getComputedStyle(n),o=r&&!Ee.includes(r.visibility)&&!xe(n);return e===o?t:!1};function xe(t){let e=t.getBoundingClientRect();return e.width===0||e.height===0}var Ae=t=>\\\"shadowRoot\\\"in t&&t.shadowRoot instanceof ShadowRoot;function*A(t){Ae(t)?yield t.shadowRoot:yield t}function*L(t){t=A(t).next().value,yield t;let e=[document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT)];for(let n of e){let r;for(;r=n.nextNode();)r.shadowRoot&&(yield r.shadowRoot,e.push(document.createTreeWalker(r.shadowRoot,NodeFilter.SHOW_ELEMENT)))}}var $={};u($,{xpathQuerySelectorAll:()=>j});var j=function*(t,e){let r=(t.ownerDocument||document).evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),o;for(;o=r.iterateNext();)yield o};var ve=/[-\\\\w\\\\P{ASCII}*]/,ee=t=>\\\"querySelectorAll\\\"in t,v=class extends Error{constructor(e,n){super(`${e} is not a valid selector: ${n}`)}},F=class{#e;#t;#n=[];#r=void 0;elements;constructor(e,n,r){this.elements=[e],this.#e=n,this.#t=r,this.#o()}async run(){if(typeof this.#r==\\\"string\\\")switch(this.#r.trimStart()){case\\\":scope\\\":this.#o();break}for(;this.#r!==void 0;this.#o()){let e=this.#r,n=this.#e;typeof e==\\\"string\\\"?e[0]&&ve.test(e[0])?this.elements=c.flatMap(this.elements,async function*(r){ee(r)&&(yield*r.querySelectorAll(e))}):this.elements=c.flatMap(this.elements,async function*(r){if(!r.parentElement){if(!ee(r))return;yield*r.querySelectorAll(e);return}let o=0;for(let i of r.parentElement.children)if(++o,i===r)break;yield*r.parentElement.querySelectorAll(`:scope>:nth-child(${o})${e}`)}):this.elements=c.flatMap(this.elements,async function*(r){switch(e.name){case\\\"text\\\":yield*b(r,e.value);break;case\\\"xpath\\\":yield*j(r,e.value);break;case\\\"aria\\\":yield*k(r,e.value);break;default:let o=M.get(e.name);if(!o)throw new v(n,`Unknown selector type: ${e.name}`);yield*o.querySelectorAll(r,e.value)}})}}#o(){if(this.#n.length!==0){this.#r=this.#n.shift();return}if(this.#t.length===0){this.#r=void 0;return}let e=this.#t.shift();switch(e){case\\\">>>>\\\":{this.elements=c.flatMap(this.elements,A),this.#o();break}case\\\">>>\\\":{this.elements=c.flatMap(this.elements,L),this.#o();break}default:this.#n=e,this.#o();break}}},W=class{#e=new WeakMap;calculate(e,n=[]){if(e===null)return n;e instanceof ShadowRoot&&(e=e.host);let r=this.#e.get(e);if(r)return[...r,...n];let o=0;for(let s=e.previousSibling;s;s=s.previousSibling)++o;let i=this.calculate(e.parentNode,[o]);return this.#e.set(e,i),[...i,...n]}},te=(t,e)=>{if(t.length+e.length===0)return 0;let[n=-1,...r]=t,[o=-1,...i]=e;return n===o?te(r,i):n<o?-1:1},Ce=async function*(t){let e=new Set;for await(let r of t)e.add(r);let n=new W;yield*[...e.values()].map(r=>[r,n.calculate(r)]).sort(([,r],[,o])=>te(r,o)).map(([r])=>r)},re=function(t,e){let n,r;try{[n,r]=Y(e)}catch{return t.querySelectorAll(e)}if(r)return t.querySelectorAll(e);if(n.some(o=>{let i=0;return o.some(s=>(typeof s==\\\"string\\\"?++i:i=0,i>1))}))throw new v(e,\\\"Multiple deep combinators found in sequence.\\\");return Ce(c.flatMap(n,o=>{let i=new F(t,e,o);return i.run(),i.elements}))},Ie=async function(t,e){for await(let n of re(t,e))return n;return null};var ke=Object.freeze({...R,...q,...D,...H,...Q,...U,...$,Deferred:f,createFunction:X,createTextContent:y,IntervalPoller:N,isSuitableNodeForTextMatching:w,MutationPoller:P,RAFPoller:E}),Re=ke;\\n\";\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type PuppeteerUtil from '../injected/injected.js';\n\nimport {QueryHandler} from './QueryHandler.js';\n\n/**\n * @internal\n */\nexport class PierceQueryHandler extends QueryHandler {\n  static override querySelector = (\n    element: Node,\n    selector: string,\n    {pierceQuerySelector}: PuppeteerUtil\n  ): Node | null => {\n    return pierceQuerySelector(element, selector);\n  };\n  static override querySelectorAll = (\n    element: Node,\n    selector: string,\n    {pierceQuerySelectorAll}: PuppeteerUtil\n  ): Iterable<Node> => {\n    return pierceQuerySelectorAll(element, selector);\n  };\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {QueryHandler, QuerySelector, QuerySelectorAll} from './QueryHandler.js';\n\n/**\n * @internal\n */\nexport class PQueryHandler extends QueryHandler {\n  static override querySelectorAll: QuerySelectorAll = (\n    element,\n    selector,\n    {pQuerySelectorAll}\n  ) => {\n    return pQuerySelectorAll(element, selector);\n  };\n  static override querySelector: QuerySelector = (\n    element,\n    selector,\n    {pQuerySelector}\n  ) => {\n    return pQuerySelector(element, selector);\n  };\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {QueryHandler, QuerySelectorAll} from './QueryHandler.js';\n\n/**\n * @internal\n */\nexport class TextQueryHandler extends QueryHandler {\n  static override querySelectorAll: QuerySelectorAll = (\n    element,\n    selector,\n    {textQuerySelectorAll}\n  ) => {\n    return textQuerySelectorAll(element, selector);\n  };\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {QueryHandler, QuerySelectorAll} from './QueryHandler.js';\n\n/**\n * @internal\n */\nexport class XPathQueryHandler extends QueryHandler {\n  static override querySelectorAll: QuerySelectorAll = (\n    element,\n    selector,\n    {xpathQuerySelectorAll}\n  ) => {\n    return xpathQuerySelectorAll(element, selector);\n  };\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Protocol from 'devtools-protocol';\n\nimport {CDPSession} from '../common/Connection.js';\nimport {ExecutionContext} from '../common/ExecutionContext.js';\nimport {EvaluateFuncWith, HandleFor, HandleOr} from '../common/types.js';\n\nimport {ElementHandle} from './ElementHandle.js';\n\n/**\n * Represents a reference to a JavaScript object. Instances can be created using\n * {@link Page.evaluateHandle}.\n *\n * Handles prevent the referenced JavaScript object from being garbage-collected\n * unless the handle is purposely {@link JSHandle.dispose | disposed}. JSHandles\n * are auto-disposed when their associated frame is navigated away or the parent\n * context gets destroyed.\n *\n * Handles can be used as arguments for any evaluation function such as\n * {@link Page.$eval}, {@link Page.evaluate}, and {@link Page.evaluateHandle}.\n * They are resolved to their referenced object.\n *\n * @example\n *\n * ```ts\n * const windowHandle = await page.evaluateHandle(() => window);\n * ```\n *\n * @public\n */\nexport class JSHandle<T = unknown> {\n  /**\n   * Used for nominally typing {@link JSHandle}.\n   */\n  declare _?: T;\n\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * @internal\n   */\n  get disposed(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  executionContext(): ExecutionContext {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  get client(): CDPSession {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Evaluates the given function with the current handle as its first argument.\n   */\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<T, Params> = EvaluateFuncWith<T, Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>>;\n  async evaluate(): Promise<unknown> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Evaluates the given function with the current handle as its first argument.\n   *\n   */\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<T, Params> = EvaluateFuncWith<T, Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>>;\n  async evaluateHandle(): Promise<HandleFor<unknown>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Fetches a single property from the referenced object.\n   */\n  async getProperty<K extends keyof T>(\n    propertyName: HandleOr<K>\n  ): Promise<HandleFor<T[K]>>;\n  async getProperty(propertyName: string): Promise<JSHandle<unknown>>;\n  async getProperty<K extends keyof T>(\n    propertyName: HandleOr<K>\n  ): Promise<HandleFor<T[K]>>;\n  async getProperty<K extends keyof T>(): Promise<HandleFor<T[K]>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Gets a map of handles representing the properties of the current handle.\n   *\n   * @example\n   *\n   * ```ts\n   * const listHandle = await page.evaluateHandle(() => document.body.children);\n   * const properties = await listHandle.getProperties();\n   * const children = [];\n   * for (const property of properties.values()) {\n   *   const element = property.asElement();\n   *   if (element) {\n   *     children.push(element);\n   *   }\n   * }\n   * children; // holds elementHandles to all children of document.body\n   * ```\n   */\n  async getProperties(): Promise<Map<string, JSHandle>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * A vanilla object representing the serializable portions of the\n   * referenced object.\n   * @throws Throws if the object cannot be serialized due to circularity.\n   *\n   * @remarks\n   * If the object has a `toJSON` function, it **will not** be called.\n   */\n  async jsonValue(): Promise<T> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Either `null` or the handle itself if the handle is an\n   * instance of {@link ElementHandle}.\n   */\n  asElement(): ElementHandle<Node> | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Releases the object referenced by the handle for garbage collection.\n   */\n  async dispose(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Returns a string representation of the JSHandle.\n   *\n   * @remarks\n   * Useful during debugging.\n   */\n  toString(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  get id(): string | undefined {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Provides access to the\n   * {@link https://chromedevtools.github.io/devtools-protocol/tot/Runtime/#type-RemoteObject | Protocol.Runtime.RemoteObject}\n   * backing this handle.\n   */\n  remoteObject(): Protocol.Runtime.RemoteObject {\n    throw new Error('Not implemented');\n  }\n}\n", "/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {JSHandle} from '../api/JSHandle.js';\nimport {assert} from '../util/assert.js';\n\nimport {CDPSession} from './Connection.js';\nimport type {CDPElementHandle} from './ElementHandle.js';\nimport {ExecutionContext} from './ExecutionContext.js';\nimport {EvaluateFuncWith, HandleFor, HandleOr} from './types.js';\nimport {\n  createJSHandle,\n  releaseObject,\n  valueFromRemoteObject,\n  withSourcePuppeteerURLIfNone,\n} from './util.js';\n\n/**\n * @internal\n */\nexport class CDPJSHandle<T = unknown> extends JSHandle<T> {\n  #disposed = false;\n  #context: ExecutionContext;\n  #remoteObject: Protocol.Runtime.RemoteObject;\n\n  override get disposed(): boolean {\n    return this.#disposed;\n  }\n\n  constructor(\n    context: ExecutionContext,\n    remoteObject: Protocol.Runtime.RemoteObject\n  ) {\n    super();\n    this.#context = context;\n    this.#remoteObject = remoteObject;\n  }\n\n  override executionContext(): ExecutionContext {\n    return this.#context;\n  }\n\n  override get client(): CDPSession {\n    return this.#context._client;\n  }\n\n  /**\n   * @see {@link ExecutionContext.evaluate} for more details.\n   */\n  override async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<T, Params> = EvaluateFuncWith<T, Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluate.name,\n      pageFunction\n    );\n    return await this.executionContext().evaluate(pageFunction, this, ...args);\n  }\n\n  /**\n   * @see {@link ExecutionContext.evaluateHandle} for more details.\n   */\n  override async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<T, Params> = EvaluateFuncWith<T, Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluateHandle.name,\n      pageFunction\n    );\n    return await this.executionContext().evaluateHandle(\n      pageFunction,\n      this,\n      ...args\n    );\n  }\n\n  override async getProperty<K extends keyof T>(\n    propertyName: HandleOr<K>\n  ): Promise<HandleFor<T[K]>>;\n  override async getProperty(propertyName: string): Promise<JSHandle<unknown>>;\n  override async getProperty<K extends keyof T>(\n    propertyName: HandleOr<K>\n  ): Promise<HandleFor<T[K]>> {\n    return this.evaluateHandle((object, propertyName) => {\n      return object[propertyName as K];\n    }, propertyName);\n  }\n\n  override async getProperties(): Promise<Map<string, JSHandle>> {\n    assert(this.#remoteObject.objectId);\n    // We use Runtime.getProperties rather than iterative building because the\n    // iterative approach might create a distorted snapshot.\n    const response = await this.client.send('Runtime.getProperties', {\n      objectId: this.#remoteObject.objectId,\n      ownProperties: true,\n    });\n    const result = new Map<string, JSHandle>();\n    for (const property of response.result) {\n      if (!property.enumerable || !property.value) {\n        continue;\n      }\n      result.set(property.name, createJSHandle(this.#context, property.value));\n    }\n    return result;\n  }\n\n  override async jsonValue(): Promise<T> {\n    if (!this.#remoteObject.objectId) {\n      return valueFromRemoteObject(this.#remoteObject);\n    }\n    const value = await this.evaluate(object => {\n      return object;\n    });\n    if (value === undefined) {\n      throw new Error('Could not serialize referenced object');\n    }\n    return value;\n  }\n\n  /**\n   * Either `null` or the handle itself if the handle is an\n   * instance of {@link ElementHandle}.\n   */\n  override asElement(): CDPElementHandle<Node> | null {\n    return null;\n  }\n\n  override async dispose(): Promise<void> {\n    if (this.#disposed) {\n      return;\n    }\n    this.#disposed = true;\n    await releaseObject(this.client, this.#remoteObject);\n  }\n\n  override toString(): string {\n    if (!this.#remoteObject.objectId) {\n      return 'JSHandle:' + valueFromRemoteObject(this.#remoteObject);\n    }\n    const type = this.#remoteObject.subtype || this.#remoteObject.type;\n    return 'JSHandle@' + type;\n  }\n\n  override get id(): string | undefined {\n    return this.#remoteObject.objectId;\n  }\n\n  override remoteObject(): Protocol.Runtime.RemoteObject {\n    return this.#remoteObject;\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {EventEmitter} from '../common/EventEmitter.js';\n\nimport type {Permission, Browser} from './Browser.js';\nimport {Page} from './Page.js';\nimport type {Target} from './Target.js';\n\n/**\n * BrowserContexts provide a way to operate multiple independent browser\n * sessions. When a browser is launched, it has a single BrowserContext used by\n * default. The method {@link Browser.newPage | Browser.newPage} creates a page\n * in the default browser context.\n *\n * @remarks\n *\n * The Browser class extends from Puppeteer's {@link EventEmitter} class and\n * will emit various events which are documented in the\n * {@link BrowserContextEmittedEvents} enum.\n *\n * If a page opens another page, e.g. with a `window.open` call, the popup will\n * belong to the parent page's browser context.\n *\n * Puppeteer allows creation of \"incognito\" browser contexts with\n * {@link Browser.createIncognitoBrowserContext | Browser.createIncognitoBrowserContext}\n * method. \"Incognito\" browser contexts don't write any browsing data to disk.\n *\n * @example\n *\n * ```ts\n * // Create a new incognito browser context\n * const context = await browser.createIncognitoBrowserContext();\n * // Create a new page inside context.\n * const page = await context.newPage();\n * // ... do stuff with page ...\n * await page.goto('https://example.com');\n * // Dispose context once it's no longer needed.\n * await context.close();\n * ```\n *\n * @public\n */\n\nexport class BrowserContext extends EventEmitter {\n  /**\n   * @internal\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * An array of all active targets inside the browser context.\n   */\n  targets(): Target[] {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This searches for a target in this specific browser context.\n   *\n   * @example\n   * An example of finding a target for a page opened via `window.open`:\n   *\n   * ```ts\n   * await page.evaluate(() => window.open('https://www.example.com/'));\n   * const newWindowTarget = await browserContext.waitForTarget(\n   *   target => target.url() === 'https://www.example.com/'\n   * );\n   * ```\n   *\n   * @param predicate - A function to be run for every target\n   * @param options - An object of options. Accepts a timeout,\n   * which is the maximum wait time in milliseconds.\n   * Pass `0` to disable the timeout. Defaults to 30 seconds.\n   * @returns Promise which resolves to the first target found\n   * that matches the `predicate` function.\n   */\n  waitForTarget(\n    predicate: (x: Target) => boolean | Promise<boolean>,\n    options?: {timeout?: number}\n  ): Promise<Target>;\n  waitForTarget(): Promise<Target> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * An array of all pages inside the browser context.\n   *\n   * @returns Promise which resolves to an array of all open pages.\n   * Non visible pages, such as `\"background_page\"`, will not be listed here.\n   * You can find them using {@link Target.page | the target page}.\n   */\n  pages(): Promise<Page[]> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Returns whether BrowserContext is incognito.\n   * The default browser context is the only non-incognito browser context.\n   *\n   * @remarks\n   * The default browser context cannot be closed.\n   */\n  isIncognito(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @example\n   *\n   * ```ts\n   * const context = browser.defaultBrowserContext();\n   * await context.overridePermissions('https://html5demos.com', [\n   *   'geolocation',\n   * ]);\n   * ```\n   *\n   * @param origin - The origin to grant permissions to, e.g. \"https://example.com\".\n   * @param permissions - An array of permissions to grant.\n   * All permissions that are not listed here will be automatically denied.\n   */\n  overridePermissions(origin: string, permissions: Permission[]): Promise<void>;\n  overridePermissions(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Clears all permission overrides for the browser context.\n   *\n   * @example\n   *\n   * ```ts\n   * const context = browser.defaultBrowserContext();\n   * context.overridePermissions('https://example.com', ['clipboard-read']);\n   * // do stuff ..\n   * context.clearPermissionOverrides();\n   * ```\n   */\n  clearPermissionOverrides(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Creates a new page in the browser context.\n   */\n  newPage(): Promise<Page> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The browser this browser context belongs to.\n   */\n  browser(): Browser {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Closes the browser context. All the targets that belong to the browser context\n   * will be closed.\n   *\n   * @remarks\n   * Only incognito browser contexts can be closed.\n   */\n  close(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  get id(): string | undefined {\n    return undefined;\n  }\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {TargetFilterCallback} from '../api/Browser.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {CDPSession, Connection} from './Connection.js';\nimport {EventEmitter} from './EventEmitter.js';\nimport {InitializationStatus, CDPTarget} from './Target.js';\nimport {\n  TargetInterceptor,\n  TargetFactory,\n  TargetManager,\n  TargetManagerEmittedEvents,\n} from './TargetManager.js';\nimport {debugError} from './util.js';\n\n/**\n * ChromeTargetManager uses the CDP's auto-attach mechanism to intercept\n * new targets and allow the rest of Puppeteer to configure listeners while\n * the target is paused.\n *\n * @internal\n */\nexport class ChromeTargetManager extends EventEmitter implements TargetManager {\n  #connection: Connection;\n  /**\n   * Keeps track of the following events: 'Target.targetCreated',\n   * 'Target.targetDestroyed', 'Target.targetInfoChanged'.\n   *\n   * A target becomes discovered when 'Target.targetCreated' is received.\n   * A target is removed from this map once 'Target.targetDestroyed' is\n   * received.\n   *\n   * `targetFilterCallback` has no effect on this map.\n   */\n  #discoveredTargetsByTargetId = new Map<string, Protocol.Target.TargetInfo>();\n  /**\n   * A target is added to this map once ChromeTargetManager has created\n   * a Target and attached at least once to it.\n   */\n  #attachedTargetsByTargetId = new Map<string, CDPTarget>();\n  /**\n   * Tracks which sessions attach to which target.\n   */\n  #attachedTargetsBySessionId = new Map<string, CDPTarget>();\n  /**\n   * If a target was filtered out by `targetFilterCallback`, we still receive\n   * events about it from CDP, but we don't forward them to the rest of Puppeteer.\n   */\n  #ignoredTargets = new Set<string>();\n  #targetFilterCallback: TargetFilterCallback | undefined;\n  #targetFactory: TargetFactory;\n\n  #targetInterceptors = new WeakMap<\n    CDPSession | Connection,\n    TargetInterceptor[]\n  >();\n\n  #attachedToTargetListenersBySession = new WeakMap<\n    CDPSession | Connection,\n    (event: Protocol.Target.AttachedToTargetEvent) => Promise<void>\n  >();\n  #detachedFromTargetListenersBySession = new WeakMap<\n    CDPSession | Connection,\n    (event: Protocol.Target.DetachedFromTargetEvent) => void\n  >();\n\n  #initializeDeferred = Deferred.create<void>();\n  #targetsIdsForInit = new Set<string>();\n  #waitForInitiallyDiscoveredTargets = true;\n\n  constructor(\n    connection: Connection,\n    targetFactory: TargetFactory,\n    targetFilterCallback?: TargetFilterCallback,\n    waitForInitiallyDiscoveredTargets = true\n  ) {\n    super();\n    this.#connection = connection;\n    this.#targetFilterCallback = targetFilterCallback;\n    this.#targetFactory = targetFactory;\n    this.#waitForInitiallyDiscoveredTargets = waitForInitiallyDiscoveredTargets;\n\n    this.#connection.on('Target.targetCreated', this.#onTargetCreated);\n    this.#connection.on('Target.targetDestroyed', this.#onTargetDestroyed);\n    this.#connection.on('Target.targetInfoChanged', this.#onTargetInfoChanged);\n    this.#connection.on('sessiondetached', this.#onSessionDetached);\n    this.#setupAttachmentListeners(this.#connection);\n\n    this.#connection\n      .send('Target.setDiscoverTargets', {\n        discover: true,\n        filter: [{type: 'tab', exclude: true}, {}],\n      })\n      .then(this.#storeExistingTargetsForInit)\n      .catch(debugError);\n  }\n\n  #storeExistingTargetsForInit = () => {\n    if (!this.#waitForInitiallyDiscoveredTargets) {\n      return;\n    }\n    for (const [\n      targetId,\n      targetInfo,\n    ] of this.#discoveredTargetsByTargetId.entries()) {\n      const targetForFilter = new CDPTarget(\n        targetInfo,\n        undefined,\n        undefined,\n        this,\n        undefined\n      );\n      if (\n        (!this.#targetFilterCallback ||\n          this.#targetFilterCallback(targetForFilter)) &&\n        targetInfo.type !== 'browser'\n      ) {\n        this.#targetsIdsForInit.add(targetId);\n      }\n    }\n  };\n\n  async initialize(): Promise<void> {\n    await this.#connection.send('Target.setAutoAttach', {\n      waitForDebuggerOnStart: true,\n      flatten: true,\n      autoAttach: true,\n    });\n    this.#finishInitializationIfReady();\n    await this.#initializeDeferred.valueOrThrow();\n  }\n\n  dispose(): void {\n    this.#connection.off('Target.targetCreated', this.#onTargetCreated);\n    this.#connection.off('Target.targetDestroyed', this.#onTargetDestroyed);\n    this.#connection.off('Target.targetInfoChanged', this.#onTargetInfoChanged);\n    this.#connection.off('sessiondetached', this.#onSessionDetached);\n\n    this.#removeAttachmentListeners(this.#connection);\n  }\n\n  getAvailableTargets(): Map<string, CDPTarget> {\n    return this.#attachedTargetsByTargetId;\n  }\n\n  addTargetInterceptor(\n    session: CDPSession | Connection,\n    interceptor: TargetInterceptor\n  ): void {\n    const interceptors = this.#targetInterceptors.get(session) || [];\n    interceptors.push(interceptor);\n    this.#targetInterceptors.set(session, interceptors);\n  }\n\n  removeTargetInterceptor(\n    client: CDPSession | Connection,\n    interceptor: TargetInterceptor\n  ): void {\n    const interceptors = this.#targetInterceptors.get(client) || [];\n    this.#targetInterceptors.set(\n      client,\n      interceptors.filter(currentInterceptor => {\n        return currentInterceptor !== interceptor;\n      })\n    );\n  }\n\n  #setupAttachmentListeners(session: CDPSession | Connection): void {\n    const listener = (event: Protocol.Target.AttachedToTargetEvent) => {\n      return this.#onAttachedToTarget(session, event);\n    };\n    assert(!this.#attachedToTargetListenersBySession.has(session));\n    this.#attachedToTargetListenersBySession.set(session, listener);\n    session.on('Target.attachedToTarget', listener);\n\n    const detachedListener = (\n      event: Protocol.Target.DetachedFromTargetEvent\n    ) => {\n      return this.#onDetachedFromTarget(session, event);\n    };\n    assert(!this.#detachedFromTargetListenersBySession.has(session));\n    this.#detachedFromTargetListenersBySession.set(session, detachedListener);\n    session.on('Target.detachedFromTarget', detachedListener);\n  }\n\n  #removeAttachmentListeners(session: CDPSession | Connection): void {\n    if (this.#attachedToTargetListenersBySession.has(session)) {\n      session.off(\n        'Target.attachedToTarget',\n        this.#attachedToTargetListenersBySession.get(session)!\n      );\n      this.#attachedToTargetListenersBySession.delete(session);\n    }\n\n    if (this.#detachedFromTargetListenersBySession.has(session)) {\n      session.off(\n        'Target.detachedFromTarget',\n        this.#detachedFromTargetListenersBySession.get(session)!\n      );\n      this.#detachedFromTargetListenersBySession.delete(session);\n    }\n  }\n\n  #onSessionDetached = (session: CDPSession) => {\n    this.#removeAttachmentListeners(session);\n    this.#targetInterceptors.delete(session);\n  };\n\n  #onTargetCreated = async (event: Protocol.Target.TargetCreatedEvent) => {\n    this.#discoveredTargetsByTargetId.set(\n      event.targetInfo.targetId,\n      event.targetInfo\n    );\n\n    this.emit(TargetManagerEmittedEvents.TargetDiscovered, event.targetInfo);\n\n    // The connection is already attached to the browser target implicitly,\n    // therefore, no new CDPSession is created and we have special handling\n    // here.\n    if (event.targetInfo.type === 'browser' && event.targetInfo.attached) {\n      if (this.#attachedTargetsByTargetId.has(event.targetInfo.targetId)) {\n        return;\n      }\n      const target = this.#targetFactory(event.targetInfo, undefined);\n      target._initialize();\n      this.#attachedTargetsByTargetId.set(event.targetInfo.targetId, target);\n    }\n  };\n\n  #onTargetDestroyed = (event: Protocol.Target.TargetDestroyedEvent) => {\n    const targetInfo = this.#discoveredTargetsByTargetId.get(event.targetId);\n    this.#discoveredTargetsByTargetId.delete(event.targetId);\n    this.#finishInitializationIfReady(event.targetId);\n    if (\n      targetInfo?.type === 'service_worker' &&\n      this.#attachedTargetsByTargetId.has(event.targetId)\n    ) {\n      // Special case for service workers: report TargetGone event when\n      // the worker is destroyed.\n      const target = this.#attachedTargetsByTargetId.get(event.targetId);\n      this.emit(TargetManagerEmittedEvents.TargetGone, target);\n      this.#attachedTargetsByTargetId.delete(event.targetId);\n    }\n  };\n\n  #onTargetInfoChanged = (event: Protocol.Target.TargetInfoChangedEvent) => {\n    this.#discoveredTargetsByTargetId.set(\n      event.targetInfo.targetId,\n      event.targetInfo\n    );\n\n    if (\n      this.#ignoredTargets.has(event.targetInfo.targetId) ||\n      !this.#attachedTargetsByTargetId.has(event.targetInfo.targetId) ||\n      !event.targetInfo.attached\n    ) {\n      return;\n    }\n\n    const target = this.#attachedTargetsByTargetId.get(\n      event.targetInfo.targetId\n    );\n    if (!target) {\n      return;\n    }\n    const previousURL = target.url();\n    const wasInitialized =\n      target._initializedDeferred.value() === InitializationStatus.SUCCESS;\n\n    target._targetInfoChanged(event.targetInfo);\n\n    if (wasInitialized && previousURL !== target.url()) {\n      this.emit(TargetManagerEmittedEvents.TargetChanged, {\n        target: target,\n        wasInitialized,\n        previousURL,\n      });\n    }\n  };\n\n  #onAttachedToTarget = async (\n    parentSession: Connection | CDPSession,\n    event: Protocol.Target.AttachedToTargetEvent\n  ) => {\n    const targetInfo = event.targetInfo;\n    const session = this.#connection.session(event.sessionId);\n    if (!session) {\n      throw new Error(`Session ${event.sessionId} was not created.`);\n    }\n\n    const silentDetach = async () => {\n      await session.send('Runtime.runIfWaitingForDebugger').catch(debugError);\n      // We don't use `session.detach()` because that dispatches all commands on\n      // the connection instead of the parent session.\n      await parentSession\n        .send('Target.detachFromTarget', {\n          sessionId: session.id(),\n        })\n        .catch(debugError);\n    };\n\n    if (!this.#connection.isAutoAttached(targetInfo.targetId)) {\n      return;\n    }\n\n    // Special case for service workers: being attached to service workers will\n    // prevent them from ever being destroyed. Therefore, we silently detach\n    // from service workers unless the connection was manually created via\n    // `page.worker()`. To determine this, we use\n    // `this.#connection.isAutoAttached(targetInfo.targetId)`. In the future, we\n    // should determine if a target is auto-attached or not with the help of\n    // CDP.\n    if (\n      targetInfo.type === 'service_worker' &&\n      this.#connection.isAutoAttached(targetInfo.targetId)\n    ) {\n      this.#finishInitializationIfReady(targetInfo.targetId);\n      await silentDetach();\n      if (this.#attachedTargetsByTargetId.has(targetInfo.targetId)) {\n        return;\n      }\n      const target = this.#targetFactory(targetInfo);\n      target._initialize();\n      this.#attachedTargetsByTargetId.set(targetInfo.targetId, target);\n      this.emit(TargetManagerEmittedEvents.TargetAvailable, target);\n      return;\n    }\n\n    const existingTarget = this.#attachedTargetsByTargetId.has(\n      targetInfo.targetId\n    );\n\n    const target = existingTarget\n      ? this.#attachedTargetsByTargetId.get(targetInfo.targetId)!\n      : this.#targetFactory(targetInfo, session);\n\n    if (this.#targetFilterCallback && !this.#targetFilterCallback(target)) {\n      this.#ignoredTargets.add(targetInfo.targetId);\n      this.#finishInitializationIfReady(targetInfo.targetId);\n      await silentDetach();\n      return;\n    }\n\n    if (!existingTarget) {\n      target._initialize();\n    }\n\n    this.#setupAttachmentListeners(session);\n\n    if (existingTarget) {\n      this.#attachedTargetsBySessionId.set(\n        session.id(),\n        this.#attachedTargetsByTargetId.get(targetInfo.targetId)!\n      );\n    } else {\n      this.#attachedTargetsByTargetId.set(targetInfo.targetId, target);\n      this.#attachedTargetsBySessionId.set(session.id(), target);\n    }\n\n    for (const interceptor of this.#targetInterceptors.get(parentSession) ||\n      []) {\n      if (!(parentSession instanceof Connection)) {\n        // Sanity check: if parent session is not a connection, it should be\n        // present in #attachedTargetsBySessionId.\n        assert(this.#attachedTargetsBySessionId.has(parentSession.id()));\n      }\n      interceptor(\n        target,\n        parentSession instanceof Connection\n          ? null\n          : this.#attachedTargetsBySessionId.get(parentSession.id())!\n      );\n    }\n\n    this.#targetsIdsForInit.delete(target._targetId);\n    if (!existingTarget) {\n      this.emit(TargetManagerEmittedEvents.TargetAvailable, target);\n    }\n    this.#finishInitializationIfReady();\n\n    // TODO: the browser might be shutting down here. What do we do with the\n    // error?\n    await Promise.all([\n      session.send('Target.setAutoAttach', {\n        waitForDebuggerOnStart: true,\n        flatten: true,\n        autoAttach: true,\n      }),\n      session.send('Runtime.runIfWaitingForDebugger'),\n    ]).catch(debugError);\n  };\n\n  #finishInitializationIfReady(targetId?: string): void {\n    targetId !== undefined && this.#targetsIdsForInit.delete(targetId);\n    if (this.#targetsIdsForInit.size === 0) {\n      this.#initializeDeferred.resolve();\n    }\n  }\n\n  #onDetachedFromTarget = (\n    _parentSession: Connection | CDPSession,\n    event: Protocol.Target.DetachedFromTargetEvent\n  ) => {\n    const target = this.#attachedTargetsBySessionId.get(event.sessionId);\n\n    this.#attachedTargetsBySessionId.delete(event.sessionId);\n\n    if (!target) {\n      return;\n    }\n\n    this.#attachedTargetsByTargetId.delete(target._targetId);\n    this.emit(TargetManagerEmittedEvents.TargetGone, target);\n  };\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\nimport {ProtocolMapping} from 'devtools-protocol/types/protocol-mapping.js';\n\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {ConnectionTransport} from './ConnectionTransport.js';\nimport {debug} from './Debug.js';\nimport {TargetCloseError, ProtocolError} from './Errors.js';\nimport {EventEmitter} from './EventEmitter.js';\nimport {debugError} from './util.js';\n\nconst debugProtocolSend = debug('puppeteer:protocol:SEND \u25BA');\nconst debugProtocolReceive = debug('puppeteer:protocol:RECV \u25C0');\n\n/**\n * @public\n */\nexport {ConnectionTransport, ProtocolMapping};\n\n/**\n * Internal events that the Connection class emits.\n *\n * @internal\n */\nexport const ConnectionEmittedEvents = {\n  Disconnected: Symbol('Connection.Disconnected'),\n} as const;\n\n/**\n * @internal\n */\ntype GetIdFn = () => number;\n\n/**\n * @internal\n */\nfunction createIncrementalIdGenerator(): GetIdFn {\n  let id = 0;\n  return (): number => {\n    return ++id;\n  };\n}\n\n/**\n * @internal\n */\nexport class Callback {\n  #id: number;\n  #error = new ProtocolError();\n  #deferred = Deferred.create<unknown>();\n  #timer?: ReturnType<typeof setTimeout>;\n  #label: string;\n\n  constructor(id: number, label: string, timeout?: number) {\n    this.#id = id;\n    this.#label = label;\n    if (timeout) {\n      this.#timer = setTimeout(() => {\n        this.#deferred.reject(\n          rewriteError(\n            this.#error,\n            `${label} timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.`\n          )\n        );\n      }, timeout);\n    }\n  }\n\n  resolve(value: unknown): void {\n    clearTimeout(this.#timer);\n    this.#deferred.resolve(value);\n  }\n\n  reject(error: Error): void {\n    clearTimeout(this.#timer);\n    this.#deferred.reject(error);\n  }\n\n  get id(): number {\n    return this.#id;\n  }\n\n  get promise(): Deferred<unknown> {\n    return this.#deferred;\n  }\n\n  get error(): ProtocolError {\n    return this.#error;\n  }\n\n  get label(): string {\n    return this.#label;\n  }\n}\n\n/**\n * Manages callbacks and their IDs for the protocol request/response communication.\n *\n * @internal\n */\nexport class CallbackRegistry {\n  #callbacks = new Map<number, Callback>();\n  #idGenerator = createIncrementalIdGenerator();\n\n  create(\n    label: string,\n    timeout: number | undefined,\n    request: (id: number) => void\n  ): Promise<unknown> {\n    const callback = new Callback(this.#idGenerator(), label, timeout);\n    this.#callbacks.set(callback.id, callback);\n    try {\n      request(callback.id);\n    } catch (error) {\n      // We still throw sync errors synchronously and clean up the scheduled\n      // callback.\n      callback.promise\n        .valueOrThrow()\n        .catch(debugError)\n        .finally(() => {\n          this.#callbacks.delete(callback.id);\n        });\n      callback.reject(error as Error);\n      throw error;\n    }\n    // Must only have sync code up until here.\n    return callback.promise.valueOrThrow().finally(() => {\n      this.#callbacks.delete(callback.id);\n    });\n  }\n\n  reject(id: number, message: string, originalMessage?: string): void {\n    const callback = this.#callbacks.get(id);\n    if (!callback) {\n      return;\n    }\n    this._reject(callback, message, originalMessage);\n  }\n\n  _reject(\n    callback: Callback,\n    errorMessage: string | ProtocolError,\n    originalMessage?: string\n  ): void {\n    const isError = errorMessage instanceof ProtocolError;\n    const message = isError ? errorMessage.message : errorMessage;\n    const error = isError ? errorMessage : callback.error;\n\n    callback.reject(\n      rewriteError(\n        error,\n        `Protocol error (${callback.label}): ${message}`,\n        originalMessage\n      )\n    );\n  }\n\n  resolve(id: number, value: unknown): void {\n    const callback = this.#callbacks.get(id);\n    if (!callback) {\n      return;\n    }\n    callback.resolve(value);\n  }\n\n  clear(): void {\n    for (const callback of this.#callbacks.values()) {\n      // TODO: probably we can accept error messages as params.\n      this._reject(callback, new TargetCloseError('Target closed'));\n    }\n    this.#callbacks.clear();\n  }\n}\n\n/**\n * @public\n */\nexport class Connection extends EventEmitter {\n  #url: string;\n  #transport: ConnectionTransport;\n  #delay: number;\n  #timeout: number;\n  #sessions = new Map<string, CDPSessionImpl>();\n  #closed = false;\n  #manuallyAttached = new Set<string>();\n  #callbacks = new CallbackRegistry();\n\n  constructor(\n    url: string,\n    transport: ConnectionTransport,\n    delay = 0,\n    timeout?: number\n  ) {\n    super();\n    this.#url = url;\n    this.#delay = delay;\n    this.#timeout = timeout ?? 180_000;\n\n    this.#transport = transport;\n    this.#transport.onmessage = this.onMessage.bind(this);\n    this.#transport.onclose = this.#onClose.bind(this);\n  }\n\n  static fromSession(session: CDPSession): Connection | undefined {\n    return session.connection();\n  }\n\n  get timeout(): number {\n    return this.#timeout;\n  }\n\n  /**\n   * @internal\n   */\n  get _closed(): boolean {\n    return this.#closed;\n  }\n\n  /**\n   * @internal\n   */\n  get _sessions(): Map<string, CDPSession> {\n    return this.#sessions;\n  }\n\n  /**\n   * @param sessionId - The session id\n   * @returns The current CDP session if it exists\n   */\n  session(sessionId: string): CDPSession | null {\n    return this.#sessions.get(sessionId) || null;\n  }\n\n  url(): string {\n    return this.#url;\n  }\n\n  send<T extends keyof ProtocolMapping.Commands>(\n    method: T,\n    ...paramArgs: ProtocolMapping.Commands[T]['paramsType']\n  ): Promise<ProtocolMapping.Commands[T]['returnType']> {\n    // There is only ever 1 param arg passed, but the Protocol defines it as an\n    // array of 0 or 1 items See this comment:\n    // https://github.com/ChromeDevTools/devtools-protocol/pull/113#issuecomment-412603285\n    // which explains why the protocol defines the params this way for better\n    // type-inference.\n    // So now we check if there are any params or not and deal with them accordingly.\n    const params = paramArgs.length ? paramArgs[0] : undefined;\n    return this._rawSend(this.#callbacks, method, params);\n  }\n\n  /**\n   * @internal\n   */\n  _rawSend<T extends keyof ProtocolMapping.Commands>(\n    callbacks: CallbackRegistry,\n    method: T,\n    params: ProtocolMapping.Commands[T]['paramsType'][0],\n    sessionId?: string\n  ): Promise<ProtocolMapping.Commands[T]['returnType']> {\n    return callbacks.create(method, this.#timeout, id => {\n      const stringifiedMessage = JSON.stringify({\n        method,\n        params,\n        id,\n        sessionId,\n      });\n      debugProtocolSend(stringifiedMessage);\n      this.#transport.send(stringifiedMessage);\n    }) as Promise<ProtocolMapping.Commands[T]['returnType']>;\n  }\n\n  /**\n   * @internal\n   */\n  async closeBrowser(): Promise<void> {\n    await this.send('Browser.close');\n  }\n\n  /**\n   * @internal\n   */\n  protected async onMessage(message: string): Promise<void> {\n    if (this.#delay) {\n      await new Promise(r => {\n        return setTimeout(r, this.#delay);\n      });\n    }\n    debugProtocolReceive(message);\n    const object = JSON.parse(message);\n    if (object.method === 'Target.attachedToTarget') {\n      const sessionId = object.params.sessionId;\n      const session = new CDPSessionImpl(\n        this,\n        object.params.targetInfo.type,\n        sessionId,\n        object.sessionId\n      );\n      this.#sessions.set(sessionId, session);\n      this.emit('sessionattached', session);\n      const parentSession = this.#sessions.get(object.sessionId);\n      if (parentSession) {\n        parentSession.emit('sessionattached', session);\n      }\n    } else if (object.method === 'Target.detachedFromTarget') {\n      const session = this.#sessions.get(object.params.sessionId);\n      if (session) {\n        session._onClosed();\n        this.#sessions.delete(object.params.sessionId);\n        this.emit('sessiondetached', session);\n        const parentSession = this.#sessions.get(object.sessionId);\n        if (parentSession) {\n          parentSession.emit('sessiondetached', session);\n        }\n      }\n    }\n    if (object.sessionId) {\n      const session = this.#sessions.get(object.sessionId);\n      if (session) {\n        session._onMessage(object);\n      }\n    } else if (object.id) {\n      if (object.error) {\n        this.#callbacks.reject(\n          object.id,\n          createProtocolErrorMessage(object),\n          object.error.message\n        );\n      } else {\n        this.#callbacks.resolve(object.id, object.result);\n      }\n    } else {\n      this.emit(object.method, object.params);\n    }\n  }\n\n  #onClose(): void {\n    if (this.#closed) {\n      return;\n    }\n    this.#closed = true;\n    this.#transport.onmessage = undefined;\n    this.#transport.onclose = undefined;\n    this.#callbacks.clear();\n    for (const session of this.#sessions.values()) {\n      session._onClosed();\n    }\n    this.#sessions.clear();\n    this.emit(ConnectionEmittedEvents.Disconnected);\n  }\n\n  dispose(): void {\n    this.#onClose();\n    this.#transport.close();\n  }\n\n  /**\n   * @internal\n   */\n  isAutoAttached(targetId: string): boolean {\n    return !this.#manuallyAttached.has(targetId);\n  }\n\n  /**\n   * @internal\n   */\n  async _createSession(\n    targetInfo: Protocol.Target.TargetInfo,\n    isAutoAttachEmulated = true\n  ): Promise<CDPSession> {\n    if (!isAutoAttachEmulated) {\n      this.#manuallyAttached.add(targetInfo.targetId);\n    }\n    const {sessionId} = await this.send('Target.attachToTarget', {\n      targetId: targetInfo.targetId,\n      flatten: true,\n    });\n    this.#manuallyAttached.delete(targetInfo.targetId);\n    const session = this.#sessions.get(sessionId);\n    if (!session) {\n      throw new Error('CDPSession creation failed.');\n    }\n    return session;\n  }\n\n  /**\n   * @param targetInfo - The target info\n   * @returns The CDP session that is created\n   */\n  async createSession(\n    targetInfo: Protocol.Target.TargetInfo\n  ): Promise<CDPSession> {\n    return await this._createSession(targetInfo, false);\n  }\n}\n\n/**\n * @internal\n */\nexport interface CDPSessionOnMessageObject {\n  id?: number;\n  method: string;\n  params: Record<string, unknown>;\n  error: {message: string; data: any; code: number};\n  result?: any;\n}\n\n/**\n * Internal events that the CDPSession class emits.\n *\n * @internal\n */\nexport const CDPSessionEmittedEvents = {\n  Disconnected: Symbol('CDPSession.Disconnected'),\n} as const;\n\n/**\n * The `CDPSession` instances are used to talk raw Chrome Devtools Protocol.\n *\n * @remarks\n *\n * Protocol methods can be called with {@link CDPSession.send} method and protocol\n * events can be subscribed to with `CDPSession.on` method.\n *\n * Useful links: {@link https://chromedevtools.github.io/devtools-protocol/ | DevTools Protocol Viewer}\n * and {@link https://github.com/aslushnikov/getting-started-with-cdp/blob/HEAD/README.md | Getting Started with DevTools Protocol}.\n *\n * @example\n *\n * ```ts\n * const client = await page.target().createCDPSession();\n * await client.send('Animation.enable');\n * client.on('Animation.animationCreated', () =>\n *   console.log('Animation created!')\n * );\n * const response = await client.send('Animation.getPlaybackRate');\n * console.log('playback rate is ' + response.playbackRate);\n * await client.send('Animation.setPlaybackRate', {\n *   playbackRate: response.playbackRate / 2,\n * });\n * ```\n *\n * @public\n */\nexport class CDPSession extends EventEmitter {\n  /**\n   * @internal\n   */\n  constructor() {\n    super();\n  }\n\n  connection(): Connection | undefined {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Parent session in terms of CDP's auto-attach mechanism.\n   *\n   * @internal\n   */\n  parentSession(): CDPSession | undefined {\n    return undefined;\n  }\n\n  send<T extends keyof ProtocolMapping.Commands>(\n    method: T,\n    ...paramArgs: ProtocolMapping.Commands[T]['paramsType']\n  ): Promise<ProtocolMapping.Commands[T]['returnType']>;\n  send<T extends keyof ProtocolMapping.Commands>(): Promise<\n    ProtocolMapping.Commands[T]['returnType']\n  > {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Detaches the cdpSession from the target. Once detached, the cdpSession object\n   * won't emit any events and can't be used to send messages.\n   */\n  async detach(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Returns the session's id.\n   */\n  id(): string {\n    throw new Error('Not implemented');\n  }\n}\n\n/**\n * @internal\n */\nexport class CDPSessionImpl extends CDPSession {\n  #sessionId: string;\n  #targetType: string;\n  #callbacks = new CallbackRegistry();\n  #connection?: Connection;\n  #parentSessionId?: string;\n\n  /**\n   * @internal\n   */\n  constructor(\n    connection: Connection,\n    targetType: string,\n    sessionId: string,\n    parentSessionId: string | undefined\n  ) {\n    super();\n    this.#connection = connection;\n    this.#targetType = targetType;\n    this.#sessionId = sessionId;\n    this.#parentSessionId = parentSessionId;\n  }\n\n  override connection(): Connection | undefined {\n    return this.#connection;\n  }\n\n  override parentSession(): CDPSession | undefined {\n    if (!this.#parentSessionId) {\n      return;\n    }\n    const parent = this.#connection?.session(this.#parentSessionId);\n    return parent ?? undefined;\n  }\n\n  override send<T extends keyof ProtocolMapping.Commands>(\n    method: T,\n    ...paramArgs: ProtocolMapping.Commands[T]['paramsType']\n  ): Promise<ProtocolMapping.Commands[T]['returnType']> {\n    if (!this.#connection) {\n      return Promise.reject(\n        new TargetCloseError(\n          `Protocol error (${method}): Session closed. Most likely the ${\n            this.#targetType\n          } has been closed.`\n        )\n      );\n    }\n    // See the comment in Connection#send explaining why we do this.\n    const params = paramArgs.length ? paramArgs[0] : undefined;\n    return this.#connection._rawSend(\n      this.#callbacks,\n      method,\n      params,\n      this.#sessionId\n    );\n  }\n\n  /**\n   * @internal\n   */\n  _onMessage(object: CDPSessionOnMessageObject): void {\n    if (object.id) {\n      if (object.error) {\n        this.#callbacks.reject(\n          object.id,\n          createProtocolErrorMessage(object),\n          object.error.message\n        );\n      } else {\n        this.#callbacks.resolve(object.id, object.result);\n      }\n    } else {\n      assert(!object.id);\n      this.emit(object.method, object.params);\n    }\n  }\n\n  /**\n   * Detaches the cdpSession from the target. Once detached, the cdpSession object\n   * won't emit any events and can't be used to send messages.\n   */\n  override async detach(): Promise<void> {\n    if (!this.#connection) {\n      throw new Error(\n        `Session already detached. Most likely the ${\n          this.#targetType\n        } has been closed.`\n      );\n    }\n    await this.#connection.send('Target.detachFromTarget', {\n      sessionId: this.#sessionId,\n    });\n  }\n\n  /**\n   * @internal\n   */\n  _onClosed(): void {\n    this.#callbacks.clear();\n    this.#connection = undefined;\n    this.emit(CDPSessionEmittedEvents.Disconnected);\n  }\n\n  /**\n   * Returns the session's id.\n   */\n  override id(): string {\n    return this.#sessionId;\n  }\n}\n\nfunction createProtocolErrorMessage(object: {\n  error: {message: string; data: any; code: number};\n}): string {\n  let message = `${object.error.message}`;\n  // TODO: remove the type checks when we stop connecting to BiDi with a CDP\n  // client.\n  if (\n    object.error &&\n    typeof object.error === 'object' &&\n    'data' in object.error\n  ) {\n    message += ` ${object.error.data}`;\n  }\n  return message;\n}\n\nfunction rewriteError(\n  error: ProtocolError,\n  message: string,\n  originalMessage?: string\n): Error {\n  error.message = message;\n  error.originalMessage = originalMessage ?? error.originalMessage;\n  return error;\n}\n\n/**\n * @internal\n */\nexport function isTargetClosedError(error: Error): boolean {\n  return error instanceof TargetCloseError;\n}\n", "/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport type {Browser} from '../api/Browser.js';\nimport type {BrowserContext} from '../api/BrowserContext.js';\nimport {Page, PageEmittedEvents} from '../api/Page.js';\nimport {Target, TargetType} from '../api/Target.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {CDPSession} from './Connection.js';\nimport {CDPPage} from './Page.js';\nimport {Viewport} from './PuppeteerViewport.js';\nimport {TargetManager} from './TargetManager.js';\nimport {TaskQueue} from './TaskQueue.js';\nimport {debugError} from './util.js';\nimport {WebWorker} from './WebWorker.js';\n\n/**\n * @internal\n */\nexport enum InitializationStatus {\n  SUCCESS = 'success',\n  ABORTED = 'aborted',\n}\n\n/**\n * @internal\n */\nexport class CDPTarget extends Target {\n  #browserContext?: BrowserContext;\n  #session?: CDPSession;\n  #targetInfo: Protocol.Target.TargetInfo;\n  #targetManager?: TargetManager;\n  #sessionFactory:\n    | ((isAutoAttachEmulated: boolean) => Promise<CDPSession>)\n    | undefined;\n\n  /**\n   * @internal\n   */\n  _initializedDeferred = Deferred.create<InitializationStatus>();\n  /**\n   * @internal\n   */\n  _isClosedDeferred = Deferred.create<void>();\n  /**\n   * @internal\n   */\n  _targetId: string;\n\n  /**\n   * To initialize the target for use, call initialize.\n   *\n   * @internal\n   */\n  constructor(\n    targetInfo: Protocol.Target.TargetInfo,\n    session: CDPSession | undefined,\n    browserContext: BrowserContext | undefined,\n    targetManager: TargetManager | undefined,\n    sessionFactory:\n      | ((isAutoAttachEmulated: boolean) => Promise<CDPSession>)\n      | undefined\n  ) {\n    super();\n    this.#session = session;\n    this.#targetManager = targetManager;\n    this.#targetInfo = targetInfo;\n    this.#browserContext = browserContext;\n    this._targetId = targetInfo.targetId;\n    this.#sessionFactory = sessionFactory;\n  }\n\n  /**\n   * @internal\n   */\n  _session(): CDPSession | undefined {\n    return this.#session;\n  }\n\n  /**\n   * @internal\n   */\n  protected _sessionFactory(): (\n    isAutoAttachEmulated: boolean\n  ) => Promise<CDPSession> {\n    if (!this.#sessionFactory) {\n      throw new Error('sessionFactory is not initialized');\n    }\n    return this.#sessionFactory;\n  }\n\n  override createCDPSession(): Promise<CDPSession> {\n    if (!this.#sessionFactory) {\n      throw new Error('sessionFactory is not initialized');\n    }\n    return this.#sessionFactory(false);\n  }\n\n  override url(): string {\n    return this.#targetInfo.url;\n  }\n\n  override type(): TargetType {\n    const type = this.#targetInfo.type;\n    switch (type) {\n      case 'page':\n        return TargetType.PAGE;\n      case 'background_page':\n        return TargetType.BACKGROUND_PAGE;\n      case 'service_worker':\n        return TargetType.SERVICE_WORKER;\n      case 'shared_worker':\n        return TargetType.SHARED_WORKER;\n      case 'browser':\n        return TargetType.BROWSER;\n      case 'webview':\n        return TargetType.WEBVIEW;\n      default:\n        return TargetType.OTHER;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _targetManager(): TargetManager {\n    if (!this.#targetManager) {\n      throw new Error('targetManager is not initialized');\n    }\n    return this.#targetManager;\n  }\n\n  /**\n   * @internal\n   */\n  _getTargetInfo(): Protocol.Target.TargetInfo {\n    return this.#targetInfo;\n  }\n\n  override browser(): Browser {\n    if (!this.#browserContext) {\n      throw new Error('browserContext is not initialised');\n    }\n    return this.#browserContext.browser();\n  }\n\n  override browserContext(): BrowserContext {\n    if (!this.#browserContext) {\n      throw new Error('browserContext is not initialised');\n    }\n    return this.#browserContext;\n  }\n\n  override opener(): Target | undefined {\n    const {openerId} = this.#targetInfo;\n    if (!openerId) {\n      return;\n    }\n    return this.browser()._targets.get(openerId);\n  }\n\n  /**\n   * @internal\n   */\n  _targetInfoChanged(targetInfo: Protocol.Target.TargetInfo): void {\n    this.#targetInfo = targetInfo;\n    this._checkIfInitialized();\n  }\n\n  /**\n   * @internal\n   */\n  _initialize(): void {\n    this._initializedDeferred.resolve(InitializationStatus.SUCCESS);\n  }\n\n  /**\n   * @internal\n   */\n  protected _checkIfInitialized(): void {\n    if (!this._initializedDeferred.resolved()) {\n      this._initializedDeferred.resolve(InitializationStatus.SUCCESS);\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport class PageTarget extends CDPTarget {\n  #defaultViewport?: Viewport;\n  protected pagePromise?: Promise<Page>;\n  #screenshotTaskQueue: TaskQueue;\n  #ignoreHTTPSErrors: boolean;\n\n  /**\n   * @internal\n   */\n  constructor(\n    targetInfo: Protocol.Target.TargetInfo,\n    session: CDPSession | undefined,\n    browserContext: BrowserContext,\n    targetManager: TargetManager,\n    sessionFactory: (isAutoAttachEmulated: boolean) => Promise<CDPSession>,\n    ignoreHTTPSErrors: boolean,\n    defaultViewport: Viewport | null,\n    screenshotTaskQueue: TaskQueue\n  ) {\n    super(targetInfo, session, browserContext, targetManager, sessionFactory);\n    this.#ignoreHTTPSErrors = ignoreHTTPSErrors;\n    this.#defaultViewport = defaultViewport ?? undefined;\n    this.#screenshotTaskQueue = screenshotTaskQueue;\n  }\n\n  override _initialize(): void {\n    this._initializedDeferred\n      .valueOrThrow()\n      .then(async result => {\n        if (result === InitializationStatus.ABORTED) {\n          return;\n        }\n        const opener = this.opener();\n        if (!(opener instanceof PageTarget)) {\n          return;\n        }\n        if (!opener || !opener.pagePromise || this.type() !== 'page') {\n          return true;\n        }\n        const openerPage = await opener.pagePromise;\n        if (!openerPage.listenerCount(PageEmittedEvents.Popup)) {\n          return true;\n        }\n        const popupPage = await this.page();\n        openerPage.emit(PageEmittedEvents.Popup, popupPage);\n        return true;\n      })\n      .catch(debugError);\n    this._checkIfInitialized();\n  }\n\n  override async page(): Promise<Page | null> {\n    if (!this.pagePromise) {\n      const session = this._session();\n      this.pagePromise = (\n        session\n          ? Promise.resolve(session)\n          : this._sessionFactory()(/* isAutoAttachEmulated=*/ false)\n      ).then(client => {\n        return CDPPage._create(\n          client,\n          this,\n          this.#ignoreHTTPSErrors,\n          this.#defaultViewport ?? null,\n          this.#screenshotTaskQueue\n        );\n      });\n    }\n    return (await this.pagePromise) ?? null;\n  }\n\n  override _checkIfInitialized(): void {\n    if (this._initializedDeferred.resolved()) {\n      return;\n    }\n    if (this._getTargetInfo().url !== '') {\n      this._initializedDeferred.resolve(InitializationStatus.SUCCESS);\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport class WorkerTarget extends CDPTarget {\n  #workerPromise?: Promise<WebWorker>;\n\n  override async worker(): Promise<WebWorker | null> {\n    if (!this.#workerPromise) {\n      const session = this._session();\n      // TODO(einbinder): Make workers send their console logs.\n      this.#workerPromise = (\n        session\n          ? Promise.resolve(session)\n          : this._sessionFactory()(/* isAutoAttachEmulated=*/ false)\n      ).then(client => {\n        return new WebWorker(\n          client,\n          this._getTargetInfo().url,\n          () => {} /* consoleAPICalled */,\n          () => {} /* exceptionThrown */\n        );\n      });\n    }\n    return this.#workerPromise;\n  }\n}\n\n/**\n * @internal\n */\nexport class OtherTarget extends CDPTarget {}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type {Browser} from '../api/Browser.js';\nimport type {BrowserContext} from '../api/BrowserContext.js';\nimport {Page} from '../api/Page.js';\nimport {CDPSession} from '../common/Connection.js';\nimport {WebWorker} from '../common/WebWorker.js';\n\n/**\n * @public\n */\nexport enum TargetType {\n  PAGE = 'page',\n  BACKGROUND_PAGE = 'background_page',\n  SERVICE_WORKER = 'service_worker',\n  SHARED_WORKER = 'shared_worker',\n  BROWSER = 'browser',\n  WEBVIEW = 'webview',\n  OTHER = 'other',\n}\n\n/**\n * Target represents a\n * {@link https://chromedevtools.github.io/devtools-protocol/tot/Target/ | CDP target}.\n * In CDP a target is something that can be debugged such a frame, a page or a\n * worker.\n * @public\n */\nexport class Target {\n  /**\n   * @internal\n   */\n  protected constructor() {}\n\n  /**\n   * If the target is not of type `\"service_worker\"` or `\"shared_worker\"`, returns `null`.\n   */\n  async worker(): Promise<WebWorker | null> {\n    return null;\n  }\n\n  /**\n   * If the target is not of type `\"page\"`, `\"webview\"` or `\"background_page\"`,\n   * returns `null`.\n   */\n  async page(): Promise<Page | null> {\n    return null;\n  }\n\n  url(): string {\n    throw new Error('not implemented');\n  }\n\n  /**\n   * Creates a Chrome Devtools Protocol session attached to the target.\n   */\n  createCDPSession(): Promise<CDPSession> {\n    throw new Error('not implemented');\n  }\n\n  /**\n   * Identifies what kind of target this is.\n   *\n   * @remarks\n   *\n   * See {@link https://developer.chrome.com/extensions/background_pages | docs} for more info about background pages.\n   */\n  type(): TargetType {\n    throw new Error('not implemented');\n  }\n\n  /**\n   * Get the browser the target belongs to.\n   */\n  browser(): Browser {\n    throw new Error('not implemented');\n  }\n\n  /**\n   * Get the browser context the target belongs to.\n   */\n  browserContext(): BrowserContext {\n    throw new Error('not implemented');\n  }\n\n  /**\n   * Get the target that opened this target. Top-level targets return `null`.\n   */\n  opener(): Target | undefined {\n    throw new Error('not implemented');\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Buffer} from 'node:buffer';\nimport type {Readable} from 'node:stream';\n\nimport {Protocol} from 'devtools-protocol';\n\nimport type {Browser} from '../api/Browser.js';\nimport type {BrowserContext} from '../api/BrowserContext.js';\nimport {ElementHandle} from '../api/ElementHandle.js';\nimport {Frame} from '../api/Frame.js';\nimport {HTTPRequest} from '../api/HTTPRequest.js';\nimport {HTTPResponse} from '../api/HTTPResponse.js';\nimport {JSHandle} from '../api/JSHandle.js';\nimport {\n  GeolocationOptions,\n  MediaFeature,\n  Metrics,\n  NewDocumentScriptEvaluation,\n  Page,\n  PageEmittedEvents,\n  ScreenshotClip,\n  ScreenshotOptions,\n  WaitForOptions,\n  WaitTimeoutOptions,\n} from '../api/Page.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport {Accessibility} from './Accessibility.js';\nimport {Binding} from './Binding.js';\nimport {\n  CDPSession,\n  CDPSessionEmittedEvents,\n  isTargetClosedError,\n} from './Connection.js';\nimport {ConsoleMessage, ConsoleMessageType} from './ConsoleMessage.js';\nimport {Coverage} from './Coverage.js';\nimport {DeviceRequestPrompt} from './DeviceRequestPrompt.js';\nimport {CDPDialog} from './Dialog.js';\nimport {EmulationManager} from './EmulationManager.js';\nimport {TargetCloseError} from './Errors.js';\nimport {Handler} from './EventEmitter.js';\nimport {FileChooser} from './FileChooser.js';\nimport {FrameManager, FrameManagerEmittedEvents} from './FrameManager.js';\nimport {CDPKeyboard, CDPMouse, CDPTouchscreen} from './Input.js';\nimport {MAIN_WORLD} from './IsolatedWorlds.js';\nimport {\n  Credentials,\n  NetworkConditions,\n  NetworkManagerEmittedEvents,\n} from './NetworkManager.js';\nimport {PDFOptions} from './PDFOptions.js';\nimport {Viewport} from './PuppeteerViewport.js';\nimport {CDPTarget} from './Target.js';\nimport {TargetManagerEmittedEvents} from './TargetManager.js';\nimport {TaskQueue} from './TaskQueue.js';\nimport {TimeoutSettings} from './TimeoutSettings.js';\nimport {Tracing} from './Tracing.js';\nimport {BindingPayload, EvaluateFunc, HandleFor} from './types.js';\nimport {\n  createClientError,\n  createJSHandle,\n  debugError,\n  evaluationString,\n  getReadableAsBuffer,\n  getReadableFromProtocolStream,\n  isString,\n  pageBindingInitString,\n  releaseObject,\n  validateDialogType,\n  valueFromRemoteObject,\n  waitForEvent,\n  waitWithTimeout,\n  withSourcePuppeteerURLIfNone,\n} from './util.js';\nimport {WebWorker} from './WebWorker.js';\n\n/**\n * @internal\n */\nexport class CDPPage extends Page {\n  /**\n   * @internal\n   */\n  static async _create(\n    client: CDPSession,\n    target: CDPTarget,\n    ignoreHTTPSErrors: boolean,\n    defaultViewport: Viewport | null,\n    screenshotTaskQueue: TaskQueue\n  ): Promise<CDPPage> {\n    const page = new CDPPage(\n      client,\n      target,\n      ignoreHTTPSErrors,\n      screenshotTaskQueue\n    );\n    await page.#initialize();\n    if (defaultViewport) {\n      try {\n        await page.setViewport(defaultViewport);\n      } catch (err) {\n        if (isErrorLike(err) && isTargetClosedError(err)) {\n          debugError(err);\n        } else {\n          throw err;\n        }\n      }\n    }\n    return page;\n  }\n\n  #closed = false;\n  #client: CDPSession;\n  #target: CDPTarget;\n  #keyboard: CDPKeyboard;\n  #mouse: CDPMouse;\n  #timeoutSettings = new TimeoutSettings();\n  #touchscreen: CDPTouchscreen;\n  #accessibility: Accessibility;\n  #frameManager: FrameManager;\n  #emulationManager: EmulationManager;\n  #tracing: Tracing;\n  #bindings = new Map<string, Binding>();\n  #exposedFunctions = new Map<string, string>();\n  #coverage: Coverage;\n  #viewport: Viewport | null;\n  #screenshotTaskQueue: TaskQueue;\n  #workers = new Map<string, WebWorker>();\n  #fileChooserDeferreds = new Set<Deferred<FileChooser>>();\n  #sessionCloseDeferred = Deferred.create<TargetCloseError>();\n  #serviceWorkerBypassed = false;\n  #userDragInterceptionEnabled = false;\n\n  #frameManagerHandlers = new Map<symbol, Handler<any>>([\n    [\n      FrameManagerEmittedEvents.FrameAttached,\n      event => {\n        return this.emit(PageEmittedEvents.FrameAttached, event);\n      },\n    ],\n    [\n      FrameManagerEmittedEvents.FrameDetached,\n      event => {\n        return this.emit(PageEmittedEvents.FrameDetached, event);\n      },\n    ],\n    [\n      FrameManagerEmittedEvents.FrameNavigated,\n      event => {\n        return this.emit(PageEmittedEvents.FrameNavigated, event);\n      },\n    ],\n  ]);\n\n  #networkManagerHandlers = new Map<symbol, Handler<any>>([\n    [\n      NetworkManagerEmittedEvents.Request,\n      event => {\n        return this.emit(PageEmittedEvents.Request, event);\n      },\n    ],\n    [\n      NetworkManagerEmittedEvents.RequestServedFromCache,\n      event => {\n        return this.emit(PageEmittedEvents.RequestServedFromCache, event);\n      },\n    ],\n    [\n      NetworkManagerEmittedEvents.Response,\n      event => {\n        return this.emit(PageEmittedEvents.Response, event);\n      },\n    ],\n    [\n      NetworkManagerEmittedEvents.RequestFailed,\n      event => {\n        return this.emit(PageEmittedEvents.RequestFailed, event);\n      },\n    ],\n    [\n      NetworkManagerEmittedEvents.RequestFinished,\n      event => {\n        return this.emit(PageEmittedEvents.RequestFinished, event);\n      },\n    ],\n  ]);\n\n  #sessionHandlers = new Map<symbol | string, Handler<any>>([\n    [\n      CDPSessionEmittedEvents.Disconnected,\n      () => {\n        return this.#sessionCloseDeferred.resolve(\n          new TargetCloseError('Target closed')\n        );\n      },\n    ],\n    [\n      'Page.domContentEventFired',\n      () => {\n        return this.emit(PageEmittedEvents.DOMContentLoaded);\n      },\n    ],\n    [\n      'Page.loadEventFired',\n      () => {\n        return this.emit(PageEmittedEvents.Load);\n      },\n    ],\n    [\n      'Page.loadEventFired',\n      () => {\n        return this.emit(PageEmittedEvents.Load);\n      },\n    ],\n    [\n      'Runtime.consoleAPICalled',\n      event => {\n        return this.#onConsoleAPI(event);\n      },\n    ],\n    [\n      'Runtime.bindingCalled',\n      event => {\n        return this.#onBindingCalled(event);\n      },\n    ],\n    [\n      'Page.javascriptDialogOpening',\n      event => {\n        return this.#onDialog(event);\n      },\n    ],\n    [\n      'Runtime.exceptionThrown',\n      exception => {\n        return this.#handleException(exception.exceptionDetails);\n      },\n    ],\n    [\n      'Inspector.targetCrashed',\n      () => {\n        return this.#onTargetCrashed();\n      },\n    ],\n    [\n      'Performance.metrics',\n      event => {\n        return this.#emitMetrics(event);\n      },\n    ],\n    [\n      'Log.entryAdded',\n      event => {\n        return this.#onLogEntryAdded(event);\n      },\n    ],\n    [\n      'Page.fileChooserOpened',\n      event => {\n        return this.#onFileChooser(event);\n      },\n    ],\n  ]);\n\n  /**\n   * @internal\n   */\n  constructor(\n    client: CDPSession,\n    target: CDPTarget,\n    ignoreHTTPSErrors: boolean,\n    screenshotTaskQueue: TaskQueue\n  ) {\n    super();\n    this.#client = client;\n    this.#target = target;\n    this.#keyboard = new CDPKeyboard(client);\n    this.#mouse = new CDPMouse(client, this.#keyboard);\n    this.#touchscreen = new CDPTouchscreen(client, this.#keyboard);\n    this.#accessibility = new Accessibility(client);\n    this.#frameManager = new FrameManager(\n      client,\n      this,\n      ignoreHTTPSErrors,\n      this.#timeoutSettings\n    );\n    this.#emulationManager = new EmulationManager(client);\n    this.#tracing = new Tracing(client);\n    this.#coverage = new Coverage(client);\n    this.#screenshotTaskQueue = screenshotTaskQueue;\n    this.#viewport = null;\n\n    this.#setupEventListeners();\n  }\n\n  #setupEventListeners() {\n    this.#target\n      ._targetManager()\n      .addTargetInterceptor(this.#client, this.#onAttachedToTarget);\n\n    this.#target\n      ._targetManager()\n      .on(TargetManagerEmittedEvents.TargetGone, this.#onDetachedFromTarget);\n\n    for (const [eventName, handler] of this.#frameManagerHandlers) {\n      this.#frameManager.on(eventName, handler);\n    }\n\n    for (const [eventName, handler] of this.#networkManagerHandlers) {\n      this.#frameManager.networkManager.on(eventName, handler);\n    }\n\n    for (const [eventName, handler] of this.#sessionHandlers) {\n      this.#client.on(eventName, handler);\n    }\n\n    this.#target._isClosedDeferred\n      .valueOrThrow()\n      .then(() => {\n        this.#target\n          ._targetManager()\n          .removeTargetInterceptor(this.#client, this.#onAttachedToTarget);\n\n        this.#target\n          ._targetManager()\n          .off(\n            TargetManagerEmittedEvents.TargetGone,\n            this.#onDetachedFromTarget\n          );\n\n        this.emit(PageEmittedEvents.Close);\n        this.#closed = true;\n      })\n      .catch(debugError);\n  }\n\n  #onDetachedFromTarget = (target: CDPTarget) => {\n    const sessionId = target._session()?.id();\n    const worker = this.#workers.get(sessionId!);\n    if (!worker) {\n      return;\n    }\n    this.#workers.delete(sessionId!);\n    this.emit(PageEmittedEvents.WorkerDestroyed, worker);\n  };\n\n  #onAttachedToTarget = (createdTarget: CDPTarget) => {\n    this.#frameManager.onAttachedToTarget(createdTarget);\n    if (createdTarget._getTargetInfo().type === 'worker') {\n      const session = createdTarget._session();\n      assert(session);\n      const worker = new WebWorker(\n        session,\n        createdTarget.url(),\n        this.#addConsoleMessage.bind(this),\n        this.#handleException.bind(this)\n      );\n      this.#workers.set(session.id(), worker);\n      this.emit(PageEmittedEvents.WorkerCreated, worker);\n    }\n    if (createdTarget._session()) {\n      this.#target\n        ._targetManager()\n        .addTargetInterceptor(\n          createdTarget._session()!,\n          this.#onAttachedToTarget\n        );\n    }\n  };\n\n  async #initialize(): Promise<void> {\n    try {\n      await Promise.all([\n        this.#frameManager.initialize(),\n        this.#client.send('Performance.enable'),\n        this.#client.send('Log.enable'),\n      ]);\n    } catch (err) {\n      if (isErrorLike(err) && isTargetClosedError(err)) {\n        debugError(err);\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  async #onFileChooser(\n    event: Protocol.Page.FileChooserOpenedEvent\n  ): Promise<void> {\n    if (!this.#fileChooserDeferreds.size) {\n      return;\n    }\n\n    const frame = this.#frameManager.frame(event.frameId);\n    assert(frame, 'This should never happen.');\n\n    // This is guaranteed to be an HTMLInputElement handle by the event.\n    const handle = (await frame.worlds[MAIN_WORLD].adoptBackendNode(\n      event.backendNodeId\n    )) as ElementHandle<HTMLInputElement>;\n\n    const fileChooser = new FileChooser(handle, event);\n    for (const promise of this.#fileChooserDeferreds) {\n      promise.resolve(fileChooser);\n    }\n    this.#fileChooserDeferreds.clear();\n  }\n\n  /**\n   * @internal\n   */\n  _client(): CDPSession {\n    return this.#client;\n  }\n\n  override isServiceWorkerBypassed(): boolean {\n    return this.#serviceWorkerBypassed;\n  }\n\n  override isDragInterceptionEnabled(): boolean {\n    return this.#userDragInterceptionEnabled;\n  }\n\n  override isJavaScriptEnabled(): boolean {\n    return this.#emulationManager.javascriptEnabled;\n  }\n\n  override waitForFileChooser(\n    options: WaitTimeoutOptions = {}\n  ): Promise<FileChooser> {\n    const needsEnable = this.#fileChooserDeferreds.size === 0;\n    const {timeout = this.#timeoutSettings.timeout()} = options;\n    const deferred = Deferred.create<FileChooser>({\n      message: `Waiting for \\`FileChooser\\` failed: ${timeout}ms exceeded`,\n      timeout,\n    });\n    this.#fileChooserDeferreds.add(deferred);\n    let enablePromise: Promise<void> | undefined;\n    if (needsEnable) {\n      enablePromise = this.#client.send('Page.setInterceptFileChooserDialog', {\n        enabled: true,\n      });\n    }\n    return Promise.all([deferred.valueOrThrow(), enablePromise])\n      .then(([result]) => {\n        return result;\n      })\n      .catch(error => {\n        this.#fileChooserDeferreds.delete(deferred);\n        throw error;\n      });\n  }\n\n  override async setGeolocation(options: GeolocationOptions): Promise<void> {\n    return await this.#emulationManager.setGeolocation(options);\n  }\n\n  override target(): CDPTarget {\n    return this.#target;\n  }\n\n  override browser(): Browser {\n    return this.#target.browser();\n  }\n\n  override browserContext(): BrowserContext {\n    return this.#target.browserContext();\n  }\n\n  #onTargetCrashed(): void {\n    this.emit('error', new Error('Page crashed!'));\n  }\n\n  #onLogEntryAdded(event: Protocol.Log.EntryAddedEvent): void {\n    const {level, text, args, source, url, lineNumber} = event.entry;\n    if (args) {\n      args.map(arg => {\n        return releaseObject(this.#client, arg);\n      });\n    }\n    if (source !== 'worker') {\n      this.emit(\n        PageEmittedEvents.Console,\n        new ConsoleMessage(level, text, [], [{url, lineNumber}])\n      );\n    }\n  }\n\n  override mainFrame(): Frame {\n    return this.#frameManager.mainFrame();\n  }\n\n  override get keyboard(): CDPKeyboard {\n    return this.#keyboard;\n  }\n\n  override get touchscreen(): CDPTouchscreen {\n    return this.#touchscreen;\n  }\n\n  override get coverage(): Coverage {\n    return this.#coverage;\n  }\n\n  override get tracing(): Tracing {\n    return this.#tracing;\n  }\n\n  override get accessibility(): Accessibility {\n    return this.#accessibility;\n  }\n\n  override frames(): Frame[] {\n    return this.#frameManager.frames();\n  }\n\n  override workers(): WebWorker[] {\n    return Array.from(this.#workers.values());\n  }\n\n  override async setRequestInterception(value: boolean): Promise<void> {\n    return this.#frameManager.networkManager.setRequestInterception(value);\n  }\n\n  override async setBypassServiceWorker(bypass: boolean): Promise<void> {\n    this.#serviceWorkerBypassed = bypass;\n    return this.#client.send('Network.setBypassServiceWorker', {bypass});\n  }\n\n  override async setDragInterception(enabled: boolean): Promise<void> {\n    this.#userDragInterceptionEnabled = enabled;\n    return this.#client.send('Input.setInterceptDrags', {enabled});\n  }\n\n  override setOfflineMode(enabled: boolean): Promise<void> {\n    return this.#frameManager.networkManager.setOfflineMode(enabled);\n  }\n\n  override emulateNetworkConditions(\n    networkConditions: NetworkConditions | null\n  ): Promise<void> {\n    return this.#frameManager.networkManager.emulateNetworkConditions(\n      networkConditions\n    );\n  }\n\n  override setDefaultNavigationTimeout(timeout: number): void {\n    this.#timeoutSettings.setDefaultNavigationTimeout(timeout);\n  }\n\n  override setDefaultTimeout(timeout: number): void {\n    this.#timeoutSettings.setDefaultTimeout(timeout);\n  }\n\n  override getDefaultTimeout(): number {\n    return this.#timeoutSettings.timeout();\n  }\n\n  override async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluateHandle.name,\n      pageFunction\n    );\n    const context = await this.mainFrame().executionContext();\n    return context.evaluateHandle(pageFunction, ...args);\n  }\n\n  override async queryObjects<Prototype>(\n    prototypeHandle: JSHandle<Prototype>\n  ): Promise<JSHandle<Prototype[]>> {\n    const context = await this.mainFrame().executionContext();\n    assert(!prototypeHandle.disposed, 'Prototype JSHandle is disposed!');\n    assert(\n      prototypeHandle.id,\n      'Prototype JSHandle must not be referencing primitive value'\n    );\n    const response = await context._client.send('Runtime.queryObjects', {\n      prototypeObjectId: prototypeHandle.id,\n    });\n    return createJSHandle(context, response.objects) as HandleFor<Prototype[]>;\n  }\n\n  override async cookies(\n    ...urls: string[]\n  ): Promise<Protocol.Network.Cookie[]> {\n    const originalCookies = (\n      await this.#client.send('Network.getCookies', {\n        urls: urls.length ? urls : [this.url()],\n      })\n    ).cookies;\n\n    const unsupportedCookieAttributes = ['priority'];\n    const filterUnsupportedAttributes = (\n      cookie: Protocol.Network.Cookie\n    ): Protocol.Network.Cookie => {\n      for (const attr of unsupportedCookieAttributes) {\n        delete (cookie as unknown as Record<string, unknown>)[attr];\n      }\n      return cookie;\n    };\n    return originalCookies.map(filterUnsupportedAttributes);\n  }\n\n  override async deleteCookie(\n    ...cookies: Protocol.Network.DeleteCookiesRequest[]\n  ): Promise<void> {\n    const pageURL = this.url();\n    for (const cookie of cookies) {\n      const item = Object.assign({}, cookie);\n      if (!cookie.url && pageURL.startsWith('http')) {\n        item.url = pageURL;\n      }\n      await this.#client.send('Network.deleteCookies', item);\n    }\n  }\n\n  override async setCookie(\n    ...cookies: Protocol.Network.CookieParam[]\n  ): Promise<void> {\n    const pageURL = this.url();\n    const startsWithHTTP = pageURL.startsWith('http');\n    const items = cookies.map(cookie => {\n      const item = Object.assign({}, cookie);\n      if (!item.url && startsWithHTTP) {\n        item.url = pageURL;\n      }\n      assert(\n        item.url !== 'about:blank',\n        `Blank page can not have cookie \"${item.name}\"`\n      );\n      assert(\n        !String.prototype.startsWith.call(item.url || '', 'data:'),\n        `Data URL page can not have cookie \"${item.name}\"`\n      );\n      return item;\n    });\n    await this.deleteCookie(...items);\n    if (items.length) {\n      await this.#client.send('Network.setCookies', {cookies: items});\n    }\n  }\n\n  override async exposeFunction(\n    name: string,\n    pptrFunction: Function | {default: Function}\n  ): Promise<void> {\n    if (this.#bindings.has(name)) {\n      throw new Error(\n        `Failed to add page binding with name ${name}: window['${name}'] already exists!`\n      );\n    }\n\n    let binding: Binding;\n    switch (typeof pptrFunction) {\n      case 'function':\n        binding = new Binding(\n          name,\n          pptrFunction as (...args: unknown[]) => unknown\n        );\n        break;\n      default:\n        binding = new Binding(\n          name,\n          pptrFunction.default as (...args: unknown[]) => unknown\n        );\n        break;\n    }\n\n    this.#bindings.set(name, binding);\n\n    const expression = pageBindingInitString('exposedFun', name);\n    await this.#client.send('Runtime.addBinding', {name});\n    const {identifier} = await this.#client.send(\n      'Page.addScriptToEvaluateOnNewDocument',\n      {\n        source: expression,\n      }\n    );\n\n    this.#exposedFunctions.set(name, identifier);\n\n    await Promise.all(\n      this.frames().map(frame => {\n        return frame.evaluate(expression).catch(debugError);\n      })\n    );\n  }\n\n  override async removeExposedFunction(name: string): Promise<void> {\n    const exposedFun = this.#exposedFunctions.get(name);\n    if (!exposedFun) {\n      throw new Error(\n        `Failed to remove page binding with name ${name}: window['${name}'] does not exists!`\n      );\n    }\n\n    await this.#client.send('Runtime.removeBinding', {name});\n    await this.removeScriptToEvaluateOnNewDocument(exposedFun);\n\n    await Promise.all(\n      this.frames().map(frame => {\n        return frame\n          .evaluate(name => {\n            // Removes the dangling Puppeteer binding wrapper.\n            // @ts-expect-error: In a different context.\n            globalThis[name] = undefined;\n          }, name)\n          .catch(debugError);\n      })\n    );\n\n    this.#exposedFunctions.delete(name);\n    this.#bindings.delete(name);\n  }\n\n  override async authenticate(credentials: Credentials): Promise<void> {\n    return this.#frameManager.networkManager.authenticate(credentials);\n  }\n\n  override async setExtraHTTPHeaders(\n    headers: Record<string, string>\n  ): Promise<void> {\n    return this.#frameManager.networkManager.setExtraHTTPHeaders(headers);\n  }\n\n  override async setUserAgent(\n    userAgent: string,\n    userAgentMetadata?: Protocol.Emulation.UserAgentMetadata\n  ): Promise<void> {\n    return this.#frameManager.networkManager.setUserAgent(\n      userAgent,\n      userAgentMetadata\n    );\n  }\n\n  override async metrics(): Promise<Metrics> {\n    const response = await this.#client.send('Performance.getMetrics');\n    return this.#buildMetricsObject(response.metrics);\n  }\n\n  #emitMetrics(event: Protocol.Performance.MetricsEvent): void {\n    this.emit(PageEmittedEvents.Metrics, {\n      title: event.title,\n      metrics: this.#buildMetricsObject(event.metrics),\n    });\n  }\n\n  #buildMetricsObject(metrics?: Protocol.Performance.Metric[]): Metrics {\n    const result: Record<\n      Protocol.Performance.Metric['name'],\n      Protocol.Performance.Metric['value']\n    > = {};\n    for (const metric of metrics || []) {\n      if (supportedMetrics.has(metric.name)) {\n        result[metric.name] = metric.value;\n      }\n    }\n    return result;\n  }\n\n  #handleException(exceptionDetails: Protocol.Runtime.ExceptionDetails): void {\n    this.emit(PageEmittedEvents.PageError, createClientError(exceptionDetails));\n  }\n\n  async #onConsoleAPI(\n    event: Protocol.Runtime.ConsoleAPICalledEvent\n  ): Promise<void> {\n    if (event.executionContextId === 0) {\n      // DevTools protocol stores the last 1000 console messages. These\n      // messages are always reported even for removed execution contexts. In\n      // this case, they are marked with executionContextId = 0 and are\n      // reported upon enabling Runtime agent.\n      //\n      // Ignore these messages since:\n      // - there's no execution context we can use to operate with message\n      //   arguments\n      // - these messages are reported before Puppeteer clients can subscribe\n      //   to the 'console'\n      //   page event.\n      //\n      // @see https://github.com/puppeteer/puppeteer/issues/3865\n      return;\n    }\n    const context = this.#frameManager.getExecutionContextById(\n      event.executionContextId,\n      this.#client\n    );\n    if (!context) {\n      debugError(\n        new Error(\n          `ExecutionContext not found for a console message: ${JSON.stringify(\n            event\n          )}`\n        )\n      );\n      return;\n    }\n    const values = event.args.map(arg => {\n      return createJSHandle(context, arg);\n    });\n    this.#addConsoleMessage(event.type, values, event.stackTrace);\n  }\n\n  async #onBindingCalled(\n    event: Protocol.Runtime.BindingCalledEvent\n  ): Promise<void> {\n    let payload: BindingPayload;\n    try {\n      payload = JSON.parse(event.payload);\n    } catch {\n      // The binding was either called by something in the page or it was\n      // called before our wrapper was initialized.\n      return;\n    }\n    const {type, name, seq, args, isTrivial} = payload;\n    if (type !== 'exposedFun') {\n      return;\n    }\n\n    const context = this.#frameManager.executionContextById(\n      event.executionContextId,\n      this.#client\n    );\n    if (!context) {\n      return;\n    }\n\n    const binding = this.#bindings.get(name);\n    await binding?.run(context, seq, args, isTrivial);\n  }\n\n  #addConsoleMessage(\n    eventType: ConsoleMessageType,\n    args: JSHandle[],\n    stackTrace?: Protocol.Runtime.StackTrace\n  ): void {\n    if (!this.listenerCount(PageEmittedEvents.Console)) {\n      args.forEach(arg => {\n        return arg.dispose();\n      });\n      return;\n    }\n    const textTokens = [];\n    for (const arg of args) {\n      const remoteObject = arg.remoteObject();\n      if (remoteObject.objectId) {\n        textTokens.push(arg.toString());\n      } else {\n        textTokens.push(valueFromRemoteObject(remoteObject));\n      }\n    }\n    const stackTraceLocations = [];\n    if (stackTrace) {\n      for (const callFrame of stackTrace.callFrames) {\n        stackTraceLocations.push({\n          url: callFrame.url,\n          lineNumber: callFrame.lineNumber,\n          columnNumber: callFrame.columnNumber,\n        });\n      }\n    }\n    const message = new ConsoleMessage(\n      eventType,\n      textTokens.join(' '),\n      args,\n      stackTraceLocations\n    );\n    this.emit(PageEmittedEvents.Console, message);\n  }\n\n  #onDialog(event: Protocol.Page.JavascriptDialogOpeningEvent): void {\n    const type = validateDialogType(event.type);\n    const dialog = new CDPDialog(\n      this.#client,\n      type,\n      event.message,\n      event.defaultPrompt\n    );\n    this.emit(PageEmittedEvents.Dialog, dialog);\n  }\n\n  override url(): string {\n    return this.mainFrame().url();\n  }\n\n  override async content(): Promise<string> {\n    return await this.mainFrame().content();\n  }\n\n  override async setContent(\n    html: string,\n    options: WaitForOptions = {}\n  ): Promise<void> {\n    await this.mainFrame().setContent(html, options);\n  }\n\n  override async goto(\n    url: string,\n    options: WaitForOptions & {referer?: string; referrerPolicy?: string} = {}\n  ): Promise<HTTPResponse | null> {\n    return await this.mainFrame().goto(url, options);\n  }\n\n  override async reload(\n    options?: WaitForOptions\n  ): Promise<HTTPResponse | null> {\n    const result = await Promise.all([\n      this.waitForNavigation(options),\n      this.#client.send('Page.reload'),\n    ]);\n\n    return result[0];\n  }\n\n  override async createCDPSession(): Promise<CDPSession> {\n    return await this.target().createCDPSession();\n  }\n\n  override async waitForRequest(\n    urlOrPredicate: string | ((req: HTTPRequest) => boolean | Promise<boolean>),\n    options: {timeout?: number} = {}\n  ): Promise<HTTPRequest> {\n    const {timeout = this.#timeoutSettings.timeout()} = options;\n    return waitForEvent(\n      this.#frameManager.networkManager,\n      NetworkManagerEmittedEvents.Request,\n      async request => {\n        if (isString(urlOrPredicate)) {\n          return urlOrPredicate === request.url();\n        }\n        if (typeof urlOrPredicate === 'function') {\n          return !!(await urlOrPredicate(request));\n        }\n        return false;\n      },\n      timeout,\n      this.#sessionCloseDeferred.valueOrThrow()\n    );\n  }\n\n  override async waitForResponse(\n    urlOrPredicate:\n      | string\n      | ((res: HTTPResponse) => boolean | Promise<boolean>),\n    options: {timeout?: number} = {}\n  ): Promise<HTTPResponse> {\n    const {timeout = this.#timeoutSettings.timeout()} = options;\n    return waitForEvent(\n      this.#frameManager.networkManager,\n      NetworkManagerEmittedEvents.Response,\n      async response => {\n        if (isString(urlOrPredicate)) {\n          return urlOrPredicate === response.url();\n        }\n        if (typeof urlOrPredicate === 'function') {\n          return !!(await urlOrPredicate(response));\n        }\n        return false;\n      },\n      timeout,\n      this.#sessionCloseDeferred.valueOrThrow()\n    );\n  }\n\n  override async waitForNetworkIdle(\n    options: {idleTime?: number; timeout?: number} = {}\n  ): Promise<void> {\n    const {idleTime = 500, timeout = this.#timeoutSettings.timeout()} = options;\n\n    await this._waitForNetworkIdle(\n      this.#frameManager.networkManager,\n      idleTime,\n      timeout,\n      this.#sessionCloseDeferred\n    );\n  }\n\n  override async waitForFrame(\n    urlOrPredicate: string | ((frame: Frame) => boolean | Promise<boolean>),\n    options: {timeout?: number} = {}\n  ): Promise<Frame> {\n    const {timeout = this.#timeoutSettings.timeout()} = options;\n\n    let predicate: (frame: Frame) => Promise<boolean>;\n    if (isString(urlOrPredicate)) {\n      predicate = (frame: Frame) => {\n        return Promise.resolve(urlOrPredicate === frame.url());\n      };\n    } else {\n      predicate = (frame: Frame) => {\n        const value = urlOrPredicate(frame);\n        if (typeof value === 'boolean') {\n          return Promise.resolve(value);\n        }\n        return value;\n      };\n    }\n\n    const eventRace: Promise<Frame> = Deferred.race([\n      waitForEvent(\n        this.#frameManager,\n        FrameManagerEmittedEvents.FrameAttached,\n        predicate,\n        timeout,\n        this.#sessionCloseDeferred.valueOrThrow()\n      ),\n      waitForEvent(\n        this.#frameManager,\n        FrameManagerEmittedEvents.FrameNavigated,\n        predicate,\n        timeout,\n        this.#sessionCloseDeferred.valueOrThrow()\n      ),\n      ...this.frames().map(async frame => {\n        if (await predicate(frame)) {\n          return frame;\n        }\n        return await eventRace;\n      }),\n    ]);\n\n    return eventRace;\n  }\n\n  override async goBack(\n    options: WaitForOptions = {}\n  ): Promise<HTTPResponse | null> {\n    return this.#go(-1, options);\n  }\n\n  override async goForward(\n    options: WaitForOptions = {}\n  ): Promise<HTTPResponse | null> {\n    return this.#go(+1, options);\n  }\n\n  async #go(\n    delta: number,\n    options: WaitForOptions\n  ): Promise<HTTPResponse | null> {\n    const history = await this.#client.send('Page.getNavigationHistory');\n    const entry = history.entries[history.currentIndex + delta];\n    if (!entry) {\n      return null;\n    }\n    const result = await Promise.all([\n      this.waitForNavigation(options),\n      this.#client.send('Page.navigateToHistoryEntry', {entryId: entry.id}),\n    ]);\n    return result[0];\n  }\n\n  override async bringToFront(): Promise<void> {\n    await this.#client.send('Page.bringToFront');\n  }\n\n  override async setJavaScriptEnabled(enabled: boolean): Promise<void> {\n    return await this.#emulationManager.setJavaScriptEnabled(enabled);\n  }\n\n  override async setBypassCSP(enabled: boolean): Promise<void> {\n    await this.#client.send('Page.setBypassCSP', {enabled});\n  }\n\n  override async emulateMediaType(type?: string): Promise<void> {\n    return await this.#emulationManager.emulateMediaType(type);\n  }\n\n  override async emulateCPUThrottling(factor: number | null): Promise<void> {\n    return await this.#emulationManager.emulateCPUThrottling(factor);\n  }\n\n  override async emulateMediaFeatures(\n    features?: MediaFeature[]\n  ): Promise<void> {\n    return await this.#emulationManager.emulateMediaFeatures(features);\n  }\n\n  override async emulateTimezone(timezoneId?: string): Promise<void> {\n    return await this.#emulationManager.emulateTimezone(timezoneId);\n  }\n\n  override async emulateIdleState(overrides?: {\n    isUserActive: boolean;\n    isScreenUnlocked: boolean;\n  }): Promise<void> {\n    return await this.#emulationManager.emulateIdleState(overrides);\n  }\n\n  override async emulateVisionDeficiency(\n    type?: Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n  ): Promise<void> {\n    return await this.#emulationManager.emulateVisionDeficiency(type);\n  }\n\n  override async setViewport(viewport: Viewport): Promise<void> {\n    const needsReload = await this.#emulationManager.emulateViewport(viewport);\n    this.#viewport = viewport;\n    if (needsReload) {\n      await this.reload();\n    }\n  }\n\n  override viewport(): Viewport | null {\n    return this.#viewport;\n  }\n\n  override async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluate.name,\n      pageFunction\n    );\n    return this.mainFrame().evaluate(pageFunction, ...args);\n  }\n\n  override async evaluateOnNewDocument<\n    Params extends unknown[],\n    Func extends (...args: Params) => unknown = (...args: Params) => unknown,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<NewDocumentScriptEvaluation> {\n    const source = evaluationString(pageFunction, ...args);\n    const {identifier} = await this.#client.send(\n      'Page.addScriptToEvaluateOnNewDocument',\n      {\n        source,\n      }\n    );\n\n    return {identifier};\n  }\n\n  override async removeScriptToEvaluateOnNewDocument(\n    identifier: string\n  ): Promise<void> {\n    await this.#client.send('Page.removeScriptToEvaluateOnNewDocument', {\n      identifier,\n    });\n  }\n\n  override async setCacheEnabled(enabled = true): Promise<void> {\n    await this.#frameManager.networkManager.setCacheEnabled(enabled);\n  }\n\n  override screenshot(\n    options: ScreenshotOptions & {encoding: 'base64'}\n  ): Promise<string>;\n  override screenshot(\n    options?: ScreenshotOptions & {encoding?: 'binary'}\n  ): Promise<Buffer>;\n  override async screenshot(\n    options: ScreenshotOptions = {}\n  ): Promise<Buffer | string> {\n    let screenshotType = Protocol.Page.CaptureScreenshotRequestFormat.Png;\n    // options.type takes precedence over inferring the type from options.path\n    // because it may be a 0-length file with no extension created beforehand\n    // (i.e. as a temp file).\n    if (options.type) {\n      screenshotType =\n        options.type as Protocol.Page.CaptureScreenshotRequestFormat;\n    } else if (options.path) {\n      const filePath = options.path;\n      const extension = filePath\n        .slice(filePath.lastIndexOf('.') + 1)\n        .toLowerCase();\n      switch (extension) {\n        case 'png':\n          screenshotType = Protocol.Page.CaptureScreenshotRequestFormat.Png;\n          break;\n        case 'jpeg':\n        case 'jpg':\n          screenshotType = Protocol.Page.CaptureScreenshotRequestFormat.Jpeg;\n          break;\n        case 'webp':\n          screenshotType = Protocol.Page.CaptureScreenshotRequestFormat.Webp;\n          break;\n        default:\n          throw new Error(\n            `Unsupported screenshot type for extension \\`.${extension}\\``\n          );\n      }\n    }\n\n    if (options.quality) {\n      assert(\n        screenshotType === Protocol.Page.CaptureScreenshotRequestFormat.Jpeg ||\n          screenshotType === Protocol.Page.CaptureScreenshotRequestFormat.Webp,\n        'options.quality is unsupported for the ' +\n          screenshotType +\n          ' screenshots'\n      );\n      assert(\n        typeof options.quality === 'number',\n        'Expected options.quality to be a number but found ' +\n          typeof options.quality\n      );\n      assert(\n        Number.isInteger(options.quality),\n        'Expected options.quality to be an integer'\n      );\n      assert(\n        options.quality >= 0 && options.quality <= 100,\n        'Expected options.quality to be between 0 and 100 (inclusive), got ' +\n          options.quality\n      );\n    }\n    assert(\n      !options.clip || !options.fullPage,\n      'options.clip and options.fullPage are exclusive'\n    );\n    if (options.clip) {\n      assert(\n        typeof options.clip.x === 'number',\n        'Expected options.clip.x to be a number but found ' +\n          typeof options.clip.x\n      );\n      assert(\n        typeof options.clip.y === 'number',\n        'Expected options.clip.y to be a number but found ' +\n          typeof options.clip.y\n      );\n      assert(\n        typeof options.clip.width === 'number',\n        'Expected options.clip.width to be a number but found ' +\n          typeof options.clip.width\n      );\n      assert(\n        typeof options.clip.height === 'number',\n        'Expected options.clip.height to be a number but found ' +\n          typeof options.clip.height\n      );\n      assert(\n        options.clip.width !== 0,\n        'Expected options.clip.width not to be 0.'\n      );\n      assert(\n        options.clip.height !== 0,\n        'Expected options.clip.height not to be 0.'\n      );\n    }\n    return this.#screenshotTaskQueue.postTask(() => {\n      return this.#screenshotTask(screenshotType, options);\n    });\n  }\n\n  async #screenshotTask(\n    format: Protocol.Page.CaptureScreenshotRequestFormat,\n    options: ScreenshotOptions = {}\n  ): Promise<Buffer | string> {\n    await this.#client.send('Target.activateTarget', {\n      targetId: this.#target._targetId,\n    });\n    let clip = options.clip ? processClip(options.clip) : undefined;\n    let captureBeyondViewport = options.captureBeyondViewport ?? true;\n    const fromSurface = options.fromSurface;\n\n    if (options.fullPage) {\n      // Overwrite clip for full page.\n      clip = undefined;\n\n      if (!captureBeyondViewport) {\n        const metrics = await this.#client.send('Page.getLayoutMetrics');\n        // Fallback to `contentSize` in case of using Firefox.\n        const {width, height} = metrics.cssContentSize || metrics.contentSize;\n        const {\n          isMobile = false,\n          deviceScaleFactor = 1,\n          isLandscape = false,\n        } = this.#viewport || {};\n        const screenOrientation: Protocol.Emulation.ScreenOrientation =\n          isLandscape\n            ? {angle: 90, type: 'landscapePrimary'}\n            : {angle: 0, type: 'portraitPrimary'};\n        await this.#client.send('Emulation.setDeviceMetricsOverride', {\n          mobile: isMobile,\n          width,\n          height,\n          deviceScaleFactor,\n          screenOrientation,\n        });\n      }\n    } else if (!clip) {\n      captureBeyondViewport = false;\n    }\n\n    const shouldSetDefaultBackground =\n      options.omitBackground && (format === 'png' || format === 'webp');\n    if (shouldSetDefaultBackground) {\n      await this.#emulationManager.setTransparentBackgroundColor();\n    }\n\n    const result = await this.#client.send('Page.captureScreenshot', {\n      format,\n      optimizeForSpeed: options.optimizeForSpeed,\n      quality: options.quality,\n      clip: clip && {\n        ...clip,\n        scale: clip.scale ?? 1,\n      },\n      captureBeyondViewport,\n      fromSurface,\n    });\n    if (shouldSetDefaultBackground) {\n      await this.#emulationManager.resetDefaultBackgroundColor();\n    }\n\n    if (options.fullPage && this.#viewport) {\n      await this.setViewport(this.#viewport);\n    }\n\n    if (options.encoding === 'base64') {\n      return result.data;\n    }\n\n    const buffer = Buffer.from(result.data, 'base64');\n    await this._maybeWriteBufferToFile(options.path, buffer);\n\n    return buffer;\n\n    function processClip(clip: ScreenshotClip): ScreenshotClip {\n      const x = Math.round(clip.x);\n      const y = Math.round(clip.y);\n      const width = Math.round(clip.width + clip.x - x);\n      const height = Math.round(clip.height + clip.y - y);\n      return {x, y, width, height, scale: clip.scale};\n    }\n  }\n\n  override async createPDFStream(options: PDFOptions = {}): Promise<Readable> {\n    const {\n      landscape,\n      displayHeaderFooter,\n      headerTemplate,\n      footerTemplate,\n      printBackground,\n      scale,\n      width: paperWidth,\n      height: paperHeight,\n      margin,\n      pageRanges,\n      preferCSSPageSize,\n      omitBackground,\n      timeout,\n    } = this._getPDFOptions(options);\n\n    if (omitBackground) {\n      await this.#emulationManager.setTransparentBackgroundColor();\n    }\n\n    const printCommandPromise = this.#client.send('Page.printToPDF', {\n      transferMode: 'ReturnAsStream',\n      landscape,\n      displayHeaderFooter,\n      headerTemplate,\n      footerTemplate,\n      printBackground,\n      scale,\n      paperWidth,\n      paperHeight,\n      marginTop: margin.top,\n      marginBottom: margin.bottom,\n      marginLeft: margin.left,\n      marginRight: margin.right,\n      pageRanges,\n      preferCSSPageSize,\n    });\n\n    const result = await waitWithTimeout(\n      printCommandPromise,\n      'Page.printToPDF',\n      timeout\n    );\n\n    if (omitBackground) {\n      await this.#emulationManager.resetDefaultBackgroundColor();\n    }\n\n    assert(result.stream, '`stream` is missing from `Page.printToPDF');\n    return getReadableFromProtocolStream(this.#client, result.stream);\n  }\n\n  override async pdf(options: PDFOptions = {}): Promise<Buffer> {\n    const {path = undefined} = options;\n    const readable = await this.createPDFStream(options);\n    const buffer = await getReadableAsBuffer(readable, path);\n    assert(buffer, 'Could not create buffer');\n    return buffer;\n  }\n\n  override async title(): Promise<string> {\n    return this.mainFrame().title();\n  }\n\n  override async close(\n    options: {runBeforeUnload?: boolean} = {runBeforeUnload: undefined}\n  ): Promise<void> {\n    const connection = this.#client.connection();\n    assert(\n      connection,\n      'Protocol error: Connection closed. Most likely the page has been closed.'\n    );\n    const runBeforeUnload = !!options.runBeforeUnload;\n    if (runBeforeUnload) {\n      await this.#client.send('Page.close');\n    } else {\n      await connection.send('Target.closeTarget', {\n        targetId: this.#target._targetId,\n      });\n      await this.#target._isClosedDeferred.valueOrThrow();\n    }\n  }\n\n  override isClosed(): boolean {\n    return this.#closed;\n  }\n\n  override get mouse(): CDPMouse {\n    return this.#mouse;\n  }\n\n  /**\n   * This method is typically coupled with an action that triggers a device\n   * request from an api such as WebBluetooth.\n   *\n   * :::caution\n   *\n   * This must be called before the device request is made. It will not return a\n   * currently active device prompt.\n   *\n   * :::\n   *\n   * @example\n   *\n   * ```ts\n   * const [devicePrompt] = Promise.all([\n   *   page.waitForDevicePrompt(),\n   *   page.click('#connect-bluetooth'),\n   * ]);\n   * await devicePrompt.select(\n   *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n   * );\n   * ```\n   */\n  override waitForDevicePrompt(\n    options: WaitTimeoutOptions = {}\n  ): Promise<DeviceRequestPrompt> {\n    return this.mainFrame().waitForDevicePrompt(options);\n  }\n}\n\nconst supportedMetrics = new Set<string>([\n  'Timestamp',\n  'Documents',\n  'Frames',\n  'JSEventListeners',\n  'Nodes',\n  'LayoutCount',\n  'RecalcStyleCount',\n  'LayoutDuration',\n  'RecalcStyleDuration',\n  'ScriptDuration',\n  'TaskDuration',\n  'JSHeapUsedSize',\n  'JSHeapTotalSize',\n]);\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Buffer} from 'node:buffer';\nimport type {Readable} from 'node:stream';\n\nimport {Protocol} from 'devtools-protocol';\n\nimport type {HTTPRequest} from '../api/HTTPRequest.js';\nimport type {HTTPResponse} from '../api/HTTPResponse.js';\nimport type {Accessibility} from '../common/Accessibility.js';\nimport type {CDPSession} from '../common/Connection.js';\nimport type {ConsoleMessage} from '../common/ConsoleMessage.js';\nimport type {Coverage} from '../common/Coverage.js';\nimport {Device} from '../common/Device.js';\nimport {DeviceRequestPrompt} from '../common/DeviceRequestPrompt.js';\nimport {TargetCloseError} from '../common/Errors.js';\nimport {EventEmitter, Handler} from '../common/EventEmitter.js';\nimport type {FileChooser} from '../common/FileChooser.js';\nimport type {WaitForSelectorOptions} from '../common/IsolatedWorld.js';\nimport type {PuppeteerLifeCycleEvent} from '../common/LifecycleWatcher.js';\nimport {\n  Credentials,\n  NetworkConditions,\n  NetworkManagerEmittedEvents,\n} from '../common/NetworkManager.js';\nimport {\n  LowerCasePaperFormat,\n  paperFormats,\n  ParsedPDFOptions,\n  PDFOptions,\n} from '../common/PDFOptions.js';\nimport type {Viewport} from '../common/PuppeteerViewport.js';\nimport type {Tracing} from '../common/Tracing.js';\nimport type {\n  Awaitable,\n  EvaluateFunc,\n  EvaluateFuncWith,\n  HandleFor,\n  NodeFor,\n} from '../common/types.js';\nimport {\n  importFSPromises,\n  isNumber,\n  isString,\n  waitForEvent,\n  withSourcePuppeteerURLIfNone,\n} from '../common/util.js';\nimport type {WebWorker} from '../common/WebWorker.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport type {Browser} from './Browser.js';\nimport type {BrowserContext} from './BrowserContext.js';\nimport type {Dialog} from './Dialog.js';\nimport type {ClickOptions, ElementHandle} from './ElementHandle.js';\nimport type {\n  Frame,\n  FrameAddScriptTagOptions,\n  FrameAddStyleTagOptions,\n  FrameWaitForFunctionOptions,\n} from './Frame.js';\nimport {Keyboard, KeyboardTypeOptions, Mouse, Touchscreen} from './Input.js';\nimport type {JSHandle} from './JSHandle.js';\nimport {\n  AwaitedLocator,\n  FunctionLocator,\n  Locator,\n  NodeLocator,\n} from './locators/locators.js';\nimport type {Target} from './Target.js';\n\n/**\n * @public\n */\nexport interface Metrics {\n  Timestamp?: number;\n  Documents?: number;\n  Frames?: number;\n  JSEventListeners?: number;\n  Nodes?: number;\n  LayoutCount?: number;\n  RecalcStyleCount?: number;\n  LayoutDuration?: number;\n  RecalcStyleDuration?: number;\n  ScriptDuration?: number;\n  TaskDuration?: number;\n  JSHeapUsedSize?: number;\n  JSHeapTotalSize?: number;\n}\n\n/**\n * @public\n */\nexport interface WaitTimeoutOptions {\n  /**\n   * Maximum wait time in milliseconds. Pass 0 to disable the timeout.\n   *\n   * The default value can be changed by using the\n   * {@link Page.setDefaultTimeout} method.\n   *\n   * @defaultValue `30000`\n   */\n  timeout?: number;\n}\n\n/**\n * @public\n */\nexport interface WaitForOptions {\n  /**\n   * Maximum wait time in milliseconds. Pass 0 to disable the timeout.\n   *\n   * The default value can be changed by using the\n   * {@link Page.setDefaultTimeout} or {@link Page.setDefaultNavigationTimeout}\n   * methods.\n   *\n   * @defaultValue `30000`\n   */\n  timeout?: number;\n  waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n}\n\n/**\n * @public\n */\nexport interface GeolocationOptions {\n  /**\n   * Latitude between `-90` and `90`.\n   */\n  longitude: number;\n  /**\n   * Longitude between `-180` and `180`.\n   */\n  latitude: number;\n  /**\n   * Optional non-negative accuracy value.\n   */\n  accuracy?: number;\n}\n\n/**\n * @public\n */\nexport interface MediaFeature {\n  name: string;\n  value: string;\n}\n\n/**\n * @public\n */\nexport interface ScreenshotClip {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  /**\n   * @defaultValue `1`\n   */\n  scale?: number;\n}\n\n/**\n * @public\n */\nexport interface ScreenshotOptions {\n  /**\n   * @defaultValue `false`\n   */\n  optimizeForSpeed?: boolean;\n  /**\n   * @defaultValue `png`\n   */\n  type?: 'png' | 'jpeg' | 'webp';\n  /**\n   * The file path to save the image to. The screenshot type will be inferred\n   * from file extension. If path is a relative path, then it is resolved\n   * relative to current working directory. If no path is provided, the image\n   * won't be saved to the disk.\n   */\n  path?: string;\n  /**\n   * When `true`, takes a screenshot of the full page.\n   * @defaultValue `false`\n   */\n  fullPage?: boolean;\n  /**\n   * An object which specifies the clipping region of the page.\n   */\n  clip?: ScreenshotClip;\n  /**\n   * Quality of the image, between 0-100. Not applicable to `png` images.\n   */\n  quality?: number;\n  /**\n   * Hides default white background and allows capturing screenshots with transparency.\n   * @defaultValue `false`\n   */\n  omitBackground?: boolean;\n  /**\n   * Encoding of the image.\n   * @defaultValue `binary`\n   */\n  encoding?: 'base64' | 'binary';\n  /**\n   * Capture the screenshot beyond the viewport.\n   * @defaultValue `true`\n   */\n  captureBeyondViewport?: boolean;\n  /**\n   * Capture the screenshot from the surface, rather than the view.\n   * @defaultValue `true`\n   */\n  fromSurface?: boolean;\n}\n\n/**\n * All the events that a page instance may emit.\n *\n * @public\n */\nexport const enum PageEmittedEvents {\n  /**\n   * Emitted when the page closes.\n   */\n  Close = 'close',\n  /**\n   * Emitted when JavaScript within the page calls one of console API methods,\n   * e.g. `console.log` or `console.dir`. Also emitted if the page throws an\n   * error or a warning.\n   *\n   * @remarks\n   * A `console` event provides a {@link ConsoleMessage} representing the\n   * console message that was logged.\n   *\n   * @example\n   * An example of handling `console` event:\n   *\n   * ```ts\n   * page.on('console', msg => {\n   *   for (let i = 0; i < msg.args().length; ++i)\n   *     console.log(`${i}: ${msg.args()[i]}`);\n   * });\n   * page.evaluate(() => console.log('hello', 5, {foo: 'bar'}));\n   * ```\n   */\n  Console = 'console',\n  /**\n   * Emitted when a JavaScript dialog appears, such as `alert`, `prompt`,\n   * `confirm` or `beforeunload`. Puppeteer can respond to the dialog via\n   * {@link Dialog.accept} or {@link Dialog.dismiss}.\n   */\n  Dialog = 'dialog',\n  /**\n   * Emitted when the JavaScript\n   * {@link https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded | DOMContentLoaded }\n   * event is dispatched.\n   */\n  DOMContentLoaded = 'domcontentloaded',\n  /**\n   * Emitted when the page crashes. Will contain an `Error`.\n   */\n  Error = 'error',\n  /** Emitted when a frame is attached. Will contain a {@link Frame}. */\n  FrameAttached = 'frameattached',\n  /** Emitted when a frame is detached. Will contain a {@link Frame}. */\n  FrameDetached = 'framedetached',\n  /**\n   * Emitted when a frame is navigated to a new URL. Will contain a\n   * {@link Frame}.\n   */\n  FrameNavigated = 'framenavigated',\n  /**\n   * Emitted when the JavaScript\n   * {@link https://developer.mozilla.org/en-US/docs/Web/Events/load | load}\n   * event is dispatched.\n   */\n  Load = 'load',\n  /**\n   * Emitted when the JavaScript code makes a call to `console.timeStamp`. For\n   * the list of metrics see {@link Page.metrics | page.metrics}.\n   *\n   * @remarks\n   * Contains an object with two properties:\n   *\n   * - `title`: the title passed to `console.timeStamp`\n   * - `metrics`: object containing metrics as key/value pairs. The values will\n   *   be `number`s.\n   */\n  Metrics = 'metrics',\n  /**\n   * Emitted when an uncaught exception happens within the page. Contains an\n   * `Error`.\n   */\n  PageError = 'pageerror',\n  /**\n   * Emitted when the page opens a new tab or window.\n   *\n   * Contains a {@link Page} corresponding to the popup window.\n   *\n   * @example\n   *\n   * ```ts\n   * const [popup] = await Promise.all([\n   *   new Promise(resolve => page.once('popup', resolve)),\n   *   page.click('a[target=_blank]'),\n   * ]);\n   * ```\n   *\n   * ```ts\n   * const [popup] = await Promise.all([\n   *   new Promise(resolve => page.once('popup', resolve)),\n   *   page.evaluate(() => window.open('https://example.com')),\n   * ]);\n   * ```\n   */\n  Popup = 'popup',\n  /**\n   * Emitted when a page issues a request and contains a {@link HTTPRequest}.\n   *\n   * @remarks\n   * The object is readonly. See {@link Page.setRequestInterception} for\n   * intercepting and mutating requests.\n   */\n  Request = 'request',\n  /**\n   * Emitted when a request ended up loading from cache. Contains a\n   * {@link HTTPRequest}.\n   *\n   * @remarks\n   * For certain requests, might contain undefined.\n   * {@link https://crbug.com/750469}\n   */\n  RequestServedFromCache = 'requestservedfromcache',\n  /**\n   * Emitted when a request fails, for example by timing out.\n   *\n   * Contains a {@link HTTPRequest}.\n   *\n   * @remarks\n   * HTTP Error responses, such as 404 or 503, are still successful responses\n   * from HTTP standpoint, so request will complete with `requestfinished` event\n   * and not with `requestfailed`.\n   */\n  RequestFailed = 'requestfailed',\n  /**\n   * Emitted when a request finishes successfully. Contains a\n   * {@link HTTPRequest}.\n   */\n  RequestFinished = 'requestfinished',\n  /**\n   * Emitted when a response is received. Contains a {@link HTTPResponse}.\n   */\n  Response = 'response',\n  /**\n   * Emitted when a dedicated\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API | WebWorker}\n   * is spawned by the page.\n   */\n  WorkerCreated = 'workercreated',\n  /**\n   * Emitted when a dedicated\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API | WebWorker}\n   * is destroyed by the page.\n   */\n  WorkerDestroyed = 'workerdestroyed',\n}\n\n/**\n * Denotes the objects received by callback functions for page events.\n *\n * See {@link PageEmittedEvents} for more detail on the events and when they are\n * emitted.\n *\n * @public\n */\nexport interface PageEventObject {\n  close: never;\n  console: ConsoleMessage;\n  dialog: Dialog;\n  domcontentloaded: never;\n  error: Error;\n  frameattached: Frame;\n  framedetached: Frame;\n  framenavigated: Frame;\n  load: never;\n  metrics: {title: string; metrics: Metrics};\n  pageerror: Error;\n  popup: Page;\n  request: HTTPRequest;\n  response: HTTPResponse;\n  requestfailed: HTTPRequest;\n  requestfinished: HTTPRequest;\n  requestservedfromcache: HTTPRequest;\n  workercreated: WebWorker;\n  workerdestroyed: WebWorker;\n}\n\n/**\n * @public\n */\nexport interface NewDocumentScriptEvaluation {\n  identifier: string;\n}\n\n/**\n * Page provides methods to interact with a single tab or\n * {@link https://developer.chrome.com/extensions/background_pages | extension background page}\n * in the browser.\n *\n * :::note\n *\n * One Browser instance might have multiple Page instances.\n *\n * :::\n *\n * @example\n * This example creates a page, navigates it to a URL, and then saves a screenshot:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://example.com');\n *   await page.screenshot({path: 'screenshot.png'});\n *   await browser.close();\n * })();\n * ```\n *\n * The Page class extends from Puppeteer's {@link EventEmitter} class and will\n * emit various events which are documented in the {@link PageEmittedEvents} enum.\n *\n * @example\n * This example logs a message for a single page `load` event:\n *\n * ```ts\n * page.once('load', () => console.log('Page loaded!'));\n * ```\n *\n * To unsubscribe from events use the {@link Page.off} method:\n *\n * ```ts\n * function logRequest(interceptedRequest) {\n *   console.log('A request was made:', interceptedRequest.url());\n * }\n * page.on('request', logRequest);\n * // Sometime later...\n * page.off('request', logRequest);\n * ```\n *\n * @public\n */\nexport class Page extends EventEmitter {\n  #handlerMap = new WeakMap<Handler<any>, Handler<any>>();\n\n  /**\n   * @internal\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * `true` if the service worker are being bypassed, `false` otherwise.\n   */\n  isServiceWorkerBypassed(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * `true` if drag events are being intercepted, `false` otherwise.\n   */\n  isDragInterceptionEnabled(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * `true` if the page has JavaScript enabled, `false` otherwise.\n   */\n  isJavaScriptEnabled(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Listen to page events.\n   *\n   * :::note\n   *\n   * This method exists to define event typings and handle proper wireup of\n   * cooperative request interception. Actual event listening and dispatching is\n   * delegated to {@link EventEmitter}.\n   *\n   * :::\n   */\n  override on<K extends keyof PageEventObject>(\n    eventName: K,\n    handler: (event: PageEventObject[K]) => void\n  ): this {\n    if (eventName === 'request') {\n      const wrap =\n        this.#handlerMap.get(handler) ||\n        ((event: HTTPRequest) => {\n          event.enqueueInterceptAction(() => {\n            return handler(event as PageEventObject[K]);\n          });\n        });\n\n      this.#handlerMap.set(handler, wrap);\n\n      return super.on(eventName, wrap);\n    }\n    return super.on(eventName, handler);\n  }\n\n  override once<K extends keyof PageEventObject>(\n    eventName: K,\n    handler: (event: PageEventObject[K]) => void\n  ): this {\n    // Note: this method only exists to define the types; we delegate the impl\n    // to EventEmitter.\n    return super.once(eventName, handler);\n  }\n\n  override off<K extends keyof PageEventObject>(\n    eventName: K,\n    handler: (event: PageEventObject[K]) => void\n  ): this {\n    if (eventName === 'request') {\n      handler = this.#handlerMap.get(handler) || handler;\n    }\n\n    return super.off(eventName, handler);\n  }\n\n  /**\n   * This method is typically coupled with an action that triggers file\n   * choosing.\n   *\n   * :::caution\n   *\n   * This must be called before the file chooser is launched. It will not return\n   * a currently active file chooser.\n   *\n   * :::\n   *\n   * @remarks\n   * In the \"headful\" browser, this method results in the native file picker\n   * dialog `not showing up` for the user.\n   *\n   * @example\n   * The following example clicks a button that issues a file chooser\n   * and then responds with `/tmp/myfile.pdf` as if a user has selected this file.\n   *\n   * ```ts\n   * const [fileChooser] = await Promise.all([\n   *   page.waitForFileChooser(),\n   *   page.click('#upload-file-button'),\n   *   // some button that triggers file selection\n   * ]);\n   * await fileChooser.accept(['/tmp/myfile.pdf']);\n   * ```\n   */\n  waitForFileChooser(options?: WaitTimeoutOptions): Promise<FileChooser>;\n  waitForFileChooser(): Promise<FileChooser> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Sets the page's geolocation.\n   *\n   * @remarks\n   * Consider using {@link BrowserContext.overridePermissions} to grant\n   * permissions for the page to read its geolocation.\n   *\n   * @example\n   *\n   * ```ts\n   * await page.setGeolocation({latitude: 59.95, longitude: 30.31667});\n   * ```\n   */\n  async setGeolocation(options: GeolocationOptions): Promise<void>;\n  async setGeolocation(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * A target this page was created from.\n   */\n  target(): Target {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Get the browser the page belongs to.\n   */\n  browser(): Browser {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Get the browser context that the page belongs to.\n   */\n  browserContext(): BrowserContext {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The page's main frame.\n   *\n   * @remarks\n   * Page is guaranteed to have a main frame which persists during navigations.\n   */\n  mainFrame(): Frame {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Creates a Chrome Devtools Protocol session attached to the page.\n   */\n  createCDPSession(): Promise<CDPSession> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@inheritDoc Keyboard}\n   */\n  get keyboard(): Keyboard {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@inheritDoc Touchscreen}\n   */\n  get touchscreen(): Touchscreen {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@inheritDoc Coverage}\n   */\n  get coverage(): Coverage {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@inheritDoc Tracing}\n   */\n  get tracing(): Tracing {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@inheritDoc Accessibility}\n   */\n  get accessibility(): Accessibility {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * An array of all frames attached to the page.\n   */\n  frames(): Frame[] {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * All of the dedicated {@link\n   * https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API |\n   * WebWorkers} associated with the page.\n   *\n   * @remarks\n   * This does not contain ServiceWorkers\n   */\n  workers(): WebWorker[] {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Activating request interception enables {@link HTTPRequest.abort},\n   * {@link HTTPRequest.continue} and {@link HTTPRequest.respond} methods. This\n   * provides the capability to modify network requests that are made by a page.\n   *\n   * Once request interception is enabled, every request will stall unless it's\n   * continued, responded or aborted; or completed using the browser cache.\n   *\n   * See the\n   * {@link https://pptr.dev/next/guides/request-interception|Request interception guide}\n   * for more details.\n   *\n   * @example\n   * An example of a na\u00EFve request interceptor that aborts all image requests:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   await page.setRequestInterception(true);\n   *   page.on('request', interceptedRequest => {\n   *     if (\n   *       interceptedRequest.url().endsWith('.png') ||\n   *       interceptedRequest.url().endsWith('.jpg')\n   *     )\n   *       interceptedRequest.abort();\n   *     else interceptedRequest.continue();\n   *   });\n   *   await page.goto('https://example.com');\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param value - Whether to enable request interception.\n   */\n  async setRequestInterception(value: boolean): Promise<void>;\n  async setRequestInterception(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Toggles ignoring of service worker for each request.\n   *\n   * @param bypass - Whether to bypass service worker and load from network.\n   */\n  async setBypassServiceWorker(bypass: boolean): Promise<void>;\n  async setBypassServiceWorker(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param enabled - Whether to enable drag interception.\n   *\n   * @remarks\n   * Activating drag interception enables the `Input.drag`,\n   * methods This provides the capability to capture drag events emitted\n   * on the page, which can then be used to simulate drag-and-drop.\n   */\n  async setDragInterception(enabled: boolean): Promise<void>;\n  async setDragInterception(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Sets the network connection to offline.\n   *\n   * It does not change the parameters used in {@link Page.emulateNetworkConditions}\n   *\n   * @param enabled - When `true`, enables offline mode for the page.\n   */\n  setOfflineMode(enabled: boolean): Promise<void>;\n  setOfflineMode(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This does not affect WebSockets and WebRTC PeerConnections (see\n   * https://crbug.com/563644). To set the page offline, you can use\n   * {@link Page.setOfflineMode}.\n   *\n   * A list of predefined network conditions can be used by importing\n   * {@link PredefinedNetworkConditions}.\n   *\n   * @example\n   *\n   * ```ts\n   * import {PredefinedNetworkConditions} from 'puppeteer';\n   * const slow3G = PredefinedNetworkConditions['Slow 3G'];\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   await page.emulateNetworkConditions(slow3G);\n   *   await page.goto('https://www.google.com');\n   *   // other actions...\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param networkConditions - Passing `null` disables network condition\n   * emulation.\n   */\n  emulateNetworkConditions(\n    networkConditions: NetworkConditions | null\n  ): Promise<void>;\n  emulateNetworkConditions(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This setting will change the default maximum navigation time for the\n   * following methods and related shortcuts:\n   *\n   * - {@link Page.goBack | page.goBack(options)}\n   *\n   * - {@link Page.goForward | page.goForward(options)}\n   *\n   * - {@link Page.goto | page.goto(url,options)}\n   *\n   * - {@link Page.reload | page.reload(options)}\n   *\n   * - {@link Page.setContent | page.setContent(html,options)}\n   *\n   * - {@link Page.waitForNavigation | page.waitForNavigation(options)}\n   *   @param timeout - Maximum navigation time in milliseconds.\n   */\n  setDefaultNavigationTimeout(timeout: number): void;\n  setDefaultNavigationTimeout(): void {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param timeout - Maximum time in milliseconds.\n   */\n  setDefaultTimeout(timeout: number): void;\n  setDefaultTimeout(): void {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Maximum time in milliseconds.\n   */\n  getDefaultTimeout(): number {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Creates a locator for the provided selector. See {@link Locator} for\n   * details and supported actions.\n   *\n   * @remarks\n   * Locators API is experimental and we will not follow semver for breaking\n   * change in the Locators API.\n   */\n  locator<Selector extends string>(\n    selector: Selector\n  ): Locator<NodeFor<Selector>>;\n\n  /**\n   * Creates a locator for the provided function. See {@link Locator} for\n   * details and supported actions.\n   *\n   * @remarks\n   * Locators API is experimental and we will not follow semver for breaking\n   * change in the Locators API.\n   */\n  locator<Ret>(func: () => Awaitable<Ret>): Locator<Ret>;\n  locator<Selector extends string, Ret>(\n    selectorOrFunc: Selector | (() => Awaitable<Ret>)\n  ): Locator<NodeFor<Selector>> | Locator<Ret> {\n    if (typeof selectorOrFunc === 'string') {\n      return NodeLocator.create(this, selectorOrFunc);\n    } else {\n      return FunctionLocator.create(this, selectorOrFunc);\n    }\n  }\n\n  /**\n   * A shortcut for {@link Locator.race} that does not require static imports.\n   *\n   * @internal\n   */\n  locatorRace<Locators extends readonly unknown[] | []>(\n    locators: Locators\n  ): Locator<AwaitedLocator<Locators[number]>> {\n    return Locator.race(locators);\n  }\n\n  /**\n   * Runs `document.querySelector` within the page. If no element matches the\n   * selector, the return value resolves to `null`.\n   *\n   * @param selector - A `selector` to query page for\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | selector}\n   * to query page for.\n   */\n  async $<Selector extends string>(\n    selector: Selector\n  ): Promise<ElementHandle<NodeFor<Selector>> | null> {\n    return this.mainFrame().$(selector);\n  }\n\n  /**\n   * The method runs `document.querySelectorAll` within the page. If no elements\n   * match the selector, the return value resolves to `[]`.\n   * @remarks\n   * Shortcut for {@link Frame.$$ | Page.mainFrame().$$(selector) }.\n   * @param selector - A `selector` to query page for\n   */\n  async $$<Selector extends string>(\n    selector: Selector\n  ): Promise<Array<ElementHandle<NodeFor<Selector>>>> {\n    return this.mainFrame().$$(selector);\n  }\n\n  /**\n   * @remarks\n   *\n   * The only difference between {@link Page.evaluate | page.evaluate} and\n   * `page.evaluateHandle` is that `evaluateHandle` will return the value\n   * wrapped in an in-page object.\n   *\n   * If the function passed to `page.evaluateHandle` returns a Promise, the\n   * function will wait for the promise to resolve and return its value.\n   *\n   * You can pass a string instead of a function (although functions are\n   * recommended as they are easier to debug and use with TypeScript):\n   *\n   * @example\n   *\n   * ```ts\n   * const aHandle = await page.evaluateHandle('document');\n   * ```\n   *\n   * @example\n   * {@link JSHandle} instances can be passed as arguments to the `pageFunction`:\n   *\n   * ```ts\n   * const aHandle = await page.evaluateHandle(() => document.body);\n   * const resultHandle = await page.evaluateHandle(\n   *   body => body.innerHTML,\n   *   aHandle\n   * );\n   * console.log(await resultHandle.jsonValue());\n   * await resultHandle.dispose();\n   * ```\n   *\n   * Most of the time this function returns a {@link JSHandle},\n   * but if `pageFunction` returns a reference to an element,\n   * you instead get an {@link ElementHandle} back:\n   *\n   * @example\n   *\n   * ```ts\n   * const button = await page.evaluateHandle(() =>\n   *   document.querySelector('button')\n   * );\n   * // can call `click` because `button` is an `ElementHandle`\n   * await button.click();\n   * ```\n   *\n   * The TypeScript definitions assume that `evaluateHandle` returns\n   * a `JSHandle`, but if you know it's going to return an\n   * `ElementHandle`, pass it as the generic argument:\n   *\n   * ```ts\n   * const button = await page.evaluateHandle<ElementHandle>(...);\n   * ```\n   *\n   * @param pageFunction - a function that is run within the page\n   * @param args - arguments to be passed to the pageFunction\n   */\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>>;\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method iterates the JavaScript heap and finds all objects with the\n   * given prototype.\n   *\n   * @example\n   *\n   * ```ts\n   * // Create a Map object\n   * await page.evaluate(() => (window.map = new Map()));\n   * // Get a handle to the Map object prototype\n   * const mapPrototype = await page.evaluateHandle(() => Map.prototype);\n   * // Query all map instances into an array\n   * const mapInstances = await page.queryObjects(mapPrototype);\n   * // Count amount of map objects in heap\n   * const count = await page.evaluate(maps => maps.length, mapInstances);\n   * await mapInstances.dispose();\n   * await mapPrototype.dispose();\n   * ```\n   *\n   * @param prototypeHandle - a handle to the object prototype.\n   * @returns Promise which resolves to a handle to an array of objects with\n   * this prototype.\n   */\n  async queryObjects<Prototype>(\n    prototypeHandle: JSHandle<Prototype>\n  ): Promise<JSHandle<Prototype[]>>;\n  async queryObjects<Prototype>(): Promise<JSHandle<Prototype[]>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method runs `document.querySelector` within the page and passes the\n   * result as the first argument to the `pageFunction`.\n   *\n   * @remarks\n   *\n   * If no element is found matching `selector`, the method will throw an error.\n   *\n   * If `pageFunction` returns a promise `$eval` will wait for the promise to\n   * resolve and then return its value.\n   *\n   * @example\n   *\n   * ```ts\n   * const searchValue = await page.$eval('#search', el => el.value);\n   * const preloadHref = await page.$eval('link[rel=preload]', el => el.href);\n   * const html = await page.$eval('.main-container', el => el.outerHTML);\n   * ```\n   *\n   * If you are using TypeScript, you may have to provide an explicit type to the\n   * first argument of the `pageFunction`.\n   * By default it is typed as `Element`, but you may need to provide a more\n   * specific sub-type:\n   *\n   * @example\n   *\n   * ```ts\n   * // if you don't provide HTMLInputElement here, TS will error\n   * // as `value` is not on `Element`\n   * const searchValue = await page.$eval(\n   *   '#search',\n   *   (el: HTMLInputElement) => el.value\n   * );\n   * ```\n   *\n   * The compiler should be able to infer the return type\n   * from the `pageFunction` you provide. If it is unable to, you can use the generic\n   * type to tell the compiler what return type you expect from `$eval`:\n   *\n   * @example\n   *\n   * ```ts\n   * // The compiler can infer the return type in this case, but if it can't\n   * // or if you want to be more explicit, provide it as the generic type.\n   * const searchValue = await page.$eval<string>(\n   *   '#search',\n   *   (el: HTMLInputElement) => el.value\n   * );\n   * ```\n   *\n   * @param selector - the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | selector}\n   * to query for\n   * @param pageFunction - the function to be evaluated in the page context.\n   * Will be passed the result of `document.querySelector(selector)` as its\n   * first argument.\n   * @param args - any additional arguments to pass through to `pageFunction`.\n   *\n   * @returns The result of calling `pageFunction`. If it returns an element it\n   * is wrapped in an {@link ElementHandle}, else the raw value itself is\n   * returned.\n   */\n  async $eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<NodeFor<Selector>, Params> = EvaluateFuncWith<\n      NodeFor<Selector>,\n      Params\n    >,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$eval.name, pageFunction);\n    return this.mainFrame().$eval(selector, pageFunction, ...args);\n  }\n\n  /**\n   * This method runs `Array.from(document.querySelectorAll(selector))` within\n   * the page and passes the result as the first argument to the `pageFunction`.\n   *\n   * @remarks\n   * If `pageFunction` returns a promise `$$eval` will wait for the promise to\n   * resolve and then return its value.\n   *\n   * @example\n   *\n   * ```ts\n   * // get the amount of divs on the page\n   * const divCount = await page.$$eval('div', divs => divs.length);\n   *\n   * // get the text content of all the `.options` elements:\n   * const options = await page.$$eval('div > span.options', options => {\n   *   return options.map(option => option.textContent);\n   * });\n   * ```\n   *\n   * If you are using TypeScript, you may have to provide an explicit type to the\n   * first argument of the `pageFunction`.\n   * By default it is typed as `Element[]`, but you may need to provide a more\n   * specific sub-type:\n   *\n   * @example\n   *\n   * ```ts\n   * // if you don't provide HTMLInputElement here, TS will error\n   * // as `value` is not on `Element`\n   * await page.$$eval('input', (elements: HTMLInputElement[]) => {\n   *   return elements.map(e => e.value);\n   * });\n   * ```\n   *\n   * The compiler should be able to infer the return type\n   * from the `pageFunction` you provide. If it is unable to, you can use the generic\n   * type to tell the compiler what return type you expect from `$$eval`:\n   *\n   * @example\n   *\n   * ```ts\n   * // The compiler can infer the return type in this case, but if it can't\n   * // or if you want to be more explicit, provide it as the generic type.\n   * const allInputValues = await page.$$eval<string[]>(\n   *   'input',\n   *   (elements: HTMLInputElement[]) => elements.map(e => e.textContent)\n   * );\n   * ```\n   *\n   * @param selector - the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | selector}\n   * to query for\n   * @param pageFunction - the function to be evaluated in the page context.\n   * Will be passed the result of\n   * `Array.from(document.querySelectorAll(selector))` as its first argument.\n   * @param args - any additional arguments to pass through to `pageFunction`.\n   *\n   * @returns The result of calling `pageFunction`. If it returns an element it\n   * is wrapped in an {@link ElementHandle}, else the raw value itself is\n   * returned.\n   */\n  async $$eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<\n      Array<NodeFor<Selector>>,\n      Params\n    > = EvaluateFuncWith<Array<NodeFor<Selector>>, Params>,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$$eval.name, pageFunction);\n    return this.mainFrame().$$eval(selector, pageFunction, ...args);\n  }\n\n  /**\n   * The method evaluates the XPath expression relative to the page document as\n   * its context node. If there are no such elements, the method resolves to an\n   * empty array.\n   *\n   * @remarks\n   * Shortcut for {@link Frame.$x | Page.mainFrame().$x(expression) }.\n   *\n   * @param expression - Expression to evaluate\n   */\n  async $x(expression: string): Promise<Array<ElementHandle<Node>>> {\n    return this.mainFrame().$x(expression);\n  }\n\n  /**\n   * If no URLs are specified, this method returns cookies for the current page\n   * URL. If URLs are specified, only cookies for those URLs are returned.\n   */\n  async cookies(...urls: string[]): Promise<Protocol.Network.Cookie[]>;\n  async cookies(): Promise<Protocol.Network.Cookie[]> {\n    throw new Error('Not implemented');\n  }\n\n  async deleteCookie(\n    ...cookies: Protocol.Network.DeleteCookiesRequest[]\n  ): Promise<void>;\n  async deleteCookie(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @example\n   *\n   * ```ts\n   * await page.setCookie(cookieObject1, cookieObject2);\n   * ```\n   */\n  async setCookie(...cookies: Protocol.Network.CookieParam[]): Promise<void>;\n  async setCookie(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Adds a `<script>` tag into the page with the desired URL or content.\n   *\n   * @remarks\n   * Shortcut for\n   * {@link Frame.addScriptTag | page.mainFrame().addScriptTag(options)}.\n   *\n   * @param options - Options for the script.\n   * @returns An {@link ElementHandle | element handle} to the injected\n   * `<script>` element.\n   */\n  async addScriptTag(\n    options: FrameAddScriptTagOptions\n  ): Promise<ElementHandle<HTMLScriptElement>> {\n    return this.mainFrame().addScriptTag(options);\n  }\n\n  /**\n   * Adds a `<link rel=\"stylesheet\">` tag into the page with the desired URL or\n   * a `<style type=\"text/css\">` tag with the content.\n   *\n   * Shortcut for\n   * {@link Frame.(addStyleTag:2) | page.mainFrame().addStyleTag(options)}.\n   *\n   * @returns An {@link ElementHandle | element handle} to the injected `<link>`\n   * or `<style>` element.\n   */\n  async addStyleTag(\n    options: Omit<FrameAddStyleTagOptions, 'url'>\n  ): Promise<ElementHandle<HTMLStyleElement>>;\n  async addStyleTag(\n    options: FrameAddStyleTagOptions\n  ): Promise<ElementHandle<HTMLLinkElement>>;\n  async addStyleTag(\n    options: FrameAddStyleTagOptions\n  ): Promise<ElementHandle<HTMLStyleElement | HTMLLinkElement>> {\n    return this.mainFrame().addStyleTag(options);\n  }\n\n  /**\n   * The method adds a function called `name` on the page's `window` object.\n   * When called, the function executes `puppeteerFunction` in node.js and\n   * returns a `Promise` which resolves to the return value of\n   * `puppeteerFunction`.\n   *\n   * If the puppeteerFunction returns a `Promise`, it will be awaited.\n   *\n   * :::note\n   *\n   * Functions installed via `page.exposeFunction` survive navigations.\n   *\n   * :::note\n   *\n   * @example\n   * An example of adding an `md5` function into the page:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   * import crypto from 'crypto';\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   page.on('console', msg => console.log(msg.text()));\n   *   await page.exposeFunction('md5', text =>\n   *     crypto.createHash('md5').update(text).digest('hex')\n   *   );\n   *   await page.evaluate(async () => {\n   *     // use window.md5 to compute hashes\n   *     const myString = 'PUPPETEER';\n   *     const myHash = await window.md5(myString);\n   *     console.log(`md5 of ${myString} is ${myHash}`);\n   *   });\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @example\n   * An example of adding a `window.readfile` function into the page:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   * import fs from 'fs';\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   page.on('console', msg => console.log(msg.text()));\n   *   await page.exposeFunction('readfile', async filePath => {\n   *     return new Promise((resolve, reject) => {\n   *       fs.readFile(filePath, 'utf8', (err, text) => {\n   *         if (err) reject(err);\n   *         else resolve(text);\n   *       });\n   *     });\n   *   });\n   *   await page.evaluate(async () => {\n   *     // use window.readfile to read contents of a file\n   *     const content = await window.readfile('/etc/hosts');\n   *     console.log(content);\n   *   });\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param name - Name of the function on the window object\n   * @param pptrFunction - Callback function which will be called in Puppeteer's\n   * context.\n   */\n  async exposeFunction(\n    name: string,\n    pptrFunction: Function | {default: Function}\n  ): Promise<void>;\n  async exposeFunction(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The method removes a previously added function via ${@link Page.exposeFunction}\n   * called `name` from the page's `window` object.\n   */\n  async removeExposedFunction(name: string): Promise<void>;\n  async removeExposedFunction(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Provide credentials for `HTTP authentication`.\n   *\n   * @remarks\n   * To disable authentication, pass `null`.\n   */\n  async authenticate(credentials: Credentials): Promise<void>;\n  async authenticate(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The extra HTTP headers will be sent with every request the page initiates.\n   *\n   * :::tip\n   *\n   * All HTTP header names are lowercased. (HTTP headers are\n   * case-insensitive, so this shouldn\u2019t impact your server code.)\n   *\n   * :::\n   *\n   * :::note\n   *\n   * page.setExtraHTTPHeaders does not guarantee the order of headers in\n   * the outgoing requests.\n   *\n   * :::\n   *\n   * @param headers - An object containing additional HTTP headers to be sent\n   * with every request. All header values must be strings.\n   */\n  async setExtraHTTPHeaders(headers: Record<string, string>): Promise<void>;\n  async setExtraHTTPHeaders(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param userAgent - Specific user agent to use in this page\n   * @param userAgentData - Specific user agent client hint data to use in this\n   * page\n   * @returns Promise which resolves when the user agent is set.\n   */\n  async setUserAgent(\n    userAgent: string,\n    userAgentMetadata?: Protocol.Emulation.UserAgentMetadata\n  ): Promise<void>;\n  async setUserAgent(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Object containing metrics as key/value pairs.\n   *\n   * @returns\n   *\n   * - `Timestamp` : The timestamp when the metrics sample was taken.\n   *\n   * - `Documents` : Number of documents in the page.\n   *\n   * - `Frames` : Number of frames in the page.\n   *\n   * - `JSEventListeners` : Number of events in the page.\n   *\n   * - `Nodes` : Number of DOM nodes in the page.\n   *\n   * - `LayoutCount` : Total number of full or partial page layout.\n   *\n   * - `RecalcStyleCount` : Total number of page style recalculations.\n   *\n   * - `LayoutDuration` : Combined durations of all page layouts.\n   *\n   * - `RecalcStyleDuration` : Combined duration of all page style\n   *   recalculations.\n   *\n   * - `ScriptDuration` : Combined duration of JavaScript execution.\n   *\n   * - `TaskDuration` : Combined duration of all tasks performed by the browser.\n   *\n   * - `JSHeapUsedSize` : Used JavaScript heap size.\n   *\n   * - `JSHeapTotalSize` : Total JavaScript heap size.\n   *\n   * @remarks\n   * All timestamps are in monotonic time: monotonically increasing time\n   * in seconds since an arbitrary point in the past.\n   */\n  async metrics(): Promise<Metrics> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The page's URL.\n   * @remarks Shortcut for\n   * {@link Frame.url | page.mainFrame().url()}.\n   */\n  url(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The full HTML contents of the page, including the DOCTYPE.\n   */\n  async content(): Promise<string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Set the content of the page.\n   *\n   * @param html - HTML markup to assign to the page.\n   * @param options - Parameters that has some properties.\n   * @remarks\n   * The parameter `options` might have the following options.\n   *\n   * - `timeout` : Maximum time in milliseconds for resources to load, defaults\n   *   to 30 seconds, pass `0` to disable timeout. The default value can be\n   *   changed by using the {@link Page.setDefaultNavigationTimeout} or\n   *   {@link Page.setDefaultTimeout} methods.\n   *\n   * - `waitUntil`: When to consider setting markup succeeded, defaults to\n   *   `load`. Given an array of event strings, setting content is considered\n   *   to be successful after all events have been fired. Events can be\n   *   either:<br/>\n   * - `load` : consider setting content to be finished when the `load` event\n   *   is fired.<br/>\n   * - `domcontentloaded` : consider setting content to be finished when the\n   *   `DOMContentLoaded` event is fired.<br/>\n   * - `networkidle0` : consider setting content to be finished when there are\n   *   no more than 0 network connections for at least `500` ms.<br/>\n   * - `networkidle2` : consider setting content to be finished when there are\n   *   no more than 2 network connections for at least `500` ms.\n   */\n  async setContent(html: string, options?: WaitForOptions): Promise<void>;\n  async setContent(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param url - URL to navigate page to. The URL should include scheme, e.g.\n   * `https://`\n   * @param options - Navigation Parameter\n   * @returns Promise which resolves to the main resource response. In case of\n   * multiple redirects, the navigation will resolve with the response of the\n   * last redirect.\n   * @remarks\n   * The argument `options` might have the following properties:\n   *\n   * - `timeout` : Maximum navigation time in milliseconds, defaults to 30\n   *   seconds, pass 0 to disable timeout. The default value can be changed by\n   *   using the {@link Page.setDefaultNavigationTimeout} or\n   *   {@link Page.setDefaultTimeout} methods.\n   *\n   * - `waitUntil`:When to consider navigation succeeded, defaults to `load`.\n   *   Given an array of event strings, navigation is considered to be\n   *   successful after all events have been fired. Events can be either:<br/>\n   * - `load` : consider navigation to be finished when the load event is\n   *   fired.<br/>\n   * - `domcontentloaded` : consider navigation to be finished when the\n   *   DOMContentLoaded event is fired.<br/>\n   * - `networkidle0` : consider navigation to be finished when there are no\n   *   more than 0 network connections for at least `500` ms.<br/>\n   * - `networkidle2` : consider navigation to be finished when there are no\n   *   more than 2 network connections for at least `500` ms.\n   *\n   * - `referer` : Referer header value. If provided it will take preference\n   *   over the referer header value set by\n   *   {@link Page.setExtraHTTPHeaders |page.setExtraHTTPHeaders()}.<br/>\n   * - `referrerPolicy` : ReferrerPolicy. If provided it will take preference\n   *   over the referer-policy header value set by\n   *   {@link Page.setExtraHTTPHeaders |page.setExtraHTTPHeaders()}.\n   *\n   * `page.goto` will throw an error if:\n   *\n   * - there's an SSL error (e.g. in case of self-signed certificates).\n   * - target URL is invalid.\n   * - the timeout is exceeded during navigation.\n   * - the remote server does not respond or is unreachable.\n   * - the main resource failed to load.\n   *\n   * `page.goto` will not throw an error when any valid HTTP status code is\n   * returned by the remote server, including 404 \"Not Found\" and 500\n   * \"Internal Server Error\". The status code for such responses can be\n   * retrieved by calling response.status().\n   *\n   * NOTE: `page.goto` either throws an error or returns a main resource\n   * response. The only exceptions are navigation to about:blank or navigation\n   * to the same URL with a different hash, which would succeed and return null.\n   *\n   * NOTE: Headless mode doesn't support navigation to a PDF document. See the\n   * {@link https://bugs.chromium.org/p/chromium/issues/detail?id=761295 |\n   * upstream issue}.\n   *\n   * Shortcut for {@link Frame.goto | page.mainFrame().goto(url, options)}.\n   */\n  async goto(\n    url: string,\n    options?: WaitForOptions & {referer?: string; referrerPolicy?: string}\n  ): Promise<HTTPResponse | null>;\n  async goto(): Promise<HTTPResponse | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param options - Navigation parameters which might have the following\n   * properties:\n   * @returns Promise which resolves to the main resource response. In case of\n   * multiple redirects, the navigation will resolve with the response of the\n   * last redirect.\n   * @remarks\n   * The argument `options` might have the following properties:\n   *\n   * - `timeout` : Maximum navigation time in milliseconds, defaults to 30\n   *   seconds, pass 0 to disable timeout. The default value can be changed by\n   *   using the {@link Page.setDefaultNavigationTimeout} or\n   *   {@link Page.setDefaultTimeout} methods.\n   *\n   * - `waitUntil`: When to consider navigation succeeded, defaults to `load`.\n   *   Given an array of event strings, navigation is considered to be\n   *   successful after all events have been fired. Events can be either:<br/>\n   * - `load` : consider navigation to be finished when the load event is\n   *   fired.<br/>\n   * - `domcontentloaded` : consider navigation to be finished when the\n   *   DOMContentLoaded event is fired.<br/>\n   * - `networkidle0` : consider navigation to be finished when there are no\n   *   more than 0 network connections for at least `500` ms.<br/>\n   * - `networkidle2` : consider navigation to be finished when there are no\n   *   more than 2 network connections for at least `500` ms.\n   */\n  async reload(options?: WaitForOptions): Promise<HTTPResponse | null>;\n  async reload(): Promise<HTTPResponse | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Waits for the page to navigate to a new URL or to reload. It is useful when\n   * you run code that will indirectly cause the page to navigate.\n   *\n   * @example\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   page.waitForNavigation(), // The promise resolves after navigation has finished\n   *   page.click('a.my-link'), // Clicking the link will indirectly cause a navigation\n   * ]);\n   * ```\n   *\n   * @remarks\n   * Usage of the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/History_API | History API}\n   * to change the URL is considered a navigation.\n   *\n   * @param options - Navigation parameters which might have the following\n   * properties:\n   * @returns A `Promise` which resolves to the main resource response.\n   *\n   * - In case of multiple redirects, the navigation will resolve with the\n   *   response of the last redirect.\n   * - In case of navigation to a different anchor or navigation due to History\n   *   API usage, the navigation will resolve with `null`.\n   */\n  async waitForNavigation(\n    options: WaitForOptions = {}\n  ): Promise<HTTPResponse | null> {\n    return await this.mainFrame().waitForNavigation(options);\n  }\n\n  /**\n   * @param urlOrPredicate - A URL or predicate to wait for\n   * @param options - Optional waiting parameters\n   * @returns Promise which resolves to the matched request\n   * @example\n   *\n   * ```ts\n   * const firstRequest = await page.waitForRequest(\n   *   'https://example.com/resource'\n   * );\n   * const finalRequest = await page.waitForRequest(\n   *   request => request.url() === 'https://example.com'\n   * );\n   * return finalRequest.response()?.ok();\n   * ```\n   *\n   * @remarks\n   * Optional Waiting Parameters have:\n   *\n   * - `timeout`: Maximum wait time in milliseconds, defaults to `30` seconds, pass\n   *   `0` to disable the timeout. The default value can be changed by using the\n   *   {@link Page.setDefaultTimeout} method.\n   */\n  async waitForRequest(\n    urlOrPredicate: string | ((req: HTTPRequest) => boolean | Promise<boolean>),\n    options?: {timeout?: number}\n  ): Promise<HTTPRequest>;\n  async waitForRequest(): Promise<HTTPRequest> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param urlOrPredicate - A URL or predicate to wait for.\n   * @param options - Optional waiting parameters\n   * @returns Promise which resolves to the matched response.\n   * @example\n   *\n   * ```ts\n   * const firstResponse = await page.waitForResponse(\n   *   'https://example.com/resource'\n   * );\n   * const finalResponse = await page.waitForResponse(\n   *   response =>\n   *     response.url() === 'https://example.com' && response.status() === 200\n   * );\n   * const finalResponse = await page.waitForResponse(async response => {\n   *   return (await response.text()).includes('<html>');\n   * });\n   * return finalResponse.ok();\n   * ```\n   *\n   * @remarks\n   * Optional Parameter have:\n   *\n   * - `timeout`: Maximum wait time in milliseconds, defaults to `30` seconds,\n   *   pass `0` to disable the timeout. The default value can be changed by using\n   *   the {@link Page.setDefaultTimeout} method.\n   */\n  async waitForResponse(\n    urlOrPredicate:\n      | string\n      | ((res: HTTPResponse) => boolean | Promise<boolean>),\n    options?: {timeout?: number}\n  ): Promise<HTTPResponse>;\n  async waitForResponse(): Promise<HTTPResponse> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param options - Optional waiting parameters\n   * @returns Promise which resolves when network is idle\n   */\n  async waitForNetworkIdle(options?: {\n    idleTime?: number;\n    timeout?: number;\n  }): Promise<void>;\n  async waitForNetworkIdle(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  protected async _waitForNetworkIdle(\n    networkManager: EventEmitter & {\n      inFlightRequestsCount: () => number;\n    },\n    idleTime: number,\n    timeout: number,\n    closedDeferred: Deferred<TargetCloseError>\n  ): Promise<void> {\n    const idleDeferred = Deferred.create<void>();\n    const abortDeferred = Deferred.create<Error>();\n\n    let idleTimer: NodeJS.Timeout | undefined;\n    const cleanup = () => {\n      clearTimeout(idleTimer);\n      abortDeferred.reject(new Error('abort'));\n    };\n\n    const evaluate = () => {\n      clearTimeout(idleTimer);\n\n      if (networkManager.inFlightRequestsCount() === 0) {\n        idleTimer = setTimeout(() => {\n          return idleDeferred.resolve();\n        }, idleTime);\n      }\n    };\n\n    const listenToEvent = (event: symbol) => {\n      return waitForEvent(\n        networkManager,\n        event,\n        () => {\n          evaluate();\n          return false;\n        },\n        timeout,\n        abortDeferred\n      );\n    };\n\n    const eventPromises = [\n      listenToEvent(NetworkManagerEmittedEvents.Request),\n      listenToEvent(NetworkManagerEmittedEvents.Response),\n      listenToEvent(NetworkManagerEmittedEvents.RequestFailed),\n    ];\n\n    evaluate();\n\n    // We don't want to reject the closed deferred when\n    // the race if finished so we pass the Promise instead\n    const closedPromise = closedDeferred.valueOrThrow();\n\n    await Deferred.race([idleDeferred, ...eventPromises, closedPromise]).then(\n      r => {\n        cleanup();\n        return r;\n      },\n      error => {\n        cleanup();\n        throw error;\n      }\n    );\n  }\n\n  /**\n   * @param urlOrPredicate - A URL or predicate to wait for.\n   * @param options - Optional waiting parameters\n   * @returns Promise which resolves to the matched frame.\n   * @example\n   *\n   * ```ts\n   * const frame = await page.waitForFrame(async frame => {\n   *   return frame.name() === 'Test';\n   * });\n   * ```\n   *\n   * @remarks\n   * Optional Parameter have:\n   *\n   * - `timeout`: Maximum wait time in milliseconds, defaults to `30` seconds,\n   *   pass `0` to disable the timeout. The default value can be changed by using\n   *   the {@link Page.setDefaultTimeout} method.\n   */\n  async waitForFrame(\n    urlOrPredicate: string | ((frame: Frame) => boolean | Promise<boolean>),\n    options?: {timeout?: number}\n  ): Promise<Frame>;\n  async waitForFrame(): Promise<Frame> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method navigate to the previous page in history.\n   * @param options - Navigation parameters\n   * @returns Promise which resolves to the main resource response. In case of\n   * multiple redirects, the navigation will resolve with the response of the\n   * last redirect. If can not go back, resolves to `null`.\n   * @remarks\n   * The argument `options` might have the following properties:\n   *\n   * - `timeout` : Maximum navigation time in milliseconds, defaults to 30\n   *   seconds, pass 0 to disable timeout. The default value can be changed by\n   *   using the {@link Page.setDefaultNavigationTimeout} or\n   *   {@link Page.setDefaultTimeout} methods.\n   *\n   * - `waitUntil` : When to consider navigation succeeded, defaults to `load`.\n   *   Given an array of event strings, navigation is considered to be\n   *   successful after all events have been fired. Events can be either:<br/>\n   * - `load` : consider navigation to be finished when the load event is\n   *   fired.<br/>\n   * - `domcontentloaded` : consider navigation to be finished when the\n   *   DOMContentLoaded event is fired.<br/>\n   * - `networkidle0` : consider navigation to be finished when there are no\n   *   more than 0 network connections for at least `500` ms.<br/>\n   * - `networkidle2` : consider navigation to be finished when there are no\n   *   more than 2 network connections for at least `500` ms.\n   */\n  async goBack(options?: WaitForOptions): Promise<HTTPResponse | null>;\n  async goBack(): Promise<HTTPResponse | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method navigate to the next page in history.\n   * @param options - Navigation Parameter\n   * @returns Promise which resolves to the main resource response. In case of\n   * multiple redirects, the navigation will resolve with the response of the\n   * last redirect. If can not go forward, resolves to `null`.\n   * @remarks\n   * The argument `options` might have the following properties:\n   *\n   * - `timeout` : Maximum navigation time in milliseconds, defaults to 30\n   *   seconds, pass 0 to disable timeout. The default value can be changed by\n   *   using the {@link Page.setDefaultNavigationTimeout} or\n   *   {@link Page.setDefaultTimeout} methods.\n   *\n   * - `waitUntil`: When to consider navigation succeeded, defaults to `load`.\n   *   Given an array of event strings, navigation is considered to be\n   *   successful after all events have been fired. Events can be either:<br/>\n   * - `load` : consider navigation to be finished when the load event is\n   *   fired.<br/>\n   * - `domcontentloaded` : consider navigation to be finished when the\n   *   DOMContentLoaded event is fired.<br/>\n   * - `networkidle0` : consider navigation to be finished when there are no\n   *   more than 0 network connections for at least `500` ms.<br/>\n   * - `networkidle2` : consider navigation to be finished when there are no\n   *   more than 2 network connections for at least `500` ms.\n   */\n  async goForward(options?: WaitForOptions): Promise<HTTPResponse | null>;\n  async goForward(): Promise<HTTPResponse | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Brings page to front (activates tab).\n   */\n  async bringToFront(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Emulates a given device's metrics and user agent.\n   *\n   * To aid emulation, Puppeteer provides a list of known devices that can be\n   * via {@link KnownDevices}.\n   *\n   * @remarks\n   * This method is a shortcut for calling two methods:\n   * {@link Page.setUserAgent} and {@link Page.setViewport}.\n   *\n   * @remarks\n   * This method will resize the page. A lot of websites don't expect phones to\n   * change size, so you should emulate before navigating to the page.\n   *\n   * @example\n   *\n   * ```ts\n   * import {KnownDevices} from 'puppeteer';\n   * const iPhone = KnownDevices['iPhone 6'];\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   await page.emulate(iPhone);\n   *   await page.goto('https://www.google.com');\n   *   // other actions...\n   *   await browser.close();\n   * })();\n   * ```\n   */\n  async emulate(device: Device): Promise<void> {\n    await Promise.all([\n      this.setUserAgent(device.userAgent),\n      this.setViewport(device.viewport),\n    ]);\n  }\n\n  /**\n   * @param enabled - Whether or not to enable JavaScript on the page.\n   * @remarks\n   * NOTE: changing this value won't affect scripts that have already been run.\n   * It will take full effect on the next navigation.\n   */\n  async setJavaScriptEnabled(enabled: boolean): Promise<void>;\n  async setJavaScriptEnabled(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Toggles bypassing page's Content-Security-Policy.\n   * @param enabled - sets bypassing of page's Content-Security-Policy.\n   * @remarks\n   * NOTE: CSP bypassing happens at the moment of CSP initialization rather than\n   * evaluation. Usually, this means that `page.setBypassCSP` should be called\n   * before navigating to the domain.\n   */\n  async setBypassCSP(enabled: boolean): Promise<void>;\n  async setBypassCSP(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param type - Changes the CSS media type of the page. The only allowed\n   * values are `screen`, `print` and `null`. Passing `null` disables CSS media\n   * emulation.\n   * @example\n   *\n   * ```ts\n   * await page.evaluate(() => matchMedia('screen').matches);\n   * // \u2192 true\n   * await page.evaluate(() => matchMedia('print').matches);\n   * // \u2192 false\n   *\n   * await page.emulateMediaType('print');\n   * await page.evaluate(() => matchMedia('screen').matches);\n   * // \u2192 false\n   * await page.evaluate(() => matchMedia('print').matches);\n   * // \u2192 true\n   *\n   * await page.emulateMediaType(null);\n   * await page.evaluate(() => matchMedia('screen').matches);\n   * // \u2192 true\n   * await page.evaluate(() => matchMedia('print').matches);\n   * // \u2192 false\n   * ```\n   */\n  async emulateMediaType(type?: string): Promise<void>;\n  async emulateMediaType(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Enables CPU throttling to emulate slow CPUs.\n   * @param factor - slowdown factor (1 is no throttle, 2 is 2x slowdown, etc).\n   */\n  async emulateCPUThrottling(factor: number | null): Promise<void>;\n  async emulateCPUThrottling(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param features - `<?Array<Object>>` Given an array of media feature\n   * objects, emulates CSS media features on the page. Each media feature object\n   * must have the following properties:\n   * @example\n   *\n   * ```ts\n   * await page.emulateMediaFeatures([\n   *   {name: 'prefers-color-scheme', value: 'dark'},\n   * ]);\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-color-scheme: dark)').matches\n   * );\n   * // \u2192 true\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-color-scheme: light)').matches\n   * );\n   * // \u2192 false\n   *\n   * await page.emulateMediaFeatures([\n   *   {name: 'prefers-reduced-motion', value: 'reduce'},\n   * ]);\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-reduced-motion: reduce)').matches\n   * );\n   * // \u2192 true\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-reduced-motion: no-preference)').matches\n   * );\n   * // \u2192 false\n   *\n   * await page.emulateMediaFeatures([\n   *   {name: 'prefers-color-scheme', value: 'dark'},\n   *   {name: 'prefers-reduced-motion', value: 'reduce'},\n   * ]);\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-color-scheme: dark)').matches\n   * );\n   * // \u2192 true\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-color-scheme: light)').matches\n   * );\n   * // \u2192 false\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-reduced-motion: reduce)').matches\n   * );\n   * // \u2192 true\n   * await page.evaluate(\n   *   () => matchMedia('(prefers-reduced-motion: no-preference)').matches\n   * );\n   * // \u2192 false\n   *\n   * await page.emulateMediaFeatures([{name: 'color-gamut', value: 'p3'}]);\n   * await page.evaluate(() => matchMedia('(color-gamut: srgb)').matches);\n   * // \u2192 true\n   * await page.evaluate(() => matchMedia('(color-gamut: p3)').matches);\n   * // \u2192 true\n   * await page.evaluate(() => matchMedia('(color-gamut: rec2020)').matches);\n   * // \u2192 false\n   * ```\n   */\n  async emulateMediaFeatures(features?: MediaFeature[]): Promise<void>;\n  async emulateMediaFeatures(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param timezoneId - Changes the timezone of the page. See\n   * {@link https://source.chromium.org/chromium/chromium/deps/icu.git/+/faee8bc70570192d82d2978a71e2a615788597d1:source/data/misc/metaZones.txt | ICU\u2019s metaZones.txt}\n   * for a list of supported timezone IDs. Passing\n   * `null` disables timezone emulation.\n   */\n  async emulateTimezone(timezoneId?: string): Promise<void>;\n  async emulateTimezone(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Emulates the idle state.\n   * If no arguments set, clears idle state emulation.\n   *\n   * @example\n   *\n   * ```ts\n   * // set idle emulation\n   * await page.emulateIdleState({isUserActive: true, isScreenUnlocked: false});\n   *\n   * // do some checks here\n   * ...\n   *\n   * // clear idle emulation\n   * await page.emulateIdleState();\n   * ```\n   *\n   * @param overrides - Mock idle state. If not set, clears idle overrides\n   */\n  async emulateIdleState(overrides?: {\n    isUserActive: boolean;\n    isScreenUnlocked: boolean;\n  }): Promise<void>;\n  async emulateIdleState(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Simulates the given vision deficiency on the page.\n   *\n   * @example\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   await page.goto('https://v8.dev/blog/10-years');\n   *\n   *   await page.emulateVisionDeficiency('achromatopsia');\n   *   await page.screenshot({path: 'achromatopsia.png'});\n   *\n   *   await page.emulateVisionDeficiency('deuteranopia');\n   *   await page.screenshot({path: 'deuteranopia.png'});\n   *\n   *   await page.emulateVisionDeficiency('blurredVision');\n   *   await page.screenshot({path: 'blurred-vision.png'});\n   *\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param type - the type of deficiency to simulate, or `'none'` to reset.\n   */\n  async emulateVisionDeficiency(\n    type?: Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n  ): Promise<void>;\n  async emulateVisionDeficiency(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * `page.setViewport` will resize the page. A lot of websites don't expect\n   * phones to change size, so you should set the viewport before navigating to\n   * the page.\n   *\n   * In the case of multiple pages in a single browser, each page can have its\n   * own viewport size.\n   * @example\n   *\n   * ```ts\n   * const page = await browser.newPage();\n   * await page.setViewport({\n   *   width: 640,\n   *   height: 480,\n   *   deviceScaleFactor: 1,\n   * });\n   * await page.goto('https://example.com');\n   * ```\n   *\n   * @param viewport -\n   * @remarks\n   * Argument viewport have following properties:\n   *\n   * - `width`: page width in pixels. required\n   *\n   * - `height`: page height in pixels. required\n   *\n   * - `deviceScaleFactor`: Specify device scale factor (can be thought of as\n   *   DPR). Defaults to `1`.\n   *\n   * - `isMobile`: Whether the meta viewport tag is taken into account. Defaults\n   *   to `false`.\n   *\n   * - `hasTouch`: Specifies if viewport supports touch events. Defaults to `false`\n   *\n   * - `isLandScape`: Specifies if viewport is in landscape mode. Defaults to false.\n   *\n   * NOTE: in certain cases, setting viewport will reload the page in order to\n   * set the isMobile or hasTouch properties.\n   */\n  async setViewport(viewport: Viewport): Promise<void>;\n  async setViewport(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Current page viewport settings.\n   *\n   * @returns\n   *\n   * - `width`: page's width in pixels\n   *\n   * - `height`: page's height in pixels\n   *\n   * - `deviceScaleFactor`: Specify device scale factor (can be though of as\n   *   dpr). Defaults to `1`.\n   *\n   * - `isMobile`: Whether the meta viewport tag is taken into account. Defaults\n   *   to `false`.\n   *\n   * - `hasTouch`: Specifies if viewport supports touch events. Defaults to\n   *   `false`.\n   *\n   * - `isLandScape`: Specifies if viewport is in landscape mode. Defaults to\n   *   `false`.\n   */\n  viewport(): Viewport | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Evaluates a function in the page's context and returns the result.\n   *\n   * If the function passed to `page.evaluate` returns a Promise, the\n   * function will wait for the promise to resolve and return its value.\n   *\n   * @example\n   *\n   * ```ts\n   * const result = await frame.evaluate(() => {\n   *   return Promise.resolve(8 * 7);\n   * });\n   * console.log(result); // prints \"56\"\n   * ```\n   *\n   * You can pass a string instead of a function (although functions are\n   * recommended as they are easier to debug and use with TypeScript):\n   *\n   * @example\n   *\n   * ```ts\n   * const aHandle = await page.evaluate('1 + 2');\n   * ```\n   *\n   * To get the best TypeScript experience, you should pass in as the\n   * generic the type of `pageFunction`:\n   *\n   * ```ts\n   * const aHandle = await page.evaluate(() => 2);\n   * ```\n   *\n   * @example\n   *\n   * {@link ElementHandle} instances (including {@link JSHandle}s) can be passed\n   * as arguments to the `pageFunction`:\n   *\n   * ```ts\n   * const bodyHandle = await page.$('body');\n   * const html = await page.evaluate(body => body.innerHTML, bodyHandle);\n   * await bodyHandle.dispose();\n   * ```\n   *\n   * @param pageFunction - a function that is run within the page\n   * @param args - arguments to be passed to the pageFunction\n   *\n   * @returns the return value of `pageFunction`.\n   */\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>>;\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(): Promise<Awaited<ReturnType<Func>>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Adds a function which would be invoked in one of the following scenarios:\n   *\n   * - whenever the page is navigated\n   *\n   * - whenever the child frame is attached or navigated. In this case, the\n   *   function is invoked in the context of the newly attached frame.\n   *\n   * The function is invoked after the document was created but before any of\n   * its scripts were run. This is useful to amend the JavaScript environment,\n   * e.g. to seed `Math.random`.\n   * @param pageFunction - Function to be evaluated in browser context\n   * @param args - Arguments to pass to `pageFunction`\n   * @example\n   * An example of overriding the navigator.languages property before the page loads:\n   *\n   * ```ts\n   * // preload.js\n   *\n   * // overwrite the `languages` property to use a custom getter\n   * Object.defineProperty(navigator, 'languages', {\n   *   get: function () {\n   *     return ['en-US', 'en', 'bn'];\n   *   },\n   * });\n   *\n   * // In your puppeteer script, assuming the preload.js file is\n   * // in same folder of our script.\n   * const preloadFile = fs.readFileSync('./preload.js', 'utf8');\n   * await page.evaluateOnNewDocument(preloadFile);\n   * ```\n   */\n  async evaluateOnNewDocument<\n    Params extends unknown[],\n    Func extends (...args: Params) => unknown = (...args: Params) => unknown,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<NewDocumentScriptEvaluation>;\n  async evaluateOnNewDocument(): Promise<NewDocumentScriptEvaluation> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Removes script that injected into page by Page.evaluateOnNewDocument.\n   *\n   * @param identifier - script identifier\n   */\n  async removeScriptToEvaluateOnNewDocument(identifier: string): Promise<void>;\n  async removeScriptToEvaluateOnNewDocument(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Toggles ignoring cache for each request based on the enabled state. By\n   * default, caching is enabled.\n   * @param enabled - sets the `enabled` state of cache\n   * @defaultValue `true`\n   */\n  async setCacheEnabled(enabled?: boolean): Promise<void>;\n  async setCacheEnabled(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  async _maybeWriteBufferToFile(\n    path: string | undefined,\n    buffer: Buffer\n  ): Promise<void> {\n    if (!path) {\n      return;\n    }\n\n    const fs = await importFSPromises();\n\n    await fs.writeFile(path, buffer);\n  }\n\n  /**\n   * Captures screenshot of the current page.\n   *\n   * @remarks\n   * Options object which might have the following properties:\n   *\n   * - `path` : The file path to save the image to. The screenshot type\n   *   will be inferred from file extension. If `path` is a relative path, then\n   *   it is resolved relative to\n   *   {@link https://nodejs.org/api/process.html#process_process_cwd\n   *   | current working directory}.\n   *   If no path is provided, the image won't be saved to the disk.\n   *\n   * - `type` : Specify screenshot type, can be `jpeg`, `png` or `webp`.\n   *   Defaults to 'png'.\n   *\n   * - `quality` : The quality of the image, between 0-100. Not\n   *   applicable to `png` images.\n   *\n   * - `fullPage` : When true, takes a screenshot of the full\n   *   scrollable page. Defaults to `false`.\n   *\n   * - `clip` : An object which specifies clipping region of the page.\n   *   Should have the following fields:<br/>\n   * - `x` : x-coordinate of top-left corner of clip area.<br/>\n   * - `y` : y-coordinate of top-left corner of clip area.<br/>\n   * - `width` : width of clipping area.<br/>\n   * - `height` : height of clipping area.\n   *\n   * - `omitBackground` : Hides default white background and allows\n   *   capturing screenshots with transparency. Defaults to `false`.\n   *\n   * - `encoding` : The encoding of the image, can be either base64 or\n   *   binary. Defaults to `binary`.\n   *\n   * - `captureBeyondViewport` : When true, captures screenshot\n   *   {@link https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-captureScreenshot\n   *   | beyond the viewport}. When false, falls back to old behaviour,\n   *   and cuts the screenshot by the viewport size. Defaults to `true`.\n   *\n   * - `fromSurface` : When true, captures screenshot\n   *   {@link https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-captureScreenshot\n   *   | from the surface rather than the view}. When false, works only in\n   *   headful mode and ignores page viewport (but not browser window's\n   *   bounds). Defaults to `true`.\n   *\n   * @returns Promise which resolves to buffer or a base64 string (depending on\n   * the value of `encoding`) with captured screenshot.\n   */\n  screenshot(\n    options: ScreenshotOptions & {encoding: 'base64'}\n  ): Promise<string>;\n  screenshot(\n    options?: ScreenshotOptions & {encoding?: 'binary'}\n  ): Promise<Buffer>;\n  async screenshot(options?: ScreenshotOptions): Promise<Buffer | string>;\n  async screenshot(): Promise<Buffer | string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  _getPDFOptions(\n    options: PDFOptions = {},\n    lengthUnit: 'in' | 'cm' = 'in'\n  ): ParsedPDFOptions {\n    const defaults = {\n      scale: 1,\n      displayHeaderFooter: false,\n      headerTemplate: '',\n      footerTemplate: '',\n      printBackground: false,\n      landscape: false,\n      pageRanges: '',\n      preferCSSPageSize: false,\n      omitBackground: false,\n      timeout: 30000,\n    };\n\n    let width = 8.5;\n    let height = 11;\n    if (options.format) {\n      const format =\n        paperFormats[options.format.toLowerCase() as LowerCasePaperFormat];\n      assert(format, 'Unknown paper format: ' + options.format);\n      width = format.width;\n      height = format.height;\n    } else {\n      width = convertPrintParameterToInches(options.width, lengthUnit) ?? width;\n      height =\n        convertPrintParameterToInches(options.height, lengthUnit) ?? height;\n    }\n\n    const margin = {\n      top: convertPrintParameterToInches(options.margin?.top, lengthUnit) || 0,\n      left:\n        convertPrintParameterToInches(options.margin?.left, lengthUnit) || 0,\n      bottom:\n        convertPrintParameterToInches(options.margin?.bottom, lengthUnit) || 0,\n      right:\n        convertPrintParameterToInches(options.margin?.right, lengthUnit) || 0,\n    };\n\n    const output = {\n      ...defaults,\n      ...options,\n      width,\n      height,\n      margin,\n    };\n\n    return output;\n  }\n\n  /**\n   * Generates a PDF of the page with the `print` CSS media type.\n   * @remarks\n   *\n   * To generate a PDF with the `screen` media type, call\n   * {@link Page.emulateMediaType | `page.emulateMediaType('screen')`} before\n   * calling `page.pdf()`.\n   *\n   * By default, `page.pdf()` generates a pdf with modified colors for printing.\n   * Use the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-print-color-adjust | `-webkit-print-color-adjust`}\n   * property to force rendering of exact colors.\n   *\n   * @param options - options for generating the PDF.\n   */\n  async createPDFStream(options?: PDFOptions): Promise<Readable>;\n  async createPDFStream(): Promise<Readable> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@inheritDoc Page.createPDFStream}\n   */\n  async pdf(options?: PDFOptions): Promise<Buffer>;\n  async pdf(): Promise<Buffer> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The page's title\n   *\n   * @remarks\n   * Shortcut for {@link Frame.title | page.mainFrame().title()}.\n   */\n  async title(): Promise<string> {\n    throw new Error('Not implemented');\n  }\n\n  async close(options?: {runBeforeUnload?: boolean}): Promise<void>;\n  async close(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Indicates that the page has been closed.\n   * @returns\n   */\n  isClosed(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@inheritDoc Mouse}\n   */\n  get mouse(): Mouse {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method fetches an element with `selector`, scrolls it into view if\n   * needed, and then uses {@link Page | Page.mouse} to click in the center of the\n   * element. If there's no element matching `selector`, the method throws an\n   * error.\n   * @remarks Bear in mind that if `click()` triggers a navigation event and\n   * there's a separate `page.waitForNavigation()` promise to be resolved, you\n   * may end up with a race condition that yields unexpected results. The\n   * correct pattern for click and wait for navigation is the following:\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   page.waitForNavigation(waitOptions),\n   *   page.click(selector, clickOptions),\n   * ]);\n   * ```\n   *\n   * Shortcut for {@link Frame.click | page.mainFrame().click(selector[, options]) }.\n   * @param selector - A `selector` to search for element to click. If there are\n   * multiple elements satisfying the `selector`, the first will be clicked\n   * @param options - `Object`\n   * @returns Promise which resolves when the element matching `selector` is\n   * successfully clicked. The Promise will be rejected if there is no element\n   * matching `selector`.\n   */\n  click(selector: string, options?: Readonly<ClickOptions>): Promise<void> {\n    return this.mainFrame().click(selector, options);\n  }\n\n  /**\n   * This method fetches an element with `selector` and focuses it. If there's no\n   * element matching `selector`, the method throws an error.\n   * @param selector - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | selector }\n   * of an element to focus. If there are multiple elements satisfying the\n   * selector, the first will be focused.\n   * @returns Promise which resolves when the element matching selector is\n   * successfully focused. The promise will be rejected if there is no element\n   * matching selector.\n   * @remarks\n   * Shortcut for {@link Frame.focus | page.mainFrame().focus(selector)}.\n   */\n  focus(selector: string): Promise<void> {\n    return this.mainFrame().focus(selector);\n  }\n\n  /**\n   * This method fetches an element with `selector`, scrolls it into view if\n   * needed, and then uses {@link Page | Page.mouse}\n   * to hover over the center of the element.\n   * If there's no element matching `selector`, the method throws an error.\n   * @param selector - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | selector}\n   * to search for element to hover. If there are multiple elements satisfying\n   * the selector, the first will be hovered.\n   * @returns Promise which resolves when the element matching `selector` is\n   * successfully hovered. Promise gets rejected if there's no element matching\n   * `selector`.\n   * @remarks\n   * Shortcut for {@link Page.hover | page.mainFrame().hover(selector)}.\n   */\n  hover(selector: string): Promise<void> {\n    return this.mainFrame().hover(selector);\n  }\n\n  /**\n   * Triggers a `change` and `input` event once all the provided options have been\n   * selected. If there's no `<select>` element matching `selector`, the method\n   * throws an error.\n   *\n   * @example\n   *\n   * ```ts\n   * page.select('select#colors', 'blue'); // single selection\n   * page.select('select#colors', 'red', 'green', 'blue'); // multiple selections\n   * ```\n   *\n   * @param selector - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | Selector}\n   * to query the page for\n   * @param values - Values of options to select. If the `<select>` has the\n   * `multiple` attribute, all values are considered, otherwise only the first one\n   * is taken into account.\n   * @returns\n   *\n   * @remarks\n   * Shortcut for {@link Frame.select | page.mainFrame().select()}\n   */\n  select(selector: string, ...values: string[]): Promise<string[]> {\n    return this.mainFrame().select(selector, ...values);\n  }\n\n  /**\n   * This method fetches an element with `selector`, scrolls it into view if\n   * needed, and then uses {@link Page | Page.touchscreen}\n   * to tap in the center of the element.\n   * If there's no element matching `selector`, the method throws an error.\n   * @param selector - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | Selector}\n   * to search for element to tap. If there are multiple elements satisfying the\n   * selector, the first will be tapped.\n   * @returns\n   * @remarks\n   * Shortcut for {@link Frame.tap | page.mainFrame().tap(selector)}.\n   */\n  tap(selector: string): Promise<void> {\n    return this.mainFrame().tap(selector);\n  }\n\n  /**\n   * Sends a `keydown`, `keypress/input`, and `keyup` event for each character\n   * in the text.\n   *\n   * To press a special key, like `Control` or `ArrowDown`, use {@link Keyboard.press}.\n   * @example\n   *\n   * ```ts\n   * await page.type('#mytextarea', 'Hello');\n   * // Types instantly\n   * await page.type('#mytextarea', 'World', {delay: 100});\n   * // Types slower, like a user\n   * ```\n   *\n   * @param selector - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | selector}\n   * of an element to type into. If there are multiple elements satisfying the\n   * selector, the first will be used.\n   * @param text - A text to type into a focused element.\n   * @param options - have property `delay` which is the Time to wait between\n   * key presses in milliseconds. Defaults to `0`.\n   * @returns\n   * @remarks\n   */\n  type(\n    selector: string,\n    text: string,\n    options?: Readonly<KeyboardTypeOptions>\n  ): Promise<void> {\n    return this.mainFrame().type(selector, text, options);\n  }\n\n  /**\n   * @deprecated Replace with `new Promise(r => setTimeout(r, milliseconds));`.\n   *\n   * Causes your script to wait for the given number of milliseconds.\n   *\n   * @remarks\n   * It's generally recommended to not wait for a number of seconds, but instead\n   * use {@link Frame.waitForSelector}, {@link Frame.waitForXPath} or\n   * {@link Frame.waitForFunction} to wait for exactly the conditions you want.\n   *\n   * @example\n   *\n   * Wait for 1 second:\n   *\n   * ```ts\n   * await page.waitForTimeout(1000);\n   * ```\n   *\n   * @param milliseconds - the number of milliseconds to wait.\n   */\n  waitForTimeout(milliseconds: number): Promise<void> {\n    return this.mainFrame().waitForTimeout(milliseconds);\n  }\n\n  /**\n   * Wait for the `selector` to appear in page. If at the moment of calling the\n   * method the `selector` already exists, the method will return immediately. If\n   * the `selector` doesn't appear after the `timeout` milliseconds of waiting, the\n   * function will throw.\n   *\n   * @example\n   * This method works across navigations:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   let currentURL;\n   *   page\n   *     .waitForSelector('img')\n   *     .then(() => console.log('First URL with image: ' + currentURL));\n   *   for (currentURL of [\n   *     'https://example.com',\n   *     'https://google.com',\n   *     'https://bbc.com',\n   *   ]) {\n   *     await page.goto(currentURL);\n   *   }\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param selector - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | selector}\n   * of an element to wait for\n   * @param options - Optional waiting parameters\n   * @returns Promise which resolves when element specified by selector string\n   * is added to DOM. Resolves to `null` if waiting for hidden: `true` and\n   * selector is not found in DOM.\n   * @remarks\n   * The optional Parameter in Arguments `options` are:\n   *\n   * - `visible`: A boolean wait for element to be present in DOM and to be\n   *   visible, i.e. to not have `display: none` or `visibility: hidden` CSS\n   *   properties. Defaults to `false`.\n   *\n   * - `hidden`: Wait for element to not be found in the DOM or to be hidden,\n   *   i.e. have `display: none` or `visibility: hidden` CSS properties. Defaults to\n   *   `false`.\n   *\n   * - `timeout`: maximum time to wait for in milliseconds. Defaults to `30000`\n   *   (30 seconds). Pass `0` to disable timeout. The default value can be changed\n   *   by using the {@link Page.setDefaultTimeout} method.\n   */\n  async waitForSelector<Selector extends string>(\n    selector: Selector,\n    options: WaitForSelectorOptions = {}\n  ): Promise<ElementHandle<NodeFor<Selector>> | null> {\n    return await this.mainFrame().waitForSelector(selector, options);\n  }\n\n  /**\n   * Wait for the `xpath` to appear in page. If at the moment of calling the\n   * method the `xpath` already exists, the method will return immediately. If\n   * the `xpath` doesn't appear after the `timeout` milliseconds of waiting, the\n   * function will throw.\n   *\n   * @example\n   * This method works across navigation\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   let currentURL;\n   *   page\n   *     .waitForXPath('//img')\n   *     .then(() => console.log('First URL with image: ' + currentURL));\n   *   for (currentURL of [\n   *     'https://example.com',\n   *     'https://google.com',\n   *     'https://bbc.com',\n   *   ]) {\n   *     await page.goto(currentURL);\n   *   }\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param xpath - A\n   * {@link https://developer.mozilla.org/en-US/docs/Web/XPath | xpath} of an\n   * element to wait for\n   * @param options - Optional waiting parameters\n   * @returns Promise which resolves when element specified by xpath string is\n   * added to DOM. Resolves to `null` if waiting for `hidden: true` and xpath is\n   * not found in DOM, otherwise resolves to `ElementHandle`.\n   * @remarks\n   * The optional Argument `options` have properties:\n   *\n   * - `visible`: A boolean to wait for element to be present in DOM and to be\n   *   visible, i.e. to not have `display: none` or `visibility: hidden` CSS\n   *   properties. Defaults to `false`.\n   *\n   * - `hidden`: A boolean wait for element to not be found in the DOM or to be\n   *   hidden, i.e. have `display: none` or `visibility: hidden` CSS properties.\n   *   Defaults to `false`.\n   *\n   * - `timeout`: A number which is maximum time to wait for in milliseconds.\n   *   Defaults to `30000` (30 seconds). Pass `0` to disable timeout. The default\n   *   value can be changed by using the {@link Page.setDefaultTimeout} method.\n   */\n  waitForXPath(\n    xpath: string,\n    options?: WaitForSelectorOptions\n  ): Promise<ElementHandle<Node> | null> {\n    return this.mainFrame().waitForXPath(xpath, options);\n  }\n\n  /**\n   * Waits for a function to finish evaluating in the page's context.\n   *\n   * @example\n   * The {@link Page.waitForFunction} can be used to observe viewport size change:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   const watchDog = page.waitForFunction('window.innerWidth < 100');\n   *   await page.setViewport({width: 50, height: 50});\n   *   await watchDog;\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @example\n   * To pass arguments from node.js to the predicate of\n   * {@link Page.waitForFunction} function:\n   *\n   * ```ts\n   * const selector = '.foo';\n   * await page.waitForFunction(\n   *   selector => !!document.querySelector(selector),\n   *   {},\n   *   selector\n   * );\n   * ```\n   *\n   * @example\n   * The predicate of {@link Page.waitForFunction} can be asynchronous too:\n   *\n   * ```ts\n   * const username = 'github-username';\n   * await page.waitForFunction(\n   *   async username => {\n   *     const githubResponse = await fetch(\n   *       `https://api.github.com/users/${username}`\n   *     );\n   *     const githubUser = await githubResponse.json();\n   *     // show the avatar\n   *     const img = document.createElement('img');\n   *     img.src = githubUser.avatar_url;\n   *     // wait 3 seconds\n   *     await new Promise((resolve, reject) => setTimeout(resolve, 3000));\n   *     img.remove();\n   *   },\n   *   {},\n   *   username\n   * );\n   * ```\n   *\n   * @param pageFunction - Function to be evaluated in browser context\n   * @param options - Options for configuring waiting behavior.\n   */\n  waitForFunction<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    options?: FrameWaitForFunctionOptions,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    return this.mainFrame().waitForFunction(pageFunction, options, ...args);\n  }\n\n  /**\n   * This method is typically coupled with an action that triggers a device\n   * request from an api such as WebBluetooth.\n   *\n   * :::caution\n   *\n   * This must be called before the device request is made. It will not return a\n   * currently active device prompt.\n   *\n   * :::\n   *\n   * @example\n   *\n   * ```ts\n   * const [devicePrompt] = Promise.all([\n   *   page.waitForDevicePrompt(),\n   *   page.click('#connect-bluetooth'),\n   * ]);\n   * await devicePrompt.select(\n   *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n   * );\n   * ```\n   */\n  waitForDevicePrompt(\n    options?: WaitTimeoutOptions\n  ): Promise<DeviceRequestPrompt>;\n  waitForDevicePrompt(): Promise<DeviceRequestPrompt> {\n    throw new Error('Not implemented');\n  }\n}\n\n/**\n * @internal\n */\nexport const supportedMetrics = new Set<string>([\n  'Timestamp',\n  'Documents',\n  'Frames',\n  'JSEventListeners',\n  'Nodes',\n  'LayoutCount',\n  'RecalcStyleCount',\n  'LayoutDuration',\n  'RecalcStyleDuration',\n  'ScriptDuration',\n  'TaskDuration',\n  'JSHeapUsedSize',\n  'JSHeapTotalSize',\n]);\n\n/**\n * @internal\n */\nexport const unitToPixels = {\n  px: 1,\n  in: 96,\n  cm: 37.8,\n  mm: 3.78,\n};\n\nfunction convertPrintParameterToInches(\n  parameter?: string | number,\n  lengthUnit: 'in' | 'cm' = 'in'\n): number | undefined {\n  if (typeof parameter === 'undefined') {\n    return undefined;\n  }\n  let pixels;\n  if (isNumber(parameter)) {\n    // Treat numbers as pixel values to be aligned with phantom's paperSize.\n    pixels = parameter;\n  } else if (isString(parameter)) {\n    const text = parameter;\n    let unit = text.substring(text.length - 2).toLowerCase();\n    let valueText = '';\n    if (unit in unitToPixels) {\n      valueText = text.substring(0, text.length - 2);\n    } else {\n      // In case of unknown unit try to parse the whole parameter as number of pixels.\n      // This is consistent with phantom's paperSize behavior.\n      unit = 'px';\n      valueText = text;\n    }\n    const value = Number(valueText);\n    assert(!isNaN(value), 'Failed to parse parameter value: ' + text);\n    pixels = value * unitToPixels[unit as keyof typeof unitToPixels];\n  } else {\n    throw new Error(\n      'page.pdf() Cannot handle parameter type: ' + typeof parameter\n    );\n  }\n  return pixels / unitToPixels[lengthUnit];\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {assert} from '../util/assert.js';\nimport {createDebuggableDeferred} from '../util/DebuggableDeferred.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {CDPSession} from './Connection.js';\nimport {EventEmitter} from './EventEmitter.js';\nimport {FrameManager} from './FrameManager.js';\nimport {HTTPRequest} from './HTTPRequest.js';\nimport {HTTPResponse} from './HTTPResponse.js';\nimport {FetchRequestId, NetworkEventManager} from './NetworkEventManager.js';\nimport {debugError, isString} from './util.js';\n\n/**\n * @public\n */\nexport interface Credentials {\n  username: string;\n  password: string;\n}\n\n/**\n * @public\n */\nexport interface NetworkConditions {\n  // Download speed (bytes/s)\n  download: number;\n  // Upload speed (bytes/s)\n  upload: number;\n  // Latency (ms)\n  latency: number;\n}\n/**\n * @public\n */\nexport interface InternalNetworkConditions extends NetworkConditions {\n  offline: boolean;\n}\n\n/**\n * We use symbols to prevent any external parties listening to these events.\n * They are internal to Puppeteer.\n *\n * @internal\n */\nexport const NetworkManagerEmittedEvents = {\n  Request: Symbol('NetworkManager.Request'),\n  RequestServedFromCache: Symbol('NetworkManager.RequestServedFromCache'),\n  Response: Symbol('NetworkManager.Response'),\n  RequestFailed: Symbol('NetworkManager.RequestFailed'),\n  RequestFinished: Symbol('NetworkManager.RequestFinished'),\n} as const;\n\n/**\n * @internal\n */\nexport class NetworkManager extends EventEmitter {\n  #client: CDPSession;\n  #ignoreHTTPSErrors: boolean;\n  #frameManager: Pick<FrameManager, 'frame'>;\n  #networkEventManager = new NetworkEventManager();\n  #extraHTTPHeaders: Record<string, string> = {};\n  #credentials?: Credentials;\n  #attemptedAuthentications = new Set<string>();\n  #userRequestInterceptionEnabled = false;\n  #protocolRequestInterceptionEnabled = false;\n  #userCacheDisabled = false;\n  #emulatedNetworkConditions: InternalNetworkConditions = {\n    offline: false,\n    upload: -1,\n    download: -1,\n    latency: 0,\n  };\n  #deferredInit?: Deferred<void>;\n\n  constructor(\n    client: CDPSession,\n    ignoreHTTPSErrors: boolean,\n    frameManager: Pick<FrameManager, 'frame'>\n  ) {\n    super();\n    this.#client = client;\n    this.#ignoreHTTPSErrors = ignoreHTTPSErrors;\n    this.#frameManager = frameManager;\n\n    this.#client.on('Fetch.requestPaused', this.#onRequestPaused.bind(this));\n    this.#client.on('Fetch.authRequired', this.#onAuthRequired.bind(this));\n    this.#client.on(\n      'Network.requestWillBeSent',\n      this.#onRequestWillBeSent.bind(this)\n    );\n    this.#client.on(\n      'Network.requestServedFromCache',\n      this.#onRequestServedFromCache.bind(this)\n    );\n    this.#client.on(\n      'Network.responseReceived',\n      this.#onResponseReceived.bind(this)\n    );\n    this.#client.on(\n      'Network.loadingFinished',\n      this.#onLoadingFinished.bind(this)\n    );\n    this.#client.on('Network.loadingFailed', this.#onLoadingFailed.bind(this));\n    this.#client.on(\n      'Network.responseReceivedExtraInfo',\n      this.#onResponseReceivedExtraInfo.bind(this)\n    );\n  }\n\n  /**\n   * Initialize calls should avoid async dependencies between CDP calls as those\n   * might not resolve until after the target is resumed causing a deadlock.\n   */\n  initialize(): Promise<void> {\n    if (this.#deferredInit) {\n      return this.#deferredInit.valueOrThrow();\n    }\n    this.#deferredInit = createDebuggableDeferred(\n      'NetworkManager initialization timed out'\n    );\n    const init = Promise.all([\n      this.#ignoreHTTPSErrors\n        ? this.#client.send('Security.setIgnoreCertificateErrors', {\n            ignore: true,\n          })\n        : null,\n      this.#client.send('Network.enable'),\n    ]);\n    const deferredInitPromise = this.#deferredInit;\n    init\n      .then(() => {\n        deferredInitPromise.resolve();\n      })\n      .catch(err => {\n        deferredInitPromise.reject(err);\n      });\n    return this.#deferredInit.valueOrThrow();\n  }\n\n  async authenticate(credentials?: Credentials): Promise<void> {\n    this.#credentials = credentials;\n    await this.#updateProtocolRequestInterception();\n  }\n\n  async setExtraHTTPHeaders(\n    extraHTTPHeaders: Record<string, string>\n  ): Promise<void> {\n    this.#extraHTTPHeaders = {};\n    for (const key of Object.keys(extraHTTPHeaders)) {\n      const value = extraHTTPHeaders[key];\n      assert(\n        isString(value),\n        `Expected value of header \"${key}\" to be String, but \"${typeof value}\" is found.`\n      );\n      this.#extraHTTPHeaders[key.toLowerCase()] = value;\n    }\n    await this.#client.send('Network.setExtraHTTPHeaders', {\n      headers: this.#extraHTTPHeaders,\n    });\n  }\n\n  extraHTTPHeaders(): Record<string, string> {\n    return Object.assign({}, this.#extraHTTPHeaders);\n  }\n\n  inFlightRequestsCount(): number {\n    return this.#networkEventManager.inFlightRequestsCount();\n  }\n\n  async setOfflineMode(value: boolean): Promise<void> {\n    this.#emulatedNetworkConditions.offline = value;\n    await this.#updateNetworkConditions();\n  }\n\n  async emulateNetworkConditions(\n    networkConditions: NetworkConditions | null\n  ): Promise<void> {\n    this.#emulatedNetworkConditions.upload = networkConditions\n      ? networkConditions.upload\n      : -1;\n    this.#emulatedNetworkConditions.download = networkConditions\n      ? networkConditions.download\n      : -1;\n    this.#emulatedNetworkConditions.latency = networkConditions\n      ? networkConditions.latency\n      : 0;\n\n    await this.#updateNetworkConditions();\n  }\n\n  async #updateNetworkConditions(): Promise<void> {\n    await this.#client.send('Network.emulateNetworkConditions', {\n      offline: this.#emulatedNetworkConditions.offline,\n      latency: this.#emulatedNetworkConditions.latency,\n      uploadThroughput: this.#emulatedNetworkConditions.upload,\n      downloadThroughput: this.#emulatedNetworkConditions.download,\n    });\n  }\n\n  async setUserAgent(\n    userAgent: string,\n    userAgentMetadata?: Protocol.Emulation.UserAgentMetadata\n  ): Promise<void> {\n    await this.#client.send('Network.setUserAgentOverride', {\n      userAgent: userAgent,\n      userAgentMetadata: userAgentMetadata,\n    });\n  }\n\n  async setCacheEnabled(enabled: boolean): Promise<void> {\n    this.#userCacheDisabled = !enabled;\n    await this.#updateProtocolCacheDisabled();\n  }\n\n  async setRequestInterception(value: boolean): Promise<void> {\n    this.#userRequestInterceptionEnabled = value;\n    await this.#updateProtocolRequestInterception();\n  }\n\n  async #updateProtocolRequestInterception(): Promise<void> {\n    const enabled = this.#userRequestInterceptionEnabled || !!this.#credentials;\n    if (enabled === this.#protocolRequestInterceptionEnabled) {\n      return;\n    }\n    this.#protocolRequestInterceptionEnabled = enabled;\n    if (enabled) {\n      await Promise.all([\n        this.#updateProtocolCacheDisabled(),\n        this.#client.send('Fetch.enable', {\n          handleAuthRequests: true,\n          patterns: [{urlPattern: '*'}],\n        }),\n      ]);\n    } else {\n      await Promise.all([\n        this.#updateProtocolCacheDisabled(),\n        this.#client.send('Fetch.disable'),\n      ]);\n    }\n  }\n\n  #cacheDisabled(): boolean {\n    return this.#userCacheDisabled;\n  }\n\n  async #updateProtocolCacheDisabled(): Promise<void> {\n    await this.#client.send('Network.setCacheDisabled', {\n      cacheDisabled: this.#cacheDisabled(),\n    });\n  }\n\n  #onRequestWillBeSent(event: Protocol.Network.RequestWillBeSentEvent): void {\n    // Request interception doesn't happen for data URLs with Network Service.\n    if (\n      this.#userRequestInterceptionEnabled &&\n      !event.request.url.startsWith('data:')\n    ) {\n      const {requestId: networkRequestId} = event;\n\n      this.#networkEventManager.storeRequestWillBeSent(networkRequestId, event);\n\n      /**\n       * CDP may have sent a Fetch.requestPaused event already. Check for it.\n       */\n      const requestPausedEvent =\n        this.#networkEventManager.getRequestPaused(networkRequestId);\n      if (requestPausedEvent) {\n        const {requestId: fetchRequestId} = requestPausedEvent;\n        this.#patchRequestEventHeaders(event, requestPausedEvent);\n        this.#onRequest(event, fetchRequestId);\n        this.#networkEventManager.forgetRequestPaused(networkRequestId);\n      }\n\n      return;\n    }\n    this.#onRequest(event, undefined);\n  }\n\n  #onAuthRequired(event: Protocol.Fetch.AuthRequiredEvent): void {\n    let response: Protocol.Fetch.AuthChallengeResponse['response'] = 'Default';\n    if (this.#attemptedAuthentications.has(event.requestId)) {\n      response = 'CancelAuth';\n    } else if (this.#credentials) {\n      response = 'ProvideCredentials';\n      this.#attemptedAuthentications.add(event.requestId);\n    }\n    const {username, password} = this.#credentials || {\n      username: undefined,\n      password: undefined,\n    };\n    this.#client\n      .send('Fetch.continueWithAuth', {\n        requestId: event.requestId,\n        authChallengeResponse: {response, username, password},\n      })\n      .catch(debugError);\n  }\n\n  /**\n   * CDP may send a Fetch.requestPaused without or before a\n   * Network.requestWillBeSent\n   *\n   * CDP may send multiple Fetch.requestPaused\n   * for the same Network.requestWillBeSent.\n   */\n  #onRequestPaused(event: Protocol.Fetch.RequestPausedEvent): void {\n    if (\n      !this.#userRequestInterceptionEnabled &&\n      this.#protocolRequestInterceptionEnabled\n    ) {\n      this.#client\n        .send('Fetch.continueRequest', {\n          requestId: event.requestId,\n        })\n        .catch(debugError);\n    }\n\n    const {networkId: networkRequestId, requestId: fetchRequestId} = event;\n\n    if (!networkRequestId) {\n      this.#onRequestWithoutNetworkInstrumentation(event);\n      return;\n    }\n\n    const requestWillBeSentEvent = (() => {\n      const requestWillBeSentEvent =\n        this.#networkEventManager.getRequestWillBeSent(networkRequestId);\n\n      // redirect requests have the same `requestId`,\n      if (\n        requestWillBeSentEvent &&\n        (requestWillBeSentEvent.request.url !== event.request.url ||\n          requestWillBeSentEvent.request.method !== event.request.method)\n      ) {\n        this.#networkEventManager.forgetRequestWillBeSent(networkRequestId);\n        return;\n      }\n      return requestWillBeSentEvent;\n    })();\n\n    if (requestWillBeSentEvent) {\n      this.#patchRequestEventHeaders(requestWillBeSentEvent, event);\n      this.#onRequest(requestWillBeSentEvent, fetchRequestId);\n    } else {\n      this.#networkEventManager.storeRequestPaused(networkRequestId, event);\n    }\n  }\n\n  #patchRequestEventHeaders(\n    requestWillBeSentEvent: Protocol.Network.RequestWillBeSentEvent,\n    requestPausedEvent: Protocol.Fetch.RequestPausedEvent\n  ): void {\n    requestWillBeSentEvent.request.headers = {\n      ...requestWillBeSentEvent.request.headers,\n      // includes extra headers, like: Accept, Origin\n      ...requestPausedEvent.request.headers,\n    };\n  }\n\n  #onRequestWithoutNetworkInstrumentation(\n    event: Protocol.Fetch.RequestPausedEvent\n  ): void {\n    // If an event has no networkId it should not have any network events. We\n    // still want to dispatch it for the interception by the user.\n    const frame = event.frameId\n      ? this.#frameManager.frame(event.frameId)\n      : null;\n\n    const request = new HTTPRequest(\n      this.#client,\n      frame,\n      event.requestId,\n      this.#userRequestInterceptionEnabled,\n      event,\n      []\n    );\n    this.emit(NetworkManagerEmittedEvents.Request, request);\n    void request.finalizeInterceptions();\n  }\n\n  #onRequest(\n    event: Protocol.Network.RequestWillBeSentEvent,\n    fetchRequestId?: FetchRequestId\n  ): void {\n    let redirectChain: HTTPRequest[] = [];\n    if (event.redirectResponse) {\n      // We want to emit a response and requestfinished for the\n      // redirectResponse, but we can't do so unless we have a\n      // responseExtraInfo ready to pair it up with. If we don't have any\n      // responseExtraInfos saved in our queue, they we have to wait until\n      // the next one to emit response and requestfinished, *and* we should\n      // also wait to emit this Request too because it should come after the\n      // response/requestfinished.\n      let redirectResponseExtraInfo = null;\n      if (event.redirectHasExtraInfo) {\n        redirectResponseExtraInfo = this.#networkEventManager\n          .responseExtraInfo(event.requestId)\n          .shift();\n        if (!redirectResponseExtraInfo) {\n          this.#networkEventManager.queueRedirectInfo(event.requestId, {\n            event,\n            fetchRequestId,\n          });\n          return;\n        }\n      }\n\n      const request = this.#networkEventManager.getRequest(event.requestId);\n      // If we connect late to the target, we could have missed the\n      // requestWillBeSent event.\n      if (request) {\n        this.#handleRequestRedirect(\n          request,\n          event.redirectResponse,\n          redirectResponseExtraInfo\n        );\n        redirectChain = request._redirectChain;\n      }\n    }\n    const frame = event.frameId\n      ? this.#frameManager.frame(event.frameId)\n      : null;\n\n    const request = new HTTPRequest(\n      this.#client,\n      frame,\n      fetchRequestId,\n      this.#userRequestInterceptionEnabled,\n      event,\n      redirectChain\n    );\n    this.#networkEventManager.storeRequest(event.requestId, request);\n    this.emit(NetworkManagerEmittedEvents.Request, request);\n    void request.finalizeInterceptions();\n  }\n\n  #onRequestServedFromCache(\n    event: Protocol.Network.RequestServedFromCacheEvent\n  ): void {\n    const request = this.#networkEventManager.getRequest(event.requestId);\n    if (request) {\n      request._fromMemoryCache = true;\n    }\n    this.emit(NetworkManagerEmittedEvents.RequestServedFromCache, request);\n  }\n\n  #handleRequestRedirect(\n    request: HTTPRequest,\n    responsePayload: Protocol.Network.Response,\n    extraInfo: Protocol.Network.ResponseReceivedExtraInfoEvent | null\n  ): void {\n    const response = new HTTPResponse(\n      this.#client,\n      request,\n      responsePayload,\n      extraInfo\n    );\n    request._response = response;\n    request._redirectChain.push(request);\n    response._resolveBody(\n      new Error('Response body is unavailable for redirect responses')\n    );\n    this.#forgetRequest(request, false);\n    this.emit(NetworkManagerEmittedEvents.Response, response);\n    this.emit(NetworkManagerEmittedEvents.RequestFinished, request);\n  }\n\n  #emitResponseEvent(\n    responseReceived: Protocol.Network.ResponseReceivedEvent,\n    extraInfo: Protocol.Network.ResponseReceivedExtraInfoEvent | null\n  ): void {\n    const request = this.#networkEventManager.getRequest(\n      responseReceived.requestId\n    );\n    // FileUpload sends a response without a matching request.\n    if (!request) {\n      return;\n    }\n\n    const extraInfos = this.#networkEventManager.responseExtraInfo(\n      responseReceived.requestId\n    );\n    if (extraInfos.length) {\n      debugError(\n        new Error(\n          'Unexpected extraInfo events for request ' +\n            responseReceived.requestId\n        )\n      );\n    }\n\n    // Chromium sends wrong extraInfo events for responses served from cache.\n    // See https://github.com/puppeteer/puppeteer/issues/9965 and\n    // https://crbug.com/1340398.\n    if (responseReceived.response.fromDiskCache) {\n      extraInfo = null;\n    }\n\n    const response = new HTTPResponse(\n      this.#client,\n      request,\n      responseReceived.response,\n      extraInfo\n    );\n    request._response = response;\n    this.emit(NetworkManagerEmittedEvents.Response, response);\n  }\n\n  #onResponseReceived(event: Protocol.Network.ResponseReceivedEvent): void {\n    const request = this.#networkEventManager.getRequest(event.requestId);\n    let extraInfo = null;\n    if (request && !request._fromMemoryCache && event.hasExtraInfo) {\n      extraInfo = this.#networkEventManager\n        .responseExtraInfo(event.requestId)\n        .shift();\n      if (!extraInfo) {\n        // Wait until we get the corresponding ExtraInfo event.\n        this.#networkEventManager.queueEventGroup(event.requestId, {\n          responseReceivedEvent: event,\n        });\n        return;\n      }\n    }\n    this.#emitResponseEvent(event, extraInfo);\n  }\n\n  #onResponseReceivedExtraInfo(\n    event: Protocol.Network.ResponseReceivedExtraInfoEvent\n  ): void {\n    // We may have skipped a redirect response/request pair due to waiting for\n    // this ExtraInfo event. If so, continue that work now that we have the\n    // request.\n    const redirectInfo = this.#networkEventManager.takeQueuedRedirectInfo(\n      event.requestId\n    );\n    if (redirectInfo) {\n      this.#networkEventManager.responseExtraInfo(event.requestId).push(event);\n      this.#onRequest(redirectInfo.event, redirectInfo.fetchRequestId);\n      return;\n    }\n\n    // We may have skipped response and loading events because we didn't have\n    // this ExtraInfo event yet. If so, emit those events now.\n    const queuedEvents = this.#networkEventManager.getQueuedEventGroup(\n      event.requestId\n    );\n    if (queuedEvents) {\n      this.#networkEventManager.forgetQueuedEventGroup(event.requestId);\n      this.#emitResponseEvent(queuedEvents.responseReceivedEvent, event);\n      if (queuedEvents.loadingFinishedEvent) {\n        this.#emitLoadingFinished(queuedEvents.loadingFinishedEvent);\n      }\n      if (queuedEvents.loadingFailedEvent) {\n        this.#emitLoadingFailed(queuedEvents.loadingFailedEvent);\n      }\n      return;\n    }\n\n    // Wait until we get another event that can use this ExtraInfo event.\n    this.#networkEventManager.responseExtraInfo(event.requestId).push(event);\n  }\n\n  #forgetRequest(request: HTTPRequest, events: boolean): void {\n    const requestId = request._requestId;\n    const interceptionId = request._interceptionId;\n\n    this.#networkEventManager.forgetRequest(requestId);\n    interceptionId !== undefined &&\n      this.#attemptedAuthentications.delete(interceptionId);\n\n    if (events) {\n      this.#networkEventManager.forget(requestId);\n    }\n  }\n\n  #onLoadingFinished(event: Protocol.Network.LoadingFinishedEvent): void {\n    // If the response event for this request is still waiting on a\n    // corresponding ExtraInfo event, then wait to emit this event too.\n    const queuedEvents = this.#networkEventManager.getQueuedEventGroup(\n      event.requestId\n    );\n    if (queuedEvents) {\n      queuedEvents.loadingFinishedEvent = event;\n    } else {\n      this.#emitLoadingFinished(event);\n    }\n  }\n\n  #emitLoadingFinished(event: Protocol.Network.LoadingFinishedEvent): void {\n    const request = this.#networkEventManager.getRequest(event.requestId);\n    // For certain requestIds we never receive requestWillBeSent event.\n    // @see https://crbug.com/750469\n    if (!request) {\n      return;\n    }\n\n    // Under certain conditions we never get the Network.responseReceived\n    // event from protocol. @see https://crbug.com/883475\n    if (request.response()) {\n      request.response()?._resolveBody(null);\n    }\n    this.#forgetRequest(request, true);\n    this.emit(NetworkManagerEmittedEvents.RequestFinished, request);\n  }\n\n  #onLoadingFailed(event: Protocol.Network.LoadingFailedEvent): void {\n    // If the response event for this request is still waiting on a\n    // corresponding ExtraInfo event, then wait to emit this event too.\n    const queuedEvents = this.#networkEventManager.getQueuedEventGroup(\n      event.requestId\n    );\n    if (queuedEvents) {\n      queuedEvents.loadingFailedEvent = event;\n    } else {\n      this.#emitLoadingFailed(event);\n    }\n  }\n\n  #emitLoadingFailed(event: Protocol.Network.LoadingFailedEvent): void {\n    const request = this.#networkEventManager.getRequest(event.requestId);\n    // For certain requestIds we never receive requestWillBeSent event.\n    // @see https://crbug.com/750469\n    if (!request) {\n      return;\n    }\n    request._failureText = event.errorText;\n    const response = request.response();\n    if (response) {\n      response._resolveBody(null);\n    }\n    this.#forgetRequest(request, true);\n    this.emit(NetworkManagerEmittedEvents.RequestFailed, request);\n  }\n}\n", "import {DEFERRED_PROMISE_DEBUG_TIMEOUT} from '../environment.js';\n\nimport {Deferred} from './Deferred.js';\n\n/**\n * Creates and returns a deferred promise using DEFERRED_PROMISE_DEBUG_TIMEOUT\n * if it's specified or a normal deferred promise otherwise.\n *\n * @internal\n */\nexport function createDebuggableDeferred<T>(message: string): Deferred<T> {\n  if (DEFERRED_PROMISE_DEBUG_TIMEOUT > 0) {\n    return Deferred.create({\n      message,\n      timeout: DEFERRED_PROMISE_DEBUG_TIMEOUT,\n    });\n  }\n  return Deferred.create();\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Protocol} from 'devtools-protocol';\n\nimport {Frame} from '../api/Frame.js';\nimport {\n  ContinueRequestOverrides,\n  ErrorCode,\n  headersArray,\n  HTTPRequest as BaseHTTPRequest,\n  InterceptResolutionAction,\n  InterceptResolutionState,\n  ResourceType,\n  ResponseForRequest,\n  STATUS_TEXTS,\n} from '../api/HTTPRequest.js';\nimport {HTTPResponse} from '../api/HTTPResponse.js';\nimport {assert} from '../util/assert.js';\n\nimport {CDPSession} from './Connection.js';\nimport {ProtocolError} from './Errors.js';\nimport {debugError, isString} from './util.js';\n\n/**\n * @internal\n */\nexport class HTTPRequest extends BaseHTTPRequest {\n  override _requestId: string;\n  override _interceptionId: string | undefined;\n  override _failureText: string | null = null;\n  override _response: HTTPResponse | null = null;\n  override _fromMemoryCache = false;\n  override _redirectChain: HTTPRequest[];\n\n  #client: CDPSession;\n  #isNavigationRequest: boolean;\n  #allowInterception: boolean;\n  #interceptionHandled = false;\n  #url: string;\n  #resourceType: ResourceType;\n\n  #method: string;\n  #postData?: string;\n  #headers: Record<string, string> = {};\n  #frame: Frame | null;\n  #continueRequestOverrides: ContinueRequestOverrides;\n  #responseForRequest: Partial<ResponseForRequest> | null = null;\n  #abortErrorReason: Protocol.Network.ErrorReason | null = null;\n  #interceptResolutionState: InterceptResolutionState = {\n    action: InterceptResolutionAction.None,\n  };\n  #interceptHandlers: Array<() => void | PromiseLike<any>>;\n  #initiator?: Protocol.Network.Initiator;\n\n  override get client(): CDPSession {\n    return this.#client;\n  }\n\n  constructor(\n    client: CDPSession,\n    frame: Frame | null,\n    interceptionId: string | undefined,\n    allowInterception: boolean,\n    data: {\n      /**\n       * Request identifier.\n       */\n      requestId: Protocol.Network.RequestId;\n      /**\n       * Loader identifier. Empty string if the request is fetched from worker.\n       */\n      loaderId?: Protocol.Network.LoaderId;\n      /**\n       * URL of the document this request is loaded for.\n       */\n      documentURL?: string;\n      /**\n       * Request data.\n       */\n      request: Protocol.Network.Request;\n      /**\n       * Request initiator.\n       */\n      initiator?: Protocol.Network.Initiator;\n      /**\n       * Type of this resource.\n       */\n      type?: Protocol.Network.ResourceType;\n    },\n    redirectChain: HTTPRequest[]\n  ) {\n    super();\n    this.#client = client;\n    this._requestId = data.requestId;\n    this.#isNavigationRequest =\n      data.requestId === data.loaderId && data.type === 'Document';\n    this._interceptionId = interceptionId;\n    this.#allowInterception = allowInterception;\n    this.#url = data.request.url;\n    this.#resourceType = (data.type || 'other').toLowerCase() as ResourceType;\n    this.#method = data.request.method;\n    this.#postData = data.request.postData;\n    this.#frame = frame;\n    this._redirectChain = redirectChain;\n    this.#continueRequestOverrides = {};\n    this.#interceptHandlers = [];\n    this.#initiator = data.initiator;\n\n    for (const [key, value] of Object.entries(data.request.headers)) {\n      this.#headers[key.toLowerCase()] = value;\n    }\n  }\n\n  override url(): string {\n    return this.#url;\n  }\n\n  override continueRequestOverrides(): ContinueRequestOverrides {\n    assert(this.#allowInterception, 'Request Interception is not enabled!');\n    return this.#continueRequestOverrides;\n  }\n\n  override responseForRequest(): Partial<ResponseForRequest> | null {\n    assert(this.#allowInterception, 'Request Interception is not enabled!');\n    return this.#responseForRequest;\n  }\n\n  override abortErrorReason(): Protocol.Network.ErrorReason | null {\n    assert(this.#allowInterception, 'Request Interception is not enabled!');\n    return this.#abortErrorReason;\n  }\n\n  override interceptResolutionState(): InterceptResolutionState {\n    if (!this.#allowInterception) {\n      return {action: InterceptResolutionAction.Disabled};\n    }\n    if (this.#interceptionHandled) {\n      return {action: InterceptResolutionAction.AlreadyHandled};\n    }\n    return {...this.#interceptResolutionState};\n  }\n\n  override isInterceptResolutionHandled(): boolean {\n    return this.#interceptionHandled;\n  }\n\n  override enqueueInterceptAction(\n    pendingHandler: () => void | PromiseLike<unknown>\n  ): void {\n    this.#interceptHandlers.push(pendingHandler);\n  }\n\n  override async finalizeInterceptions(): Promise<void> {\n    await this.#interceptHandlers.reduce((promiseChain, interceptAction) => {\n      return promiseChain.then(interceptAction);\n    }, Promise.resolve());\n    const {action} = this.interceptResolutionState();\n    switch (action) {\n      case 'abort':\n        return this.#abort(this.#abortErrorReason);\n      case 'respond':\n        if (this.#responseForRequest === null) {\n          throw new Error('Response is missing for the interception');\n        }\n        return this.#respond(this.#responseForRequest);\n      case 'continue':\n        return this.#continue(this.#continueRequestOverrides);\n    }\n  }\n\n  override resourceType(): ResourceType {\n    return this.#resourceType;\n  }\n\n  override method(): string {\n    return this.#method;\n  }\n\n  override postData(): string | undefined {\n    return this.#postData;\n  }\n\n  override headers(): Record<string, string> {\n    return this.#headers;\n  }\n\n  override response(): HTTPResponse | null {\n    return this._response;\n  }\n\n  override frame(): Frame | null {\n    return this.#frame;\n  }\n\n  override isNavigationRequest(): boolean {\n    return this.#isNavigationRequest;\n  }\n\n  override initiator(): Protocol.Network.Initiator | undefined {\n    return this.#initiator;\n  }\n\n  override redirectChain(): HTTPRequest[] {\n    return this._redirectChain.slice();\n  }\n\n  override failure(): {errorText: string} | null {\n    if (!this._failureText) {\n      return null;\n    }\n    return {\n      errorText: this._failureText,\n    };\n  }\n\n  override async continue(\n    overrides: ContinueRequestOverrides = {},\n    priority?: number\n  ): Promise<void> {\n    // Request interception is not supported for data: urls.\n    if (this.#url.startsWith('data:')) {\n      return;\n    }\n    assert(this.#allowInterception, 'Request Interception is not enabled!');\n    assert(!this.#interceptionHandled, 'Request is already handled!');\n    if (priority === undefined) {\n      return this.#continue(overrides);\n    }\n    this.#continueRequestOverrides = overrides;\n    if (\n      this.#interceptResolutionState.priority === undefined ||\n      priority > this.#interceptResolutionState.priority\n    ) {\n      this.#interceptResolutionState = {\n        action: InterceptResolutionAction.Continue,\n        priority,\n      };\n      return;\n    }\n    if (priority === this.#interceptResolutionState.priority) {\n      if (\n        this.#interceptResolutionState.action === 'abort' ||\n        this.#interceptResolutionState.action === 'respond'\n      ) {\n        return;\n      }\n      this.#interceptResolutionState.action =\n        InterceptResolutionAction.Continue;\n    }\n    return;\n  }\n\n  async #continue(overrides: ContinueRequestOverrides = {}): Promise<void> {\n    const {url, method, postData, headers} = overrides;\n    this.#interceptionHandled = true;\n\n    const postDataBinaryBase64 = postData\n      ? Buffer.from(postData).toString('base64')\n      : undefined;\n\n    if (this._interceptionId === undefined) {\n      throw new Error(\n        'HTTPRequest is missing _interceptionId needed for Fetch.continueRequest'\n      );\n    }\n    await this.#client\n      .send('Fetch.continueRequest', {\n        requestId: this._interceptionId,\n        url,\n        method,\n        postData: postDataBinaryBase64,\n        headers: headers ? headersArray(headers) : undefined,\n      })\n      .catch(error => {\n        this.#interceptionHandled = false;\n        return handleError(error);\n      });\n  }\n\n  override async respond(\n    response: Partial<ResponseForRequest>,\n    priority?: number\n  ): Promise<void> {\n    // Mocking responses for dataURL requests is not currently supported.\n    if (this.#url.startsWith('data:')) {\n      return;\n    }\n    assert(this.#allowInterception, 'Request Interception is not enabled!');\n    assert(!this.#interceptionHandled, 'Request is already handled!');\n    if (priority === undefined) {\n      return this.#respond(response);\n    }\n    this.#responseForRequest = response;\n    if (\n      this.#interceptResolutionState.priority === undefined ||\n      priority > this.#interceptResolutionState.priority\n    ) {\n      this.#interceptResolutionState = {\n        action: InterceptResolutionAction.Respond,\n        priority,\n      };\n      return;\n    }\n    if (priority === this.#interceptResolutionState.priority) {\n      if (this.#interceptResolutionState.action === 'abort') {\n        return;\n      }\n      this.#interceptResolutionState.action = InterceptResolutionAction.Respond;\n    }\n  }\n\n  async #respond(response: Partial<ResponseForRequest>): Promise<void> {\n    this.#interceptionHandled = true;\n\n    const responseBody: Buffer | null =\n      response.body && isString(response.body)\n        ? Buffer.from(response.body)\n        : (response.body as Buffer) || null;\n\n    const responseHeaders: Record<string, string | string[]> = {};\n    if (response.headers) {\n      for (const header of Object.keys(response.headers)) {\n        const value = response.headers[header];\n\n        responseHeaders[header.toLowerCase()] = Array.isArray(value)\n          ? value.map(item => {\n              return String(item);\n            })\n          : String(value);\n      }\n    }\n    if (response.contentType) {\n      responseHeaders['content-type'] = response.contentType;\n    }\n    if (responseBody && !('content-length' in responseHeaders)) {\n      responseHeaders['content-length'] = String(\n        Buffer.byteLength(responseBody)\n      );\n    }\n\n    const status = response.status || 200;\n    if (this._interceptionId === undefined) {\n      throw new Error(\n        'HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest'\n      );\n    }\n    await this.#client\n      .send('Fetch.fulfillRequest', {\n        requestId: this._interceptionId,\n        responseCode: status,\n        responsePhrase: STATUS_TEXTS[status],\n        responseHeaders: headersArray(responseHeaders),\n        body: responseBody ? responseBody.toString('base64') : undefined,\n      })\n      .catch(error => {\n        this.#interceptionHandled = false;\n        return handleError(error);\n      });\n  }\n\n  override async abort(\n    errorCode: ErrorCode = 'failed',\n    priority?: number\n  ): Promise<void> {\n    // Request interception is not supported for data: urls.\n    if (this.#url.startsWith('data:')) {\n      return;\n    }\n    const errorReason = errorReasons[errorCode];\n    assert(errorReason, 'Unknown error code: ' + errorCode);\n    assert(this.#allowInterception, 'Request Interception is not enabled!');\n    assert(!this.#interceptionHandled, 'Request is already handled!');\n    if (priority === undefined) {\n      return this.#abort(errorReason);\n    }\n    this.#abortErrorReason = errorReason;\n    if (\n      this.#interceptResolutionState.priority === undefined ||\n      priority >= this.#interceptResolutionState.priority\n    ) {\n      this.#interceptResolutionState = {\n        action: InterceptResolutionAction.Abort,\n        priority,\n      };\n      return;\n    }\n  }\n\n  async #abort(\n    errorReason: Protocol.Network.ErrorReason | null\n  ): Promise<void> {\n    this.#interceptionHandled = true;\n    if (this._interceptionId === undefined) {\n      throw new Error(\n        'HTTPRequest is missing _interceptionId needed for Fetch.failRequest'\n      );\n    }\n    await this.#client\n      .send('Fetch.failRequest', {\n        requestId: this._interceptionId,\n        errorReason: errorReason || 'Failed',\n      })\n      .catch(handleError);\n  }\n}\n\nconst errorReasons: Record<ErrorCode, Protocol.Network.ErrorReason> = {\n  aborted: 'Aborted',\n  accessdenied: 'AccessDenied',\n  addressunreachable: 'AddressUnreachable',\n  blockedbyclient: 'BlockedByClient',\n  blockedbyresponse: 'BlockedByResponse',\n  connectionaborted: 'ConnectionAborted',\n  connectionclosed: 'ConnectionClosed',\n  connectionfailed: 'ConnectionFailed',\n  connectionrefused: 'ConnectionRefused',\n  connectionreset: 'ConnectionReset',\n  internetdisconnected: 'InternetDisconnected',\n  namenotresolved: 'NameNotResolved',\n  timedout: 'TimedOut',\n  failed: 'Failed',\n} as const;\n\nasync function handleError(error: ProtocolError) {\n  if (['Invalid header'].includes(error.originalMessage)) {\n    throw error;\n  }\n  // In certain cases, protocol will return error if the request was\n  // already canceled or the page was closed. We should tolerate these\n  // errors.\n  debugError(error);\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Protocol} from 'devtools-protocol';\n\nimport {CDPSession} from '../common/Connection.js';\n\nimport {Frame} from './Frame.js';\nimport {HTTPResponse} from './HTTPResponse.js';\n\n/**\n * @public\n */\nexport interface ContinueRequestOverrides {\n  /**\n   * If set, the request URL will change. This is not a redirect.\n   */\n  url?: string;\n  method?: string;\n  postData?: string;\n  headers?: Record<string, string>;\n}\n\n/**\n * @public\n */\nexport interface InterceptResolutionState {\n  action: InterceptResolutionAction;\n  priority?: number;\n}\n\n/**\n * Required response data to fulfill a request with.\n *\n * @public\n */\nexport interface ResponseForRequest {\n  status: number;\n  /**\n   * Optional response headers. All values are converted to strings.\n   */\n  headers: Record<string, unknown>;\n  contentType: string;\n  body: string | Buffer;\n}\n\n/**\n * Resource types for HTTPRequests as perceived by the rendering engine.\n *\n * @public\n */\nexport type ResourceType = Lowercase<Protocol.Network.ResourceType>;\n\n/**\n * The default cooperative request interception resolution priority\n *\n * @public\n */\nexport const DEFAULT_INTERCEPT_RESOLUTION_PRIORITY = 0;\n\n/**\n * Represents an HTTP request sent by a page.\n * @remarks\n *\n * Whenever the page sends a request, such as for a network resource, the\n * following events are emitted by Puppeteer's `page`:\n *\n * - `request`: emitted when the request is issued by the page.\n * - `requestfinished` - emitted when the response body is downloaded and the\n *   request is complete.\n *\n * If request fails at some point, then instead of `requestfinished` event the\n * `requestfailed` event is emitted.\n *\n * All of these events provide an instance of `HTTPRequest` representing the\n * request that occurred:\n *\n * ```\n * page.on('request', request => ...)\n * ```\n *\n * NOTE: HTTP Error responses, such as 404 or 503, are still successful\n * responses from HTTP standpoint, so request will complete with\n * `requestfinished` event.\n *\n * If request gets a 'redirect' response, the request is successfully finished\n * with the `requestfinished` event, and a new request is issued to a\n * redirected url.\n *\n * @public\n */\nexport class HTTPRequest {\n  /**\n   * @internal\n   */\n  _requestId = '';\n  /**\n   * @internal\n   */\n  _interceptionId: string | undefined;\n  /**\n   * @internal\n   */\n  _failureText: string | null = null;\n  /**\n   * @internal\n   */\n  _response: HTTPResponse | null = null;\n  /**\n   * @internal\n   */\n  _fromMemoryCache = false;\n  /**\n   * @internal\n   */\n  _redirectChain: HTTPRequest[] = [];\n\n  /**\n   * Warning! Using this client can break Puppeteer. Use with caution.\n   *\n   * @experimental\n   */\n  get client(): CDPSession {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * The URL of the request\n   */\n  url(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The `ContinueRequestOverrides` that will be used\n   * if the interception is allowed to continue (ie, `abort()` and\n   * `respond()` aren't called).\n   */\n  continueRequestOverrides(): ContinueRequestOverrides {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The `ResponseForRequest` that gets used if the\n   * interception is allowed to respond (ie, `abort()` is not called).\n   */\n  responseForRequest(): Partial<ResponseForRequest> | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The most recent reason for aborting the request\n   */\n  abortErrorReason(): Protocol.Network.ErrorReason | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * An InterceptResolutionState object describing the current resolution\n   * action and priority.\n   *\n   * InterceptResolutionState contains:\n   * action: InterceptResolutionAction\n   * priority?: number\n   *\n   * InterceptResolutionAction is one of: `abort`, `respond`, `continue`,\n   * `disabled`, `none`, or `already-handled`.\n   */\n  interceptResolutionState(): InterceptResolutionState {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Is `true` if the intercept resolution has already been handled,\n   * `false` otherwise.\n   */\n  isInterceptResolutionHandled(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Adds an async request handler to the processing queue.\n   * Deferred handlers are not guaranteed to execute in any particular order,\n   * but they are guaranteed to resolve before the request interception\n   * is finalized.\n   */\n  enqueueInterceptAction(\n    pendingHandler: () => void | PromiseLike<unknown>\n  ): void;\n  enqueueInterceptAction(): void {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Awaits pending interception handlers and then decides how to fulfill\n   * the request interception.\n   */\n  async finalizeInterceptions(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Contains the request's resource type as it was perceived by the rendering\n   * engine.\n   */\n  resourceType(): ResourceType {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The method used (`GET`, `POST`, etc.)\n   */\n  method(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The request's post body, if any.\n   */\n  postData(): string | undefined {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * An object with HTTP headers associated with the request. All\n   * header names are lower-case.\n   */\n  headers(): Record<string, string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * A matching `HTTPResponse` object, or null if the response has not\n   * been received yet.\n   */\n  response(): HTTPResponse | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The frame that initiated the request, or null if navigating to\n   * error pages.\n   */\n  frame(): Frame | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * True if the request is the driver of the current frame's navigation.\n   */\n  isNavigationRequest(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The initiator of the request.\n   */\n  initiator(): Protocol.Network.Initiator | undefined {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * A `redirectChain` is a chain of requests initiated to fetch a resource.\n   * @remarks\n   *\n   * `redirectChain` is shared between all the requests of the same chain.\n   *\n   * For example, if the website `http://example.com` has a single redirect to\n   * `https://example.com`, then the chain will contain one request:\n   *\n   * ```ts\n   * const response = await page.goto('http://example.com');\n   * const chain = response.request().redirectChain();\n   * console.log(chain.length); // 1\n   * console.log(chain[0].url()); // 'http://example.com'\n   * ```\n   *\n   * If the website `https://google.com` has no redirects, then the chain will be empty:\n   *\n   * ```ts\n   * const response = await page.goto('https://google.com');\n   * const chain = response.request().redirectChain();\n   * console.log(chain.length); // 0\n   * ```\n   *\n   * @returns the chain of requests - if a server responds with at least a\n   * single redirect, this chain will contain all requests that were redirected.\n   */\n  redirectChain(): HTTPRequest[] {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Access information about the request's failure.\n   *\n   * @remarks\n   *\n   * @example\n   *\n   * Example of logging all failed requests:\n   *\n   * ```ts\n   * page.on('requestfailed', request => {\n   *   console.log(request.url() + ' ' + request.failure().errorText);\n   * });\n   * ```\n   *\n   * @returns `null` unless the request failed. If the request fails this can\n   * return an object with `errorText` containing a human-readable error\n   * message, e.g. `net::ERR_FAILED`. It is not guaranteed that there will be\n   * failure text if the request fails.\n   */\n  failure(): {errorText: string} | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Continues request with optional request overrides.\n   *\n   * @remarks\n   *\n   * To use this, request\n   * interception should be enabled with {@link Page.setRequestInterception}.\n   *\n   * Exception is immediately thrown if the request interception is not enabled.\n   *\n   * @example\n   *\n   * ```ts\n   * await page.setRequestInterception(true);\n   * page.on('request', request => {\n   *   // Override headers\n   *   const headers = Object.assign({}, request.headers(), {\n   *     foo: 'bar', // set \"foo\" header\n   *     origin: undefined, // remove \"origin\" header\n   *   });\n   *   request.continue({headers});\n   * });\n   * ```\n   *\n   * @param overrides - optional overrides to apply to the request.\n   * @param priority - If provided, intercept is resolved using\n   * cooperative handling rules. Otherwise, intercept is resolved\n   * immediately.\n   */\n  async continue(\n    overrides?: ContinueRequestOverrides,\n    priority?: number\n  ): Promise<void>;\n  async continue(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Fulfills a request with the given response.\n   *\n   * @remarks\n   *\n   * To use this, request\n   * interception should be enabled with {@link Page.setRequestInterception}.\n   *\n   * Exception is immediately thrown if the request interception is not enabled.\n   *\n   * @example\n   * An example of fulfilling all requests with 404 responses:\n   *\n   * ```ts\n   * await page.setRequestInterception(true);\n   * page.on('request', request => {\n   *   request.respond({\n   *     status: 404,\n   *     contentType: 'text/plain',\n   *     body: 'Not Found!',\n   *   });\n   * });\n   * ```\n   *\n   * NOTE: Mocking responses for dataURL requests is not supported.\n   * Calling `request.respond` for a dataURL request is a noop.\n   *\n   * @param response - the response to fulfill the request with.\n   * @param priority - If provided, intercept is resolved using\n   * cooperative handling rules. Otherwise, intercept is resolved\n   * immediately.\n   */\n  async respond(\n    response: Partial<ResponseForRequest>,\n    priority?: number\n  ): Promise<void>;\n  async respond(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Aborts a request.\n   *\n   * @remarks\n   * To use this, request interception should be enabled with\n   * {@link Page.setRequestInterception}. If it is not enabled, this method will\n   * throw an exception immediately.\n   *\n   * @param errorCode - optional error code to provide.\n   * @param priority - If provided, intercept is resolved using\n   * cooperative handling rules. Otherwise, intercept is resolved\n   * immediately.\n   */\n  async abort(errorCode?: ErrorCode, priority?: number): Promise<void>;\n  async abort(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n}\n\n/**\n * @public\n */\nexport enum InterceptResolutionAction {\n  Abort = 'abort',\n  Respond = 'respond',\n  Continue = 'continue',\n  Disabled = 'disabled',\n  None = 'none',\n  AlreadyHandled = 'already-handled',\n}\n\n/**\n * @public\n *\n * @deprecated please use {@link InterceptResolutionAction} instead.\n */\nexport type InterceptResolutionStrategy = InterceptResolutionAction;\n\n/**\n * @public\n */\nexport type ErrorCode =\n  | 'aborted'\n  | 'accessdenied'\n  | 'addressunreachable'\n  | 'blockedbyclient'\n  | 'blockedbyresponse'\n  | 'connectionaborted'\n  | 'connectionclosed'\n  | 'connectionfailed'\n  | 'connectionrefused'\n  | 'connectionreset'\n  | 'internetdisconnected'\n  | 'namenotresolved'\n  | 'timedout'\n  | 'failed';\n\n/**\n * @public\n */\nexport type ActionResult = 'continue' | 'abort' | 'respond';\n\n/**\n * @internal\n */\nexport function headersArray(\n  headers: Record<string, string | string[]>\n): Array<{name: string; value: string}> {\n  const result = [];\n  for (const name in headers) {\n    const value = headers[name];\n\n    if (!Object.is(value, undefined)) {\n      const values = Array.isArray(value) ? value : [value];\n\n      result.push(\n        ...values.map(value => {\n          return {name, value: value + ''};\n        })\n      );\n    }\n  }\n  return result;\n}\n\n/**\n * @internal\n *\n * @remarks\n * List taken from {@link https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml}\n * with extra 306 and 418 codes.\n */\nexport const STATUS_TEXTS: Record<string, string | undefined> = {\n  '100': 'Continue',\n  '101': 'Switching Protocols',\n  '102': 'Processing',\n  '103': 'Early Hints',\n  '200': 'OK',\n  '201': 'Created',\n  '202': 'Accepted',\n  '203': 'Non-Authoritative Information',\n  '204': 'No Content',\n  '205': 'Reset Content',\n  '206': 'Partial Content',\n  '207': 'Multi-Status',\n  '208': 'Already Reported',\n  '226': 'IM Used',\n  '300': 'Multiple Choices',\n  '301': 'Moved Permanently',\n  '302': 'Found',\n  '303': 'See Other',\n  '304': 'Not Modified',\n  '305': 'Use Proxy',\n  '306': 'Switch Proxy',\n  '307': 'Temporary Redirect',\n  '308': 'Permanent Redirect',\n  '400': 'Bad Request',\n  '401': 'Unauthorized',\n  '402': 'Payment Required',\n  '403': 'Forbidden',\n  '404': 'Not Found',\n  '405': 'Method Not Allowed',\n  '406': 'Not Acceptable',\n  '407': 'Proxy Authentication Required',\n  '408': 'Request Timeout',\n  '409': 'Conflict',\n  '410': 'Gone',\n  '411': 'Length Required',\n  '412': 'Precondition Failed',\n  '413': 'Payload Too Large',\n  '414': 'URI Too Long',\n  '415': 'Unsupported Media Type',\n  '416': 'Range Not Satisfiable',\n  '417': 'Expectation Failed',\n  '418': \"I'm a teapot\",\n  '421': 'Misdirected Request',\n  '422': 'Unprocessable Entity',\n  '423': 'Locked',\n  '424': 'Failed Dependency',\n  '425': 'Too Early',\n  '426': 'Upgrade Required',\n  '428': 'Precondition Required',\n  '429': 'Too Many Requests',\n  '431': 'Request Header Fields Too Large',\n  '451': 'Unavailable For Legal Reasons',\n  '500': 'Internal Server Error',\n  '501': 'Not Implemented',\n  '502': 'Bad Gateway',\n  '503': 'Service Unavailable',\n  '504': 'Gateway Timeout',\n  '505': 'HTTP Version Not Supported',\n  '506': 'Variant Also Negotiates',\n  '507': 'Insufficient Storage',\n  '508': 'Loop Detected',\n  '510': 'Not Extended',\n  '511': 'Network Authentication Required',\n} as const;\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Buffer} from 'node:buffer';\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {Frame} from '../api/Frame.js';\nimport {\n  HTTPResponse as BaseHTTPResponse,\n  RemoteAddress,\n} from '../api/HTTPResponse.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {CDPSession} from './Connection.js';\nimport {ProtocolError} from './Errors.js';\nimport {HTTPRequest} from './HTTPRequest.js';\nimport {SecurityDetails} from './SecurityDetails.js';\n\n/**\n * @internal\n */\nexport class HTTPResponse extends BaseHTTPResponse {\n  #client: CDPSession;\n  #request: HTTPRequest;\n  #contentPromise: Promise<Buffer> | null = null;\n  #bodyLoadedDeferred = Deferred.create<Error | void>();\n  #remoteAddress: RemoteAddress;\n  #status: number;\n  #statusText: string;\n  #url: string;\n  #fromDiskCache: boolean;\n  #fromServiceWorker: boolean;\n  #headers: Record<string, string> = {};\n  #securityDetails: SecurityDetails | null;\n  #timing: Protocol.Network.ResourceTiming | null;\n\n  constructor(\n    client: CDPSession,\n    request: HTTPRequest,\n    responsePayload: Protocol.Network.Response,\n    extraInfo: Protocol.Network.ResponseReceivedExtraInfoEvent | null\n  ) {\n    super();\n    this.#client = client;\n    this.#request = request;\n\n    this.#remoteAddress = {\n      ip: responsePayload.remoteIPAddress,\n      port: responsePayload.remotePort,\n    };\n    this.#statusText =\n      this.#parseStatusTextFromExtrInfo(extraInfo) ||\n      responsePayload.statusText;\n    this.#url = request.url();\n    this.#fromDiskCache = !!responsePayload.fromDiskCache;\n    this.#fromServiceWorker = !!responsePayload.fromServiceWorker;\n\n    this.#status = extraInfo ? extraInfo.statusCode : responsePayload.status;\n    const headers = extraInfo ? extraInfo.headers : responsePayload.headers;\n    for (const [key, value] of Object.entries(headers)) {\n      this.#headers[key.toLowerCase()] = value;\n    }\n\n    this.#securityDetails = responsePayload.securityDetails\n      ? new SecurityDetails(responsePayload.securityDetails)\n      : null;\n    this.#timing = responsePayload.timing || null;\n  }\n\n  #parseStatusTextFromExtrInfo(\n    extraInfo: Protocol.Network.ResponseReceivedExtraInfoEvent | null\n  ): string | undefined {\n    if (!extraInfo || !extraInfo.headersText) {\n      return;\n    }\n    const firstLine = extraInfo.headersText.split('\\r', 1)[0];\n    if (!firstLine) {\n      return;\n    }\n    const match = firstLine.match(/[^ ]* [^ ]* (.*)/);\n    if (!match) {\n      return;\n    }\n    const statusText = match[1];\n    if (!statusText) {\n      return;\n    }\n    return statusText;\n  }\n\n  override _resolveBody(err: Error | null): void {\n    if (err) {\n      return this.#bodyLoadedDeferred.resolve(err);\n    }\n    return this.#bodyLoadedDeferred.resolve();\n  }\n\n  override remoteAddress(): RemoteAddress {\n    return this.#remoteAddress;\n  }\n\n  override url(): string {\n    return this.#url;\n  }\n\n  override status(): number {\n    return this.#status;\n  }\n\n  override statusText(): string {\n    return this.#statusText;\n  }\n\n  override headers(): Record<string, string> {\n    return this.#headers;\n  }\n\n  override securityDetails(): SecurityDetails | null {\n    return this.#securityDetails;\n  }\n\n  override timing(): Protocol.Network.ResourceTiming | null {\n    return this.#timing;\n  }\n\n  override buffer(): Promise<Buffer> {\n    if (!this.#contentPromise) {\n      this.#contentPromise = this.#bodyLoadedDeferred\n        .valueOrThrow()\n        .then(async error => {\n          if (error) {\n            throw error;\n          }\n          try {\n            const response = await this.#client.send(\n              'Network.getResponseBody',\n              {\n                requestId: this.#request._requestId,\n              }\n            );\n            return Buffer.from(\n              response.body,\n              response.base64Encoded ? 'base64' : 'utf8'\n            );\n          } catch (error) {\n            if (\n              error instanceof ProtocolError &&\n              error.originalMessage ===\n                'No resource with given identifier found'\n            ) {\n              throw new ProtocolError(\n                'Could not load body for this request. This might happen if the request is a preflight request.'\n              );\n            }\n\n            throw error;\n          }\n        });\n    }\n    return this.#contentPromise;\n  }\n\n  override request(): HTTPRequest {\n    return this.#request;\n  }\n\n  override fromCache(): boolean {\n    return this.#fromDiskCache || this.#request._fromMemoryCache;\n  }\n\n  override fromServiceWorker(): boolean {\n    return this.#fromServiceWorker;\n  }\n\n  override frame(): Frame | null {\n    return this.#request.frame();\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Buffer} from 'node:buffer';\n\nimport Protocol from 'devtools-protocol';\n\nimport {SecurityDetails} from '../common/SecurityDetails.js';\n\nimport {Frame} from './Frame.js';\nimport {HTTPRequest} from './HTTPRequest.js';\n\n/**\n * @public\n */\nexport interface RemoteAddress {\n  ip?: string;\n  port?: number;\n}\n\n/**\n * The HTTPResponse class represents responses which are received by the\n * {@link Page} class.\n *\n * @public\n */\nexport class HTTPResponse {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * @internal\n   */\n  _resolveBody(_err: Error | null): void {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The IP address and port number used to connect to the remote\n   * server.\n   */\n  remoteAddress(): RemoteAddress {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The URL of the response.\n   */\n  url(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * True if the response was successful (status in the range 200-299).\n   */\n  ok(): boolean {\n    // TODO: document === 0 case?\n    const status = this.status();\n    return status === 0 || (status >= 200 && status <= 299);\n  }\n\n  /**\n   * The status code of the response (e.g., 200 for a success).\n   */\n  status(): number {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The status text of the response (e.g. usually an \"OK\" for a\n   * success).\n   */\n  statusText(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * An object with HTTP headers associated with the response. All\n   * header names are lower-case.\n   */\n  headers(): Record<string, string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * {@link SecurityDetails} if the response was received over the\n   * secure connection, or `null` otherwise.\n   */\n  securityDetails(): SecurityDetails | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Timing information related to the response.\n   */\n  timing(): Protocol.Network.ResourceTiming | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Promise which resolves to a buffer with response body.\n   */\n  buffer(): Promise<Buffer> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Promise which resolves to a text representation of response body.\n   */\n  async text(): Promise<string> {\n    const content = await this.buffer();\n    return content.toString('utf8');\n  }\n\n  /**\n   * Promise which resolves to a JSON representation of response body.\n   *\n   * @remarks\n   *\n   * This method will throw if the response body is not parsable via\n   * `JSON.parse`.\n   */\n  async json(): Promise<any> {\n    const content = await this.text();\n    return JSON.parse(content);\n  }\n\n  /**\n   * A matching {@link HTTPRequest} object.\n   */\n  request(): HTTPRequest {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * True if the response was served from either the browser's disk\n   * cache or memory cache.\n   */\n  fromCache(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * True if the response was served by a service worker.\n   */\n  fromServiceWorker(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * A {@link Frame} that initiated this response, or `null` if\n   * navigating to error pages.\n   */\n  frame(): Frame | null {\n    throw new Error('Not implemented');\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\n/**\n * The SecurityDetails class represents the security details of a\n * response that was received over a secure connection.\n *\n * @public\n */\nexport class SecurityDetails {\n  #subjectName: string;\n  #issuer: string;\n  #validFrom: number;\n  #validTo: number;\n  #protocol: string;\n  #sanList: string[];\n\n  /**\n   * @internal\n   */\n  constructor(securityPayload: Protocol.Network.SecurityDetails) {\n    this.#subjectName = securityPayload.subjectName;\n    this.#issuer = securityPayload.issuer;\n    this.#validFrom = securityPayload.validFrom;\n    this.#validTo = securityPayload.validTo;\n    this.#protocol = securityPayload.protocol;\n    this.#sanList = securityPayload.sanList;\n  }\n\n  /**\n   * The name of the issuer of the certificate.\n   */\n  issuer(): string {\n    return this.#issuer;\n  }\n\n  /**\n   * {@link https://en.wikipedia.org/wiki/Unix_time | Unix timestamp}\n   * marking the start of the certificate's validity.\n   */\n  validFrom(): number {\n    return this.#validFrom;\n  }\n\n  /**\n   * {@link https://en.wikipedia.org/wiki/Unix_time | Unix timestamp}\n   * marking the end of the certificate's validity.\n   */\n  validTo(): number {\n    return this.#validTo;\n  }\n\n  /**\n   * The security protocol being used, e.g. \"TLS 1.2\".\n   */\n  protocol(): string {\n    return this.#protocol;\n  }\n\n  /**\n   * The name of the subject to which the certificate was issued.\n   */\n  subjectName(): string {\n    return this.#subjectName;\n  }\n\n  /**\n   * The list of {@link https://en.wikipedia.org/wiki/Subject_Alternative_Name | subject alternative names (SANs)} of the certificate.\n   */\n  subjectAlternativeNames(): string[] {\n    return this.#sanList;\n  }\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {HTTPRequest} from './HTTPRequest.js';\n\n/**\n * @internal\n */\nexport interface QueuedEventGroup {\n  responseReceivedEvent: Protocol.Network.ResponseReceivedEvent;\n  loadingFinishedEvent?: Protocol.Network.LoadingFinishedEvent;\n  loadingFailedEvent?: Protocol.Network.LoadingFailedEvent;\n}\n\n/**\n * @internal\n */\nexport type FetchRequestId = string;\n\n/**\n * @internal\n */\nexport interface RedirectInfo {\n  event: Protocol.Network.RequestWillBeSentEvent;\n  fetchRequestId?: FetchRequestId;\n}\ntype RedirectInfoList = RedirectInfo[];\n\n/**\n * @internal\n */\nexport type NetworkRequestId = string;\n\n/**\n * Helper class to track network events by request ID\n *\n * @internal\n */\nexport class NetworkEventManager {\n  /**\n   * There are four possible orders of events:\n   * A. `_onRequestWillBeSent`\n   * B. `_onRequestWillBeSent`, `_onRequestPaused`\n   * C. `_onRequestPaused`, `_onRequestWillBeSent`\n   * D. `_onRequestPaused`, `_onRequestWillBeSent`, `_onRequestPaused`,\n   * `_onRequestWillBeSent`, `_onRequestPaused`, `_onRequestPaused`\n   * (see crbug.com/1196004)\n   *\n   * For `_onRequest` we need the event from `_onRequestWillBeSent` and\n   * optionally the `interceptionId` from `_onRequestPaused`.\n   *\n   * If request interception is disabled, call `_onRequest` once per call to\n   * `_onRequestWillBeSent`.\n   * If request interception is enabled, call `_onRequest` once per call to\n   * `_onRequestPaused` (once per `interceptionId`).\n   *\n   * Events are stored to allow for subsequent events to call `_onRequest`.\n   *\n   * Note that (chains of) redirect requests have the same `requestId` (!) as\n   * the original request. We have to anticipate series of events like these:\n   * A. `_onRequestWillBeSent`,\n   * `_onRequestWillBeSent`, ...\n   * B. `_onRequestWillBeSent`, `_onRequestPaused`,\n   * `_onRequestWillBeSent`, `_onRequestPaused`, ...\n   * C. `_onRequestWillBeSent`, `_onRequestPaused`,\n   * `_onRequestPaused`, `_onRequestWillBeSent`, ...\n   * D. `_onRequestPaused`, `_onRequestWillBeSent`,\n   * `_onRequestPaused`, `_onRequestWillBeSent`, `_onRequestPaused`,\n   * `_onRequestWillBeSent`, `_onRequestPaused`, `_onRequestPaused`, ...\n   * (see crbug.com/1196004)\n   */\n  #requestWillBeSentMap = new Map<\n    NetworkRequestId,\n    Protocol.Network.RequestWillBeSentEvent\n  >();\n  #requestPausedMap = new Map<\n    NetworkRequestId,\n    Protocol.Fetch.RequestPausedEvent\n  >();\n  #httpRequestsMap = new Map<NetworkRequestId, HTTPRequest>();\n\n  /*\n   * The below maps are used to reconcile Network.responseReceivedExtraInfo\n   * events with their corresponding request. Each response and redirect\n   * response gets an ExtraInfo event, and we don't know which will come first.\n   * This means that we have to store a Response or an ExtraInfo for each\n   * response, and emit the event when we get both of them. In addition, to\n   * handle redirects, we have to make them Arrays to represent the chain of\n   * events.\n   */\n  #responseReceivedExtraInfoMap = new Map<\n    NetworkRequestId,\n    Protocol.Network.ResponseReceivedExtraInfoEvent[]\n  >();\n  #queuedRedirectInfoMap = new Map<NetworkRequestId, RedirectInfoList>();\n  #queuedEventGroupMap = new Map<NetworkRequestId, QueuedEventGroup>();\n\n  forget(networkRequestId: NetworkRequestId): void {\n    this.#requestWillBeSentMap.delete(networkRequestId);\n    this.#requestPausedMap.delete(networkRequestId);\n    this.#queuedEventGroupMap.delete(networkRequestId);\n    this.#queuedRedirectInfoMap.delete(networkRequestId);\n    this.#responseReceivedExtraInfoMap.delete(networkRequestId);\n  }\n\n  responseExtraInfo(\n    networkRequestId: NetworkRequestId\n  ): Protocol.Network.ResponseReceivedExtraInfoEvent[] {\n    if (!this.#responseReceivedExtraInfoMap.has(networkRequestId)) {\n      this.#responseReceivedExtraInfoMap.set(networkRequestId, []);\n    }\n    return this.#responseReceivedExtraInfoMap.get(\n      networkRequestId\n    ) as Protocol.Network.ResponseReceivedExtraInfoEvent[];\n  }\n\n  private queuedRedirectInfo(fetchRequestId: FetchRequestId): RedirectInfoList {\n    if (!this.#queuedRedirectInfoMap.has(fetchRequestId)) {\n      this.#queuedRedirectInfoMap.set(fetchRequestId, []);\n    }\n    return this.#queuedRedirectInfoMap.get(fetchRequestId) as RedirectInfoList;\n  }\n\n  queueRedirectInfo(\n    fetchRequestId: FetchRequestId,\n    redirectInfo: RedirectInfo\n  ): void {\n    this.queuedRedirectInfo(fetchRequestId).push(redirectInfo);\n  }\n\n  takeQueuedRedirectInfo(\n    fetchRequestId: FetchRequestId\n  ): RedirectInfo | undefined {\n    return this.queuedRedirectInfo(fetchRequestId).shift();\n  }\n\n  inFlightRequestsCount(): number {\n    let inFlightRequestCounter = 0;\n    for (const request of this.#httpRequestsMap.values()) {\n      if (!request.response()) {\n        inFlightRequestCounter++;\n      }\n    }\n    return inFlightRequestCounter;\n  }\n\n  storeRequestWillBeSent(\n    networkRequestId: NetworkRequestId,\n    event: Protocol.Network.RequestWillBeSentEvent\n  ): void {\n    this.#requestWillBeSentMap.set(networkRequestId, event);\n  }\n\n  getRequestWillBeSent(\n    networkRequestId: NetworkRequestId\n  ): Protocol.Network.RequestWillBeSentEvent | undefined {\n    return this.#requestWillBeSentMap.get(networkRequestId);\n  }\n\n  forgetRequestWillBeSent(networkRequestId: NetworkRequestId): void {\n    this.#requestWillBeSentMap.delete(networkRequestId);\n  }\n\n  getRequestPaused(\n    networkRequestId: NetworkRequestId\n  ): Protocol.Fetch.RequestPausedEvent | undefined {\n    return this.#requestPausedMap.get(networkRequestId);\n  }\n\n  forgetRequestPaused(networkRequestId: NetworkRequestId): void {\n    this.#requestPausedMap.delete(networkRequestId);\n  }\n\n  storeRequestPaused(\n    networkRequestId: NetworkRequestId,\n    event: Protocol.Fetch.RequestPausedEvent\n  ): void {\n    this.#requestPausedMap.set(networkRequestId, event);\n  }\n\n  getRequest(networkRequestId: NetworkRequestId): HTTPRequest | undefined {\n    return this.#httpRequestsMap.get(networkRequestId);\n  }\n\n  storeRequest(networkRequestId: NetworkRequestId, request: HTTPRequest): void {\n    this.#httpRequestsMap.set(networkRequestId, request);\n  }\n\n  forgetRequest(networkRequestId: NetworkRequestId): void {\n    this.#httpRequestsMap.delete(networkRequestId);\n  }\n\n  getQueuedEventGroup(\n    networkRequestId: NetworkRequestId\n  ): QueuedEventGroup | undefined {\n    return this.#queuedEventGroupMap.get(networkRequestId);\n  }\n\n  queueEventGroup(\n    networkRequestId: NetworkRequestId,\n    event: QueuedEventGroup\n  ): void {\n    this.#queuedEventGroupMap.set(networkRequestId, event);\n  }\n\n  forgetQueuedEventGroup(networkRequestId: NetworkRequestId): void {\n    this.#queuedEventGroupMap.delete(networkRequestId);\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @public\n */\nexport interface PDFMargin {\n  top?: string | number;\n  bottom?: string | number;\n  left?: string | number;\n  right?: string | number;\n}\n\n/**\n * @public\n */\nexport type LowerCasePaperFormat =\n  | 'letter'\n  | 'legal'\n  | 'tabloid'\n  | 'ledger'\n  | 'a0'\n  | 'a1'\n  | 'a2'\n  | 'a3'\n  | 'a4'\n  | 'a5'\n  | 'a6';\n\n/**\n * All the valid paper format types when printing a PDF.\n *\n * @remarks\n *\n * The sizes of each format are as follows:\n *\n * - `Letter`: 8.5in x 11in\n *\n * - `Legal`: 8.5in x 14in\n *\n * - `Tabloid`: 11in x 17in\n *\n * - `Ledger`: 17in x 11in\n *\n * - `A0`: 33.1in x 46.8in\n *\n * - `A1`: 23.4in x 33.1in\n *\n * - `A2`: 16.54in x 23.4in\n *\n * - `A3`: 11.7in x 16.54in\n *\n * - `A4`: 8.27in x 11.7in\n *\n * - `A5`: 5.83in x 8.27in\n *\n * - `A6`: 4.13in x 5.83in\n *\n * @public\n */\nexport type PaperFormat =\n  | Uppercase<LowerCasePaperFormat>\n  | Capitalize<LowerCasePaperFormat>\n  | LowerCasePaperFormat;\n\n/**\n * Valid options to configure PDF generation via {@link Page.pdf}.\n * @public\n */\nexport interface PDFOptions {\n  /**\n   * Scales the rendering of the web page. Amount must be between `0.1` and `2`.\n   * @defaultValue `1`\n   */\n  scale?: number;\n  /**\n   * Whether to show the header and footer.\n   * @defaultValue `false`\n   */\n  displayHeaderFooter?: boolean;\n  /**\n   * HTML template for the print header. Should be valid HTML with the following\n   * classes used to inject values into them:\n   *\n   * - `date` formatted print date\n   *\n   * - `title` document title\n   *\n   * - `url` document location\n   *\n   * - `pageNumber` current page number\n   *\n   * - `totalPages` total pages in the document\n   */\n  headerTemplate?: string;\n  /**\n   * HTML template for the print footer. Has the same constraints and support\n   * for special classes as {@link PDFOptions | PDFOptions.headerTemplate}.\n   */\n  footerTemplate?: string;\n  /**\n   * Set to `true` to print background graphics.\n   * @defaultValue `false`\n   */\n  printBackground?: boolean;\n  /**\n   * Whether to print in landscape orientation.\n   * @defaultValue `false`\n   */\n  landscape?: boolean;\n  /**\n   * Paper ranges to print, e.g. `1-5, 8, 11-13`.\n   * @defaultValue The empty string, which means all pages are printed.\n   */\n  pageRanges?: string;\n  /**\n   * @remarks\n   * If set, this takes priority over the `width` and `height` options.\n   * @defaultValue `letter`.\n   */\n  format?: PaperFormat;\n  /**\n   * Sets the width of paper. You can pass in a number or a string with a unit.\n   */\n  width?: string | number;\n  /**\n   * Sets the height of paper. You can pass in a number or a string with a unit.\n   */\n  height?: string | number;\n  /**\n   * Give any CSS `@page` size declared in the page priority over what is\n   * declared in the `width` or `height` or `format` option.\n   * @defaultValue `false`, which will scale the content to fit the paper size.\n   */\n  preferCSSPageSize?: boolean;\n  /**\n   * Set the PDF margins.\n   * @defaultValue `undefined` no margins are set.\n   */\n  margin?: PDFMargin;\n  /**\n   * The path to save the file to.\n   *\n   * @remarks\n   *\n   * If the path is relative, it's resolved relative to the current working directory.\n   *\n   * @defaultValue `undefined`, which means the PDF will not be written to disk.\n   */\n  path?: string;\n  /**\n   * Hides default white background and allows generating pdfs with transparency.\n   * @defaultValue `false`\n   */\n  omitBackground?: boolean;\n  /**\n   * Timeout in milliseconds. Pass `0` to disable timeout.\n   * @defaultValue `30_000`\n   */\n  timeout?: number;\n}\n\n/**\n * @internal\n */\nexport interface PaperFormatDimensions {\n  width: number;\n  height: number;\n}\n\n/**\n * @internal\n */\nexport interface ParsedPDFOptionsInterface {\n  width: number;\n  height: number;\n  margin: {\n    top: number;\n    bottom: number;\n    left: number;\n    right: number;\n  };\n}\n\n/**\n * @internal\n */\nexport type ParsedPDFOptions = Required<\n  Omit<PDFOptions, 'path' | 'format'> & ParsedPDFOptionsInterface\n>;\n\n/**\n * @internal\n */\nexport const paperFormats: Record<LowerCasePaperFormat, PaperFormatDimensions> =\n  {\n    letter: {width: 8.5, height: 11},\n    legal: {width: 8.5, height: 14},\n    tabloid: {width: 11, height: 17},\n    ledger: {width: 17, height: 11},\n    a0: {width: 33.1, height: 46.8},\n    a1: {width: 23.4, height: 33.1},\n    a2: {width: 16.54, height: 23.4},\n    a3: {width: 11.7, height: 16.54},\n    a4: {width: 8.27, height: 11.7},\n    a5: {width: 5.83, height: 8.27},\n    a6: {width: 4.13, height: 5.83},\n  } as const;\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './Locator.js';\nexport * from './NodeLocator.js';\nexport * from './FilteredLocator.js';\nexport * from './RaceLocator.js';\nexport * from './DelegatedLocator.js';\nexport * from './MappedLocator.js';\nexport * from './FunctionLocator.js';\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  EMPTY,\n  Observable,\n  OperatorFunction,\n  catchError,\n  defaultIfEmpty,\n  defer,\n  filter,\n  first,\n  firstValueFrom,\n  from,\n  fromEvent,\n  identity,\n  ignoreElements,\n  map,\n  merge,\n  mergeMap,\n  noop,\n  pipe,\n  raceWith,\n  retry,\n  tap,\n  timer,\n} from '../../../third_party/rxjs/rxjs.js';\nimport {TimeoutError} from '../../common/Errors.js';\nimport {EventEmitter} from '../../common/EventEmitter.js';\nimport {HandleFor} from '../../common/types.js';\nimport {debugError} from '../../common/util.js';\nimport {BoundingBox, ClickOptions, ElementHandle} from '../ElementHandle.js';\n\nimport {\n  Action,\n  AwaitedLocator,\n  FilteredLocator,\n  HandleMapper,\n  MappedLocator,\n  Mapper,\n  Predicate,\n  RaceLocator,\n} from './locators.js';\n\n/**\n * For observables coming from promises, a delay is needed, otherwise RxJS will\n * never yield in a permanent failure for a promise.\n *\n * We also don't want RxJS to do promise operations to often, so we bump the\n * delay up to 100ms.\n *\n * @internal\n */\nexport const RETRY_DELAY = 100;\n\n/**\n * @public\n */\nexport type VisibilityOption = 'hidden' | 'visible' | null;\n\n/**\n * @public\n */\nexport interface LocatorOptions {\n  /**\n   * Whether to wait for the element to be `visible` or `hidden`. `null` to\n   * disable visibility checks.\n   */\n  visibility: VisibilityOption;\n  /**\n   * Total timeout for the entire locator operation.\n   *\n   * Pass `0` to disable timeout.\n   *\n   * @defaultValue `Page.getDefaultTimeout()`\n   */\n  timeout: number;\n  /**\n   * Whether to scroll the element into viewport if not in the viewprot already.\n   * @defaultValue `true`\n   */\n  ensureElementIsInTheViewport: boolean;\n  /**\n   * Whether to wait for input elements to become enabled before the action.\n   * Applicable to `click` and `fill` actions.\n   * @defaultValue `true`\n   */\n  waitForEnabled: boolean;\n  /**\n   * Whether to wait for the element's bounding box to be same between two\n   * animation frames.\n   * @defaultValue `true`\n   */\n  waitForStableBoundingBox: boolean;\n}\n\n/**\n * @public\n */\nexport interface ActionOptions {\n  signal?: AbortSignal;\n}\n\n/**\n * @public\n */\nexport type LocatorClickOptions = ClickOptions & ActionOptions;\n\n/**\n * @public\n */\nexport interface LocatorScrollOptions extends ActionOptions {\n  scrollTop?: number;\n  scrollLeft?: number;\n}\n\n/**\n * All the events that a locator instance may emit.\n *\n * @public\n */\nexport enum LocatorEmittedEvents {\n  /**\n   * Emitted every time before the locator performs an action on the located element(s).\n   */\n  Action = 'action',\n}\n\n/**\n * @public\n */\nexport interface LocatorEventObject {\n  [LocatorEmittedEvents.Action]: never;\n}\n\n/**\n * Locators describe a strategy of locating objects and performing an action on\n * them. If the action fails because the object is not ready for the action, the\n * whole operation is retried. Various preconditions for a successful action are\n * checked automatically.\n *\n * @public\n */\nexport abstract class Locator<T> extends EventEmitter {\n  /**\n   * Creates a race between multiple locators but ensures that only a single one\n   * acts.\n   *\n   * @public\n   */\n  static race<Locators extends readonly unknown[] | []>(\n    locators: Locators\n  ): Locator<AwaitedLocator<Locators[number]>> {\n    return RaceLocator.create(locators);\n  }\n\n  /**\n   * Used for nominally typing {@link Locator}.\n   */\n  declare _?: T;\n\n  /**\n   * @internal\n   */\n  protected visibility: VisibilityOption = null;\n  /**\n   * @internal\n   */\n  protected _timeout = 30_000;\n  #ensureElementIsInTheViewport = true;\n  #waitForEnabled = true;\n  #waitForStableBoundingBox = true;\n\n  /**\n   * @internal\n   */\n  protected operators = {\n    conditions: (\n      conditions: Array<Action<T, never>>,\n      signal?: AbortSignal\n    ): OperatorFunction<HandleFor<T>, HandleFor<T>> => {\n      return mergeMap((handle: HandleFor<T>) => {\n        return merge(\n          ...conditions.map(condition => {\n            return condition(handle, signal);\n          })\n        ).pipe(defaultIfEmpty(handle));\n      });\n    },\n    retryAndRaceWithSignalAndTimer: <T>(\n      signal?: AbortSignal\n    ): OperatorFunction<T, T> => {\n      const candidates = [];\n      if (signal) {\n        candidates.push(\n          fromEvent(signal, 'abort').pipe(\n            map(() => {\n              throw signal.reason;\n            })\n          )\n        );\n      }\n      if (this._timeout > 0) {\n        candidates.push(\n          timer(this._timeout).pipe(\n            map(() => {\n              throw new TimeoutError(\n                `Timed out after waiting ${this._timeout}ms`\n              );\n            })\n          )\n        );\n      }\n      return pipe(\n        retry({delay: RETRY_DELAY}),\n        raceWith<T, never[]>(...candidates)\n      );\n    },\n  };\n\n  // Determines when the locator will timeout for actions.\n  get timeout(): number {\n    return this._timeout;\n  }\n\n  override on<K extends keyof LocatorEventObject>(\n    eventName: K,\n    handler: (event: LocatorEventObject[K]) => void\n  ): this {\n    return super.on(eventName, handler);\n  }\n\n  override once<K extends keyof LocatorEventObject>(\n    eventName: K,\n    handler: (event: LocatorEventObject[K]) => void\n  ): this {\n    return super.once(eventName, handler);\n  }\n\n  override off<K extends keyof LocatorEventObject>(\n    eventName: K,\n    handler: (event: LocatorEventObject[K]) => void\n  ): this {\n    return super.off(eventName, handler);\n  }\n\n  setTimeout(timeout: number): Locator<T> {\n    const locator = this._clone();\n    locator._timeout = timeout;\n    return locator;\n  }\n\n  setVisibility<NodeType extends Node>(\n    this: Locator<NodeType>,\n    visibility: VisibilityOption\n  ): Locator<NodeType> {\n    const locator = this._clone();\n    locator.visibility = visibility;\n    return locator;\n  }\n\n  setWaitForEnabled<NodeType extends Node>(\n    this: Locator<NodeType>,\n    value: boolean\n  ): Locator<NodeType> {\n    const locator = this._clone();\n    locator.#waitForEnabled = value;\n    return locator;\n  }\n\n  setEnsureElementIsInTheViewport<ElementType extends Element>(\n    this: Locator<ElementType>,\n    value: boolean\n  ): Locator<ElementType> {\n    const locator = this._clone();\n    locator.#ensureElementIsInTheViewport = value;\n    return locator;\n  }\n\n  setWaitForStableBoundingBox<ElementType extends Element>(\n    this: Locator<ElementType>,\n    value: boolean\n  ): Locator<ElementType> {\n    const locator = this._clone();\n    locator.#waitForStableBoundingBox = value;\n    return locator;\n  }\n\n  /**\n   * @internal\n   */\n  copyOptions<T>(locator: Locator<T>): this {\n    this._timeout = locator._timeout;\n    this.visibility = locator.visibility;\n    this.#waitForEnabled = locator.#waitForEnabled;\n    this.#ensureElementIsInTheViewport = locator.#ensureElementIsInTheViewport;\n    this.#waitForStableBoundingBox = locator.#waitForStableBoundingBox;\n    return this;\n  }\n\n  /**\n   * If the element has a \"disabled\" property, wait for the element to be\n   * enabled.\n   */\n  #waitForEnabledIfNeeded = <ElementType extends Node>(\n    handle: HandleFor<ElementType>,\n    signal?: AbortSignal\n  ): Observable<never> => {\n    if (!this.#waitForEnabled) {\n      return EMPTY;\n    }\n    return from(\n      handle.frame.waitForFunction(\n        element => {\n          if (!(element instanceof HTMLElement)) {\n            return true;\n          }\n          const isNativeFormControl = [\n            'BUTTON',\n            'INPUT',\n            'SELECT',\n            'TEXTAREA',\n            'OPTION',\n            'OPTGROUP',\n          ].includes(element.nodeName);\n          return !isNativeFormControl || !element.hasAttribute('disabled');\n        },\n        {\n          timeout: this._timeout,\n          signal,\n        },\n        handle\n      )\n    ).pipe(ignoreElements());\n  };\n\n  /**\n   * Compares the bounding box of the element for two consecutive animation\n   * frames and waits till they are the same.\n   */\n  #waitForStableBoundingBoxIfNeeded = <ElementType extends Element>(\n    handle: HandleFor<ElementType>\n  ): Observable<never> => {\n    if (!this.#waitForStableBoundingBox) {\n      return EMPTY;\n    }\n    return defer(() => {\n      // Note we don't use waitForFunction because that relies on RAF.\n      return from(\n        handle.evaluate(element => {\n          return new Promise<[BoundingBox, BoundingBox]>(resolve => {\n            window.requestAnimationFrame(() => {\n              const rect1 = element.getBoundingClientRect();\n              window.requestAnimationFrame(() => {\n                const rect2 = element.getBoundingClientRect();\n                resolve([\n                  {\n                    x: rect1.x,\n                    y: rect1.y,\n                    width: rect1.width,\n                    height: rect1.height,\n                  },\n                  {\n                    x: rect2.x,\n                    y: rect2.y,\n                    width: rect2.width,\n                    height: rect2.height,\n                  },\n                ]);\n              });\n            });\n          });\n        })\n      );\n    }).pipe(\n      first(([rect1, rect2]) => {\n        return (\n          rect1.x === rect2.x &&\n          rect1.y === rect2.y &&\n          rect1.width === rect2.width &&\n          rect1.height === rect2.height\n        );\n      }),\n      retry({delay: RETRY_DELAY}),\n      ignoreElements()\n    );\n  };\n\n  /**\n   * Checks if the element is in the viewport and auto-scrolls it if it is not.\n   */\n  #ensureElementIsInTheViewportIfNeeded = <ElementType extends Element>(\n    handle: HandleFor<ElementType>\n  ): Observable<never> => {\n    if (!this.#ensureElementIsInTheViewport) {\n      return EMPTY;\n    }\n    return from(handle.isIntersectingViewport({threshold: 0})).pipe(\n      filter(isIntersectingViewport => {\n        return !isIntersectingViewport;\n      }),\n      mergeMap(() => {\n        return from(handle.scrollIntoView());\n      }),\n      mergeMap(() => {\n        return defer(() => {\n          return from(handle.isIntersectingViewport({threshold: 0}));\n        }).pipe(first(identity), retry({delay: RETRY_DELAY}), ignoreElements());\n      })\n    );\n  };\n\n  #click<ElementType extends Element>(\n    this: Locator<ElementType>,\n    options?: Readonly<LocatorClickOptions>\n  ): Observable<void> {\n    const signal = options?.signal;\n    return this._wait(options).pipe(\n      this.operators.conditions(\n        [\n          this.#ensureElementIsInTheViewportIfNeeded,\n          this.#waitForStableBoundingBoxIfNeeded,\n          this.#waitForEnabledIfNeeded,\n        ],\n        signal\n      ),\n      tap(() => {\n        return this.emit(LocatorEmittedEvents.Action);\n      }),\n      mergeMap(handle => {\n        return from(handle.click(options)).pipe(\n          catchError((_, caught) => {\n            void handle.dispose().catch(debugError);\n            return caught;\n          })\n        );\n      }),\n      this.operators.retryAndRaceWithSignalAndTimer(signal)\n    );\n  }\n\n  #fill<ElementType extends Element>(\n    this: Locator<ElementType>,\n    value: string,\n    options?: Readonly<ActionOptions>\n  ): Observable<void> {\n    const signal = options?.signal;\n    return this._wait(options).pipe(\n      this.operators.conditions(\n        [\n          this.#ensureElementIsInTheViewportIfNeeded,\n          this.#waitForStableBoundingBoxIfNeeded,\n          this.#waitForEnabledIfNeeded,\n        ],\n        signal\n      ),\n      tap(() => {\n        return this.emit(LocatorEmittedEvents.Action);\n      }),\n      mergeMap(handle => {\n        return from(\n          (handle as unknown as ElementHandle<HTMLElement>).evaluate(el => {\n            if (el instanceof HTMLSelectElement) {\n              return 'select';\n            }\n            if (el instanceof HTMLTextAreaElement) {\n              return 'typeable-input';\n            }\n            if (el instanceof HTMLInputElement) {\n              if (\n                new Set([\n                  'textarea',\n                  'text',\n                  'url',\n                  'tel',\n                  'search',\n                  'password',\n                  'number',\n                  'email',\n                ]).has(el.type)\n              ) {\n                return 'typeable-input';\n              } else {\n                return 'other-input';\n              }\n            }\n\n            if (el.isContentEditable) {\n              return 'contenteditable';\n            }\n\n            return 'unknown';\n          })\n        )\n          .pipe(\n            mergeMap(inputType => {\n              switch (inputType) {\n                case 'select':\n                  return from(handle.select(value).then(noop));\n                case 'contenteditable':\n                case 'typeable-input':\n                  return from(\n                    (\n                      handle as unknown as ElementHandle<HTMLInputElement>\n                    ).evaluate((input, newValue) => {\n                      const currentValue = input.isContentEditable\n                        ? input.innerText\n                        : input.value;\n\n                      // Clear the input if the current value does not match the filled\n                      // out value.\n                      if (\n                        newValue.length <= currentValue.length ||\n                        !newValue.startsWith(input.value)\n                      ) {\n                        if (input.isContentEditable) {\n                          input.innerText = '';\n                        } else {\n                          input.value = '';\n                        }\n                        return newValue;\n                      }\n                      const originalValue = input.isContentEditable\n                        ? input.innerText\n                        : input.value;\n\n                      // If the value is partially filled out, only type the rest. Move\n                      // cursor to the end of the common prefix.\n                      if (input.isContentEditable) {\n                        input.innerText = '';\n                        input.innerText = originalValue;\n                      } else {\n                        input.value = '';\n                        input.value = originalValue;\n                      }\n                      return newValue.substring(originalValue.length);\n                    }, value)\n                  ).pipe(\n                    mergeMap(textToType => {\n                      return from(handle.type(textToType));\n                    })\n                  );\n                case 'other-input':\n                  return from(handle.focus()).pipe(\n                    mergeMap(() => {\n                      return from(\n                        handle.evaluate((input, value) => {\n                          (input as HTMLInputElement).value = value;\n                          input.dispatchEvent(\n                            new Event('input', {bubbles: true})\n                          );\n                          input.dispatchEvent(\n                            new Event('change', {bubbles: true})\n                          );\n                        }, value)\n                      );\n                    })\n                  );\n                case 'unknown':\n                  throw new Error(`Element cannot be filled out.`);\n              }\n            })\n          )\n          .pipe(\n            catchError((_, caught) => {\n              void handle.dispose().catch(debugError);\n              return caught;\n            })\n          );\n      }),\n      this.operators.retryAndRaceWithSignalAndTimer(signal)\n    );\n  }\n\n  #hover<ElementType extends Element>(\n    this: Locator<ElementType>,\n    options?: Readonly<ActionOptions>\n  ): Observable<void> {\n    const signal = options?.signal;\n    return this._wait(options).pipe(\n      this.operators.conditions(\n        [\n          this.#ensureElementIsInTheViewportIfNeeded,\n          this.#waitForStableBoundingBoxIfNeeded,\n        ],\n        signal\n      ),\n      tap(() => {\n        return this.emit(LocatorEmittedEvents.Action);\n      }),\n      mergeMap(handle => {\n        return from(handle.hover()).pipe(\n          catchError((_, caught) => {\n            void handle.dispose().catch(debugError);\n            return caught;\n          })\n        );\n      }),\n      this.operators.retryAndRaceWithSignalAndTimer(signal)\n    );\n  }\n\n  #scroll<ElementType extends Element>(\n    this: Locator<ElementType>,\n    options?: Readonly<LocatorScrollOptions>\n  ): Observable<void> {\n    const signal = options?.signal;\n    return this._wait(options).pipe(\n      this.operators.conditions(\n        [\n          this.#ensureElementIsInTheViewportIfNeeded,\n          this.#waitForStableBoundingBoxIfNeeded,\n        ],\n        signal\n      ),\n      tap(() => {\n        return this.emit(LocatorEmittedEvents.Action);\n      }),\n      mergeMap(handle => {\n        return from(\n          handle.evaluate(\n            (el, scrollTop, scrollLeft) => {\n              if (scrollTop !== undefined) {\n                el.scrollTop = scrollTop;\n              }\n              if (scrollLeft !== undefined) {\n                el.scrollLeft = scrollLeft;\n              }\n            },\n            options?.scrollTop,\n            options?.scrollLeft\n          )\n        ).pipe(\n          catchError((_, caught) => {\n            void handle.dispose().catch(debugError);\n            return caught;\n          })\n        );\n      }),\n      this.operators.retryAndRaceWithSignalAndTimer(signal)\n    );\n  }\n\n  /**\n   * @internal\n   */\n  abstract _clone(): Locator<T>;\n\n  /**\n   * @internal\n   */\n  abstract _wait(options?: Readonly<ActionOptions>): Observable<HandleFor<T>>;\n\n  /**\n   * Clones the locator.\n   */\n  clone(): Locator<T> {\n    return this._clone();\n  }\n\n  /**\n   * Waits for the locator to get a handle from the page.\n   *\n   * @public\n   */\n  async waitHandle(options?: Readonly<ActionOptions>): Promise<HandleFor<T>> {\n    return await firstValueFrom(\n      this._wait(options).pipe(\n        this.operators.retryAndRaceWithSignalAndTimer(options?.signal)\n      )\n    );\n  }\n\n  /**\n   * Waits for the locator to get the serialized value from the page.\n   *\n   * Note this requires the value to be JSON-serializable.\n   *\n   * @public\n   */\n  async wait(options?: Readonly<ActionOptions>): Promise<T> {\n    const handle = await this.waitHandle(options);\n    try {\n      return await handle.jsonValue();\n    } finally {\n      void handle.dispose().catch(debugError);\n    }\n  }\n\n  /**\n   * Maps the locator using the provided mapper.\n   *\n   * @public\n   */\n  map<To>(mapper: Mapper<T, To>): Locator<To> {\n    return new MappedLocator(this._clone(), handle => {\n      // SAFETY: TypeScript cannot deduce the type.\n      return (handle as any).evaluateHandle(mapper);\n    });\n  }\n\n  /**\n   * Creates an expectation that is evaluated against located values.\n   *\n   * If the expectations do not match, then the locator will retry.\n   *\n   * @public\n   */\n  filter<S extends T>(predicate: Predicate<T, S>): Locator<S> {\n    return new FilteredLocator(this._clone(), async (handle, signal) => {\n      await (handle as ElementHandle<Node>).frame.waitForFunction(\n        predicate,\n        {signal, timeout: this._timeout},\n        handle\n      );\n      return true;\n    });\n  }\n\n  /**\n   * Creates an expectation that is evaluated against located handles.\n   *\n   * If the expectations do not match, then the locator will retry.\n   *\n   * @internal\n   */\n  filterHandle<S extends T>(\n    predicate: Predicate<HandleFor<T>, HandleFor<S>>\n  ): Locator<S> {\n    return new FilteredLocator(this._clone(), predicate);\n  }\n\n  /**\n   * Maps the locator using the provided mapper.\n   *\n   * @internal\n   */\n  mapHandle<To>(mapper: HandleMapper<T, To>): Locator<To> {\n    return new MappedLocator(this._clone(), mapper);\n  }\n\n  click<ElementType extends Element>(\n    this: Locator<ElementType>,\n    options?: Readonly<LocatorClickOptions>\n  ): Promise<void> {\n    return firstValueFrom(this.#click(options));\n  }\n\n  /**\n   * Fills out the input identified by the locator using the provided value. The\n   * type of the input is determined at runtime and the appropriate fill-out\n   * method is chosen based on the type. contenteditable, selector, inputs are\n   * supported.\n   */\n  fill<ElementType extends Element>(\n    this: Locator<ElementType>,\n    value: string,\n    options?: Readonly<ActionOptions>\n  ): Promise<void> {\n    return firstValueFrom(this.#fill(value, options));\n  }\n\n  hover<ElementType extends Element>(\n    this: Locator<ElementType>,\n    options?: Readonly<ActionOptions>\n  ): Promise<void> {\n    return firstValueFrom(this.#hover(options));\n  }\n\n  scroll<ElementType extends Element>(\n    this: Locator<ElementType>,\n    options?: Readonly<LocatorScrollOptions>\n  ): Promise<void> {\n    return firstValueFrom(this.#scroll(options));\n  }\n}\n", "var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])},n(t,r)};function t(t,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Class extends value \"+String(r)+\" is not a constructor or null\");function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function r(n,t,r,e){return new(r||(r=Promise))((function(o,i){function u(n){try{s(e.next(n))}catch(n){i(n)}}function c(n){try{s(e.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?o(n.value):(t=n.value,t instanceof r?t:new r((function(n){n(t)}))).then(u,c)}s((e=e.apply(n,t||[])).next())}))}function e(n,t){var r,e,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(r)throw new TypeError(\"Generator is already executing.\");for(;i&&(i=0,c[0]&&(u=0)),u;)try{if(r=1,e&&(o=2&c[0]?e.return:c[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,c[1])).done)return o;switch(e=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,e=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){u=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){u.label=c[1];break}if(6===c[0]&&u.label<o[1]){u.label=o[1],o=c;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(c);break}o[2]&&u.ops.pop(),u.trys.pop();continue}c=t.call(n,u)}catch(n){c=[6,n],e=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}function o(n){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&n[t],e=0;if(r)return r.call(n);if(n&&\"number\"==typeof n.length)return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function i(n,t){var r=\"function\"==typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),u=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)u.push(e.value)}catch(n){o={error:n}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u}function u(n,t,r){if(r||2===arguments.length)for(var e,o=0,i=t.length;o<i;o++)!e&&o in t||(e||(e=Array.prototype.slice.call(t,0,o)),e[o]=t[o]);return n.concat(e||Array.prototype.slice.call(t))}function c(n){return this instanceof c?(this.v=n,this):new c(n)}function s(n,t,r){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var e,o=r.apply(n,t||[]),i=[];return e={},u(\"next\"),u(\"throw\"),u(\"return\"),e[Symbol.asyncIterator]=function(){return this},e;function u(n){o[n]&&(e[n]=function(t){return new Promise((function(r,e){i.push([n,t,r,e])>1||s(n,t)}))})}function s(n,t){try{(r=o[n](t)).value instanceof c?Promise.resolve(r.value.v).then(l,a):f(i[0][2],r)}catch(n){f(i[0][3],n)}var r}function l(n){s(\"next\",n)}function a(n){s(\"throw\",n)}function f(n,t){n(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function l(n){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var t,r=n[Symbol.asyncIterator];return r?r.call(n):(n=o(n),t={},e(\"next\"),e(\"throw\"),e(\"return\"),t[Symbol.asyncIterator]=function(){return this},t);function e(r){t[r]=n[r]&&function(t){return new Promise((function(e,o){(function(n,t,r,e){Promise.resolve(e).then((function(t){n({value:t,done:r})}),t)})(e,o,(t=n[r](t)).done,t.value)}))}}}function a(n){return\"function\"==typeof n}function f(n){var t=n((function(n){Error.call(n),n.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}\"function\"==typeof SuppressedError&&SuppressedError;var h=f((function(n){return function(t){n(this),this.message=t?t.length+\" errors occurred during unsubscription:\\n\"+t.map((function(n,t){return t+1+\") \"+n.toString()})).join(\"\\n  \"):\"\",this.name=\"UnsubscriptionError\",this.errors=t}}));function p(n,t){if(n){var r=n.indexOf(t);0<=r&&n.splice(r,1)}}var v=function(){function n(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return n.prototype.unsubscribe=function(){var n,t,r,e,c;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=o(s),f=l.next();!f.done;f=l.next()){f.value.remove(this)}}catch(t){n={error:t}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}else s.remove(this);var p=this.initialTeardown;if(a(p))try{p()}catch(n){c=n instanceof h?n.errors:[n]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var d=o(v),y=d.next();!y.done;y=d.next()){var m=y.value;try{b(m)}catch(n){c=null!=c?c:[],n instanceof h?c=u(u([],i(c)),i(n.errors)):c.push(n)}}}catch(n){r={error:n}}finally{try{y&&!y.done&&(e=d.return)&&e.call(d)}finally{if(r)throw r.error}}}if(c)throw new h(c)}},n.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)b(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},n.prototype._hasParent=function(n){var t=this._parentage;return t===n||Array.isArray(t)&&t.includes(n)},n.prototype._addParent=function(n){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n},n.prototype._removeParent=function(n){var t=this._parentage;t===n?this._parentage=null:Array.isArray(t)&&p(t,n)},n.prototype.remove=function(t){var r=this._finalizers;r&&p(r,t),t instanceof n&&t._removeParent(this)},n.EMPTY=((t=new n).closed=!0,t),n}();function d(n){return n instanceof v||n&&\"closed\"in n&&a(n.remove)&&a(n.add)&&a(n.unsubscribe)}function b(n){a(n)?n():n.unsubscribe()}v.EMPTY;var y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},m={setTimeout:function(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var o=m.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,u([n,t],i(r))):setTimeout.apply(void 0,u([n,t],i(r)))},clearTimeout:function(n){var t=m.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function w(n){m.setTimeout((function(){throw n}))}function x(){}var g=function(n){function r(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,d(t)&&t.add(r)):r.destination=P,r}return t(r,n),r.create=function(n,t,r){return new I(n,t,r)},r.prototype.next=function(n){this.isStopped||this._next(n)},r.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(n){this.destination.next(n)},r.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(v),_=Function.prototype.bind;function S(n,t){return _.call(n,t)}var E=function(){function n(n){this.partialObserver=n}return n.prototype.next=function(n){var t=this.partialObserver;if(t.next)try{t.next(n)}catch(n){A(n)}},n.prototype.error=function(n){var t=this.partialObserver;if(t.error)try{t.error(n)}catch(n){A(n)}else A(n)},n.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(n){A(n)}},n}(),I=function(n){function r(t,r,e){var o,i,u=n.call(this)||this;a(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=e?e:void 0}:u&&y.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return u.unsubscribe()},o={next:t.next&&S(t.next,i),error:t.error&&S(t.error,i),complete:t.complete&&S(t.complete,i)}):o=t;return u.destination=new E(o),u}return t(r,n),r}(g);function A(n){w(n)}var P={closed:!0,next:x,error:function(n){throw n},complete:x},T=\"function\"==typeof Symbol&&Symbol.observable||\"@@observable\";function O(n){return n}function j(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return k(n)}function k(n){return 0===n.length?O:1===n.length?n[0]:function(t){return n.reduce((function(n,t){return t(n)}),t)}}var z=function(){function n(n){n&&(this._subscribe=n)}return n.prototype.lift=function(t){var r=new n;return r.source=this,r.operator=t,r},n.prototype.subscribe=function(n,t,r){var e,o=this,i=(e=n)&&e instanceof g||function(n){return n&&a(n.next)&&a(n.error)&&a(n.complete)}(e)&&d(e)?n:new I(n,t,r);return function(){var n=o,t=n.operator,r=n.source;i.add(t?t.call(i,r):r?o._subscribe(i):o._trySubscribe(i))}(),i},n.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){n.error(t)}},n.prototype.forEach=function(n,t){var r=this;return new(t=L(t))((function(t,e){var o=new I({next:function(t){try{n(t)}catch(n){e(n),o.unsubscribe()}},error:e,complete:t});r.subscribe(o)}))},n.prototype._subscribe=function(n){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(n)},n.prototype[T]=function(){return this},n.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return k(n)(this)},n.prototype.toPromise=function(n){var t=this;return new(n=L(n))((function(n,r){var e;t.subscribe((function(n){return e=n}),(function(n){return r(n)}),(function(){return n(e)}))}))},n.create=function(t){return new n(t)},n}();function L(n){var t;return null!==(t=null!=n?n:y.Promise)&&void 0!==t?t:Promise}function U(n){return function(t){if(function(n){return a(null==n?void 0:n.lift)}(t))return t.lift((function(t){try{return n(t,this)}catch(n){this.error(n)}}));throw new TypeError(\"Unable to lift unknown Observable type\")}}function C(n,t,r,e,o){return new D(n,t,r,e,o)}var D=function(n){function r(t,r,e,o,i,u){var c=n.call(this,t)||this;return c.onFinalize=i,c.shouldUnsubscribe=u,c._next=r?function(n){try{r(n)}catch(n){t.error(n)}}:n.prototype._next,c._error=o?function(n){try{o(n)}catch(n){t.error(n)}finally{this.unsubscribe()}}:n.prototype._error,c._complete=e?function(){try{e()}catch(n){t.error(n)}finally{this.unsubscribe()}}:n.prototype._complete,c}return t(r,n),r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},r}(g),N={now:function(){return(N.delegate||Date).now()},delegate:void 0},Y=function(n){function r(t,r){return n.call(this)||this}return t(r,n),r.prototype.schedule=function(n,t){return this},r}(v),q={setInterval:function(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var o=q.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,u([n,t],i(r))):setInterval.apply(void 0,u([n,t],i(r)))},clearInterval:function(n){var t=q.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(n)},delegate:void 0},F=function(n){function r(t,r){var e=n.call(this,t,r)||this;return e.scheduler=t,e.work=r,e.pending=!1,e}return t(r,n),r.prototype.schedule=function(n,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=n;var e=this.id,o=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(o,e,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this},r.prototype.requestAsyncId=function(n,t,r){return void 0===r&&(r=0),q.setInterval(n.flush.bind(n,this),r)},r.prototype.recycleAsyncId=function(n,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&q.clearInterval(t)},r.prototype.execute=function(n,t){if(this.closed)return new Error(\"executing a cancelled action\");this.pending=!1;var r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(n,t){var r,e=!1;try{this.work(n)}catch(n){e=!0,r=n||new Error(\"Scheduled action threw falsy error\")}if(e)return this.unsubscribe(),r},r.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,e=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,p(e,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},r}(Y),R=function(){function n(t,r){void 0===r&&(r=n.now),this.schedulerActionCtor=t,this.now=r}return n.prototype.schedule=function(n,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,n).schedule(r,t)},n.now=N.now,n}(),M=new(function(n){function r(t,r){void 0===r&&(r=R.now);var e=n.call(this,t,r)||this;return e.actions=[],e._active=!1,e}return t(r,n),r.prototype.flush=function(n){var t=this.actions;if(this._active)t.push(n);else{var r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}},r}(R))(F),G=new z((function(n){return n.complete()}));function H(n){return n&&a(n.schedule)}function V(n){return n[n.length-1]}var B=function(n){return n&&\"number\"==typeof n.length&&\"function\"!=typeof n};function J(n){return a(null==n?void 0:n.then)}function K(n){return a(n[T])}function Q(n){return Symbol.asyncIterator&&a(null==n?void 0:n[Symbol.asyncIterator])}function W(n){return new TypeError(\"You provided \"+(null!==n&&\"object\"==typeof n?\"an invalid object\":\"'\"+n+\"'\")+\" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\")}var X=\"function\"==typeof Symbol&&Symbol.iterator?Symbol.iterator:\"@@iterator\";function Z(n){return a(null==n?void 0:n[X])}function $(n){return s(this,arguments,(function(){var t,r,o;return e(this,(function(e){switch(e.label){case 0:t=n.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,c(t.read())];case 3:return r=e.sent(),o=r.value,r.done?[4,c(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,c(o)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function nn(n){return a(null==n?void 0:n.getReader)}function tn(n){if(n instanceof z)return n;if(null!=n){if(K(n))return i=n,new z((function(n){var t=i[T]();if(a(t.subscribe))return t.subscribe(n);throw new TypeError(\"Provided object does not correctly implement Symbol.observable\")}));if(B(n))return e=n,new z((function(n){for(var t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()}));if(J(n))return r=n,new z((function(n){r.then((function(t){n.closed||(n.next(t),n.complete())}),(function(t){return n.error(t)})).then(null,w)}));if(Q(n))return rn(n);if(Z(n))return t=n,new z((function(n){var r,e;try{for(var i=o(t),u=i.next();!u.done;u=i.next()){var c=u.value;if(n.next(c),n.closed)return}}catch(n){r={error:n}}finally{try{u&&!u.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}n.complete()}));if(nn(n))return rn($(n))}var t,r,e,i;throw W(n)}function rn(n){return new z((function(t){(function(n,t){var o,i,u,c;return r(this,void 0,void 0,(function(){var r,s;return e(this,(function(e){switch(e.label){case 0:e.trys.push([0,5,6,11]),o=l(n),e.label=1;case 1:return[4,o.next()];case 2:if((i=e.sent()).done)return[3,4];if(r=i.value,t.next(r),t.closed)return[2];e.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=e.sent(),u={error:s},[3,11];case 6:return e.trys.push([6,,9,10]),i&&!i.done&&(c=o.return)?[4,c.call(o)]:[3,8];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(n,t).catch((function(n){return t.error(n)}))}))}function en(n,t,r,e,o){void 0===e&&(e=0),void 0===o&&(o=!1);var i=t.schedule((function(){r(),o?n.add(this.schedule(null,e)):this.unsubscribe()}),e);if(n.add(i),!o)return i}function on(n,t){return void 0===t&&(t=0),U((function(r,e){r.subscribe(C(e,(function(r){return en(e,n,(function(){return e.next(r)}),t)}),(function(){return en(e,n,(function(){return e.complete()}),t)}),(function(r){return en(e,n,(function(){return e.error(r)}),t)})))}))}function un(n,t){return void 0===t&&(t=0),U((function(r,e){e.add(n.schedule((function(){return r.subscribe(e)}),t))}))}function cn(n,t){if(!n)throw new Error(\"Iterable cannot be null\");return new z((function(r){en(r,t,(function(){var e=n[Symbol.asyncIterator]();en(r,t,(function(){e.next().then((function(n){n.done?r.complete():r.next(n.value)}))}),0,!0)}))}))}function sn(n,t){if(null!=n){if(K(n))return function(n,t){return tn(n).pipe(un(t),on(t))}(n,t);if(B(n))return function(n,t){return new z((function(r){var e=0;return t.schedule((function(){e===n.length?r.complete():(r.next(n[e++]),r.closed||this.schedule())}))}))}(n,t);if(J(n))return function(n,t){return tn(n).pipe(un(t),on(t))}(n,t);if(Q(n))return cn(n,t);if(Z(n))return function(n,t){return new z((function(r){var e;return en(r,t,(function(){e=n[X](),en(r,t,(function(){var n,t,o;try{t=(n=e.next()).value,o=n.done}catch(n){return void r.error(n)}o?r.complete():r.next(t)}),0,!0)})),function(){return a(null==e?void 0:e.return)&&e.return()}}))}(n,t);if(nn(n))return function(n,t){return cn($(n),t)}(n,t)}throw W(n)}function ln(n,t){return t?sn(n,t):tn(n)}var an=f((function(n){return function(){n(this),this.name=\"EmptyError\",this.message=\"no elements in sequence\"}}));function fn(n,t){var r=\"object\"==typeof t;return new Promise((function(e,o){var i=new I({next:function(n){e(n),i.unsubscribe()},error:o,complete:function(){r?e(t.defaultValue):o(new an)}});n.subscribe(i)}))}function hn(n,t){return U((function(r,e){var o=0;r.subscribe(C(e,(function(r){e.next(n.call(t,r,o++))})))}))}var pn=Array.isArray;function vn(n){return hn((function(t){return function(n,t){return pn(t)?n.apply(void 0,u([],i(t))):n(t)}(n,t)}))}function dn(n,t,r){return void 0===r&&(r=1/0),a(t)?dn((function(r,e){return hn((function(n,o){return t(r,n,e,o)}))(tn(n(r,e)))}),r):(\"number\"==typeof t&&(r=t),U((function(t,e){return function(n,t,r,e,o,i,u,c){var s=[],l=0,a=0,f=!1,h=function(){!f||s.length||l||t.complete()},p=function(n){return l<e?v(n):s.push(n)},v=function(n){i&&t.next(n),l++;var c=!1;tn(r(n,a++)).subscribe(C(t,(function(n){null==o||o(n),i?p(n):t.next(n)}),(function(){c=!0}),void 0,(function(){if(c)try{l--;for(var n=function(){var n=s.shift();u?en(t,u,(function(){return v(n)})):v(n)};s.length&&l<e;)n();h()}catch(n){t.error(n)}})))};return n.subscribe(C(t,p,(function(){f=!0,h()}))),function(){null==c||c()}}(t,e,n,r)})))}function bn(n){return new z((function(t){tn(n()).subscribe(t)}))}var yn=[\"addListener\",\"removeListener\"],mn=[\"addEventListener\",\"removeEventListener\"],wn=[\"on\",\"off\"];function xn(n,t,r,e){if(a(r)&&(e=r,r=void 0),e)return xn(n,t,r).pipe(vn(e));var o=i(function(n){return a(n.addEventListener)&&a(n.removeEventListener)}(n)?mn.map((function(e){return function(o){return n[e](t,o,r)}})):function(n){return a(n.addListener)&&a(n.removeListener)}(n)?yn.map(gn(n,t)):function(n){return a(n.on)&&a(n.off)}(n)?wn.map(gn(n,t)):[],2),u=o[0],c=o[1];if(!u&&B(n))return dn((function(n){return xn(n,t,r)}))(tn(n));if(!u)throw new TypeError(\"Invalid event target\");return new z((function(n){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.next(1<t.length?t:t[0])};return u(t),function(){return c(t)}}))}function gn(n,t){return function(r){return function(e){return n[r](t,e)}}}function _n(n,t,r){void 0===n&&(n=0),void 0===r&&(r=M);var e=-1;return null!=t&&(H(t)?r=t:e=t),new z((function(t){var o,i=(o=n)instanceof Date&&!isNaN(o)?+n-r.now():n;i<0&&(i=0);var u=0;return r.schedule((function(){t.closed||(t.next(u++),0<=e?this.schedule(void 0,e):t.complete())}),i)}))}function Sn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=function(n){return H(V(n))?n.pop():void 0}(n),e=function(n,t){return\"number\"==typeof V(n)?n.pop():t}(n,1/0),o=n;return o.length?1===o.length?tn(o[0]):function(n){return void 0===n&&(n=1/0),dn(O,n)}(e)(ln(o,r)):G}var En=Array.isArray;function In(n,t){return U((function(r,e){var o=0;r.subscribe(C(e,(function(r){return n.call(t,r,o++)&&e.next(r)})))}))}function An(){for(var n,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 1===(t=1===(n=t).length&&En(n[0])?n[0]:n).length?tn(t[0]):new z(Pn(t))}function Pn(n){return function(t){for(var r=[],e=function(e){r.push(tn(n[e]).subscribe(C(t,(function(n){if(r){for(var o=0;o<r.length;o++)o!==e&&r[o].unsubscribe();r=null}t.next(n)}))))},o=0;r&&!t.closed&&o<n.length;o++)e(o)}}function Tn(n){return U((function(t,r){var e,o=null,i=!1;o=t.subscribe(C(r,void 0,void 0,(function(u){e=tn(n(u,Tn(n)(t))),o?(o.unsubscribe(),o=null,e.subscribe(r)):i=!0}))),i&&(o.unsubscribe(),o=null,e.subscribe(r))}))}function On(n){return U((function(t,r){var e=!1;t.subscribe(C(r,(function(n){e=!0,r.next(n)}),(function(){e||r.next(n),r.complete()})))}))}function jn(){return U((function(n,t){n.subscribe(C(t,x))}))}function kn(n){return void 0===n&&(n=zn),U((function(t,r){var e=!1;t.subscribe(C(r,(function(n){e=!0,r.next(n)}),(function(){return e?r.complete():r.error(n())})))}))}function zn(){return new an}function Ln(n,t){var r=arguments.length>=2;return function(e){return e.pipe(n?In((function(t,r){return n(t,r,e)})):O,(o=1)<=0?function(){return G}:U((function(n,t){var r=0;n.subscribe(C(t,(function(n){++r<=o&&(t.next(n),o<=r&&t.complete())})))})),r?On(t):kn((function(){return new an})));var o}}function Un(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n.length?U((function(t,r){Pn(u([t],i(n)))(r)})):O}function Cn(n){var t;void 0===n&&(n=1/0);var r=(t=n&&\"object\"==typeof n?n:{count:n}).count,e=void 0===r?1/0:r,o=t.delay,i=t.resetOnSuccess,u=void 0!==i&&i;return e<=0?O:U((function(n,t){var r,i=0,c=function(){var s=!1;r=n.subscribe(C(t,(function(n){u&&(i=0),t.next(n)}),void 0,(function(n){if(i++<e){var u=function(){r?(r.unsubscribe(),r=null,c()):s=!0};if(null!=o){var l=\"number\"==typeof o?_n(o):tn(o(n,i)),a=C(t,(function(){a.unsubscribe(),u()}),(function(){t.complete()}));l.subscribe(a)}else u()}else t.error(n)}))),s&&(r.unsubscribe(),r=null,c())};c()}))}function Dn(n,t,r){var e=a(n)||t||r?{next:n,error:t,complete:r}:n;return e?U((function(n,t){var r;null===(r=e.subscribe)||void 0===r||r.call(e);var o=!0;n.subscribe(C(t,(function(n){var r;null===(r=e.next)||void 0===r||r.call(e,n),t.next(n)}),(function(){var n;o=!1,null===(n=e.complete)||void 0===n||n.call(e),t.complete()}),(function(n){var r;o=!1,null===(r=e.error)||void 0===r||r.call(e,n),t.error(n)}),(function(){var n,t;o&&(null===(n=e.unsubscribe)||void 0===n||n.call(e)),null===(t=e.finalize)||void 0===t||t.call(e)})))})):O}export{G as EMPTY,z as Observable,Tn as catchError,On as defaultIfEmpty,bn as defer,In as filter,Ln as first,fn as firstValueFrom,ln as from,xn as fromEvent,O as identity,jn as ignoreElements,hn as map,Sn as merge,dn as mergeMap,x as noop,j as pipe,An as race,Un as raceWith,Cn as retry,Dn as tap,kn as throwIfEmpty,_n as timer};\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  EMPTY,\n  Observable,\n  defer,\n  filter,\n  first,\n  from,\n  identity,\n  ignoreElements,\n  retry,\n  throwIfEmpty,\n} from '../../../third_party/rxjs/rxjs.js';\nimport {HandleFor, NodeFor} from '../../common/types.js';\nimport {Frame} from '../Frame.js';\nimport {Page} from '../Page.js';\n\nimport {ActionOptions, Locator, RETRY_DELAY} from './locators.js';\n\n/**\n * @internal\n */\nexport type Action<T, U> = (\n  element: HandleFor<T>,\n  signal?: AbortSignal\n) => Observable<U>;\n\n/**\n * @internal\n */\nexport class NodeLocator<T extends Node> extends Locator<T> {\n  static create<Selector extends string>(\n    pageOrFrame: Page | Frame,\n    selector: Selector\n  ): Locator<NodeFor<Selector>> {\n    return new NodeLocator<NodeFor<Selector>>(pageOrFrame, selector).setTimeout(\n      'getDefaultTimeout' in pageOrFrame\n        ? pageOrFrame.getDefaultTimeout()\n        : pageOrFrame.page().getDefaultTimeout()\n    );\n  }\n\n  #pageOrFrame: Page | Frame;\n  #selector: string;\n\n  private constructor(pageOrFrame: Page | Frame, selector: string) {\n    super();\n\n    this.#pageOrFrame = pageOrFrame;\n    this.#selector = selector;\n  }\n\n  /**\n   * Waits for the element to become visible or hidden. visibility === 'visible'\n   * means that the element has a computed style, the visibility property other\n   * than 'hidden' or 'collapse' and non-empty bounding box. visibility ===\n   * 'hidden' means the opposite of that.\n   */\n  #waitForVisibilityIfNeeded = (handle: HandleFor<T>): Observable<never> => {\n    if (!this.visibility) {\n      return EMPTY;\n    }\n\n    return (() => {\n      switch (this.visibility) {\n        case 'hidden':\n          return defer(() => {\n            return from(handle.isHidden());\n          });\n        case 'visible':\n          return defer(() => {\n            return from(handle.isVisible());\n          });\n      }\n    })().pipe(first(identity), retry({delay: RETRY_DELAY}), ignoreElements());\n  };\n\n  override _clone(): NodeLocator<T> {\n    return new NodeLocator<T>(this.#pageOrFrame, this.#selector).copyOptions(\n      this\n    );\n  }\n\n  override _wait(options?: Readonly<ActionOptions>): Observable<HandleFor<T>> {\n    const signal = options?.signal;\n    return defer(() => {\n      return from(\n        this.#pageOrFrame.waitForSelector(this.#selector, {\n          visible: false,\n          timeout: this._timeout,\n          signal,\n        }) as Promise<HandleFor<T> | null>\n      );\n    }).pipe(\n      filter((value): value is NonNullable<typeof value> => {\n        return value !== null;\n      }),\n      throwIfEmpty(),\n      this.operators.conditions([this.#waitForVisibilityIfNeeded], signal)\n    );\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Observable,\n  filter,\n  from,\n  map,\n  mergeMap,\n  throwIfEmpty,\n} from '../../../third_party/rxjs/rxjs.js';\nimport {Awaitable, HandleFor} from '../../common/common.js';\n\nimport {DelegatedLocator} from './DelegatedLocator.js';\nimport {ActionOptions, Locator} from './locators.js';\n\n/**\n * @public\n */\nexport type Predicate<From, To extends From = From> =\n  | ((value: From) => value is To)\n  | ((value: From) => Awaitable<boolean>);\n\n/**\n * @internal\n */\nexport type HandlePredicate<From, To extends From = From> =\n  | ((value: HandleFor<From>, signal?: AbortSignal) => value is HandleFor<To>)\n  | ((value: HandleFor<From>, signal?: AbortSignal) => Awaitable<boolean>);\n\n/**\n * @internal\n */\nexport class FilteredLocator<From, To extends From> extends DelegatedLocator<\n  From,\n  To\n> {\n  #predicate: HandlePredicate<From, To>;\n\n  constructor(base: Locator<From>, predicate: HandlePredicate<From, To>) {\n    super(base);\n    this.#predicate = predicate;\n  }\n\n  override _clone(): FilteredLocator<From, To> {\n    return new FilteredLocator(\n      this.delegate.clone(),\n      this.#predicate\n    ).copyOptions(this);\n  }\n\n  override _wait(options?: Readonly<ActionOptions>): Observable<HandleFor<To>> {\n    return this.delegate._wait(options).pipe(\n      mergeMap(handle => {\n        return from(\n          Promise.resolve(this.#predicate(handle, options?.signal))\n        ).pipe(\n          filter(value => {\n            return value;\n          }),\n          map(() => {\n            // SAFETY: It passed the predicate, so this is correct.\n            return handle as HandleFor<To>;\n          })\n        );\n      }),\n      throwIfEmpty()\n    );\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Observable} from '../../../third_party/rxjs/rxjs.js';\nimport {HandleFor} from '../../common/common.js';\n\nimport {Locator, VisibilityOption} from './locators.js';\n\n/**\n * @internal\n */\nexport abstract class DelegatedLocator<T, U> extends Locator<U> {\n  #delegate: Locator<T>;\n\n  constructor(delegate: Locator<T>) {\n    super();\n\n    this.#delegate = delegate;\n    this.copyOptions(this.#delegate);\n  }\n\n  protected get delegate(): Locator<T> {\n    return this.#delegate;\n  }\n\n  override setTimeout(timeout: number): DelegatedLocator<T, U> {\n    const locator = super.setTimeout(timeout) as DelegatedLocator<T, U>;\n    locator.#delegate = this.#delegate.setTimeout(timeout);\n    return locator;\n  }\n\n  override setVisibility<ValueType extends Node, NodeType extends Node>(\n    this: DelegatedLocator<ValueType, NodeType>,\n    visibility: VisibilityOption\n  ): DelegatedLocator<ValueType, NodeType> {\n    const locator = super.setVisibility<NodeType>(\n      visibility\n    ) as DelegatedLocator<ValueType, NodeType>;\n    locator.#delegate = locator.#delegate.setVisibility<ValueType>(visibility);\n    return locator;\n  }\n\n  override setWaitForEnabled<ValueType extends Node, NodeType extends Node>(\n    this: DelegatedLocator<ValueType, NodeType>,\n    value: boolean\n  ): DelegatedLocator<ValueType, NodeType> {\n    const locator = super.setWaitForEnabled<NodeType>(\n      value\n    ) as DelegatedLocator<ValueType, NodeType>;\n    locator.#delegate = this.#delegate.setWaitForEnabled(value);\n    return locator;\n  }\n\n  override setEnsureElementIsInTheViewport<\n    ValueType extends Element,\n    ElementType extends Element,\n  >(\n    this: DelegatedLocator<ValueType, ElementType>,\n    value: boolean\n  ): DelegatedLocator<ValueType, ElementType> {\n    const locator = super.setEnsureElementIsInTheViewport<ElementType>(\n      value\n    ) as DelegatedLocator<ValueType, ElementType>;\n    locator.#delegate = this.#delegate.setEnsureElementIsInTheViewport(value);\n    return locator;\n  }\n\n  override setWaitForStableBoundingBox<\n    ValueType extends Element,\n    ElementType extends Element,\n  >(\n    this: DelegatedLocator<ValueType, ElementType>,\n    value: boolean\n  ): DelegatedLocator<ValueType, ElementType> {\n    const locator = super.setWaitForStableBoundingBox<ElementType>(\n      value\n    ) as DelegatedLocator<ValueType, ElementType>;\n    locator.#delegate = this.#delegate.setWaitForStableBoundingBox(value);\n    return locator;\n  }\n\n  abstract override _clone(): DelegatedLocator<T, U>;\n  abstract override _wait(): Observable<HandleFor<U>>;\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Observable, race} from '../../../third_party/rxjs/rxjs.js';\nimport {HandleFor} from '../../puppeteer-core.js';\n\nimport {ActionOptions, Locator} from './locators.js';\n\n/**\n * @public\n */\nexport type AwaitedLocator<T> = T extends Locator<infer S> ? S : never;\n\nfunction checkLocatorArray<T extends readonly unknown[] | []>(\n  locators: T\n): ReadonlyArray<Locator<AwaitedLocator<T[number]>>> {\n  for (const locator of locators) {\n    if (!(locator instanceof Locator)) {\n      throw new Error('Unknown locator for race candidate');\n    }\n  }\n  return locators as ReadonlyArray<Locator<AwaitedLocator<T[number]>>>;\n}\n\n/**\n * @internal\n */\nexport class RaceLocator<T> extends Locator<T> {\n  static create<T extends readonly unknown[]>(\n    locators: T\n  ): Locator<AwaitedLocator<T[number]>> {\n    const array = checkLocatorArray(locators);\n    return new RaceLocator(array);\n  }\n\n  #locators: ReadonlyArray<Locator<T>>;\n\n  constructor(locators: ReadonlyArray<Locator<T>>) {\n    super();\n    this.#locators = locators;\n  }\n\n  override _clone(): RaceLocator<T> {\n    return new RaceLocator<T>(\n      this.#locators.map(locator => {\n        return locator.clone();\n      })\n    ).copyOptions(this);\n  }\n\n  override _wait(options?: Readonly<ActionOptions>): Observable<HandleFor<T>> {\n    return race(\n      ...this.#locators.map(locator => {\n        return locator._wait(options);\n      })\n    );\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Observable, from, mergeMap} from '../../../third_party/rxjs/rxjs.js';\nimport {Awaitable, HandleFor} from '../../common/common.js';\n\nimport {ActionOptions, DelegatedLocator, Locator} from './locators.js';\n\n/**\n * @public\n */\nexport type Mapper<From, To> = (value: From) => Awaitable<To>;\n\n/**\n * @internal\n */\nexport type HandleMapper<From, To> = (\n  value: HandleFor<From>,\n  signal?: AbortSignal\n) => Awaitable<HandleFor<To>>;\n\n/**\n * @internal\n */\nexport class MappedLocator<From, To> extends DelegatedLocator<From, To> {\n  #mapper: HandleMapper<From, To>;\n\n  constructor(base: Locator<From>, mapper: HandleMapper<From, To>) {\n    super(base);\n    this.#mapper = mapper;\n  }\n\n  override _clone(): MappedLocator<From, To> {\n    return new MappedLocator(this.delegate.clone(), this.#mapper).copyOptions(\n      this\n    );\n  }\n\n  override _wait(options?: Readonly<ActionOptions>): Observable<HandleFor<To>> {\n    return this.delegate._wait(options).pipe(\n      mergeMap(handle => {\n        return from(Promise.resolve(this.#mapper(handle, options?.signal)));\n      })\n    );\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Observable,\n  defer,\n  from,\n  throwIfEmpty,\n} from '../../../third_party/rxjs/rxjs.js';\nimport {Awaitable, HandleFor} from '../../common/types.js';\nimport {Frame} from '../Frame.js';\nimport {Page} from '../Page.js';\n\nimport {ActionOptions, Locator} from './locators.js';\n\n/**\n * @internal\n */\nexport class FunctionLocator<T> extends Locator<T> {\n  static create<Ret>(\n    pageOrFrame: Page | Frame,\n    func: () => Awaitable<Ret>\n  ): Locator<Ret> {\n    return new FunctionLocator<Ret>(pageOrFrame, func).setTimeout(\n      'getDefaultTimeout' in pageOrFrame\n        ? pageOrFrame.getDefaultTimeout()\n        : pageOrFrame.page().getDefaultTimeout()\n    );\n  }\n\n  #pageOrFrame: Page | Frame;\n  #func: () => Awaitable<T>;\n\n  private constructor(pageOrFrame: Page | Frame, func: () => Awaitable<T>) {\n    super();\n\n    this.#pageOrFrame = pageOrFrame;\n    this.#func = func;\n  }\n\n  override _clone(): FunctionLocator<T> {\n    return new FunctionLocator(this.#pageOrFrame, this.#func);\n  }\n\n  _wait(options?: Readonly<ActionOptions>): Observable<HandleFor<T>> {\n    const signal = options?.signal;\n    return defer(() => {\n      return from(\n        this.#pageOrFrame.waitForFunction(this.#func, {\n          timeout: this.timeout,\n          signal,\n        })\n      );\n    }).pipe(throwIfEmpty());\n  }\n}\n", "/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {ElementHandle} from '../api/ElementHandle.js';\n\nimport {CDPSession} from './Connection.js';\n\n/**\n * Represents a Node and the properties of it that are relevant to Accessibility.\n * @public\n */\nexport interface SerializedAXNode {\n  /**\n   * The {@link https://www.w3.org/TR/wai-aria/#usage_intro | role} of the node.\n   */\n  role: string;\n  /**\n   * A human readable name for the node.\n   */\n  name?: string;\n  /**\n   * The current value of the node.\n   */\n  value?: string | number;\n  /**\n   * An additional human readable description of the node.\n   */\n  description?: string;\n  /**\n   * Any keyboard shortcuts associated with this node.\n   */\n  keyshortcuts?: string;\n  /**\n   * A human readable alternative to the role.\n   */\n  roledescription?: string;\n  /**\n   * A description of the current value.\n   */\n  valuetext?: string;\n  disabled?: boolean;\n  expanded?: boolean;\n  focused?: boolean;\n  modal?: boolean;\n  multiline?: boolean;\n  /**\n   * Whether more than one child can be selected.\n   */\n  multiselectable?: boolean;\n  readonly?: boolean;\n  required?: boolean;\n  selected?: boolean;\n  /**\n   * Whether the checkbox is checked, or in a\n   * {@link https://www.w3.org/TR/wai-aria-practices/examples/checkbox/checkbox-2/checkbox-2.html | mixed state}.\n   */\n  checked?: boolean | 'mixed';\n  /**\n   * Whether the node is checked or in a mixed state.\n   */\n  pressed?: boolean | 'mixed';\n  /**\n   * The level of a heading.\n   */\n  level?: number;\n  valuemin?: number;\n  valuemax?: number;\n  autocomplete?: string;\n  haspopup?: string;\n  /**\n   * Whether and in what way this node's value is invalid.\n   */\n  invalid?: string;\n  orientation?: string;\n  /**\n   * Children of this node, if there are any.\n   */\n  children?: SerializedAXNode[];\n}\n\n/**\n * @public\n */\nexport interface SnapshotOptions {\n  /**\n   * Prune uninteresting nodes from the tree.\n   * @defaultValue `true`\n   */\n  interestingOnly?: boolean;\n  /**\n   * Root node to get the accessibility tree for\n   * @defaultValue The root node of the entire page.\n   */\n  root?: ElementHandle<Node>;\n}\n\n/**\n * The Accessibility class provides methods for inspecting the browser's\n * accessibility tree. The accessibility tree is used by assistive technology\n * such as {@link https://en.wikipedia.org/wiki/Screen_reader | screen readers} or\n * {@link https://en.wikipedia.org/wiki/Switch_access | switches}.\n *\n * @remarks\n *\n * Accessibility is a very platform-specific thing. On different platforms,\n * there are different screen readers that might have wildly different output.\n *\n * Blink - Chrome's rendering engine - has a concept of \"accessibility tree\",\n * which is then translated into different platform-specific APIs. Accessibility\n * namespace gives users access to the Blink Accessibility Tree.\n *\n * Most of the accessibility tree gets filtered out when converting from Blink\n * AX Tree to Platform-specific AX-Tree or by assistive technologies themselves.\n * By default, Puppeteer tries to approximate this filtering, exposing only\n * the \"interesting\" nodes of the tree.\n *\n * @public\n */\nexport class Accessibility {\n  #client: CDPSession;\n\n  /**\n   * @internal\n   */\n  constructor(client: CDPSession) {\n    this.#client = client;\n  }\n\n  /**\n   * Captures the current state of the accessibility tree.\n   * The returned object represents the root accessible node of the page.\n   *\n   * @remarks\n   *\n   * **NOTE** The Chrome accessibility tree contains nodes that go unused on\n   * most platforms and by most screen readers. Puppeteer will discard them as\n   * well for an easier to process tree, unless `interestingOnly` is set to\n   * `false`.\n   *\n   * @example\n   * An example of dumping the entire accessibility tree:\n   *\n   * ```ts\n   * const snapshot = await page.accessibility.snapshot();\n   * console.log(snapshot);\n   * ```\n   *\n   * @example\n   * An example of logging the focused node's name:\n   *\n   * ```ts\n   * const snapshot = await page.accessibility.snapshot();\n   * const node = findFocusedNode(snapshot);\n   * console.log(node && node.name);\n   *\n   * function findFocusedNode(node) {\n   *   if (node.focused) return node;\n   *   for (const child of node.children || []) {\n   *     const foundNode = findFocusedNode(child);\n   *     return foundNode;\n   *   }\n   *   return null;\n   * }\n   * ```\n   *\n   * @returns An AXNode object representing the snapshot.\n   */\n  public async snapshot(\n    options: SnapshotOptions = {}\n  ): Promise<SerializedAXNode | null> {\n    const {interestingOnly = true, root = null} = options;\n    const {nodes} = await this.#client.send('Accessibility.getFullAXTree');\n    let backendNodeId: number | undefined;\n    if (root) {\n      const {node} = await this.#client.send('DOM.describeNode', {\n        objectId: root.id,\n      });\n      backendNodeId = node.backendNodeId;\n    }\n    const defaultRoot = AXNode.createTree(nodes);\n    let needle: AXNode | null = defaultRoot;\n    if (backendNodeId) {\n      needle = defaultRoot.find(node => {\n        return node.payload.backendDOMNodeId === backendNodeId;\n      });\n      if (!needle) {\n        return null;\n      }\n    }\n    if (!interestingOnly) {\n      return this.serializeTree(needle)[0] ?? null;\n    }\n\n    const interestingNodes = new Set<AXNode>();\n    this.collectInterestingNodes(interestingNodes, defaultRoot, false);\n    if (!interestingNodes.has(needle)) {\n      return null;\n    }\n    return this.serializeTree(needle, interestingNodes)[0] ?? null;\n  }\n\n  private serializeTree(\n    node: AXNode,\n    interestingNodes?: Set<AXNode>\n  ): SerializedAXNode[] {\n    const children: SerializedAXNode[] = [];\n    for (const child of node.children) {\n      children.push(...this.serializeTree(child, interestingNodes));\n    }\n\n    if (interestingNodes && !interestingNodes.has(node)) {\n      return children;\n    }\n\n    const serializedNode = node.serialize();\n    if (children.length) {\n      serializedNode.children = children;\n    }\n    return [serializedNode];\n  }\n\n  private collectInterestingNodes(\n    collection: Set<AXNode>,\n    node: AXNode,\n    insideControl: boolean\n  ): void {\n    if (node.isInteresting(insideControl)) {\n      collection.add(node);\n    }\n    if (node.isLeafNode()) {\n      return;\n    }\n    insideControl = insideControl || node.isControl();\n    for (const child of node.children) {\n      this.collectInterestingNodes(collection, child, insideControl);\n    }\n  }\n}\n\nclass AXNode {\n  public payload: Protocol.Accessibility.AXNode;\n  public children: AXNode[] = [];\n\n  #richlyEditable = false;\n  #editable = false;\n  #focusable = false;\n  #hidden = false;\n  #name: string;\n  #role: string;\n  #ignored: boolean;\n  #cachedHasFocusableChild?: boolean;\n\n  constructor(payload: Protocol.Accessibility.AXNode) {\n    this.payload = payload;\n    this.#name = this.payload.name ? this.payload.name.value : '';\n    this.#role = this.payload.role ? this.payload.role.value : 'Unknown';\n    this.#ignored = this.payload.ignored;\n\n    for (const property of this.payload.properties || []) {\n      if (property.name === 'editable') {\n        this.#richlyEditable = property.value.value === 'richtext';\n        this.#editable = true;\n      }\n      if (property.name === 'focusable') {\n        this.#focusable = property.value.value;\n      }\n      if (property.name === 'hidden') {\n        this.#hidden = property.value.value;\n      }\n    }\n  }\n\n  #isPlainTextField(): boolean {\n    if (this.#richlyEditable) {\n      return false;\n    }\n    if (this.#editable) {\n      return true;\n    }\n    return this.#role === 'textbox' || this.#role === 'searchbox';\n  }\n\n  #isTextOnlyObject(): boolean {\n    const role = this.#role;\n    return role === 'LineBreak' || role === 'text' || role === 'InlineTextBox';\n  }\n\n  #hasFocusableChild(): boolean {\n    if (this.#cachedHasFocusableChild === undefined) {\n      this.#cachedHasFocusableChild = false;\n      for (const child of this.children) {\n        if (child.#focusable || child.#hasFocusableChild()) {\n          this.#cachedHasFocusableChild = true;\n          break;\n        }\n      }\n    }\n    return this.#cachedHasFocusableChild;\n  }\n\n  public find(predicate: (x: AXNode) => boolean): AXNode | null {\n    if (predicate(this)) {\n      return this;\n    }\n    for (const child of this.children) {\n      const result = child.find(predicate);\n      if (result) {\n        return result;\n      }\n    }\n    return null;\n  }\n\n  public isLeafNode(): boolean {\n    if (!this.children.length) {\n      return true;\n    }\n\n    // These types of objects may have children that we use as internal\n    // implementation details, but we want to expose them as leaves to platform\n    // accessibility APIs because screen readers might be confused if they find\n    // any children.\n    if (this.#isPlainTextField() || this.#isTextOnlyObject()) {\n      return true;\n    }\n\n    // Roles whose children are only presentational according to the ARIA and\n    // HTML5 Specs should be hidden from screen readers.\n    // (Note that whilst ARIA buttons can have only presentational children, HTML5\n    // buttons are allowed to have content.)\n    switch (this.#role) {\n      case 'doc-cover':\n      case 'graphics-symbol':\n      case 'img':\n      case 'Meter':\n      case 'scrollbar':\n      case 'slider':\n      case 'separator':\n      case 'progressbar':\n        return true;\n      default:\n        break;\n    }\n\n    // Here and below: Android heuristics\n    if (this.#hasFocusableChild()) {\n      return false;\n    }\n    if (this.#focusable && this.#name) {\n      return true;\n    }\n    if (this.#role === 'heading' && this.#name) {\n      return true;\n    }\n    return false;\n  }\n\n  public isControl(): boolean {\n    switch (this.#role) {\n      case 'button':\n      case 'checkbox':\n      case 'ColorWell':\n      case 'combobox':\n      case 'DisclosureTriangle':\n      case 'listbox':\n      case 'menu':\n      case 'menubar':\n      case 'menuitem':\n      case 'menuitemcheckbox':\n      case 'menuitemradio':\n      case 'radio':\n      case 'scrollbar':\n      case 'searchbox':\n      case 'slider':\n      case 'spinbutton':\n      case 'switch':\n      case 'tab':\n      case 'textbox':\n      case 'tree':\n      case 'treeitem':\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  public isInteresting(insideControl: boolean): boolean {\n    const role = this.#role;\n    if (role === 'Ignored' || this.#hidden || this.#ignored) {\n      return false;\n    }\n\n    if (this.#focusable || this.#richlyEditable) {\n      return true;\n    }\n\n    // If it's not focusable but has a control role, then it's interesting.\n    if (this.isControl()) {\n      return true;\n    }\n\n    // A non focusable child of a control is not interesting\n    if (insideControl) {\n      return false;\n    }\n\n    return this.isLeafNode() && !!this.#name;\n  }\n\n  public serialize(): SerializedAXNode {\n    const properties = new Map<string, number | string | boolean>();\n    for (const property of this.payload.properties || []) {\n      properties.set(property.name.toLowerCase(), property.value.value);\n    }\n    if (this.payload.name) {\n      properties.set('name', this.payload.name.value);\n    }\n    if (this.payload.value) {\n      properties.set('value', this.payload.value.value);\n    }\n    if (this.payload.description) {\n      properties.set('description', this.payload.description.value);\n    }\n\n    const node: SerializedAXNode = {\n      role: this.#role,\n    };\n\n    type UserStringProperty =\n      | 'name'\n      | 'value'\n      | 'description'\n      | 'keyshortcuts'\n      | 'roledescription'\n      | 'valuetext';\n\n    const userStringProperties: UserStringProperty[] = [\n      'name',\n      'value',\n      'description',\n      'keyshortcuts',\n      'roledescription',\n      'valuetext',\n    ];\n    const getUserStringPropertyValue = (key: UserStringProperty): string => {\n      return properties.get(key) as string;\n    };\n\n    for (const userStringProperty of userStringProperties) {\n      if (!properties.has(userStringProperty)) {\n        continue;\n      }\n\n      node[userStringProperty] = getUserStringPropertyValue(userStringProperty);\n    }\n\n    type BooleanProperty =\n      | 'disabled'\n      | 'expanded'\n      | 'focused'\n      | 'modal'\n      | 'multiline'\n      | 'multiselectable'\n      | 'readonly'\n      | 'required'\n      | 'selected';\n    const booleanProperties: BooleanProperty[] = [\n      'disabled',\n      'expanded',\n      'focused',\n      'modal',\n      'multiline',\n      'multiselectable',\n      'readonly',\n      'required',\n      'selected',\n    ];\n    const getBooleanPropertyValue = (key: BooleanProperty): boolean => {\n      return properties.get(key) as boolean;\n    };\n\n    for (const booleanProperty of booleanProperties) {\n      // RootWebArea's treat focus differently than other nodes. They report whether\n      // their frame  has focus, not whether focus is specifically on the root\n      // node.\n      if (booleanProperty === 'focused' && this.#role === 'RootWebArea') {\n        continue;\n      }\n      const value = getBooleanPropertyValue(booleanProperty);\n      if (!value) {\n        continue;\n      }\n      node[booleanProperty] = getBooleanPropertyValue(booleanProperty);\n    }\n\n    type TristateProperty = 'checked' | 'pressed';\n    const tristateProperties: TristateProperty[] = ['checked', 'pressed'];\n    for (const tristateProperty of tristateProperties) {\n      if (!properties.has(tristateProperty)) {\n        continue;\n      }\n      const value = properties.get(tristateProperty);\n      node[tristateProperty] =\n        value === 'mixed' ? 'mixed' : value === 'true' ? true : false;\n    }\n\n    type NumbericalProperty = 'level' | 'valuemax' | 'valuemin';\n    const numericalProperties: NumbericalProperty[] = [\n      'level',\n      'valuemax',\n      'valuemin',\n    ];\n    const getNumericalPropertyValue = (key: NumbericalProperty): number => {\n      return properties.get(key) as number;\n    };\n    for (const numericalProperty of numericalProperties) {\n      if (!properties.has(numericalProperty)) {\n        continue;\n      }\n      node[numericalProperty] = getNumericalPropertyValue(numericalProperty);\n    }\n\n    type TokenProperty =\n      | 'autocomplete'\n      | 'haspopup'\n      | 'invalid'\n      | 'orientation';\n    const tokenProperties: TokenProperty[] = [\n      'autocomplete',\n      'haspopup',\n      'invalid',\n      'orientation',\n    ];\n    const getTokenPropertyValue = (key: TokenProperty): string => {\n      return properties.get(key) as string;\n    };\n    for (const tokenProperty of tokenProperties) {\n      const value = getTokenPropertyValue(tokenProperty);\n      if (!value || value === 'false') {\n        continue;\n      }\n      node[tokenProperty] = getTokenPropertyValue(tokenProperty);\n    }\n    return node;\n  }\n\n  public static createTree(payloads: Protocol.Accessibility.AXNode[]): AXNode {\n    const nodeById = new Map<string, AXNode>();\n    for (const payload of payloads) {\n      nodeById.set(payload.nodeId, new AXNode(payload));\n    }\n    for (const node of nodeById.values()) {\n      for (const childId of node.payload.childIds || []) {\n        const child = nodeById.get(childId);\n        if (child) {\n          node.children.push(child);\n        }\n      }\n    }\n    return nodeById.values().next().value;\n  }\n}\n", "import {JSHandle} from '../api/JSHandle.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport {ExecutionContext} from './ExecutionContext.js';\nimport {debugError} from './util.js';\n\n/**\n * @internal\n */\nexport class Binding {\n  #name: string;\n  #fn: (...args: unknown[]) => unknown;\n  constructor(name: string, fn: (...args: unknown[]) => unknown) {\n    this.#name = name;\n    this.#fn = fn;\n  }\n\n  get name(): string {\n    return this.#name;\n  }\n\n  /**\n   * @param context - Context to run the binding in; the context should have\n   * the binding added to it beforehand.\n   * @param id - ID of the call. This should come from the CDP\n   * `onBindingCalled` response.\n   * @param args - Plain arguments from CDP.\n   */\n  async run(\n    context: ExecutionContext,\n    id: number,\n    args: unknown[],\n    isTrivial: boolean\n  ): Promise<void> {\n    const garbage = [];\n    try {\n      if (!isTrivial) {\n        // Getting non-trivial arguments.\n        const handles = await context.evaluateHandle(\n          (name, seq) => {\n            // @ts-expect-error Code is evaluated in a different context.\n            return globalThis[name].args.get(seq);\n          },\n          this.#name,\n          id\n        );\n        try {\n          const properties = await handles.getProperties();\n          for (const [index, handle] of properties) {\n            // This is not straight-forward since some arguments can stringify, but\n            // aren't plain objects so add subtypes when the use-case arises.\n            if (index in args) {\n              switch (handle.remoteObject().subtype) {\n                case 'node':\n                  args[+index] = handle;\n                  break;\n                default:\n                  garbage.push(handle.dispose());\n              }\n            } else {\n              garbage.push(handle.dispose());\n            }\n          }\n        } finally {\n          await handles.dispose();\n        }\n      }\n\n      await context.evaluate(\n        (name, seq, result) => {\n          // @ts-expect-error Code is evaluated in a different context.\n          const callbacks = globalThis[name].callbacks;\n          callbacks.get(seq).resolve(result);\n          callbacks.delete(seq);\n        },\n        this.#name,\n        id,\n        await this.#fn(...args)\n      );\n\n      for (const arg of args) {\n        if (arg instanceof JSHandle) {\n          garbage.push(arg.dispose());\n        }\n      }\n    } catch (error) {\n      if (isErrorLike(error)) {\n        await context\n          .evaluate(\n            (name, seq, message, stack) => {\n              const error = new Error(message);\n              error.stack = stack;\n              // @ts-expect-error Code is evaluated in a different context.\n              const callbacks = globalThis[name].callbacks;\n              callbacks.get(seq).reject(error);\n              callbacks.delete(seq);\n            },\n            this.#name,\n            id,\n            error.message,\n            error.stack\n          )\n          .catch(debugError);\n      } else {\n        await context\n          .evaluate(\n            (name, seq, error) => {\n              // @ts-expect-error Code is evaluated in a different context.\n              const callbacks = globalThis[name].callbacks;\n              callbacks.get(seq).reject(error);\n              callbacks.delete(seq);\n            },\n            this.#name,\n            id,\n            error\n          )\n          .catch(debugError);\n      }\n    } finally {\n      await Promise.all(garbage);\n    }\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {JSHandle} from '../api/JSHandle.js';\n\n/**\n * @public\n */\nexport interface ConsoleMessageLocation {\n  /**\n   * URL of the resource if known or `undefined` otherwise.\n   */\n  url?: string;\n\n  /**\n   * 0-based line number in the resource if known or `undefined` otherwise.\n   */\n  lineNumber?: number;\n\n  /**\n   * 0-based column number in the resource if known or `undefined` otherwise.\n   */\n  columnNumber?: number;\n}\n\n/**\n * The supported types for console messages.\n * @public\n */\nexport type ConsoleMessageType =\n  | 'log'\n  | 'debug'\n  | 'info'\n  | 'error'\n  | 'warning'\n  | 'dir'\n  | 'dirxml'\n  | 'table'\n  | 'trace'\n  | 'clear'\n  | 'startGroup'\n  | 'startGroupCollapsed'\n  | 'endGroup'\n  | 'assert'\n  | 'profile'\n  | 'profileEnd'\n  | 'count'\n  | 'timeEnd'\n  | 'verbose';\n\n/**\n * ConsoleMessage objects are dispatched by page via the 'console' event.\n * @public\n */\nexport class ConsoleMessage {\n  #type: ConsoleMessageType;\n  #text: string;\n  #args: JSHandle[];\n  #stackTraceLocations: ConsoleMessageLocation[];\n\n  /**\n   * @public\n   */\n  constructor(\n    type: ConsoleMessageType,\n    text: string,\n    args: JSHandle[],\n    stackTraceLocations: ConsoleMessageLocation[]\n  ) {\n    this.#type = type;\n    this.#text = text;\n    this.#args = args;\n    this.#stackTraceLocations = stackTraceLocations;\n  }\n\n  /**\n   * The type of the console message.\n   */\n  type(): ConsoleMessageType {\n    return this.#type;\n  }\n\n  /**\n   * The text of the console message.\n   */\n  text(): string {\n    return this.#text;\n  }\n\n  /**\n   * An array of arguments passed to the console.\n   */\n  args(): JSHandle[] {\n    return this.#args;\n  }\n\n  /**\n   * The location of the console message.\n   */\n  location(): ConsoleMessageLocation {\n    return this.#stackTraceLocations[0] ?? {};\n  }\n\n  /**\n   * The array of locations on the stack of the console message.\n   */\n  stackTrace(): ConsoleMessageLocation[] {\n    return this.#stackTraceLocations;\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {assert} from '../util/assert.js';\n\nimport {CDPSession} from './Connection.js';\nimport {\n  addEventListener,\n  debugError,\n  PuppeteerEventListener,\n  PuppeteerURL,\n  removeEventListeners,\n} from './util.js';\n\n/**\n * @internal\n */\nexport {PuppeteerEventListener};\n\n/**\n * The CoverageEntry class represents one entry of the coverage report.\n * @public\n */\nexport interface CoverageEntry {\n  /**\n   * The URL of the style sheet or script.\n   */\n  url: string;\n  /**\n   * The content of the style sheet or script.\n   */\n  text: string;\n  /**\n   * The covered range as start and end positions.\n   */\n  ranges: Array<{start: number; end: number}>;\n}\n\n/**\n * The CoverageEntry class for JavaScript\n * @public\n */\nexport interface JSCoverageEntry extends CoverageEntry {\n  /**\n   * Raw V8 script coverage entry.\n   */\n  rawScriptCoverage?: Protocol.Profiler.ScriptCoverage;\n}\n\n/**\n * Set of configurable options for JS coverage.\n * @public\n */\nexport interface JSCoverageOptions {\n  /**\n   * Whether to reset coverage on every navigation.\n   */\n  resetOnNavigation?: boolean;\n  /**\n   * Whether anonymous scripts generated by the page should be reported.\n   */\n  reportAnonymousScripts?: boolean;\n  /**\n   * Whether the result includes raw V8 script coverage entries.\n   */\n  includeRawScriptCoverage?: boolean;\n  /**\n   * Whether to collect coverage information at the block level.\n   * If true, coverage will be collected at the block level (this is the default).\n   * If false, coverage will be collected at the function level.\n   */\n  useBlockCoverage?: boolean;\n}\n\n/**\n * Set of configurable options for CSS coverage.\n * @public\n */\nexport interface CSSCoverageOptions {\n  /**\n   * Whether to reset coverage on every navigation.\n   */\n  resetOnNavigation?: boolean;\n}\n\n/**\n * The Coverage class provides methods to gather information about parts of\n * JavaScript and CSS that were used by the page.\n *\n * @remarks\n * To output coverage in a form consumable by {@link https://github.com/istanbuljs | Istanbul},\n * see {@link https://github.com/istanbuljs/puppeteer-to-istanbul | puppeteer-to-istanbul}.\n *\n * @example\n * An example of using JavaScript and CSS coverage to get percentage of initially\n * executed code:\n *\n * ```ts\n * // Enable both JavaScript and CSS coverage\n * await Promise.all([\n *   page.coverage.startJSCoverage(),\n *   page.coverage.startCSSCoverage(),\n * ]);\n * // Navigate to page\n * await page.goto('https://example.com');\n * // Disable both JavaScript and CSS coverage\n * const [jsCoverage, cssCoverage] = await Promise.all([\n *   page.coverage.stopJSCoverage(),\n *   page.coverage.stopCSSCoverage(),\n * ]);\n * let totalBytes = 0;\n * let usedBytes = 0;\n * const coverage = [...jsCoverage, ...cssCoverage];\n * for (const entry of coverage) {\n *   totalBytes += entry.text.length;\n *   for (const range of entry.ranges) usedBytes += range.end - range.start - 1;\n * }\n * console.log(`Bytes used: ${(usedBytes / totalBytes) * 100}%`);\n * ```\n *\n * @public\n */\nexport class Coverage {\n  #jsCoverage: JSCoverage;\n  #cssCoverage: CSSCoverage;\n\n  constructor(client: CDPSession) {\n    this.#jsCoverage = new JSCoverage(client);\n    this.#cssCoverage = new CSSCoverage(client);\n  }\n\n  /**\n   * @param options - Set of configurable options for coverage defaults to\n   * `resetOnNavigation : true, reportAnonymousScripts : false,`\n   * `includeRawScriptCoverage : false, useBlockCoverage : true`\n   * @returns Promise that resolves when coverage is started.\n   *\n   * @remarks\n   * Anonymous scripts are ones that don't have an associated url. These are\n   * scripts that are dynamically created on the page using `eval` or\n   * `new Function`. If `reportAnonymousScripts` is set to `true`, anonymous\n   * scripts URL will start with `debugger://VM` (unless a magic //# sourceURL\n   * comment is present, in which case that will the be URL).\n   */\n  async startJSCoverage(options: JSCoverageOptions = {}): Promise<void> {\n    return await this.#jsCoverage.start(options);\n  }\n\n  /**\n   * Promise that resolves to the array of coverage reports for\n   * all scripts.\n   *\n   * @remarks\n   * JavaScript Coverage doesn't include anonymous scripts by default.\n   * However, scripts with sourceURLs are reported.\n   */\n  async stopJSCoverage(): Promise<JSCoverageEntry[]> {\n    return await this.#jsCoverage.stop();\n  }\n\n  /**\n   * @param options - Set of configurable options for coverage, defaults to\n   * `resetOnNavigation : true`\n   * @returns Promise that resolves when coverage is started.\n   */\n  async startCSSCoverage(options: CSSCoverageOptions = {}): Promise<void> {\n    return await this.#cssCoverage.start(options);\n  }\n\n  /**\n   * Promise that resolves to the array of coverage reports\n   * for all stylesheets.\n   *\n   * @remarks\n   * CSS Coverage doesn't include dynamically injected style tags\n   * without sourceURLs.\n   */\n  async stopCSSCoverage(): Promise<CoverageEntry[]> {\n    return await this.#cssCoverage.stop();\n  }\n}\n\n/**\n * @public\n */\nexport class JSCoverage {\n  #client: CDPSession;\n  #enabled = false;\n  #scriptURLs = new Map<string, string>();\n  #scriptSources = new Map<string, string>();\n  #eventListeners: PuppeteerEventListener[] = [];\n  #resetOnNavigation = false;\n  #reportAnonymousScripts = false;\n  #includeRawScriptCoverage = false;\n\n  constructor(client: CDPSession) {\n    this.#client = client;\n  }\n\n  async start(\n    options: {\n      resetOnNavigation?: boolean;\n      reportAnonymousScripts?: boolean;\n      includeRawScriptCoverage?: boolean;\n      useBlockCoverage?: boolean;\n    } = {}\n  ): Promise<void> {\n    assert(!this.#enabled, 'JSCoverage is already enabled');\n    const {\n      resetOnNavigation = true,\n      reportAnonymousScripts = false,\n      includeRawScriptCoverage = false,\n      useBlockCoverage = true,\n    } = options;\n    this.#resetOnNavigation = resetOnNavigation;\n    this.#reportAnonymousScripts = reportAnonymousScripts;\n    this.#includeRawScriptCoverage = includeRawScriptCoverage;\n    this.#enabled = true;\n    this.#scriptURLs.clear();\n    this.#scriptSources.clear();\n    this.#eventListeners = [\n      addEventListener(\n        this.#client,\n        'Debugger.scriptParsed',\n        this.#onScriptParsed.bind(this)\n      ),\n      addEventListener(\n        this.#client,\n        'Runtime.executionContextsCleared',\n        this.#onExecutionContextsCleared.bind(this)\n      ),\n    ];\n    await Promise.all([\n      this.#client.send('Profiler.enable'),\n      this.#client.send('Profiler.startPreciseCoverage', {\n        callCount: this.#includeRawScriptCoverage,\n        detailed: useBlockCoverage,\n      }),\n      this.#client.send('Debugger.enable'),\n      this.#client.send('Debugger.setSkipAllPauses', {skip: true}),\n    ]);\n  }\n\n  #onExecutionContextsCleared(): void {\n    if (!this.#resetOnNavigation) {\n      return;\n    }\n    this.#scriptURLs.clear();\n    this.#scriptSources.clear();\n  }\n\n  async #onScriptParsed(\n    event: Protocol.Debugger.ScriptParsedEvent\n  ): Promise<void> {\n    // Ignore puppeteer-injected scripts\n    if (PuppeteerURL.isPuppeteerURL(event.url)) {\n      return;\n    }\n    // Ignore other anonymous scripts unless the reportAnonymousScripts option is true.\n    if (!event.url && !this.#reportAnonymousScripts) {\n      return;\n    }\n    try {\n      const response = await this.#client.send('Debugger.getScriptSource', {\n        scriptId: event.scriptId,\n      });\n      this.#scriptURLs.set(event.scriptId, event.url);\n      this.#scriptSources.set(event.scriptId, response.scriptSource);\n    } catch (error) {\n      // This might happen if the page has already navigated away.\n      debugError(error);\n    }\n  }\n\n  async stop(): Promise<JSCoverageEntry[]> {\n    assert(this.#enabled, 'JSCoverage is not enabled');\n    this.#enabled = false;\n\n    const result = await Promise.all([\n      this.#client.send('Profiler.takePreciseCoverage'),\n      this.#client.send('Profiler.stopPreciseCoverage'),\n      this.#client.send('Profiler.disable'),\n      this.#client.send('Debugger.disable'),\n    ]);\n\n    removeEventListeners(this.#eventListeners);\n\n    const coverage = [];\n    const profileResponse = result[0];\n\n    for (const entry of profileResponse.result) {\n      let url = this.#scriptURLs.get(entry.scriptId);\n      if (!url && this.#reportAnonymousScripts) {\n        url = 'debugger://VM' + entry.scriptId;\n      }\n      const text = this.#scriptSources.get(entry.scriptId);\n      if (text === undefined || url === undefined) {\n        continue;\n      }\n      const flattenRanges = [];\n      for (const func of entry.functions) {\n        flattenRanges.push(...func.ranges);\n      }\n      const ranges = convertToDisjointRanges(flattenRanges);\n      if (!this.#includeRawScriptCoverage) {\n        coverage.push({url, ranges, text});\n      } else {\n        coverage.push({url, ranges, text, rawScriptCoverage: entry});\n      }\n    }\n    return coverage;\n  }\n}\n\n/**\n * @public\n */\nexport class CSSCoverage {\n  #client: CDPSession;\n  #enabled = false;\n  #stylesheetURLs = new Map<string, string>();\n  #stylesheetSources = new Map<string, string>();\n  #eventListeners: PuppeteerEventListener[] = [];\n  #resetOnNavigation = false;\n\n  constructor(client: CDPSession) {\n    this.#client = client;\n  }\n\n  async start(options: {resetOnNavigation?: boolean} = {}): Promise<void> {\n    assert(!this.#enabled, 'CSSCoverage is already enabled');\n    const {resetOnNavigation = true} = options;\n    this.#resetOnNavigation = resetOnNavigation;\n    this.#enabled = true;\n    this.#stylesheetURLs.clear();\n    this.#stylesheetSources.clear();\n    this.#eventListeners = [\n      addEventListener(\n        this.#client,\n        'CSS.styleSheetAdded',\n        this.#onStyleSheet.bind(this)\n      ),\n      addEventListener(\n        this.#client,\n        'Runtime.executionContextsCleared',\n        this.#onExecutionContextsCleared.bind(this)\n      ),\n    ];\n    await Promise.all([\n      this.#client.send('DOM.enable'),\n      this.#client.send('CSS.enable'),\n      this.#client.send('CSS.startRuleUsageTracking'),\n    ]);\n  }\n\n  #onExecutionContextsCleared(): void {\n    if (!this.#resetOnNavigation) {\n      return;\n    }\n    this.#stylesheetURLs.clear();\n    this.#stylesheetSources.clear();\n  }\n\n  async #onStyleSheet(event: Protocol.CSS.StyleSheetAddedEvent): Promise<void> {\n    const header = event.header;\n    // Ignore anonymous scripts\n    if (!header.sourceURL) {\n      return;\n    }\n    try {\n      const response = await this.#client.send('CSS.getStyleSheetText', {\n        styleSheetId: header.styleSheetId,\n      });\n      this.#stylesheetURLs.set(header.styleSheetId, header.sourceURL);\n      this.#stylesheetSources.set(header.styleSheetId, response.text);\n    } catch (error) {\n      // This might happen if the page has already navigated away.\n      debugError(error);\n    }\n  }\n\n  async stop(): Promise<CoverageEntry[]> {\n    assert(this.#enabled, 'CSSCoverage is not enabled');\n    this.#enabled = false;\n    const ruleTrackingResponse = await this.#client.send(\n      'CSS.stopRuleUsageTracking'\n    );\n    await Promise.all([\n      this.#client.send('CSS.disable'),\n      this.#client.send('DOM.disable'),\n    ]);\n    removeEventListeners(this.#eventListeners);\n\n    // aggregate by styleSheetId\n    const styleSheetIdToCoverage = new Map();\n    for (const entry of ruleTrackingResponse.ruleUsage) {\n      let ranges = styleSheetIdToCoverage.get(entry.styleSheetId);\n      if (!ranges) {\n        ranges = [];\n        styleSheetIdToCoverage.set(entry.styleSheetId, ranges);\n      }\n      ranges.push({\n        startOffset: entry.startOffset,\n        endOffset: entry.endOffset,\n        count: entry.used ? 1 : 0,\n      });\n    }\n\n    const coverage: CoverageEntry[] = [];\n    for (const styleSheetId of this.#stylesheetURLs.keys()) {\n      const url = this.#stylesheetURLs.get(styleSheetId);\n      assert(\n        typeof url !== 'undefined',\n        `Stylesheet URL is undefined (styleSheetId=${styleSheetId})`\n      );\n      const text = this.#stylesheetSources.get(styleSheetId);\n      assert(\n        typeof text !== 'undefined',\n        `Stylesheet text is undefined (styleSheetId=${styleSheetId})`\n      );\n      const ranges = convertToDisjointRanges(\n        styleSheetIdToCoverage.get(styleSheetId) || []\n      );\n      coverage.push({url, ranges, text});\n    }\n\n    return coverage;\n  }\n}\n\nfunction convertToDisjointRanges(\n  nestedRanges: Array<{startOffset: number; endOffset: number; count: number}>\n): Array<{start: number; end: number}> {\n  const points = [];\n  for (const range of nestedRanges) {\n    points.push({offset: range.startOffset, type: 0, range});\n    points.push({offset: range.endOffset, type: 1, range});\n  }\n  // Sort points to form a valid parenthesis sequence.\n  points.sort((a, b) => {\n    // Sort with increasing offsets.\n    if (a.offset !== b.offset) {\n      return a.offset - b.offset;\n    }\n    // All \"end\" points should go before \"start\" points.\n    if (a.type !== b.type) {\n      return b.type - a.type;\n    }\n    const aLength = a.range.endOffset - a.range.startOffset;\n    const bLength = b.range.endOffset - b.range.startOffset;\n    // For two \"start\" points, the one with longer range goes first.\n    if (a.type === 0) {\n      return bLength - aLength;\n    }\n    // For two \"end\" points, the one with shorter range goes first.\n    return aLength - bLength;\n  });\n\n  const hitCountStack = [];\n  const results: Array<{\n    start: number;\n    end: number;\n  }> = [];\n  let lastOffset = 0;\n  // Run scanning line to intersect all ranges.\n  for (const point of points) {\n    if (\n      hitCountStack.length &&\n      lastOffset < point.offset &&\n      hitCountStack[hitCountStack.length - 1]! > 0\n    ) {\n      const lastResult = results[results.length - 1];\n      if (lastResult && lastResult.end === lastOffset) {\n        lastResult.end = point.offset;\n      } else {\n        results.push({start: lastOffset, end: point.offset});\n      }\n    }\n    lastOffset = point.offset;\n    if (point.type === 0) {\n      hitCountStack.push(point.range.count);\n    } else {\n      hitCountStack.pop();\n    }\n  }\n  // Filter out empty ranges.\n  return results.filter(range => {\n    return range.end - range.start > 0;\n  });\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {Dialog as BaseDialog} from '../api/Dialog.js';\n\nimport {CDPSession} from './Connection.js';\n\n/**\n * @internal\n */\nexport class CDPDialog extends BaseDialog {\n  #client: CDPSession;\n\n  /**\n   * @internal\n   */\n  constructor(\n    client: CDPSession,\n    type: Protocol.Page.DialogType,\n    message: string,\n    defaultValue = ''\n  ) {\n    super(type, message, defaultValue);\n    this.#client = client;\n  }\n\n  /**\n   * @internal\n   */\n  override async sendCommand(options: {\n    accept: boolean;\n    text?: string;\n  }): Promise<void> {\n    await this.#client.send('Page.handleJavaScriptDialog', {\n      accept: options.accept,\n      promptText: options.text,\n    });\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {assert} from '../util/assert.js';\n\n/**\n * Dialog instances are dispatched by the {@link Page} via the `dialog` event.\n *\n * @remarks\n *\n * @example\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   page.on('dialog', async dialog => {\n *     console.log(dialog.message());\n *     await dialog.dismiss();\n *     await browser.close();\n *   });\n *   page.evaluate(() => alert('1'));\n * })();\n * ```\n *\n * @public\n */\nexport class Dialog {\n  #type: Protocol.Page.DialogType;\n  #message: string;\n  #defaultValue: string;\n  #handled = false;\n\n  /**\n   * @internal\n   */\n  constructor(\n    type: Protocol.Page.DialogType,\n    message: string,\n    defaultValue = ''\n  ) {\n    this.#type = type;\n    this.#message = message;\n    this.#defaultValue = defaultValue;\n  }\n\n  /**\n   * The type of the dialog.\n   */\n  type(): Protocol.Page.DialogType {\n    return this.#type;\n  }\n\n  /**\n   * The message displayed in the dialog.\n   */\n  message(): string {\n    return this.#message;\n  }\n\n  /**\n   * The default value of the prompt, or an empty string if the dialog\n   * is not a `prompt`.\n   */\n  defaultValue(): string {\n    return this.#defaultValue;\n  }\n\n  /**\n   * @internal\n   */\n  sendCommand(_options: {accept: boolean; text?: string}): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * A promise that resolves when the dialog has been accepted.\n   *\n   * @param promptText - optional text that will be entered in the dialog\n   * prompt. Has no effect if the dialog's type is not `prompt`.\n   *\n   */\n  async accept(promptText?: string): Promise<void> {\n    assert(!this.#handled, 'Cannot accept dialog which is already handled!');\n    this.#handled = true;\n    await this.sendCommand({\n      accept: true,\n      text: promptText,\n    });\n  }\n\n  /**\n   * A promise which will resolve once the dialog has been dismissed\n   */\n  async dismiss(): Promise<void> {\n    assert(!this.#handled, 'Cannot dismiss dialog which is already handled!');\n    this.#handled = true;\n    await this.sendCommand({\n      accept: false,\n    });\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Protocol} from 'devtools-protocol';\n\nimport {GeolocationOptions, MediaFeature} from '../api/Page.js';\nimport {assert} from '../util/assert.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport {CDPSession} from './Connection.js';\nimport {Viewport} from './PuppeteerViewport.js';\n\n/**\n * @internal\n */\nexport class EmulationManager {\n  #client: CDPSession;\n  #emulatingMobile = false;\n  #hasTouch = false;\n  #javascriptEnabled = true;\n\n  constructor(client: CDPSession) {\n    this.#client = client;\n  }\n\n  get javascriptEnabled(): boolean {\n    return this.#javascriptEnabled;\n  }\n\n  async emulateViewport(viewport: Viewport): Promise<boolean> {\n    const mobile = viewport.isMobile || false;\n    const width = viewport.width;\n    const height = viewport.height;\n    const deviceScaleFactor = viewport.deviceScaleFactor ?? 1;\n    const screenOrientation: Protocol.Emulation.ScreenOrientation =\n      viewport.isLandscape\n        ? {angle: 90, type: 'landscapePrimary'}\n        : {angle: 0, type: 'portraitPrimary'};\n    const hasTouch = viewport.hasTouch || false;\n\n    await Promise.all([\n      this.#client.send('Emulation.setDeviceMetricsOverride', {\n        mobile,\n        width,\n        height,\n        deviceScaleFactor,\n        screenOrientation,\n      }),\n      this.#client.send('Emulation.setTouchEmulationEnabled', {\n        enabled: hasTouch,\n      }),\n    ]);\n\n    const reloadNeeded =\n      this.#emulatingMobile !== mobile || this.#hasTouch !== hasTouch;\n    this.#emulatingMobile = mobile;\n    this.#hasTouch = hasTouch;\n    return reloadNeeded;\n  }\n\n  async emulateIdleState(overrides?: {\n    isUserActive: boolean;\n    isScreenUnlocked: boolean;\n  }): Promise<void> {\n    if (overrides) {\n      await this.#client.send('Emulation.setIdleOverride', {\n        isUserActive: overrides.isUserActive,\n        isScreenUnlocked: overrides.isScreenUnlocked,\n      });\n    } else {\n      await this.#client.send('Emulation.clearIdleOverride');\n    }\n  }\n\n  async emulateTimezone(timezoneId?: string): Promise<void> {\n    try {\n      await this.#client.send('Emulation.setTimezoneOverride', {\n        timezoneId: timezoneId || '',\n      });\n    } catch (error) {\n      if (isErrorLike(error) && error.message.includes('Invalid timezone')) {\n        throw new Error(`Invalid timezone ID: ${timezoneId}`);\n      }\n      throw error;\n    }\n  }\n\n  async emulateVisionDeficiency(\n    type?: Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n  ): Promise<void> {\n    const visionDeficiencies = new Set<\n      Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n    >([\n      'none',\n      'achromatopsia',\n      'blurredVision',\n      'deuteranopia',\n      'protanopia',\n      'tritanopia',\n    ]);\n    try {\n      assert(\n        !type || visionDeficiencies.has(type),\n        `Unsupported vision deficiency: ${type}`\n      );\n      await this.#client.send('Emulation.setEmulatedVisionDeficiency', {\n        type: type || 'none',\n      });\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async emulateCPUThrottling(factor: number | null): Promise<void> {\n    assert(\n      factor === null || factor >= 1,\n      'Throttling rate should be greater or equal to 1'\n    );\n    await this.#client.send('Emulation.setCPUThrottlingRate', {\n      rate: factor ?? 1,\n    });\n  }\n\n  async emulateMediaFeatures(features?: MediaFeature[]): Promise<void> {\n    if (!features) {\n      await this.#client.send('Emulation.setEmulatedMedia', {});\n    }\n    if (Array.isArray(features)) {\n      for (const mediaFeature of features) {\n        const name = mediaFeature.name;\n        assert(\n          /^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(\n            name\n          ),\n          'Unsupported media feature: ' + name\n        );\n      }\n      await this.#client.send('Emulation.setEmulatedMedia', {\n        features: features,\n      });\n    }\n  }\n\n  async emulateMediaType(type?: string): Promise<void> {\n    assert(\n      type === 'screen' ||\n        type === 'print' ||\n        (type ?? undefined) === undefined,\n      'Unsupported media type: ' + type\n    );\n    await this.#client.send('Emulation.setEmulatedMedia', {\n      media: type || '',\n    });\n  }\n\n  async setGeolocation(options: GeolocationOptions): Promise<void> {\n    const {longitude, latitude, accuracy = 0} = options;\n    if (longitude < -180 || longitude > 180) {\n      throw new Error(\n        `Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`\n      );\n    }\n    if (latitude < -90 || latitude > 90) {\n      throw new Error(\n        `Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`\n      );\n    }\n    if (accuracy < 0) {\n      throw new Error(\n        `Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`\n      );\n    }\n    await this.#client.send('Emulation.setGeolocationOverride', {\n      longitude,\n      latitude,\n      accuracy,\n    });\n  }\n\n  /**\n   * Resets default white background\n   */\n  async resetDefaultBackgroundColor(): Promise<void> {\n    await this.#client.send('Emulation.setDefaultBackgroundColorOverride');\n  }\n\n  /**\n   * Hides default white background\n   */\n  async setTransparentBackgroundColor(): Promise<void> {\n    await this.#client.send('Emulation.setDefaultBackgroundColorOverride', {\n      color: {r: 0, g: 0, b: 0, a: 0},\n    });\n  }\n\n  async setJavaScriptEnabled(enabled: boolean): Promise<void> {\n    if (this.#javascriptEnabled === enabled) {\n      return;\n    }\n    this.#javascriptEnabled = enabled;\n    await this.#client.send('Emulation.setScriptExecutionDisabled', {\n      value: !enabled,\n    });\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {ElementHandle} from '../api/ElementHandle.js';\nimport {assert} from '../util/assert.js';\n\n/**\n * File choosers let you react to the page requesting for a file.\n *\n * @remarks\n * `FileChooser` instances are returned via the {@link Page.waitForFileChooser} method.\n *\n * In browsers, only one file chooser can be opened at a time.\n * All file choosers must be accepted or canceled. Not doing so will prevent\n * subsequent file choosers from appearing.\n *\n * @example\n *\n * ```ts\n * const [fileChooser] = await Promise.all([\n *   page.waitForFileChooser(),\n *   page.click('#upload-file-button'), // some button that triggers file selection\n * ]);\n * await fileChooser.accept(['/tmp/myfile.pdf']);\n * ```\n *\n * @public\n */\nexport class FileChooser {\n  #element: ElementHandle<HTMLInputElement>;\n  #multiple: boolean;\n  #handled = false;\n\n  /**\n   * @internal\n   */\n  constructor(\n    element: ElementHandle<HTMLInputElement>,\n    event: Protocol.Page.FileChooserOpenedEvent\n  ) {\n    this.#element = element;\n    this.#multiple = event.mode !== 'selectSingle';\n  }\n\n  /**\n   * Whether file chooser allow for\n   * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#attr-multiple | multiple}\n   * file selection.\n   */\n  isMultiple(): boolean {\n    return this.#multiple;\n  }\n\n  /**\n   * Accept the file chooser request with the given file paths.\n   *\n   * @remarks This will not validate whether the file paths exists. Also, if a\n   * path is relative, then it is resolved against the\n   * {@link https://nodejs.org/api/process.html#process_process_cwd | current working directory}.\n   * For locals script connecting to remote chrome environments, paths must be\n   * absolute.\n   */\n  async accept(paths: string[]): Promise<void> {\n    assert(\n      !this.#handled,\n      'Cannot accept FileChooser which is already handled!'\n    );\n    this.#handled = true;\n    await this.#element.uploadFile(...paths);\n  }\n\n  /**\n   * Closes the file chooser without selecting any files.\n   */\n  cancel(): void {\n    assert(\n      !this.#handled,\n      'Cannot cancel FileChooser which is already handled!'\n    );\n    this.#handled = true;\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {Page} from '../api/Page.js';\nimport {assert} from '../util/assert.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport {\n  CDPSession,\n  CDPSessionEmittedEvents,\n  isTargetClosedError,\n} from './Connection.js';\nimport {DeviceRequestPromptManager} from './DeviceRequestPrompt.js';\nimport {EventEmitter} from './EventEmitter.js';\nimport {ExecutionContext} from './ExecutionContext.js';\nimport {Frame, FrameEmittedEvents} from './Frame.js';\nimport {FrameTree} from './FrameTree.js';\nimport {IsolatedWorld} from './IsolatedWorld.js';\nimport {MAIN_WORLD, PUPPETEER_WORLD} from './IsolatedWorlds.js';\nimport {NetworkManager} from './NetworkManager.js';\nimport {CDPTarget} from './Target.js';\nimport {TimeoutSettings} from './TimeoutSettings.js';\nimport {debugError, PuppeteerURL} from './util.js';\n\n/**\n * @internal\n */\nexport const UTILITY_WORLD_NAME = '__puppeteer_utility_world__';\n\n/**\n * We use symbols to prevent external parties listening to these events.\n * They are internal to Puppeteer.\n *\n * @internal\n */\nexport const FrameManagerEmittedEvents = {\n  FrameAttached: Symbol('FrameManager.FrameAttached'),\n  FrameNavigated: Symbol('FrameManager.FrameNavigated'),\n  FrameDetached: Symbol('FrameManager.FrameDetached'),\n  FrameSwapped: Symbol('FrameManager.FrameSwapped'),\n  LifecycleEvent: Symbol('FrameManager.LifecycleEvent'),\n  FrameNavigatedWithinDocument: Symbol(\n    'FrameManager.FrameNavigatedWithinDocument'\n  ),\n};\n\n/**\n * A frame manager manages the frames for a given {@link Page | page}.\n *\n * @internal\n */\nexport class FrameManager extends EventEmitter {\n  #page: Page;\n  #networkManager: NetworkManager;\n  #timeoutSettings: TimeoutSettings;\n  #contextIdToContext = new Map<string, ExecutionContext>();\n  #isolatedWorlds = new Set<string>();\n  #client: CDPSession;\n  /**\n   * @internal\n   */\n  _frameTree = new FrameTree<Frame>();\n\n  /**\n   * Set of frame IDs stored to indicate if a frame has received a\n   * frameNavigated event so that frame tree responses could be ignored as the\n   * frameNavigated event usually contains the latest information.\n   */\n  #frameNavigatedReceived = new Set<string>();\n\n  #deviceRequestPromptManagerMap = new WeakMap<\n    CDPSession,\n    DeviceRequestPromptManager\n  >();\n\n  get timeoutSettings(): TimeoutSettings {\n    return this.#timeoutSettings;\n  }\n\n  get networkManager(): NetworkManager {\n    return this.#networkManager;\n  }\n\n  get client(): CDPSession {\n    return this.#client;\n  }\n\n  constructor(\n    client: CDPSession,\n    page: Page,\n    ignoreHTTPSErrors: boolean,\n    timeoutSettings: TimeoutSettings\n  ) {\n    super();\n    this.#client = client;\n    this.#page = page;\n    this.#networkManager = new NetworkManager(client, ignoreHTTPSErrors, this);\n    this.#timeoutSettings = timeoutSettings;\n    this.setupEventListeners(this.#client);\n    client.once(CDPSessionEmittedEvents.Disconnected, () => {\n      const mainFrame = this._frameTree.getMainFrame();\n      if (mainFrame) {\n        this.#removeFramesRecursively(mainFrame);\n      }\n    });\n  }\n\n  private setupEventListeners(session: CDPSession) {\n    session.on('Page.frameAttached', event => {\n      this.#onFrameAttached(session, event.frameId, event.parentFrameId);\n    });\n    session.on('Page.frameNavigated', event => {\n      this.#frameNavigatedReceived.add(event.frame.id);\n      void this.#onFrameNavigated(event.frame);\n    });\n    session.on('Page.navigatedWithinDocument', event => {\n      this.#onFrameNavigatedWithinDocument(event.frameId, event.url);\n    });\n    session.on(\n      'Page.frameDetached',\n      (event: Protocol.Page.FrameDetachedEvent) => {\n        this.#onFrameDetached(\n          event.frameId,\n          event.reason as Protocol.Page.FrameDetachedEventReason\n        );\n      }\n    );\n    session.on('Page.frameStartedLoading', event => {\n      this.#onFrameStartedLoading(event.frameId);\n    });\n    session.on('Page.frameStoppedLoading', event => {\n      this.#onFrameStoppedLoading(event.frameId);\n    });\n    session.on('Runtime.executionContextCreated', event => {\n      this.#onExecutionContextCreated(event.context, session);\n    });\n    session.on('Runtime.executionContextDestroyed', event => {\n      this.#onExecutionContextDestroyed(event.executionContextId, session);\n    });\n    session.on('Runtime.executionContextsCleared', () => {\n      this.#onExecutionContextsCleared(session);\n    });\n    session.on('Page.lifecycleEvent', event => {\n      this.#onLifecycleEvent(event);\n    });\n  }\n\n  async initialize(client: CDPSession = this.#client): Promise<void> {\n    try {\n      const result = await Promise.all([\n        client.send('Page.enable'),\n        client.send('Page.getFrameTree'),\n      ]);\n\n      const {frameTree} = result[1];\n      this.#handleFrameTree(client, frameTree);\n      await Promise.all([\n        client.send('Page.setLifecycleEventsEnabled', {enabled: true}),\n        client.send('Runtime.enable').then(() => {\n          return this.#createIsolatedWorld(client, UTILITY_WORLD_NAME);\n        }),\n        // TODO: Network manager is not aware of OOP iframes yet.\n        client === this.#client\n          ? this.#networkManager.initialize()\n          : Promise.resolve(),\n      ]);\n    } catch (error) {\n      // The target might have been closed before the initialization finished.\n      if (isErrorLike(error) && isTargetClosedError(error)) {\n        return;\n      }\n\n      throw error;\n    }\n  }\n\n  executionContextById(\n    contextId: number,\n    session: CDPSession = this.#client\n  ): ExecutionContext {\n    const context = this.getExecutionContextById(contextId, session);\n    assert(context, 'INTERNAL ERROR: missing context with id = ' + contextId);\n    return context;\n  }\n\n  getExecutionContextById(\n    contextId: number,\n    session: CDPSession = this.#client\n  ): ExecutionContext | undefined {\n    return this.#contextIdToContext.get(`${session.id()}:${contextId}`);\n  }\n\n  page(): Page {\n    return this.#page;\n  }\n\n  mainFrame(): Frame {\n    const mainFrame = this._frameTree.getMainFrame();\n    assert(mainFrame, 'Requesting main frame too early!');\n    return mainFrame;\n  }\n\n  frames(): Frame[] {\n    return Array.from(this._frameTree.frames());\n  }\n\n  frame(frameId: string): Frame | null {\n    return this._frameTree.getById(frameId) || null;\n  }\n\n  onAttachedToTarget(target: CDPTarget): void {\n    if (target._getTargetInfo().type !== 'iframe') {\n      return;\n    }\n\n    const frame = this.frame(target._getTargetInfo().targetId);\n    if (frame) {\n      frame.updateClient(target._session()!);\n    }\n    this.setupEventListeners(target._session()!);\n    void this.initialize(target._session());\n  }\n\n  /**\n   * @internal\n   */\n  _deviceRequestPromptManager(client: CDPSession): DeviceRequestPromptManager {\n    let manager = this.#deviceRequestPromptManagerMap.get(client);\n    if (manager === undefined) {\n      manager = new DeviceRequestPromptManager(client, this.#timeoutSettings);\n      this.#deviceRequestPromptManagerMap.set(client, manager);\n    }\n    return manager;\n  }\n\n  #onLifecycleEvent(event: Protocol.Page.LifecycleEventEvent): void {\n    const frame = this.frame(event.frameId);\n    if (!frame) {\n      return;\n    }\n    frame._onLifecycleEvent(event.loaderId, event.name);\n    this.emit(FrameManagerEmittedEvents.LifecycleEvent, frame);\n    frame.emit(FrameEmittedEvents.LifecycleEvent);\n  }\n\n  #onFrameStartedLoading(frameId: string): void {\n    const frame = this.frame(frameId);\n    if (!frame) {\n      return;\n    }\n    frame._onLoadingStarted();\n  }\n\n  #onFrameStoppedLoading(frameId: string): void {\n    const frame = this.frame(frameId);\n    if (!frame) {\n      return;\n    }\n    frame._onLoadingStopped();\n    this.emit(FrameManagerEmittedEvents.LifecycleEvent, frame);\n    frame.emit(FrameEmittedEvents.LifecycleEvent);\n  }\n\n  #handleFrameTree(\n    session: CDPSession,\n    frameTree: Protocol.Page.FrameTree\n  ): void {\n    if (frameTree.frame.parentId) {\n      this.#onFrameAttached(\n        session,\n        frameTree.frame.id,\n        frameTree.frame.parentId\n      );\n    }\n    if (!this.#frameNavigatedReceived.has(frameTree.frame.id)) {\n      void this.#onFrameNavigated(frameTree.frame);\n    } else {\n      this.#frameNavigatedReceived.delete(frameTree.frame.id);\n    }\n\n    if (!frameTree.childFrames) {\n      return;\n    }\n\n    for (const child of frameTree.childFrames) {\n      this.#handleFrameTree(session, child);\n    }\n  }\n\n  #onFrameAttached(\n    session: CDPSession,\n    frameId: string,\n    parentFrameId: string\n  ): void {\n    let frame = this.frame(frameId);\n    if (frame) {\n      if (session && frame.isOOPFrame()) {\n        // If an OOP iframes becomes a normal iframe again\n        // it is first attached to the parent page before\n        // the target is removed.\n        frame.updateClient(session);\n      }\n      return;\n    }\n\n    frame = new Frame(this, frameId, parentFrameId, session);\n    this._frameTree.addFrame(frame);\n    this.emit(FrameManagerEmittedEvents.FrameAttached, frame);\n  }\n\n  async #onFrameNavigated(framePayload: Protocol.Page.Frame): Promise<void> {\n    const frameId = framePayload.id;\n    const isMainFrame = !framePayload.parentId;\n\n    let frame = this._frameTree.getById(frameId);\n\n    // Detach all child frames first.\n    if (frame) {\n      for (const child of frame.childFrames()) {\n        this.#removeFramesRecursively(child);\n      }\n    }\n\n    // Update or create main frame.\n    if (isMainFrame) {\n      if (frame) {\n        // Update frame id to retain frame identity on cross-process navigation.\n        this._frameTree.removeFrame(frame);\n        frame._id = frameId;\n      } else {\n        // Initial main frame navigation.\n        frame = new Frame(this, frameId, undefined, this.#client);\n      }\n      this._frameTree.addFrame(frame);\n    }\n\n    frame = await this._frameTree.waitForFrame(frameId);\n    frame._navigated(framePayload);\n    this.emit(FrameManagerEmittedEvents.FrameNavigated, frame);\n    frame.emit(FrameEmittedEvents.FrameNavigated);\n  }\n\n  async #createIsolatedWorld(session: CDPSession, name: string): Promise<void> {\n    const key = `${session.id()}:${name}`;\n\n    if (this.#isolatedWorlds.has(key)) {\n      return;\n    }\n\n    await session.send('Page.addScriptToEvaluateOnNewDocument', {\n      source: `//# sourceURL=${PuppeteerURL.INTERNAL_URL}`,\n      worldName: name,\n    });\n\n    await Promise.all(\n      this.frames()\n        .filter(frame => {\n          return frame._client() === session;\n        })\n        .map(frame => {\n          // Frames might be removed before we send this, so we don't want to\n          // throw an error.\n          return session\n            .send('Page.createIsolatedWorld', {\n              frameId: frame._id,\n              worldName: name,\n              grantUniveralAccess: true,\n            })\n            .catch(debugError);\n        })\n    );\n\n    this.#isolatedWorlds.add(key);\n  }\n\n  #onFrameNavigatedWithinDocument(frameId: string, url: string): void {\n    const frame = this.frame(frameId);\n    if (!frame) {\n      return;\n    }\n    frame._navigatedWithinDocument(url);\n    this.emit(FrameManagerEmittedEvents.FrameNavigatedWithinDocument, frame);\n    frame.emit(FrameEmittedEvents.FrameNavigatedWithinDocument);\n    this.emit(FrameManagerEmittedEvents.FrameNavigated, frame);\n    frame.emit(FrameEmittedEvents.FrameNavigated);\n  }\n\n  #onFrameDetached(\n    frameId: string,\n    reason: Protocol.Page.FrameDetachedEventReason\n  ): void {\n    const frame = this.frame(frameId);\n    if (reason === 'remove') {\n      // Only remove the frame if the reason for the detached event is\n      // an actual removement of the frame.\n      // For frames that become OOP iframes, the reason would be 'swap'.\n      if (frame) {\n        this.#removeFramesRecursively(frame);\n      }\n    } else if (reason === 'swap') {\n      this.emit(FrameManagerEmittedEvents.FrameSwapped, frame);\n      frame?.emit(FrameEmittedEvents.FrameSwapped);\n    }\n  }\n\n  #onExecutionContextCreated(\n    contextPayload: Protocol.Runtime.ExecutionContextDescription,\n    session: CDPSession\n  ): void {\n    const auxData = contextPayload.auxData as {frameId?: string} | undefined;\n    const frameId = auxData && auxData.frameId;\n    const frame = typeof frameId === 'string' ? this.frame(frameId) : undefined;\n    let world: IsolatedWorld | undefined;\n    if (frame) {\n      // Only care about execution contexts created for the current session.\n      if (frame._client() !== session) {\n        return;\n      }\n      if (contextPayload.auxData && contextPayload.auxData['isDefault']) {\n        world = frame.worlds[MAIN_WORLD];\n      } else if (\n        contextPayload.name === UTILITY_WORLD_NAME &&\n        !frame.worlds[PUPPETEER_WORLD].hasContext()\n      ) {\n        // In case of multiple sessions to the same target, there's a race between\n        // connections so we might end up creating multiple isolated worlds.\n        // We can use either.\n        world = frame.worlds[PUPPETEER_WORLD];\n      }\n    }\n    const context = new ExecutionContext(\n      frame?._client() || this.#client,\n      contextPayload,\n      world\n    );\n    if (world) {\n      world.setContext(context);\n    }\n    const key = `${session.id()}:${contextPayload.id}`;\n    this.#contextIdToContext.set(key, context);\n  }\n\n  #onExecutionContextDestroyed(\n    executionContextId: number,\n    session: CDPSession\n  ): void {\n    const key = `${session.id()}:${executionContextId}`;\n    const context = this.#contextIdToContext.get(key);\n    if (!context) {\n      return;\n    }\n    this.#contextIdToContext.delete(key);\n    if (context._world) {\n      context._world.clearContext();\n    }\n  }\n\n  #onExecutionContextsCleared(session: CDPSession): void {\n    for (const [key, context] of this.#contextIdToContext.entries()) {\n      // Make sure to only clear execution contexts that belong\n      // to the current session.\n      if (context._client !== session) {\n        continue;\n      }\n      if (context._world) {\n        context._world.clearContext();\n      }\n      this.#contextIdToContext.delete(key);\n    }\n  }\n\n  #removeFramesRecursively(frame: Frame): void {\n    for (const child of frame.childFrames()) {\n      this.#removeFramesRecursively(child);\n    }\n    frame._detach();\n    this._frameTree.removeFrame(frame);\n    this.emit(FrameManagerEmittedEvents.FrameDetached, frame);\n    frame.emit(FrameEmittedEvents.FrameDetached, frame);\n  }\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Protocol from 'devtools-protocol';\n\nimport {WaitTimeoutOptions} from '../api/Page.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {CDPSession} from './Connection.js';\nimport {TimeoutSettings} from './TimeoutSettings.js';\n\n/**\n * Device in a request prompt.\n *\n * @public\n */\nexport class DeviceRequestPromptDevice {\n  /**\n   * Device id during a prompt.\n   */\n  id: string;\n\n  /**\n   * Device name as it appears in a prompt.\n   */\n  name: string;\n\n  /**\n   * @internal\n   */\n  constructor(id: string, name: string) {\n    this.id = id;\n    this.name = name;\n  }\n}\n\n/**\n * Device request prompts let you respond to the page requesting for a device\n * through an API like WebBluetooth.\n *\n * @remarks\n * `DeviceRequestPrompt` instances are returned via the\n * {@link Page.waitForDevicePrompt} method.\n *\n * @example\n *\n * ```ts\n * const [deviceRequest] = Promise.all([\n *   page.waitForDevicePrompt(),\n *   page.click('#connect-bluetooth'),\n * ]);\n * await devicePrompt.select(\n *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n * );\n * ```\n *\n * @public\n */\nexport class DeviceRequestPrompt {\n  #client: CDPSession | null;\n  #timeoutSettings: TimeoutSettings;\n  #id: string;\n  #handled = false;\n  #updateDevicesHandle = this.#updateDevices.bind(this);\n  #waitForDevicePromises = new Set<{\n    filter: (device: DeviceRequestPromptDevice) => boolean;\n    promise: Deferred<DeviceRequestPromptDevice>;\n  }>();\n\n  /**\n   * Current list of selectable devices.\n   */\n  devices: DeviceRequestPromptDevice[] = [];\n\n  /**\n   * @internal\n   */\n  constructor(\n    client: CDPSession,\n    timeoutSettings: TimeoutSettings,\n    firstEvent: Protocol.DeviceAccess.DeviceRequestPromptedEvent\n  ) {\n    this.#client = client;\n    this.#timeoutSettings = timeoutSettings;\n    this.#id = firstEvent.id;\n\n    this.#client.on(\n      'DeviceAccess.deviceRequestPrompted',\n      this.#updateDevicesHandle\n    );\n    this.#client.on('Target.detachedFromTarget', () => {\n      this.#client = null;\n    });\n\n    this.#updateDevices(firstEvent);\n  }\n\n  #updateDevices(event: Protocol.DeviceAccess.DeviceRequestPromptedEvent) {\n    if (event.id !== this.#id) {\n      return;\n    }\n\n    for (const rawDevice of event.devices) {\n      if (\n        this.devices.some(device => {\n          return device.id === rawDevice.id;\n        })\n      ) {\n        continue;\n      }\n\n      const newDevice = new DeviceRequestPromptDevice(\n        rawDevice.id,\n        rawDevice.name\n      );\n      this.devices.push(newDevice);\n\n      for (const waitForDevicePromise of this.#waitForDevicePromises) {\n        if (waitForDevicePromise.filter(newDevice)) {\n          waitForDevicePromise.promise.resolve(newDevice);\n        }\n      }\n    }\n  }\n\n  /**\n   * Resolve to the first device in the prompt matching a filter.\n   */\n  async waitForDevice(\n    filter: (device: DeviceRequestPromptDevice) => boolean,\n    options: WaitTimeoutOptions = {}\n  ): Promise<DeviceRequestPromptDevice> {\n    for (const device of this.devices) {\n      if (filter(device)) {\n        return device;\n      }\n    }\n\n    const {timeout = this.#timeoutSettings.timeout()} = options;\n    const deferred = Deferred.create<DeviceRequestPromptDevice>({\n      message: `Waiting for \\`DeviceRequestPromptDevice\\` failed: ${timeout}ms exceeded`,\n      timeout,\n    });\n    const handle = {filter, promise: deferred};\n    this.#waitForDevicePromises.add(handle);\n    try {\n      return await deferred.valueOrThrow();\n    } finally {\n      this.#waitForDevicePromises.delete(handle);\n    }\n  }\n\n  /**\n   * Select a device in the prompt's list.\n   */\n  async select(device: DeviceRequestPromptDevice): Promise<void> {\n    assert(\n      this.#client !== null,\n      'Cannot select device through detached session!'\n    );\n    assert(this.devices.includes(device), 'Cannot select unknown device!');\n    assert(\n      !this.#handled,\n      'Cannot select DeviceRequestPrompt which is already handled!'\n    );\n    this.#client.off(\n      'DeviceAccess.deviceRequestPrompted',\n      this.#updateDevicesHandle\n    );\n    this.#handled = true;\n    return this.#client.send('DeviceAccess.selectPrompt', {\n      id: this.#id,\n      deviceId: device.id,\n    });\n  }\n\n  /**\n   * Cancel the prompt.\n   */\n  async cancel(): Promise<void> {\n    assert(\n      this.#client !== null,\n      'Cannot cancel prompt through detached session!'\n    );\n    assert(\n      !this.#handled,\n      'Cannot cancel DeviceRequestPrompt which is already handled!'\n    );\n    this.#client.off(\n      'DeviceAccess.deviceRequestPrompted',\n      this.#updateDevicesHandle\n    );\n    this.#handled = true;\n    return this.#client.send('DeviceAccess.cancelPrompt', {id: this.#id});\n  }\n}\n\n/**\n * @internal\n */\nexport class DeviceRequestPromptManager {\n  #client: CDPSession | null;\n  #timeoutSettings: TimeoutSettings;\n  #deviceRequestPrompDeferreds = new Set<Deferred<DeviceRequestPrompt>>();\n\n  /**\n   * @internal\n   */\n  constructor(client: CDPSession, timeoutSettings: TimeoutSettings) {\n    this.#client = client;\n    this.#timeoutSettings = timeoutSettings;\n\n    this.#client.on('DeviceAccess.deviceRequestPrompted', event => {\n      this.#onDeviceRequestPrompted(event);\n    });\n    this.#client.on('Target.detachedFromTarget', () => {\n      this.#client = null;\n    });\n  }\n\n  /**\n   * Wait for device prompt created by an action like calling WebBluetooth's\n   * requestDevice.\n   */\n  async waitForDevicePrompt(\n    options: WaitTimeoutOptions = {}\n  ): Promise<DeviceRequestPrompt> {\n    assert(\n      this.#client !== null,\n      'Cannot wait for device prompt through detached session!'\n    );\n    const needsEnable = this.#deviceRequestPrompDeferreds.size === 0;\n    let enablePromise: Promise<void> | undefined;\n    if (needsEnable) {\n      enablePromise = this.#client.send('DeviceAccess.enable');\n    }\n\n    const {timeout = this.#timeoutSettings.timeout()} = options;\n    const deferred = Deferred.create<DeviceRequestPrompt>({\n      message: `Waiting for \\`DeviceRequestPrompt\\` failed: ${timeout}ms exceeded`,\n      timeout,\n    });\n    this.#deviceRequestPrompDeferreds.add(deferred);\n\n    try {\n      const [result] = await Promise.all([\n        deferred.valueOrThrow(),\n        enablePromise,\n      ]);\n      return result;\n    } finally {\n      this.#deviceRequestPrompDeferreds.delete(deferred);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  #onDeviceRequestPrompted(\n    event: Protocol.DeviceAccess.DeviceRequestPromptedEvent\n  ) {\n    if (!this.#deviceRequestPrompDeferreds.size) {\n      return;\n    }\n\n    assert(this.#client !== null);\n    const devicePrompt = new DeviceRequestPrompt(\n      this.#client,\n      this.#timeoutSettings,\n      event\n    );\n    for (const promise of this.#deviceRequestPrompDeferreds) {\n      promise.resolve(devicePrompt);\n    }\n    this.#deviceRequestPrompDeferreds.clear();\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport type {ElementHandle} from '../api/ElementHandle.js';\nimport {JSHandle} from '../api/JSHandle.js';\nimport type PuppeteerUtil from '../injected/injected.js';\nimport {AsyncIterableUtil} from '../util/AsyncIterableUtil.js';\nimport {stringifyFunction} from '../util/Function.js';\n\nimport {ARIAQueryHandler} from './AriaQueryHandler.js';\nimport {Binding} from './Binding.js';\nimport {CDPSession} from './Connection.js';\nimport {CDPElementHandle} from './ElementHandle.js';\nimport {IsolatedWorld} from './IsolatedWorld.js';\nimport {CDPJSHandle} from './JSHandle.js';\nimport {LazyArg} from './LazyArg.js';\nimport {scriptInjector} from './ScriptInjector.js';\nimport {EvaluateFunc, HandleFor} from './types.js';\nimport {\n  PuppeteerURL,\n  createEvaluationError,\n  createJSHandle,\n  getSourcePuppeteerURLIfAvailable,\n  isString,\n  valueFromRemoteObject,\n} from './util.js';\n\nconst SOURCE_URL_REGEX = /^[\\040\\t]*\\/\\/[@#] sourceURL=\\s*(\\S*?)\\s*$/m;\n\nconst getSourceUrlComment = (url: string) => {\n  return `//# sourceURL=${url}`;\n};\n\n/**\n * Represents a context for JavaScript execution.\n *\n * @example\n * A {@link Page} can have several execution contexts:\n *\n * - Each {@link Frame} of a {@link Page | page} has a \"default\" execution\n *   context that is always created after frame is attached to DOM. This context\n *   is returned by the {@link Frame.executionContext} method.\n * - Each {@link https://developer.chrome.com/extensions | Chrome extensions}\n *   creates additional execution contexts to isolate their code.\n *\n * @remarks\n * By definition, each context is isolated from one another, however they are\n * all able to manipulate non-JavaScript resources (such as DOM).\n *\n * @remarks\n * Besides pages, execution contexts can be found in\n * {@link WebWorker | workers}.\n *\n * @internal\n */\nexport class ExecutionContext {\n  _client: CDPSession;\n  _world?: IsolatedWorld;\n  _contextId: number;\n  _contextName?: string;\n\n  constructor(\n    client: CDPSession,\n    contextPayload: Protocol.Runtime.ExecutionContextDescription,\n    world?: IsolatedWorld\n  ) {\n    this._client = client;\n    this._world = world;\n    this._contextId = contextPayload.id;\n    if (contextPayload.name) {\n      this._contextName = contextPayload.name;\n    }\n  }\n\n  #bindingsInstalled = false;\n  #puppeteerUtil?: Promise<JSHandle<PuppeteerUtil>>;\n  get puppeteerUtil(): Promise<JSHandle<PuppeteerUtil>> {\n    let promise = Promise.resolve() as Promise<unknown>;\n    if (!this.#bindingsInstalled) {\n      promise = Promise.all([\n        this.#installGlobalBinding(\n          new Binding(\n            '__ariaQuerySelector',\n            ARIAQueryHandler.queryOne as (...args: unknown[]) => unknown\n          )\n        ),\n        this.#installGlobalBinding(\n          new Binding('__ariaQuerySelectorAll', (async (\n            element: ElementHandle<Node>,\n            selector: string\n          ): Promise<JSHandle<Node[]>> => {\n            const results = ARIAQueryHandler.queryAll(element, selector);\n            return element.executionContext().evaluateHandle(\n              (...elements) => {\n                return elements;\n              },\n              ...(await AsyncIterableUtil.collect(results))\n            );\n          }) as (...args: unknown[]) => unknown)\n        ),\n      ]);\n      this.#bindingsInstalled = true;\n    }\n    scriptInjector.inject(script => {\n      if (this.#puppeteerUtil) {\n        void this.#puppeteerUtil.then(handle => {\n          void handle.dispose();\n        });\n      }\n      this.#puppeteerUtil = promise.then(() => {\n        return this.evaluateHandle(script) as Promise<JSHandle<PuppeteerUtil>>;\n      });\n    }, !this.#puppeteerUtil);\n    return this.#puppeteerUtil as Promise<JSHandle<PuppeteerUtil>>;\n  }\n\n  async #installGlobalBinding(binding: Binding) {\n    try {\n      if (this._world) {\n        this._world._bindings.set(binding.name, binding);\n        await this._world._addBindingToContext(this, binding.name);\n      }\n    } catch {\n      // If the binding cannot be added, then either the browser doesn't support\n      // bindings (e.g. Firefox) or the context is broken. Either breakage is\n      // okay, so we ignore the error.\n    }\n  }\n\n  /**\n   * Evaluates the given function.\n   *\n   * @example\n   *\n   * ```ts\n   * const executionContext = await page.mainFrame().executionContext();\n   * const result = await executionContext.evaluate(() => Promise.resolve(8 * 7))* ;\n   * console.log(result); // prints \"56\"\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function:\n   *\n   * ```ts\n   * console.log(await executionContext.evaluate('1 + 2')); // prints \"3\"\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const oneHandle = await executionContext.evaluateHandle(() => 1);\n   * const twoHandle = await executionContext.evaluateHandle(() => 2);\n   * const result = await executionContext.evaluate(\n   *   (a, b) => a + b,\n   *   oneHandle,\n   *   twoHandle\n   * );\n   * await oneHandle.dispose();\n   * await twoHandle.dispose();\n   * console.log(result); // prints '3'.\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns The result of evaluating the function. If the result is an object,\n   * a vanilla object containing the serializable properties of the result is\n   * returned.\n   */\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    return await this.#evaluate(true, pageFunction, ...args);\n  }\n\n  /**\n   * Evaluates the given function.\n   *\n   * Unlike {@link ExecutionContext.evaluate | evaluate}, this method returns a\n   * handle to the result of the function.\n   *\n   * This method may be better suited if the object cannot be serialized (e.g.\n   * `Map`) and requires further manipulation.\n   *\n   * @example\n   *\n   * ```ts\n   * const context = await page.mainFrame().executionContext();\n   * const handle: JSHandle<typeof globalThis> = await context.evaluateHandle(\n   *   () => Promise.resolve(self)\n   * );\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function.\n   *\n   * ```ts\n   * const handle: JSHandle<number> = await context.evaluateHandle('1 + 2');\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const bodyHandle: ElementHandle<HTMLBodyElement> =\n   *   await context.evaluateHandle(() => {\n   *     return document.body;\n   *   });\n   * const stringHandle: JSHandle<string> = await context.evaluateHandle(\n   *   body => body.innerHTML,\n   *   body\n   * );\n   * console.log(await stringHandle.jsonValue()); // prints body's innerHTML\n   * // Always dispose your garbage! :)\n   * await bodyHandle.dispose();\n   * await stringHandle.dispose();\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns A {@link JSHandle | handle} to the result of evaluating the\n   * function. If the result is a `Node`, then this will return an\n   * {@link ElementHandle | element handle}.\n   */\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    return this.#evaluate(false, pageFunction, ...args);\n  }\n\n  async #evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    returnByValue: true,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>>;\n  async #evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    returnByValue: false,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>>;\n  async #evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    returnByValue: boolean,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>> | Awaited<ReturnType<Func>>> {\n    const sourceUrlComment = getSourceUrlComment(\n      getSourcePuppeteerURLIfAvailable(pageFunction)?.toString() ??\n        PuppeteerURL.INTERNAL_URL\n    );\n\n    if (isString(pageFunction)) {\n      const contextId = this._contextId;\n      const expression = pageFunction;\n      const expressionWithSourceUrl = SOURCE_URL_REGEX.test(expression)\n        ? expression\n        : `${expression}\\n${sourceUrlComment}\\n`;\n\n      const {exceptionDetails, result: remoteObject} = await this._client\n        .send('Runtime.evaluate', {\n          expression: expressionWithSourceUrl,\n          contextId,\n          returnByValue,\n          awaitPromise: true,\n          userGesture: true,\n        })\n        .catch(rewriteError);\n\n      if (exceptionDetails) {\n        throw createEvaluationError(exceptionDetails);\n      }\n\n      return returnByValue\n        ? valueFromRemoteObject(remoteObject)\n        : createJSHandle(this, remoteObject);\n    }\n\n    const functionDeclaration = stringifyFunction(pageFunction);\n    const functionDeclarationWithSourceUrl = SOURCE_URL_REGEX.test(\n      functionDeclaration\n    )\n      ? functionDeclaration\n      : `${functionDeclaration}\\n${sourceUrlComment}\\n`;\n    let callFunctionOnPromise;\n    try {\n      callFunctionOnPromise = this._client.send('Runtime.callFunctionOn', {\n        functionDeclaration: functionDeclarationWithSourceUrl,\n        executionContextId: this._contextId,\n        arguments: await Promise.all(args.map(convertArgument.bind(this))),\n        returnByValue,\n        awaitPromise: true,\n        userGesture: true,\n      });\n    } catch (error) {\n      if (\n        error instanceof TypeError &&\n        error.message.startsWith('Converting circular structure to JSON')\n      ) {\n        error.message += ' Recursive objects are not allowed.';\n      }\n      throw error;\n    }\n    const {exceptionDetails, result: remoteObject} =\n      await callFunctionOnPromise.catch(rewriteError);\n    if (exceptionDetails) {\n      throw createEvaluationError(exceptionDetails);\n    }\n    return returnByValue\n      ? valueFromRemoteObject(remoteObject)\n      : createJSHandle(this, remoteObject);\n\n    async function convertArgument(\n      this: ExecutionContext,\n      arg: unknown\n    ): Promise<Protocol.Runtime.CallArgument> {\n      if (arg instanceof LazyArg) {\n        arg = await arg.get(this);\n      }\n      if (typeof arg === 'bigint') {\n        // eslint-disable-line valid-typeof\n        return {unserializableValue: `${arg.toString()}n`};\n      }\n      if (Object.is(arg, -0)) {\n        return {unserializableValue: '-0'};\n      }\n      if (Object.is(arg, Infinity)) {\n        return {unserializableValue: 'Infinity'};\n      }\n      if (Object.is(arg, -Infinity)) {\n        return {unserializableValue: '-Infinity'};\n      }\n      if (Object.is(arg, NaN)) {\n        return {unserializableValue: 'NaN'};\n      }\n      const objectHandle =\n        arg && (arg instanceof CDPJSHandle || arg instanceof CDPElementHandle)\n          ? arg\n          : null;\n      if (objectHandle) {\n        if (objectHandle.executionContext() !== this) {\n          throw new Error(\n            'JSHandles can be evaluated only in the context they were created!'\n          );\n        }\n        if (objectHandle.disposed) {\n          throw new Error('JSHandle is disposed!');\n        }\n        if (objectHandle.remoteObject().unserializableValue) {\n          return {\n            unserializableValue:\n              objectHandle.remoteObject().unserializableValue,\n          };\n        }\n        if (!objectHandle.remoteObject().objectId) {\n          return {value: objectHandle.remoteObject().value};\n        }\n        return {objectId: objectHandle.remoteObject().objectId};\n      }\n      return {value: arg};\n    }\n  }\n}\n\nconst rewriteError = (error: Error): Protocol.Runtime.EvaluateResponse => {\n  if (error.message.includes('Object reference chain is too long')) {\n    return {result: {type: 'undefined'}};\n  }\n  if (error.message.includes(\"Object couldn't be returned by value\")) {\n    return {result: {type: 'undefined'}};\n  }\n\n  if (\n    error.message.endsWith('Cannot find context with specified id') ||\n    error.message.endsWith('Inspected target navigated or closed')\n  ) {\n    throw new Error(\n      'Execution context was destroyed, most likely because of a navigation.'\n    );\n  }\n  throw error;\n};\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {ElementHandle} from '../api/ElementHandle.js';\nimport {Frame as BaseFrame} from '../api/Frame.js';\nimport {HTTPResponse} from '../api/HTTPResponse.js';\nimport {Page, WaitTimeoutOptions} from '../api/Page.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport {CDPSession} from './Connection.js';\nimport {\n  DeviceRequestPrompt,\n  DeviceRequestPromptManager,\n} from './DeviceRequestPrompt.js';\nimport {ExecutionContext} from './ExecutionContext.js';\nimport {FrameManager} from './FrameManager.js';\nimport {IsolatedWorld} from './IsolatedWorld.js';\nimport {MAIN_WORLD, PUPPETEER_WORLD} from './IsolatedWorlds.js';\nimport {LifecycleWatcher, PuppeteerLifeCycleEvent} from './LifecycleWatcher.js';\nimport {EvaluateFunc, EvaluateFuncWith, HandleFor, NodeFor} from './types.js';\nimport {withSourcePuppeteerURLIfNone} from './util.js';\n\n/**\n * We use symbols to prevent external parties listening to these events.\n * They are internal to Puppeteer.\n *\n * @internal\n */\nexport const FrameEmittedEvents = {\n  FrameNavigated: Symbol('Frame.FrameNavigated'),\n  FrameSwapped: Symbol('Frame.FrameSwapped'),\n  LifecycleEvent: Symbol('Frame.LifecycleEvent'),\n  FrameNavigatedWithinDocument: Symbol('Frame.FrameNavigatedWithinDocument'),\n  FrameDetached: Symbol('Frame.FrameDetached'),\n};\n\n/**\n * @internal\n */\nexport class Frame extends BaseFrame {\n  #url = '';\n  #detached = false;\n  #client!: CDPSession;\n\n  _frameManager: FrameManager;\n  override _id: string;\n  _loaderId = '';\n  override _hasStartedLoading = false;\n  _lifecycleEvents = new Set<string>();\n  override _parentId?: string;\n\n  constructor(\n    frameManager: FrameManager,\n    frameId: string,\n    parentFrameId: string | undefined,\n    client: CDPSession\n  ) {\n    super();\n    this._frameManager = frameManager;\n    this.#url = '';\n    this._id = frameId;\n    this._parentId = parentFrameId;\n    this.#detached = false;\n\n    this._loaderId = '';\n\n    this.updateClient(client);\n  }\n\n  updateClient(client: CDPSession): void {\n    this.#client = client;\n    this.worlds = {\n      [MAIN_WORLD]: new IsolatedWorld(this),\n      [PUPPETEER_WORLD]: new IsolatedWorld(this),\n    };\n  }\n\n  override page(): Page {\n    return this._frameManager.page();\n  }\n\n  override isOOPFrame(): boolean {\n    return this.#client !== this._frameManager.client;\n  }\n\n  override async goto(\n    url: string,\n    options: {\n      referer?: string;\n      referrerPolicy?: string;\n      timeout?: number;\n      waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n    } = {}\n  ): Promise<HTTPResponse | null> {\n    const {\n      referer = this._frameManager.networkManager.extraHTTPHeaders()['referer'],\n      referrerPolicy = this._frameManager.networkManager.extraHTTPHeaders()[\n        'referer-policy'\n      ],\n      waitUntil = ['load'],\n      timeout = this._frameManager.timeoutSettings.navigationTimeout(),\n    } = options;\n\n    let ensureNewDocumentNavigation = false;\n    const watcher = new LifecycleWatcher(\n      this._frameManager.networkManager,\n      this,\n      waitUntil,\n      timeout\n    );\n    let error = await Deferred.race([\n      navigate(\n        this.#client,\n        url,\n        referer,\n        referrerPolicy as Protocol.Page.ReferrerPolicy,\n        this._id\n      ),\n      watcher.terminationPromise(),\n    ]);\n    if (!error) {\n      error = await Deferred.race([\n        watcher.terminationPromise(),\n        ensureNewDocumentNavigation\n          ? watcher.newDocumentNavigationPromise()\n          : watcher.sameDocumentNavigationPromise(),\n      ]);\n    }\n\n    try {\n      if (error) {\n        throw error;\n      }\n      return await watcher.navigationResponse();\n    } finally {\n      watcher.dispose();\n    }\n\n    async function navigate(\n      client: CDPSession,\n      url: string,\n      referrer: string | undefined,\n      referrerPolicy: Protocol.Page.ReferrerPolicy | undefined,\n      frameId: string\n    ): Promise<Error | null> {\n      try {\n        const response = await client.send('Page.navigate', {\n          url,\n          referrer,\n          frameId,\n          referrerPolicy,\n        });\n        ensureNewDocumentNavigation = !!response.loaderId;\n        if (response.errorText === 'net::ERR_HTTP_RESPONSE_CODE_FAILURE') {\n          return null;\n        }\n        return response.errorText\n          ? new Error(`${response.errorText} at ${url}`)\n          : null;\n      } catch (error) {\n        if (isErrorLike(error)) {\n          return error;\n        }\n        throw error;\n      }\n    }\n  }\n\n  override async waitForNavigation(\n    options: {\n      timeout?: number;\n      waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n    } = {}\n  ): Promise<HTTPResponse | null> {\n    const {\n      waitUntil = ['load'],\n      timeout = this._frameManager.timeoutSettings.navigationTimeout(),\n    } = options;\n    const watcher = new LifecycleWatcher(\n      this._frameManager.networkManager,\n      this,\n      waitUntil,\n      timeout\n    );\n    const error = await Deferred.race([\n      watcher.terminationPromise(),\n      watcher.sameDocumentNavigationPromise(),\n      watcher.newDocumentNavigationPromise(),\n    ]);\n    try {\n      if (error) {\n        throw error;\n      }\n      return await watcher.navigationResponse();\n    } finally {\n      watcher.dispose();\n    }\n  }\n\n  override _client(): CDPSession {\n    return this.#client;\n  }\n\n  override executionContext(): Promise<ExecutionContext> {\n    return this.worlds[MAIN_WORLD].executionContext();\n  }\n\n  /**\n   * @internal\n   */\n  override mainRealm(): IsolatedWorld {\n    return this.worlds[MAIN_WORLD];\n  }\n\n  /**\n   * @internal\n   */\n  override isolatedRealm(): IsolatedWorld {\n    return this.worlds[PUPPETEER_WORLD];\n  }\n\n  override async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluateHandle.name,\n      pageFunction\n    );\n    return this.mainRealm().evaluateHandle(pageFunction, ...args);\n  }\n\n  override async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluate.name,\n      pageFunction\n    );\n    return this.mainRealm().evaluate(pageFunction, ...args);\n  }\n\n  override async $<Selector extends string>(\n    selector: Selector\n  ): Promise<ElementHandle<NodeFor<Selector>> | null> {\n    return this.mainRealm().$(selector);\n  }\n\n  override async $$<Selector extends string>(\n    selector: Selector\n  ): Promise<Array<ElementHandle<NodeFor<Selector>>>> {\n    return this.mainRealm().$$(selector);\n  }\n\n  override async $eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<NodeFor<Selector>, Params> = EvaluateFuncWith<\n      NodeFor<Selector>,\n      Params\n    >,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$eval.name, pageFunction);\n    return this.mainRealm().$eval(selector, pageFunction, ...args);\n  }\n\n  override async $$eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<\n      Array<NodeFor<Selector>>,\n      Params\n    > = EvaluateFuncWith<Array<NodeFor<Selector>>, Params>,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$$eval.name, pageFunction);\n    return this.mainRealm().$$eval(selector, pageFunction, ...args);\n  }\n\n  override async $x(expression: string): Promise<Array<ElementHandle<Node>>> {\n    return this.mainRealm().$x(expression);\n  }\n\n  override async content(): Promise<string> {\n    return this.isolatedRealm().content();\n  }\n\n  override async setContent(\n    html: string,\n    options: {\n      timeout?: number;\n      waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n    } = {}\n  ): Promise<void> {\n    return this.isolatedRealm().setContent(html, options);\n  }\n\n  override name(): string {\n    return this._name || '';\n  }\n\n  override url(): string {\n    return this.#url;\n  }\n\n  override parentFrame(): Frame | null {\n    return this._frameManager._frameTree.parentFrame(this._id) || null;\n  }\n\n  override childFrames(): Frame[] {\n    return this._frameManager._frameTree.childFrames(this._id);\n  }\n\n  override isDetached(): boolean {\n    return this.#detached;\n  }\n\n  override async title(): Promise<string> {\n    return this.isolatedRealm().title();\n  }\n\n  _deviceRequestPromptManager(): DeviceRequestPromptManager {\n    if (this.isOOPFrame()) {\n      return this._frameManager._deviceRequestPromptManager(this.#client);\n    }\n    const parentFrame = this.parentFrame();\n    assert(parentFrame !== null);\n    return parentFrame._deviceRequestPromptManager();\n  }\n\n  override waitForDevicePrompt(\n    options: WaitTimeoutOptions = {}\n  ): Promise<DeviceRequestPrompt> {\n    return this._deviceRequestPromptManager().waitForDevicePrompt(options);\n  }\n\n  _navigated(framePayload: Protocol.Page.Frame): void {\n    this._name = framePayload.name;\n    this.#url = `${framePayload.url}${framePayload.urlFragment || ''}`;\n  }\n\n  _navigatedWithinDocument(url: string): void {\n    this.#url = url;\n  }\n\n  _onLifecycleEvent(loaderId: string, name: string): void {\n    if (name === 'init') {\n      this._loaderId = loaderId;\n      this._lifecycleEvents.clear();\n    }\n    this._lifecycleEvents.add(name);\n  }\n\n  _onLoadingStopped(): void {\n    this._lifecycleEvents.add('DOMContentLoaded');\n    this._lifecycleEvents.add('load');\n  }\n\n  _onLoadingStarted(): void {\n    this._hasStartedLoading = true;\n  }\n\n  _detach(): void {\n    this.#detached = true;\n    this.worlds[MAIN_WORLD]._detach();\n    this.worlds[PUPPETEER_WORLD]._detach();\n  }\n}\n", "/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ClickOptions, ElementHandle} from '../api/ElementHandle.js';\nimport {HTTPResponse} from '../api/HTTPResponse.js';\nimport {Page, WaitTimeoutOptions} from '../api/Page.js';\nimport {CDPSession} from '../common/Connection.js';\nimport {DeviceRequestPrompt} from '../common/DeviceRequestPrompt.js';\nimport {EventEmitter} from '../common/EventEmitter.js';\nimport {ExecutionContext} from '../common/ExecutionContext.js';\nimport {getQueryHandlerAndSelector} from '../common/GetQueryHandler.js';\nimport {\n  IsolatedWorldChart,\n  WaitForSelectorOptions,\n} from '../common/IsolatedWorld.js';\nimport {LazyArg} from '../common/LazyArg.js';\nimport {PuppeteerLifeCycleEvent} from '../common/LifecycleWatcher.js';\nimport {\n  Awaitable,\n  EvaluateFunc,\n  EvaluateFuncWith,\n  HandleFor,\n  InnerLazyParams,\n  NodeFor,\n} from '../common/types.js';\nimport {importFSPromises} from '../common/util.js';\nimport {TaskManager} from '../common/WaitTask.js';\n\nimport {KeyboardTypeOptions} from './Input.js';\nimport {JSHandle} from './JSHandle.js';\nimport {Locator, FunctionLocator, NodeLocator} from './locators/locators.js';\n\n/**\n * @internal\n */\nexport interface Realm {\n  taskManager: TaskManager;\n  waitForFunction<\n    Params extends unknown[],\n    Func extends EvaluateFunc<InnerLazyParams<Params>> = EvaluateFunc<\n      InnerLazyParams<Params>\n    >,\n  >(\n    pageFunction: Func | string,\n    options: {\n      polling?: 'raf' | 'mutation' | number;\n      timeout?: number;\n      root?: ElementHandle<Node>;\n      signal?: AbortSignal;\n    },\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>>;\n  adoptHandle<T extends JSHandle<Node>>(handle: T): Promise<T>;\n  transferHandle<T extends JSHandle<Node>>(handle: T): Promise<T>;\n  evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>>;\n  evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>>;\n  click(selector: string, options: Readonly<ClickOptions>): Promise<void>;\n  focus(selector: string): Promise<void>;\n  hover(selector: string): Promise<void>;\n  select(selector: string, ...values: string[]): Promise<string[]>;\n  tap(selector: string): Promise<void>;\n  type(\n    selector: string,\n    text: string,\n    options?: Readonly<KeyboardTypeOptions>\n  ): Promise<void>;\n}\n\n/**\n * @public\n */\nexport interface FrameWaitForFunctionOptions {\n  /**\n   * An interval at which the `pageFunction` is executed, defaults to `raf`. If\n   * `polling` is a number, then it is treated as an interval in milliseconds at\n   * which the function would be executed. If `polling` is a string, then it can\n   * be one of the following values:\n   *\n   * - `raf` - to constantly execute `pageFunction` in `requestAnimationFrame`\n   *   callback. This is the tightest polling mode which is suitable to observe\n   *   styling changes.\n   *\n   * - `mutation` - to execute `pageFunction` on every DOM mutation.\n   */\n  polling?: 'raf' | 'mutation' | number;\n  /**\n   * Maximum time to wait in milliseconds. Defaults to `30000` (30 seconds).\n   * Pass `0` to disable the timeout. Puppeteer's default timeout can be changed\n   * using {@link Page.setDefaultTimeout}.\n   */\n  timeout?: number;\n  /**\n   * A signal object that allows you to cancel a waitForFunction call.\n   */\n  signal?: AbortSignal;\n}\n\n/**\n * @public\n */\nexport interface FrameAddScriptTagOptions {\n  /**\n   * URL of the script to be added.\n   */\n  url?: string;\n  /**\n   * Path to a JavaScript file to be injected into the frame.\n   *\n   * @remarks\n   * If `path` is a relative path, it is resolved relative to the current\n   * working directory (`process.cwd()` in Node.js).\n   */\n  path?: string;\n  /**\n   * JavaScript to be injected into the frame.\n   */\n  content?: string;\n  /**\n   * Sets the `type` of the script. Use `module` in order to load an ES2015 module.\n   */\n  type?: string;\n  /**\n   * Sets the `id` of the script.\n   */\n  id?: string;\n}\n\n/**\n * @public\n */\nexport interface FrameAddStyleTagOptions {\n  /**\n   * the URL of the CSS file to be added.\n   */\n  url?: string;\n  /**\n   * The path to a CSS file to be injected into the frame.\n   * @remarks\n   * If `path` is a relative path, it is resolved relative to the current\n   * working directory (`process.cwd()` in Node.js).\n   */\n  path?: string;\n  /**\n   * Raw CSS content to be injected into the frame.\n   */\n  content?: string;\n}\n\n/**\n * Represents a DOM frame.\n *\n * To understand frames, you can think of frames as `<iframe>` elements. Just\n * like iframes, frames can be nested, and when JavaScript is executed in a\n * frame, the JavaScript does not effect frames inside the ambient frame the\n * JavaScript executes in.\n *\n * @example\n * At any point in time, {@link Page | pages} expose their current frame\n * tree via the {@link Page.mainFrame} and {@link Frame.childFrames} methods.\n *\n * @example\n * An example of dumping frame tree:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://www.google.com/chrome/browser/canary.html');\n *   dumpFrameTree(page.mainFrame(), '');\n *   await browser.close();\n *\n *   function dumpFrameTree(frame, indent) {\n *     console.log(indent + frame.url());\n *     for (const child of frame.childFrames()) {\n *       dumpFrameTree(child, indent + '  ');\n *     }\n *   }\n * })();\n * ```\n *\n * @example\n * An example of getting text from an iframe element:\n *\n * ```ts\n * const frame = page.frames().find(frame => frame.name() === 'myframe');\n * const text = await frame.$eval('.selector', element => element.textContent);\n * console.log(text);\n * ```\n *\n * @remarks\n * Frame lifecycles are controlled by three events that are all dispatched on\n * the parent {@link Frame.page | page}:\n *\n * - {@link PageEmittedEvents.FrameAttached}\n * - {@link PageEmittedEvents.FrameNavigated}\n * - {@link PageEmittedEvents.FrameDetached}\n *\n * @public\n */\nexport class Frame extends EventEmitter {\n  /**\n   * @internal\n   */\n  _id!: string;\n  /**\n   * @internal\n   */\n  _parentId?: string;\n\n  /**\n   * @internal\n   */\n  worlds!: IsolatedWorldChart;\n\n  /**\n   * @internal\n   */\n  _name?: string;\n\n  /**\n   * @internal\n   */\n  _hasStartedLoading = false;\n\n  /**\n   * @internal\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * The page associated with the frame.\n   */\n  page(): Page {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Is `true` if the frame is an out-of-process (OOP) frame. Otherwise,\n   * `false`.\n   */\n  isOOPFrame(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Navigates a frame to the given url.\n   *\n   * @remarks\n   * Navigation to `about:blank` or navigation to the same URL with a different\n   * hash will succeed and return `null`.\n   *\n   * :::warning\n   *\n   * Headless mode doesn't support navigation to a PDF document. See the {@link\n   * https://bugs.chromium.org/p/chromium/issues/detail?id=761295 | upstream\n   * issue}.\n   *\n   * :::\n   *\n   * @param url - the URL to navigate the frame to. This should include the\n   * scheme, e.g. `https://`.\n   * @param options - navigation options. `waitUntil` is useful to define when\n   * the navigation should be considered successful - see the docs for\n   * {@link PuppeteerLifeCycleEvent} for more details.\n   *\n   * @returns A promise which resolves to the main resource response. In case of\n   * multiple redirects, the navigation will resolve with the response of the\n   * last redirect.\n   * @throws This method will throw an error if:\n   *\n   * - there's an SSL error (e.g. in case of self-signed certificates).\n   * - target URL is invalid.\n   * - the `timeout` is exceeded during navigation.\n   * - the remote server does not respond or is unreachable.\n   * - the main resource failed to load.\n   *\n   * This method will not throw an error when any valid HTTP status code is\n   * returned by the remote server, including 404 \"Not Found\" and 500 \"Internal\n   * Server Error\". The status code for such responses can be retrieved by\n   * calling {@link HTTPResponse.status}.\n   */\n  async goto(\n    url: string,\n    options?: {\n      referer?: string;\n      referrerPolicy?: string;\n      timeout?: number;\n      waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n    }\n  ): Promise<HTTPResponse | null>;\n  async goto(): Promise<HTTPResponse | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Waits for the frame to navigate. It is useful for when you run code which\n   * will indirectly cause the frame to navigate.\n   *\n   * Usage of the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/History_API | History API}\n   * to change the URL is considered a navigation.\n   *\n   * @example\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   // The navigation promise resolves after navigation has finished\n   *   frame.waitForNavigation(),\n   *   // Clicking the link will indirectly cause a navigation\n   *   frame.click('a.my-link'),\n   * ]);\n   * ```\n   *\n   * @param options - options to configure when the navigation is consided\n   * finished.\n   * @returns a promise that resolves when the frame navigates to a new URL.\n   */\n  async waitForNavigation(options?: {\n    timeout?: number;\n    waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n  }): Promise<HTTPResponse | null>;\n  async waitForNavigation(): Promise<HTTPResponse | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  _client(): CDPSession {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  executionContext(): Promise<ExecutionContext> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  mainRealm(): Realm {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @internal\n   */\n  isolatedRealm(): Realm {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Behaves identically to {@link Page.evaluateHandle} except it's run within\n   * the context of this frame.\n   *\n   * @see {@link Page.evaluateHandle} for details.\n   */\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>>;\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Behaves identically to {@link Page.evaluate} except it's run within the\n   * the context of this frame.\n   *\n   * @see {@link Page.evaluate} for details.\n   */\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>>;\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(): Promise<Awaited<ReturnType<Func>>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Creates a locator for the provided selector. See {@link Locator} for\n   * details and supported actions.\n   *\n   * @remarks\n   * Locators API is experimental and we will not follow semver for breaking\n   * change in the Locators API.\n   */\n  locator<Selector extends string>(\n    selector: Selector\n  ): Locator<NodeFor<Selector>>;\n\n  /**\n   * Creates a locator for the provided function. See {@link Locator} for\n   * details and supported actions.\n   *\n   * @remarks\n   * Locators API is experimental and we will not follow semver for breaking\n   * change in the Locators API.\n   */\n  locator<Ret>(func: () => Awaitable<Ret>): Locator<Ret>;\n  locator<Selector extends string, Ret>(\n    selectorOrFunc: Selector | (() => Awaitable<Ret>)\n  ): Locator<NodeFor<Selector>> | Locator<Ret> {\n    if (typeof selectorOrFunc === 'string') {\n      return NodeLocator.create(this, selectorOrFunc);\n    } else {\n      return FunctionLocator.create(this, selectorOrFunc);\n    }\n  }\n  /**\n   * Queries the frame for an element matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns A {@link ElementHandle | element handle} to the first element\n   * matching the given selector. Otherwise, `null`.\n   */\n  async $<Selector extends string>(\n    selector: Selector\n  ): Promise<ElementHandle<NodeFor<Selector>> | null>;\n  async $<Selector extends string>(): Promise<ElementHandle<\n    NodeFor<Selector>\n  > | null> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Queries the frame for all elements matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns An array of {@link ElementHandle | element handles} that point to\n   * elements matching the given selector.\n   */\n  async $$<Selector extends string>(\n    selector: Selector\n  ): Promise<Array<ElementHandle<NodeFor<Selector>>>>;\n  async $$<Selector extends string>(): Promise<\n    Array<ElementHandle<NodeFor<Selector>>>\n  > {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Runs the given function on the first element matching the given selector in\n   * the frame.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   *\n   * ```ts\n   * const searchValue = await frame.$eval('#search', el => el.value);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in the frame's context.\n   * The first element matching the selector will be passed to the function as\n   * its first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<NodeFor<Selector>, Params> = EvaluateFuncWith<\n      NodeFor<Selector>,\n      Params\n    >,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>>;\n  async $eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<NodeFor<Selector>, Params> = EvaluateFuncWith<\n      NodeFor<Selector>,\n      Params\n    >,\n  >(): Promise<Awaited<ReturnType<Func>>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Runs the given function on an array of elements matching the given selector\n   * in the frame.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   *\n   * ```js\n   * const divsCounts = await frame.$$eval('div', divs => divs.length);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in the frame's context.\n   * An array of elements matching the given selector will be passed to the\n   * function as its first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $$eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<\n      Array<NodeFor<Selector>>,\n      Params\n    > = EvaluateFuncWith<Array<NodeFor<Selector>>, Params>,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>>;\n  async $$eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<\n      Array<NodeFor<Selector>>,\n      Params\n    > = EvaluateFuncWith<Array<NodeFor<Selector>>, Params>,\n  >(): Promise<Awaited<ReturnType<Func>>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @deprecated Use {@link Frame.$$} with the `xpath` prefix.\n   *\n   * Example: `await frame.$$('xpath/' + xpathExpression)`\n   *\n   * This method evaluates the given XPath expression and returns the results.\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   * @param expression - the XPath expression to evaluate.\n   */\n  async $x(expression: string): Promise<Array<ElementHandle<Node>>>;\n  async $x(): Promise<Array<ElementHandle<Node>>> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Waits for an element matching the given selector to appear in the frame.\n   *\n   * This method works across navigations.\n   *\n   * @example\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   let currentURL;\n   *   page\n   *     .mainFrame()\n   *     .waitForSelector('img')\n   *     .then(() => console.log('First URL with image: ' + currentURL));\n   *\n   *   for (currentURL of [\n   *     'https://example.com',\n   *     'https://google.com',\n   *     'https://bbc.com',\n   *   ]) {\n   *     await page.goto(currentURL);\n   *   }\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param selector - The selector to query and wait for.\n   * @param options - Options for customizing waiting behavior.\n   * @returns An element matching the given selector.\n   * @throws Throws if an element matching the given selector doesn't appear.\n   */\n  async waitForSelector<Selector extends string>(\n    selector: Selector,\n    options: WaitForSelectorOptions = {}\n  ): Promise<ElementHandle<NodeFor<Selector>> | null> {\n    const {updatedSelector, QueryHandler} =\n      getQueryHandlerAndSelector(selector);\n    return (await QueryHandler.waitFor(\n      this,\n      updatedSelector,\n      options\n    )) as ElementHandle<NodeFor<Selector>> | null;\n  }\n\n  /**\n   * @deprecated Use {@link Frame.waitForSelector} with the `xpath` prefix.\n   *\n   * Example: `await frame.waitForSelector('xpath/' + xpathExpression)`\n   *\n   * The method evaluates the XPath expression relative to the Frame.\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   *\n   * Wait for the `xpath` to appear in page. If at the moment of calling the\n   * method the `xpath` already exists, the method will return immediately. If\n   * the xpath doesn't appear after the `timeout` milliseconds of waiting, the\n   * function will throw.\n   *\n   * For a code example, see the example for {@link Frame.waitForSelector}. That\n   * function behaves identically other than taking a CSS selector rather than\n   * an XPath.\n   *\n   * @param xpath - the XPath expression to wait for.\n   * @param options - options to configure the visibility of the element and how\n   * long to wait before timing out.\n   */\n  async waitForXPath(\n    xpath: string,\n    options: WaitForSelectorOptions = {}\n  ): Promise<ElementHandle<Node> | null> {\n    if (xpath.startsWith('//')) {\n      xpath = `.${xpath}`;\n    }\n    return this.waitForSelector(`xpath/${xpath}`, options);\n  }\n\n  /**\n   * @example\n   * The `waitForFunction` can be used to observe viewport size change:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   * .  const browser = await puppeteer.launch();\n   * .  const page = await browser.newPage();\n   * .  const watchDog = page.mainFrame().waitForFunction('window.innerWidth < 100');\n   * .  page.setViewport({width: 50, height: 50});\n   * .  await watchDog;\n   * .  await browser.close();\n   * })();\n   * ```\n   *\n   * To pass arguments from Node.js to the predicate of `page.waitForFunction` function:\n   *\n   * ```ts\n   * const selector = '.foo';\n   * await frame.waitForFunction(\n   *   selector => !!document.querySelector(selector),\n   *   {}, // empty options object\n   *   selector\n   * );\n   * ```\n   *\n   * @param pageFunction - the function to evaluate in the frame context.\n   * @param options - options to configure the polling method and timeout.\n   * @param args - arguments to pass to the `pageFunction`.\n   * @returns the promise which resolve when the `pageFunction` returns a truthy value.\n   */\n  waitForFunction<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    options: FrameWaitForFunctionOptions = {},\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    return this.mainRealm().waitForFunction(\n      pageFunction,\n      options,\n      ...args\n    ) as Promise<HandleFor<Awaited<ReturnType<Func>>>>;\n  }\n  /**\n   * The full HTML contents of the frame, including the DOCTYPE.\n   */\n  async content(): Promise<string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Set the content of the frame.\n   *\n   * @param html - HTML markup to assign to the page.\n   * @param options - Options to configure how long before timing out and at\n   * what point to consider the content setting successful.\n   */\n  async setContent(\n    html: string,\n    options?: {\n      timeout?: number;\n      waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n    }\n  ): Promise<void>;\n  async setContent(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The frame's `name` attribute as specified in the tag.\n   *\n   * @remarks\n   * If the name is empty, it returns the `id` attribute instead.\n   *\n   * @remarks\n   * This value is calculated once when the frame is created, and will not\n   * update if the attribute is changed later.\n   */\n  name(): string {\n    return this._name || '';\n  }\n\n  /**\n   * The frame's URL.\n   */\n  url(): string {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * The parent frame, if any. Detached and main frames return `null`.\n   */\n  parentFrame(): Frame | null {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * An array of child frames.\n   */\n  childFrames(): Frame[] {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Is`true` if the frame has been detached. Otherwise, `false`.\n   */\n  isDetached(): boolean {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Adds a `<script>` tag into the page with the desired url or content.\n   *\n   * @param options - Options for the script.\n   * @returns An {@link ElementHandle | element handle} to the injected\n   * `<script>` element.\n   */\n  async addScriptTag(\n    options: FrameAddScriptTagOptions\n  ): Promise<ElementHandle<HTMLScriptElement>> {\n    let {content = '', type} = options;\n    const {path} = options;\n    if (+!!options.url + +!!path + +!!content !== 1) {\n      throw new Error(\n        'Exactly one of `url`, `path`, or `content` must be specified.'\n      );\n    }\n\n    if (path) {\n      const fs = await importFSPromises();\n      content = await fs.readFile(path, 'utf8');\n      content += `//# sourceURL=${path.replace(/\\n/g, '')}`;\n    }\n\n    type = type ?? 'text/javascript';\n\n    return this.mainRealm().transferHandle(\n      await this.isolatedRealm().evaluateHandle(\n        async ({Deferred}, {url, id, type, content}) => {\n          const deferred = Deferred.create<void>();\n          const script = document.createElement('script');\n          script.type = type;\n          script.text = content;\n          if (url) {\n            script.src = url;\n            script.addEventListener(\n              'load',\n              () => {\n                return deferred.resolve();\n              },\n              {once: true}\n            );\n            script.addEventListener(\n              'error',\n              event => {\n                deferred.reject(\n                  new Error(event.message ?? 'Could not load script')\n                );\n              },\n              {once: true}\n            );\n          } else {\n            deferred.resolve();\n          }\n          if (id) {\n            script.id = id;\n          }\n          document.head.appendChild(script);\n          await deferred.valueOrThrow();\n          return script;\n        },\n        LazyArg.create(context => {\n          return context.puppeteerUtil;\n        }),\n        {...options, type, content}\n      )\n    );\n  }\n\n  /**\n   * Adds a `<link rel=\"stylesheet\">` tag into the page with the desired URL or\n   * a `<style type=\"text/css\">` tag with the content.\n   *\n   * @returns An {@link ElementHandle | element handle} to the loaded `<link>`\n   * or `<style>` element.\n   */\n  async addStyleTag(\n    options: Omit<FrameAddStyleTagOptions, 'url'>\n  ): Promise<ElementHandle<HTMLStyleElement>>;\n  async addStyleTag(\n    options: FrameAddStyleTagOptions\n  ): Promise<ElementHandle<HTMLLinkElement>>;\n  async addStyleTag(\n    options: FrameAddStyleTagOptions\n  ): Promise<ElementHandle<HTMLStyleElement | HTMLLinkElement>> {\n    let {content = ''} = options;\n    const {path} = options;\n    if (+!!options.url + +!!path + +!!content !== 1) {\n      throw new Error(\n        'Exactly one of `url`, `path`, or `content` must be specified.'\n      );\n    }\n\n    if (path) {\n      const fs = await importFSPromises();\n\n      content = await fs.readFile(path, 'utf8');\n      content += '/*# sourceURL=' + path.replace(/\\n/g, '') + '*/';\n      options.content = content;\n    }\n\n    return this.mainRealm().transferHandle(\n      await this.isolatedRealm().evaluateHandle(\n        async ({Deferred}, {url, content}) => {\n          const deferred = Deferred.create<void>();\n          let element: HTMLStyleElement | HTMLLinkElement;\n          if (!url) {\n            element = document.createElement('style');\n            element.appendChild(document.createTextNode(content!));\n          } else {\n            const link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.href = url;\n            element = link;\n          }\n          element.addEventListener(\n            'load',\n            () => {\n              deferred.resolve();\n            },\n            {once: true}\n          );\n          element.addEventListener(\n            'error',\n            event => {\n              deferred.reject(\n                new Error(\n                  (event as ErrorEvent).message ?? 'Could not load style'\n                )\n              );\n            },\n            {once: true}\n          );\n          document.head.appendChild(element);\n          await deferred.valueOrThrow();\n          return element;\n        },\n        LazyArg.create(context => {\n          return context.puppeteerUtil;\n        }),\n        options\n      )\n    );\n  }\n\n  /**\n   * Clicks the first element found that matches `selector`.\n   *\n   * @remarks\n   * If `click()` triggers a navigation event and there's a separate\n   * `page.waitForNavigation()` promise to be resolved, you may end up with a\n   * race condition that yields unexpected results. The correct pattern for\n   * click and wait for navigation is the following:\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   page.waitForNavigation(waitOptions),\n   *   frame.click(selector, clickOptions),\n   * ]);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   */\n  click(selector: string, options: Readonly<ClickOptions> = {}): Promise<void> {\n    return this.isolatedRealm().click(selector, options);\n  }\n\n  /**\n   * Focuses the first element that matches the `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  async focus(selector: string): Promise<void> {\n    return this.isolatedRealm().focus(selector);\n  }\n\n  /**\n   * Hovers the pointer over the center of the first element that matches the\n   * `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  hover(selector: string): Promise<void> {\n    return this.isolatedRealm().hover(selector);\n  }\n\n  /**\n   * Selects a set of value on the first `<select>` element that matches the\n   * `selector`.\n   *\n   * @example\n   *\n   * ```ts\n   * frame.select('select#colors', 'blue'); // single selection\n   * frame.select('select#colors', 'red', 'green', 'blue'); // multiple selections\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param values - The array of values to select. If the `<select>` has the\n   * `multiple` attribute, all values are considered, otherwise only the first\n   * one is taken into account.\n   * @returns the list of values that were successfully selected.\n   * @throws Throws if there's no `<select>` matching `selector`.\n   */\n  select(selector: string, ...values: string[]): Promise<string[]> {\n    return this.isolatedRealm().select(selector, ...values);\n  }\n\n  /**\n   * Taps the first element that matches the `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  tap(selector: string): Promise<void> {\n    return this.isolatedRealm().tap(selector);\n  }\n\n  /**\n   * Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character\n   * in the text.\n   *\n   * @remarks\n   * To press a special key, like `Control` or `ArrowDown`, use\n   * {@link Keyboard.press}.\n   *\n   * @example\n   *\n   * ```ts\n   * await frame.type('#mytextarea', 'Hello'); // Types instantly\n   * await frame.type('#mytextarea', 'World', {delay: 100}); // Types slower, like a user\n   * ```\n   *\n   * @param selector - the selector for the element to type into. If there are\n   * multiple the first will be used.\n   * @param text - text to type into the element\n   * @param options - takes one option, `delay`, which sets the time to wait\n   * between key presses in milliseconds. Defaults to `0`.\n   */\n  type(\n    selector: string,\n    text: string,\n    options?: Readonly<KeyboardTypeOptions>\n  ): Promise<void> {\n    return this.isolatedRealm().type(selector, text, options);\n  }\n\n  /**\n   * @deprecated Replace with `new Promise(r => setTimeout(r, milliseconds));`.\n   *\n   * Causes your script to wait for the given number of milliseconds.\n   *\n   * @remarks\n   * It's generally recommended to not wait for a number of seconds, but instead\n   * use {@link Frame.waitForSelector}, {@link Frame.waitForXPath} or\n   * {@link Frame.waitForFunction} to wait for exactly the conditions you want.\n   *\n   * @example\n   *\n   * Wait for 1 second:\n   *\n   * ```ts\n   * await frame.waitForTimeout(1000);\n   * ```\n   *\n   * @param milliseconds - the number of milliseconds to wait.\n   */\n  waitForTimeout(milliseconds: number): Promise<void> {\n    return new Promise(resolve => {\n      setTimeout(resolve, milliseconds);\n    });\n  }\n\n  /**\n   * The frame's title.\n   */\n  async title(): Promise<string> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * This method is typically coupled with an action that triggers a device\n   * request from an api such as WebBluetooth.\n   *\n   * :::caution\n   *\n   * This must be called before the device request is made. It will not return a\n   * currently active device prompt.\n   *\n   * :::\n   *\n   * @example\n   *\n   * ```ts\n   * const [devicePrompt] = Promise.all([\n   *   frame.waitForDevicePrompt(),\n   *   frame.click('#connect-bluetooth'),\n   * ]);\n   * await devicePrompt.select(\n   *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n   * );\n   * ```\n   */\n  waitForDevicePrompt(\n    options?: WaitTimeoutOptions\n  ): Promise<DeviceRequestPrompt>;\n  waitForDevicePrompt(): Promise<DeviceRequestPrompt> {\n    throw new Error('Not implemented');\n  }\n}\n", "/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport type {ClickOptions, ElementHandle} from '../api/ElementHandle.js';\nimport {Realm} from '../api/Frame.js';\nimport {KeyboardTypeOptions} from '../api/Input.js';\nimport {JSHandle} from '../api/JSHandle.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {Binding} from './Binding.js';\nimport {CDPSession} from './Connection.js';\nimport {ExecutionContext} from './ExecutionContext.js';\nimport {Frame} from './Frame.js';\nimport {FrameManager} from './FrameManager.js';\nimport {MAIN_WORLD, PUPPETEER_WORLD} from './IsolatedWorlds.js';\nimport {LifecycleWatcher, PuppeteerLifeCycleEvent} from './LifecycleWatcher.js';\nimport {TimeoutSettings} from './TimeoutSettings.js';\nimport {\n  BindingPayload,\n  EvaluateFunc,\n  EvaluateFuncWith,\n  HandleFor,\n  InnerLazyParams,\n  NodeFor,\n} from './types.js';\nimport {\n  addPageBinding,\n  createJSHandle,\n  debugError,\n  getPageContent,\n  setPageContent,\n  withSourcePuppeteerURLIfNone,\n} from './util.js';\nimport {TaskManager, WaitTask} from './WaitTask.js';\n\n/**\n * @public\n */\nexport interface WaitForSelectorOptions {\n  /**\n   * Wait for the selected element to be present in DOM and to be visible, i.e.\n   * to not have `display: none` or `visibility: hidden` CSS properties.\n   *\n   * @defaultValue `false`\n   */\n  visible?: boolean;\n  /**\n   * Wait for the selected element to not be found in the DOM or to be hidden,\n   * i.e. have `display: none` or `visibility: hidden` CSS properties.\n   *\n   * @defaultValue `false`\n   */\n  hidden?: boolean;\n  /**\n   * Maximum time to wait in milliseconds. Pass `0` to disable timeout.\n   *\n   * The default value can be changed by using {@link Page.setDefaultTimeout}\n   *\n   * @defaultValue `30_000` (30 seconds)\n   */\n  timeout?: number;\n  /**\n   * A signal object that allows you to cancel a waitForSelector call.\n   */\n  signal?: AbortSignal;\n}\n\n/**\n * @internal\n */\nexport interface PageBinding {\n  name: string;\n  pptrFunction: Function;\n}\n\n/**\n * @internal\n */\nexport interface IsolatedWorldChart {\n  [key: string]: IsolatedWorld;\n  [MAIN_WORLD]: IsolatedWorld;\n  [PUPPETEER_WORLD]: IsolatedWorld;\n}\n\n/**\n * @internal\n */\nexport class IsolatedWorld implements Realm {\n  #frame: Frame;\n  #document?: ElementHandle<Document>;\n  #context = Deferred.create<ExecutionContext>();\n  #detached = false;\n\n  // Set of bindings that have been registered in the current context.\n  #contextBindings = new Set<string>();\n\n  // Contains mapping from functions that should be bound to Puppeteer functions.\n  #bindings = new Map<string, Binding>();\n  #taskManager = new TaskManager();\n\n  get taskManager(): TaskManager {\n    return this.#taskManager;\n  }\n\n  get _bindings(): Map<string, Binding> {\n    return this.#bindings;\n  }\n\n  constructor(frame: Frame) {\n    // Keep own reference to client because it might differ from the FrameManager's\n    // client for OOP iframes.\n    this.#frame = frame;\n    this.#client.on('Runtime.bindingCalled', this.#onBindingCalled);\n  }\n\n  get #client(): CDPSession {\n    return this.#frame._client();\n  }\n\n  get #frameManager(): FrameManager {\n    return this.#frame._frameManager;\n  }\n\n  get #timeoutSettings(): TimeoutSettings {\n    return this.#frameManager.timeoutSettings;\n  }\n\n  frame(): Frame {\n    return this.#frame;\n  }\n\n  clearContext(): void {\n    this.#document = undefined;\n    this.#context = Deferred.create();\n  }\n\n  setContext(context: ExecutionContext): void {\n    this.#contextBindings.clear();\n    this.#context.resolve(context);\n    void this.#taskManager.rerunAll();\n  }\n\n  hasContext(): boolean {\n    return this.#context.resolved();\n  }\n\n  _detach(): void {\n    this.#detached = true;\n    this.#client.off('Runtime.bindingCalled', this.#onBindingCalled);\n    this.#taskManager.terminateAll(\n      new Error('waitForFunction failed: frame got detached.')\n    );\n  }\n\n  executionContext(): Promise<ExecutionContext> {\n    if (this.#detached) {\n      throw new Error(\n        `Execution context is not available in detached frame \"${this.#frame.url()}\" (are you trying to evaluate?)`\n      );\n    }\n    if (this.#context === null) {\n      throw new Error(`Execution content promise is missing`);\n    }\n    return this.#context.valueOrThrow();\n  }\n\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluateHandle.name,\n      pageFunction\n    );\n    const context = await this.executionContext();\n    return context.evaluateHandle(pageFunction, ...args);\n  }\n\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluate.name,\n      pageFunction\n    );\n    const context = await this.executionContext();\n    return context.evaluate(pageFunction, ...args);\n  }\n\n  async $<Selector extends string>(\n    selector: Selector\n  ): Promise<ElementHandle<NodeFor<Selector>> | null> {\n    const document = await this.document();\n    return document.$(selector);\n  }\n\n  async $$<Selector extends string>(\n    selector: Selector\n  ): Promise<Array<ElementHandle<NodeFor<Selector>>>> {\n    const document = await this.document();\n    return document.$$(selector);\n  }\n\n  async document(): Promise<ElementHandle<Document>> {\n    if (this.#document) {\n      return this.#document;\n    }\n    const context = await this.executionContext();\n    this.#document = await context.evaluateHandle(() => {\n      return document;\n    });\n    return this.#document;\n  }\n\n  async $x(expression: string): Promise<Array<ElementHandle<Node>>> {\n    const document = await this.document();\n    return document.$x(expression);\n  }\n\n  async $eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<NodeFor<Selector>, Params> = EvaluateFuncWith<\n      NodeFor<Selector>,\n      Params\n    >,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$eval.name, pageFunction);\n    const document = await this.document();\n    return document.$eval(selector, pageFunction, ...args);\n  }\n\n  async $$eval<\n    Selector extends string,\n    Params extends unknown[],\n    Func extends EvaluateFuncWith<\n      Array<NodeFor<Selector>>,\n      Params\n    > = EvaluateFuncWith<Array<NodeFor<Selector>>, Params>,\n  >(\n    selector: Selector,\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(this.$$eval.name, pageFunction);\n    const document = await this.document();\n    return document.$$eval(selector, pageFunction, ...args);\n  }\n\n  async content(): Promise<string> {\n    return await this.evaluate(getPageContent);\n  }\n\n  async setContent(\n    html: string,\n    options: {\n      timeout?: number;\n      waitUntil?: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[];\n    } = {}\n  ): Promise<void> {\n    const {\n      waitUntil = ['load'],\n      timeout = this.#timeoutSettings.navigationTimeout(),\n    } = options;\n\n    await setPageContent(this, html);\n\n    const watcher = new LifecycleWatcher(\n      this.#frameManager.networkManager,\n      this.#frame,\n      waitUntil,\n      timeout\n    );\n    const error = await Deferred.race<void | Error | undefined>([\n      watcher.terminationPromise(),\n      watcher.lifecyclePromise(),\n    ]);\n    watcher.dispose();\n    if (error) {\n      throw error;\n    }\n  }\n\n  async click(\n    selector: string,\n    options?: Readonly<ClickOptions>\n  ): Promise<void> {\n    const handle = await this.$(selector);\n    assert(handle, `No element found for selector: ${selector}`);\n    await handle.click(options);\n    await handle.dispose();\n  }\n\n  async focus(selector: string): Promise<void> {\n    const handle = await this.$(selector);\n    assert(handle, `No element found for selector: ${selector}`);\n    await handle.focus();\n    await handle.dispose();\n  }\n\n  async hover(selector: string): Promise<void> {\n    const handle = await this.$(selector);\n    assert(handle, `No element found for selector: ${selector}`);\n    await handle.hover();\n    await handle.dispose();\n  }\n\n  async select(selector: string, ...values: string[]): Promise<string[]> {\n    const handle = await this.$(selector);\n    assert(handle, `No element found for selector: ${selector}`);\n    const result = await handle.select(...values);\n    await handle.dispose();\n    return result;\n  }\n\n  async tap(selector: string): Promise<void> {\n    const handle = await this.$(selector);\n    assert(handle, `No element found for selector: ${selector}`);\n    await handle.tap();\n    await handle.dispose();\n  }\n\n  async type(\n    selector: string,\n    text: string,\n    options?: Readonly<KeyboardTypeOptions>\n  ): Promise<void> {\n    const handle = await this.$(selector);\n    assert(handle, `No element found for selector: ${selector}`);\n    await handle.type(text, options);\n    await handle.dispose();\n  }\n\n  // If multiple waitFor are set up asynchronously, we need to wait for the\n  // first one to set up the binding in the page before running the others.\n  #mutex = new Mutex();\n  async _addBindingToContext(\n    context: ExecutionContext,\n    name: string\n  ): Promise<void> {\n    if (this.#contextBindings.has(name)) {\n      return;\n    }\n\n    await this.#mutex.acquire();\n    try {\n      await context._client.send(\n        'Runtime.addBinding',\n        context._contextName\n          ? {\n              name,\n              executionContextName: context._contextName,\n            }\n          : {\n              name,\n              executionContextId: context._contextId,\n            }\n      );\n\n      await context.evaluate(addPageBinding, 'internal', name);\n\n      this.#contextBindings.add(name);\n    } catch (error) {\n      // We could have tried to evaluate in a context which was already\n      // destroyed. This happens, for example, if the page is navigated while\n      // we are trying to add the binding\n      if (error instanceof Error) {\n        // Destroyed context.\n        if (error.message.includes('Execution context was destroyed')) {\n          return;\n        }\n        // Missing context.\n        if (error.message.includes('Cannot find context with specified id')) {\n          return;\n        }\n      }\n\n      debugError(error);\n    } finally {\n      this.#mutex.release();\n    }\n  }\n\n  #onBindingCalled = async (\n    event: Protocol.Runtime.BindingCalledEvent\n  ): Promise<void> => {\n    let payload: BindingPayload;\n    try {\n      payload = JSON.parse(event.payload);\n    } catch {\n      // The binding was either called by something in the page or it was\n      // called before our wrapper was initialized.\n      return;\n    }\n    const {type, name, seq, args, isTrivial} = payload;\n    if (type !== 'internal') {\n      return;\n    }\n    if (!this.#contextBindings.has(name)) {\n      return;\n    }\n\n    try {\n      const context = await this.#context.valueOrThrow();\n      if (event.executionContextId !== context._contextId) {\n        return;\n      }\n\n      const binding = this._bindings.get(name);\n      await binding?.run(context, seq, args, isTrivial);\n    } catch (err) {\n      debugError(err);\n    }\n  };\n\n  waitForFunction<\n    Params extends unknown[],\n    Func extends EvaluateFunc<InnerLazyParams<Params>> = EvaluateFunc<\n      InnerLazyParams<Params>\n    >,\n  >(\n    pageFunction: Func | string,\n    options: {\n      polling?: 'raf' | 'mutation' | number;\n      timeout?: number;\n      root?: ElementHandle<Node>;\n      signal?: AbortSignal;\n    } = {},\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    const {\n      polling = 'raf',\n      timeout = this.#timeoutSettings.timeout(),\n      root,\n      signal,\n    } = options;\n    if (typeof polling === 'number' && polling < 0) {\n      throw new Error('Cannot poll with non-positive interval');\n    }\n    const waitTask = new WaitTask(\n      this,\n      {\n        polling,\n        root,\n        timeout,\n        signal,\n      },\n      pageFunction as unknown as\n        | ((...args: unknown[]) => Promise<Awaited<ReturnType<Func>>>)\n        | string,\n      ...args\n    );\n    return waitTask.result;\n  }\n\n  async title(): Promise<string> {\n    return this.evaluate(() => {\n      return document.title;\n    });\n  }\n\n  async adoptBackendNode(\n    backendNodeId?: Protocol.DOM.BackendNodeId\n  ): Promise<JSHandle<Node>> {\n    const executionContext = await this.executionContext();\n    const {object} = await this.#client.send('DOM.resolveNode', {\n      backendNodeId: backendNodeId,\n      executionContextId: executionContext._contextId,\n    });\n    return createJSHandle(executionContext, object) as JSHandle<Node>;\n  }\n\n  async adoptHandle<T extends JSHandle<Node>>(handle: T): Promise<T> {\n    const context = await this.executionContext();\n    assert(\n      handle.executionContext() !== context,\n      'Cannot adopt handle that already belongs to this execution context'\n    );\n    const nodeInfo = await this.#client.send('DOM.describeNode', {\n      objectId: handle.id,\n    });\n    return (await this.adoptBackendNode(nodeInfo.node.backendNodeId)) as T;\n  }\n\n  async transferHandle<T extends JSHandle<Node>>(handle: T): Promise<T> {\n    const context = await this.executionContext();\n    if (handle.executionContext() === context) {\n      return handle;\n    }\n    const info = await this.#client.send('DOM.describeNode', {\n      objectId: handle.remoteObject().objectId,\n    });\n    const newHandle = (await this.adoptBackendNode(\n      info.node.backendNodeId\n    )) as T;\n    await handle.dispose();\n    return newHandle;\n  }\n}\n\nclass Mutex {\n  #locked = false;\n  #acquirers: Array<() => void> = [];\n\n  // This is FIFO.\n  acquire(): Promise<void> {\n    if (!this.#locked) {\n      this.#locked = true;\n      return Promise.resolve();\n    }\n    const deferred = Deferred.create<void>();\n    this.#acquirers.push(deferred.resolve.bind(deferred));\n    return deferred.valueOrThrow();\n  }\n\n  release(): void {\n    const resolve = this.#acquirers.shift();\n    if (!resolve) {\n      this.#locked = false;\n      return;\n    }\n    resolve();\n  }\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A unique key for {@link IsolatedWorldChart} to denote the default world.\n * Execution contexts are automatically created in the default world.\n *\n * @internal\n */\nexport const MAIN_WORLD = Symbol('mainWorld');\n/**\n * A unique key for {@link IsolatedWorldChart} to denote the puppeteer world.\n * This world contains all puppeteer-internal bindings/code.\n *\n * @internal\n */\nexport const PUPPETEER_WORLD = Symbol('puppeteerWorld');\n", "/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {HTTPResponse} from '../api/HTTPResponse.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {TimeoutError} from './Errors.js';\nimport {Frame, FrameEmittedEvents} from './Frame.js';\nimport {HTTPRequest} from './HTTPRequest.js';\nimport {NetworkManager, NetworkManagerEmittedEvents} from './NetworkManager.js';\nimport {\n  addEventListener,\n  PuppeteerEventListener,\n  removeEventListeners,\n} from './util.js';\n/**\n * @public\n */\nexport type PuppeteerLifeCycleEvent =\n  | 'load'\n  | 'domcontentloaded'\n  | 'networkidle0'\n  | 'networkidle2';\n\n/**\n * @public\n */\nexport type ProtocolLifeCycleEvent =\n  | 'load'\n  | 'DOMContentLoaded'\n  | 'networkIdle'\n  | 'networkAlmostIdle';\n\nconst puppeteerToProtocolLifecycle = new Map<\n  PuppeteerLifeCycleEvent,\n  ProtocolLifeCycleEvent\n>([\n  ['load', 'load'],\n  ['domcontentloaded', 'DOMContentLoaded'],\n  ['networkidle0', 'networkIdle'],\n  ['networkidle2', 'networkAlmostIdle'],\n]);\n\n/**\n * @internal\n */\nexport class LifecycleWatcher {\n  #expectedLifecycle: ProtocolLifeCycleEvent[];\n  #frame: Frame;\n  #timeout: number;\n  #navigationRequest: HTTPRequest | null = null;\n  #eventListeners: PuppeteerEventListener[];\n  #initialLoaderId: string;\n\n  #terminationDeferred: Deferred<Error>;\n  #sameDocumentNavigationDeferred = Deferred.create<undefined>();\n  #lifecycleDeferred = Deferred.create<void>();\n  #newDocumentNavigationDeferred = Deferred.create<undefined>();\n\n  #hasSameDocumentNavigation?: boolean;\n  #swapped?: boolean;\n\n  #navigationResponseReceived?: Deferred<void>;\n\n  constructor(\n    networkManager: NetworkManager,\n    frame: Frame,\n    waitUntil: PuppeteerLifeCycleEvent | PuppeteerLifeCycleEvent[],\n    timeout: number\n  ) {\n    if (Array.isArray(waitUntil)) {\n      waitUntil = waitUntil.slice();\n    } else if (typeof waitUntil === 'string') {\n      waitUntil = [waitUntil];\n    }\n    this.#initialLoaderId = frame._loaderId;\n    this.#expectedLifecycle = waitUntil.map(value => {\n      const protocolEvent = puppeteerToProtocolLifecycle.get(value);\n      assert(protocolEvent, 'Unknown value for options.waitUntil: ' + value);\n      return protocolEvent as ProtocolLifeCycleEvent;\n    });\n\n    this.#frame = frame;\n    this.#timeout = timeout;\n    this.#eventListeners = [\n      addEventListener(\n        frame,\n        FrameEmittedEvents.LifecycleEvent,\n        this.#checkLifecycleComplete.bind(this)\n      ),\n      addEventListener(\n        frame,\n        FrameEmittedEvents.FrameNavigatedWithinDocument,\n        this.#navigatedWithinDocument.bind(this)\n      ),\n      addEventListener(\n        frame,\n        FrameEmittedEvents.FrameNavigated,\n        this.#navigated.bind(this)\n      ),\n      addEventListener(\n        frame,\n        FrameEmittedEvents.FrameSwapped,\n        this.#frameSwapped.bind(this)\n      ),\n      addEventListener(\n        frame,\n        FrameEmittedEvents.FrameDetached,\n        this.#onFrameDetached.bind(this)\n      ),\n      addEventListener(\n        networkManager,\n        NetworkManagerEmittedEvents.Request,\n        this.#onRequest.bind(this)\n      ),\n      addEventListener(\n        networkManager,\n        NetworkManagerEmittedEvents.Response,\n        this.#onResponse.bind(this)\n      ),\n      addEventListener(\n        networkManager,\n        NetworkManagerEmittedEvents.RequestFailed,\n        this.#onRequestFailed.bind(this)\n      ),\n    ];\n\n    this.#terminationDeferred = Deferred.create<Error>({\n      timeout: this.#timeout,\n      message: `Navigation timeout of ${this.#timeout} ms exceeded`,\n    });\n\n    this.#checkLifecycleComplete();\n  }\n\n  #onRequest(request: HTTPRequest): void {\n    if (request.frame() !== this.#frame || !request.isNavigationRequest()) {\n      return;\n    }\n    this.#navigationRequest = request;\n    // Resolve previous navigation response in case there are multiple\n    // navigation requests reported by the backend. This generally should not\n    // happen by it looks like it's possible.\n    this.#navigationResponseReceived?.resolve();\n    this.#navigationResponseReceived = Deferred.create();\n    if (request.response() !== null) {\n      this.#navigationResponseReceived?.resolve();\n    }\n  }\n\n  #onRequestFailed(request: HTTPRequest): void {\n    if (this.#navigationRequest?._requestId !== request._requestId) {\n      return;\n    }\n    this.#navigationResponseReceived?.resolve();\n  }\n\n  #onResponse(response: HTTPResponse): void {\n    if (this.#navigationRequest?._requestId !== response.request()._requestId) {\n      return;\n    }\n    this.#navigationResponseReceived?.resolve();\n  }\n\n  #onFrameDetached(frame: Frame): void {\n    if (this.#frame === frame) {\n      this.#terminationDeferred.resolve(\n        new Error('Navigating frame was detached')\n      );\n      return;\n    }\n    this.#checkLifecycleComplete();\n  }\n\n  async navigationResponse(): Promise<HTTPResponse | null> {\n    // Continue with a possibly null response.\n    await this.#navigationResponseReceived?.valueOrThrow();\n    return this.#navigationRequest ? this.#navigationRequest.response() : null;\n  }\n\n  sameDocumentNavigationPromise(): Promise<Error | undefined> {\n    return this.#sameDocumentNavigationDeferred.valueOrThrow();\n  }\n\n  newDocumentNavigationPromise(): Promise<Error | undefined> {\n    return this.#newDocumentNavigationDeferred.valueOrThrow();\n  }\n\n  lifecyclePromise(): Promise<void> {\n    return this.#lifecycleDeferred.valueOrThrow();\n  }\n\n  terminationPromise(): Promise<Error | TimeoutError | undefined> {\n    return this.#terminationDeferred.valueOrThrow();\n  }\n\n  #navigatedWithinDocument(): void {\n    this.#hasSameDocumentNavigation = true;\n    this.#checkLifecycleComplete();\n  }\n\n  #navigated(): void {\n    this.#checkLifecycleComplete();\n  }\n\n  #frameSwapped(): void {\n    this.#swapped = true;\n    this.#checkLifecycleComplete();\n  }\n\n  #checkLifecycleComplete(): void {\n    // We expect navigation to commit.\n    if (!checkLifecycle(this.#frame, this.#expectedLifecycle)) {\n      return;\n    }\n    this.#lifecycleDeferred.resolve();\n    if (this.#hasSameDocumentNavigation) {\n      this.#sameDocumentNavigationDeferred.resolve(undefined);\n    }\n    if (this.#swapped || this.#frame._loaderId !== this.#initialLoaderId) {\n      this.#newDocumentNavigationDeferred.resolve(undefined);\n    }\n\n    function checkLifecycle(\n      frame: Frame,\n      expectedLifecycle: ProtocolLifeCycleEvent[]\n    ): boolean {\n      for (const event of expectedLifecycle) {\n        if (!frame._lifecycleEvents.has(event)) {\n          return false;\n        }\n      }\n      for (const child of frame.childFrames()) {\n        if (\n          child._hasStartedLoading &&\n          !checkLifecycle(child, expectedLifecycle)\n        ) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n  dispose(): void {\n    removeEventListeners(this.#eventListeners);\n    this.#terminationDeferred.resolve(new Error('LifecycleWatcher disposed'));\n  }\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ElementHandle} from '../api/ElementHandle.js';\nimport {Realm} from '../api/Frame.js';\nimport {JSHandle} from '../api/JSHandle.js';\nimport type {Poller} from '../injected/Poller.js';\nimport {Deferred} from '../util/Deferred.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\nimport {stringifyFunction} from '../util/Function.js';\n\nimport {TimeoutError} from './Errors.js';\nimport {LazyArg} from './LazyArg.js';\nimport {HandleFor} from './types.js';\n\n/**\n * @internal\n */\nexport interface WaitTaskOptions {\n  polling: 'raf' | 'mutation' | number;\n  root?: ElementHandle<Node>;\n  timeout: number;\n  signal?: AbortSignal;\n}\n\n/**\n * @internal\n */\nexport class WaitTask<T = unknown> {\n  #world: Realm;\n  #polling: 'raf' | 'mutation' | number;\n  #root?: ElementHandle<Node>;\n\n  #fn: string;\n  #args: unknown[];\n\n  #timeout?: NodeJS.Timeout;\n\n  #result = Deferred.create<HandleFor<T>>();\n\n  #poller?: JSHandle<Poller<T>>;\n  #signal?: AbortSignal;\n\n  constructor(\n    world: Realm,\n    options: WaitTaskOptions,\n    fn: ((...args: unknown[]) => Promise<T>) | string,\n    ...args: unknown[]\n  ) {\n    this.#world = world;\n    this.#polling = options.polling;\n    this.#root = options.root;\n    this.#signal = options.signal;\n    this.#signal?.addEventListener(\n      'abort',\n      () => {\n        void this.terminate(this.#signal?.reason);\n      },\n      {\n        once: true,\n      }\n    );\n\n    switch (typeof fn) {\n      case 'string':\n        this.#fn = `() => {return (${fn});}`;\n        break;\n      default:\n        this.#fn = stringifyFunction(fn);\n        break;\n    }\n    this.#args = args;\n\n    this.#world.taskManager.add(this);\n\n    if (options.timeout) {\n      this.#timeout = setTimeout(() => {\n        void this.terminate(\n          new TimeoutError(`Waiting failed: ${options.timeout}ms exceeded`)\n        );\n      }, options.timeout);\n    }\n\n    void this.rerun();\n  }\n\n  get result(): Promise<HandleFor<T>> {\n    return this.#result.valueOrThrow();\n  }\n\n  async rerun(): Promise<void> {\n    try {\n      switch (this.#polling) {\n        case 'raf':\n          this.#poller = await this.#world.evaluateHandle(\n            ({RAFPoller, createFunction}, fn, ...args) => {\n              const fun = createFunction(fn);\n              return new RAFPoller(() => {\n                return fun(...args) as Promise<T>;\n              });\n            },\n            LazyArg.create(context => {\n              return context.puppeteerUtil;\n            }),\n            this.#fn,\n            ...this.#args\n          );\n          break;\n        case 'mutation':\n          this.#poller = await this.#world.evaluateHandle(\n            ({MutationPoller, createFunction}, root, fn, ...args) => {\n              const fun = createFunction(fn);\n              return new MutationPoller(() => {\n                return fun(...args) as Promise<T>;\n              }, root || document);\n            },\n            LazyArg.create(context => {\n              return context.puppeteerUtil;\n            }),\n            this.#root,\n            this.#fn,\n            ...this.#args\n          );\n          break;\n        default:\n          this.#poller = await this.#world.evaluateHandle(\n            ({IntervalPoller, createFunction}, ms, fn, ...args) => {\n              const fun = createFunction(fn);\n              return new IntervalPoller(() => {\n                return fun(...args) as Promise<T>;\n              }, ms);\n            },\n            LazyArg.create(context => {\n              return context.puppeteerUtil;\n            }),\n            this.#polling,\n            this.#fn,\n            ...this.#args\n          );\n          break;\n      }\n\n      await this.#poller.evaluate(poller => {\n        void poller.start();\n      });\n\n      const result = await this.#poller.evaluateHandle(poller => {\n        return poller.result();\n      });\n      this.#result.resolve(result);\n\n      await this.terminate();\n    } catch (error) {\n      const badError = this.getBadError(error);\n      if (badError) {\n        await this.terminate(badError);\n      }\n    }\n  }\n\n  async terminate(error?: Error): Promise<void> {\n    this.#world.taskManager.delete(this);\n\n    if (this.#timeout) {\n      clearTimeout(this.#timeout);\n    }\n\n    if (error && !this.#result.finished()) {\n      this.#result.reject(error);\n    }\n\n    if (this.#poller) {\n      try {\n        await this.#poller.evaluateHandle(async poller => {\n          await poller.stop();\n        });\n        if (this.#poller) {\n          await this.#poller.dispose();\n          this.#poller = undefined;\n        }\n      } catch {\n        // Ignore errors since they most likely come from low-level cleanup.\n      }\n    }\n  }\n\n  /**\n   * Not all errors lead to termination. They usually imply we need to rerun the task.\n   */\n  getBadError(error: unknown): Error | undefined {\n    if (isErrorLike(error)) {\n      // When frame is detached the task should have been terminated by the IsolatedWorld.\n      // This can fail if we were adding this task while the frame was detached,\n      // so we terminate here instead.\n      if (\n        error.message.includes(\n          'Execution context is not available in detached frame'\n        )\n      ) {\n        return new Error('Waiting failed: Frame detached');\n      }\n\n      // When the page is navigated, the promise is rejected.\n      // We will try again in the new execution context.\n      if (error.message.includes('Execution context was destroyed')) {\n        return;\n      }\n\n      // We could have tried to evaluate in a context which was already\n      // destroyed.\n      if (error.message.includes('Cannot find context with specified id')) {\n        return;\n      }\n\n      return error;\n    }\n\n    return new Error('WaitTask failed with an error', {\n      cause: error,\n    });\n  }\n}\n\n/**\n * @internal\n */\nexport class TaskManager {\n  #tasks: Set<WaitTask> = new Set<WaitTask>();\n\n  add(task: WaitTask<any>): void {\n    this.#tasks.add(task);\n  }\n\n  delete(task: WaitTask<any>): void {\n    this.#tasks.delete(task);\n  }\n\n  terminateAll(error?: Error): void {\n    for (const task of this.#tasks) {\n      void task.terminate(error);\n    }\n    this.#tasks.clear();\n  }\n\n  async rerunAll(): Promise<void> {\n    await Promise.all(\n      [...this.#tasks].map(task => {\n        return task.rerun();\n      })\n    );\n  }\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Frame as BaseFrame} from '../api/Frame.js';\nimport {Deferred} from '../util/Deferred.js';\n\n/**\n * Keeps track of the page frame tree and it's is managed by\n * {@link FrameManager}. FrameTree uses frame IDs to reference frame and it\n * means that referenced frames might not be in the tree anymore. Thus, the tree\n * structure is eventually consistent.\n * @internal\n */\nexport class FrameTree<Frame extends BaseFrame> {\n  #frames = new Map<string, Frame>();\n  // frameID -> parentFrameID\n  #parentIds = new Map<string, string>();\n  // frameID -> childFrameIDs\n  #childIds = new Map<string, Set<string>>();\n  #mainFrame?: Frame;\n  #waitRequests = new Map<string, Set<Deferred<Frame>>>();\n\n  getMainFrame(): Frame | undefined {\n    return this.#mainFrame;\n  }\n\n  getById(frameId: string): Frame | undefined {\n    return this.#frames.get(frameId);\n  }\n\n  /**\n   * Returns a promise that is resolved once the frame with\n   * the given ID is added to the tree.\n   */\n  waitForFrame(frameId: string): Promise<Frame> {\n    const frame = this.getById(frameId);\n    if (frame) {\n      return Promise.resolve(frame);\n    }\n    const deferred = Deferred.create<Frame>();\n    const callbacks =\n      this.#waitRequests.get(frameId) || new Set<Deferred<Frame>>();\n    callbacks.add(deferred);\n    return deferred.valueOrThrow();\n  }\n\n  frames(): Frame[] {\n    return Array.from(this.#frames.values());\n  }\n\n  addFrame(frame: Frame): void {\n    this.#frames.set(frame._id, frame);\n    if (frame._parentId) {\n      this.#parentIds.set(frame._id, frame._parentId);\n      if (!this.#childIds.has(frame._parentId)) {\n        this.#childIds.set(frame._parentId, new Set());\n      }\n      this.#childIds.get(frame._parentId)!.add(frame._id);\n    } else if (!this.#mainFrame) {\n      this.#mainFrame = frame;\n    }\n    this.#waitRequests.get(frame._id)?.forEach(request => {\n      return request.resolve(frame);\n    });\n  }\n\n  removeFrame(frame: Frame): void {\n    this.#frames.delete(frame._id);\n    this.#parentIds.delete(frame._id);\n    if (frame._parentId) {\n      this.#childIds.get(frame._parentId)?.delete(frame._id);\n    } else {\n      this.#mainFrame = undefined;\n    }\n  }\n\n  childFrames(frameId: string): Frame[] {\n    const childIds = this.#childIds.get(frameId);\n    if (!childIds) {\n      return [];\n    }\n    return Array.from(childIds)\n      .map(id => {\n        return this.getById(id);\n      })\n      .filter((frame): frame is Frame => {\n        return frame !== undefined;\n      });\n  }\n\n  parentFrame(frameId: string): Frame | undefined {\n    const parentId = this.#parentIds.get(frameId);\n    return parentId ? this.getById(parentId) : undefined;\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {Point} from '../api/ElementHandle.js';\nimport {\n  Keyboard,\n  KeyDownOptions,\n  KeyPressOptions,\n  Mouse,\n  MouseButton,\n  MouseClickOptions,\n  MouseMoveOptions,\n  MouseOptions,\n  MouseWheelOptions,\n  Touchscreen,\n  KeyboardTypeOptions,\n} from '../api/Input.js';\nimport {assert} from '../util/assert.js';\n\nimport {CDPSession} from './Connection.js';\nimport {_keyDefinitions, KeyDefinition, KeyInput} from './USKeyboardLayout.js';\n\ntype KeyDescription = Required<\n  Pick<KeyDefinition, 'keyCode' | 'key' | 'text' | 'code' | 'location'>\n>;\n\n/**\n * @internal\n */\nexport class CDPKeyboard extends Keyboard {\n  #client: CDPSession;\n  #pressedKeys = new Set<string>();\n\n  /**\n   * @internal\n   */\n  _modifiers = 0;\n\n  /**\n   * @internal\n   */\n  constructor(client: CDPSession) {\n    super();\n    this.#client = client;\n  }\n\n  override async down(\n    key: KeyInput,\n    options: Readonly<KeyDownOptions> = {\n      text: undefined,\n      commands: [],\n    }\n  ): Promise<void> {\n    const description = this.#keyDescriptionForString(key);\n\n    const autoRepeat = this.#pressedKeys.has(description.code);\n    this.#pressedKeys.add(description.code);\n    this._modifiers |= this.#modifierBit(description.key);\n\n    const text = options.text === undefined ? description.text : options.text;\n    await this.#client.send('Input.dispatchKeyEvent', {\n      type: text ? 'keyDown' : 'rawKeyDown',\n      modifiers: this._modifiers,\n      windowsVirtualKeyCode: description.keyCode,\n      code: description.code,\n      key: description.key,\n      text: text,\n      unmodifiedText: text,\n      autoRepeat,\n      location: description.location,\n      isKeypad: description.location === 3,\n      commands: options.commands,\n    });\n  }\n\n  #modifierBit(key: string): number {\n    if (key === 'Alt') {\n      return 1;\n    }\n    if (key === 'Control') {\n      return 2;\n    }\n    if (key === 'Meta') {\n      return 4;\n    }\n    if (key === 'Shift') {\n      return 8;\n    }\n    return 0;\n  }\n\n  #keyDescriptionForString(keyString: KeyInput): KeyDescription {\n    const shift = this._modifiers & 8;\n    const description = {\n      key: '',\n      keyCode: 0,\n      code: '',\n      text: '',\n      location: 0,\n    };\n\n    const definition = _keyDefinitions[keyString];\n    assert(definition, `Unknown key: \"${keyString}\"`);\n\n    if (definition.key) {\n      description.key = definition.key;\n    }\n    if (shift && definition.shiftKey) {\n      description.key = definition.shiftKey;\n    }\n\n    if (definition.keyCode) {\n      description.keyCode = definition.keyCode;\n    }\n    if (shift && definition.shiftKeyCode) {\n      description.keyCode = definition.shiftKeyCode;\n    }\n\n    if (definition.code) {\n      description.code = definition.code;\n    }\n\n    if (definition.location) {\n      description.location = definition.location;\n    }\n\n    if (description.key.length === 1) {\n      description.text = description.key;\n    }\n\n    if (definition.text) {\n      description.text = definition.text;\n    }\n    if (shift && definition.shiftText) {\n      description.text = definition.shiftText;\n    }\n\n    // if any modifiers besides shift are pressed, no text should be sent\n    if (this._modifiers & ~8) {\n      description.text = '';\n    }\n\n    return description;\n  }\n\n  override async up(key: KeyInput): Promise<void> {\n    const description = this.#keyDescriptionForString(key);\n\n    this._modifiers &= ~this.#modifierBit(description.key);\n    this.#pressedKeys.delete(description.code);\n    await this.#client.send('Input.dispatchKeyEvent', {\n      type: 'keyUp',\n      modifiers: this._modifiers,\n      key: description.key,\n      windowsVirtualKeyCode: description.keyCode,\n      code: description.code,\n      location: description.location,\n    });\n  }\n\n  override async sendCharacter(char: string): Promise<void> {\n    await this.#client.send('Input.insertText', {text: char});\n  }\n\n  private charIsKey(char: string): char is KeyInput {\n    return !!_keyDefinitions[char as KeyInput];\n  }\n\n  override async type(\n    text: string,\n    options: Readonly<KeyboardTypeOptions> = {}\n  ): Promise<void> {\n    const delay = options.delay || undefined;\n    for (const char of text) {\n      if (this.charIsKey(char)) {\n        await this.press(char, {delay});\n      } else {\n        if (delay) {\n          await new Promise(f => {\n            return setTimeout(f, delay);\n          });\n        }\n        await this.sendCharacter(char);\n      }\n    }\n  }\n\n  override async press(\n    key: KeyInput,\n    options: Readonly<KeyPressOptions> = {}\n  ): Promise<void> {\n    const {delay = null} = options;\n    await this.down(key, options);\n    if (delay) {\n      await new Promise(f => {\n        return setTimeout(f, options.delay);\n      });\n    }\n    await this.up(key);\n  }\n}\n\n/**\n * This must follow {@link Protocol.Input.DispatchMouseEventRequest.buttons}.\n */\nconst enum MouseButtonFlag {\n  None = 0,\n  Left = 1,\n  Right = 1 << 1,\n  Middle = 1 << 2,\n  Back = 1 << 3,\n  Forward = 1 << 4,\n}\n\nconst getFlag = (button: MouseButton): MouseButtonFlag => {\n  switch (button) {\n    case MouseButton.Left:\n      return MouseButtonFlag.Left;\n    case MouseButton.Right:\n      return MouseButtonFlag.Right;\n    case MouseButton.Middle:\n      return MouseButtonFlag.Middle;\n    case MouseButton.Back:\n      return MouseButtonFlag.Back;\n    case MouseButton.Forward:\n      return MouseButtonFlag.Forward;\n  }\n};\n\n/**\n * This should match\n * https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:content/browser/renderer_host/input/web_input_event_builders_mac.mm;drc=a61b95c63b0b75c1cfe872d9c8cdf927c226046e;bpv=1;bpt=1;l=221.\n */\nconst getButtonFromPressedButtons = (\n  buttons: number\n): Protocol.Input.MouseButton => {\n  if (buttons & MouseButtonFlag.Left) {\n    return MouseButton.Left;\n  } else if (buttons & MouseButtonFlag.Right) {\n    return MouseButton.Right;\n  } else if (buttons & MouseButtonFlag.Middle) {\n    return MouseButton.Middle;\n  } else if (buttons & MouseButtonFlag.Back) {\n    return MouseButton.Back;\n  } else if (buttons & MouseButtonFlag.Forward) {\n    return MouseButton.Forward;\n  }\n  return 'none';\n};\n\ninterface MouseState {\n  /**\n   * The current position of the mouse.\n   */\n  position: Point;\n  /**\n   * The buttons that are currently being pressed.\n   */\n  buttons: number;\n}\n\n/**\n * @internal\n */\nexport class CDPMouse extends Mouse {\n  #client: CDPSession;\n  #keyboard: CDPKeyboard;\n\n  /**\n   * @internal\n   */\n  constructor(client: CDPSession, keyboard: CDPKeyboard) {\n    super();\n    this.#client = client;\n    this.#keyboard = keyboard;\n  }\n\n  #_state: Readonly<MouseState> = {\n    position: {x: 0, y: 0},\n    buttons: MouseButtonFlag.None,\n  };\n  get #state(): MouseState {\n    return Object.assign({...this.#_state}, ...this.#transactions);\n  }\n\n  // Transactions can run in parallel, so we store each of thme in this array.\n  #transactions: Array<Partial<MouseState>> = [];\n  #createTransaction(): {\n    update: (updates: Partial<MouseState>) => void;\n    commit: () => void;\n    rollback: () => void;\n  } {\n    const transaction: Partial<MouseState> = {};\n    this.#transactions.push(transaction);\n    const popTransaction = () => {\n      this.#transactions.splice(this.#transactions.indexOf(transaction), 1);\n    };\n    return {\n      update: (updates: Partial<MouseState>) => {\n        Object.assign(transaction, updates);\n      },\n      commit: () => {\n        this.#_state = {...this.#_state, ...transaction};\n        popTransaction();\n      },\n      rollback: popTransaction,\n    };\n  }\n\n  /**\n   * This is a shortcut for a typical update, commit/rollback lifecycle based on\n   * the error of the action.\n   */\n  async #withTransaction(\n    action: (update: (updates: Partial<MouseState>) => void) => Promise<unknown>\n  ): Promise<void> {\n    const {update, commit, rollback} = this.#createTransaction();\n    try {\n      await action(update);\n      commit();\n    } catch (error) {\n      rollback();\n      throw error;\n    }\n  }\n\n  override async reset(): Promise<void> {\n    const actions = [];\n    for (const [flag, button] of [\n      [MouseButtonFlag.Left, MouseButton.Left],\n      [MouseButtonFlag.Middle, MouseButton.Middle],\n      [MouseButtonFlag.Right, MouseButton.Right],\n      [MouseButtonFlag.Forward, MouseButton.Forward],\n      [MouseButtonFlag.Back, MouseButton.Back],\n    ] as const) {\n      if (this.#state.buttons & flag) {\n        actions.push(this.up({button: button}));\n      }\n    }\n    if (this.#state.position.x !== 0 || this.#state.position.y !== 0) {\n      actions.push(this.move(0, 0));\n    }\n    await Promise.all(actions);\n  }\n\n  override async move(\n    x: number,\n    y: number,\n    options: Readonly<MouseMoveOptions> = {}\n  ): Promise<void> {\n    const {steps = 1} = options;\n    const from = this.#state.position;\n    const to = {x, y};\n    for (let i = 1; i <= steps; i++) {\n      await this.#withTransaction(updateState => {\n        updateState({\n          position: {\n            x: from.x + (to.x - from.x) * (i / steps),\n            y: from.y + (to.y - from.y) * (i / steps),\n          },\n        });\n        const {buttons, position} = this.#state;\n        return this.#client.send('Input.dispatchMouseEvent', {\n          type: 'mouseMoved',\n          modifiers: this.#keyboard._modifiers,\n          buttons,\n          button: getButtonFromPressedButtons(buttons),\n          ...position,\n        });\n      });\n    }\n  }\n\n  override async down(options: Readonly<MouseOptions> = {}): Promise<void> {\n    const {button = MouseButton.Left, clickCount = 1} = options;\n    const flag = getFlag(button);\n    if (!flag) {\n      throw new Error(`Unsupported mouse button: ${button}`);\n    }\n    if (this.#state.buttons & flag) {\n      throw new Error(`'${button}' is already pressed.`);\n    }\n    await this.#withTransaction(updateState => {\n      updateState({\n        buttons: this.#state.buttons | flag,\n      });\n      const {buttons, position} = this.#state;\n      return this.#client.send('Input.dispatchMouseEvent', {\n        type: 'mousePressed',\n        modifiers: this.#keyboard._modifiers,\n        clickCount,\n        buttons,\n        button,\n        ...position,\n      });\n    });\n  }\n\n  override async up(options: Readonly<MouseOptions> = {}): Promise<void> {\n    const {button = MouseButton.Left, clickCount = 1} = options;\n    const flag = getFlag(button);\n    if (!flag) {\n      throw new Error(`Unsupported mouse button: ${button}`);\n    }\n    if (!(this.#state.buttons & flag)) {\n      throw new Error(`'${button}' is not pressed.`);\n    }\n    await this.#withTransaction(updateState => {\n      updateState({\n        buttons: this.#state.buttons & ~flag,\n      });\n      const {buttons, position} = this.#state;\n      return this.#client.send('Input.dispatchMouseEvent', {\n        type: 'mouseReleased',\n        modifiers: this.#keyboard._modifiers,\n        clickCount,\n        buttons,\n        button,\n        ...position,\n      });\n    });\n  }\n\n  override async click(\n    x: number,\n    y: number,\n    options: Readonly<MouseClickOptions> = {}\n  ): Promise<void> {\n    const {delay, count = 1, clickCount = count} = options;\n    if (count < 1) {\n      throw new Error('Click must occur a positive number of times.');\n    }\n    const actions: Array<Promise<void>> = [this.move(x, y)];\n    if (clickCount === count) {\n      for (let i = 1; i < count; ++i) {\n        actions.push(\n          this.down({...options, clickCount: i}),\n          this.up({...options, clickCount: i})\n        );\n      }\n    }\n    actions.push(this.down({...options, clickCount}));\n    if (typeof delay === 'number') {\n      await Promise.all(actions);\n      actions.length = 0;\n      await new Promise(resolve => {\n        setTimeout(resolve, delay);\n      });\n    }\n    actions.push(this.up({...options, clickCount}));\n    await Promise.all(actions);\n  }\n\n  override async wheel(\n    options: Readonly<MouseWheelOptions> = {}\n  ): Promise<void> {\n    const {deltaX = 0, deltaY = 0} = options;\n    const {position, buttons} = this.#state;\n    await this.#client.send('Input.dispatchMouseEvent', {\n      type: 'mouseWheel',\n      pointerType: 'mouse',\n      modifiers: this.#keyboard._modifiers,\n      deltaY,\n      deltaX,\n      buttons,\n      ...position,\n    });\n  }\n\n  override async drag(\n    start: Point,\n    target: Point\n  ): Promise<Protocol.Input.DragData> {\n    const promise = new Promise<Protocol.Input.DragData>(resolve => {\n      this.#client.once('Input.dragIntercepted', event => {\n        return resolve(event.data);\n      });\n    });\n    await this.move(start.x, start.y);\n    await this.down();\n    await this.move(target.x, target.y);\n    return promise;\n  }\n\n  override async dragEnter(\n    target: Point,\n    data: Protocol.Input.DragData\n  ): Promise<void> {\n    await this.#client.send('Input.dispatchDragEvent', {\n      type: 'dragEnter',\n      x: target.x,\n      y: target.y,\n      modifiers: this.#keyboard._modifiers,\n      data,\n    });\n  }\n\n  override async dragOver(\n    target: Point,\n    data: Protocol.Input.DragData\n  ): Promise<void> {\n    await this.#client.send('Input.dispatchDragEvent', {\n      type: 'dragOver',\n      x: target.x,\n      y: target.y,\n      modifiers: this.#keyboard._modifiers,\n      data,\n    });\n  }\n\n  override async drop(\n    target: Point,\n    data: Protocol.Input.DragData\n  ): Promise<void> {\n    await this.#client.send('Input.dispatchDragEvent', {\n      type: 'drop',\n      x: target.x,\n      y: target.y,\n      modifiers: this.#keyboard._modifiers,\n      data,\n    });\n  }\n\n  override async dragAndDrop(\n    start: Point,\n    target: Point,\n    options: {delay?: number} = {}\n  ): Promise<void> {\n    const {delay = null} = options;\n    const data = await this.drag(start, target);\n    await this.dragEnter(target, data);\n    await this.dragOver(target, data);\n    if (delay) {\n      await new Promise(resolve => {\n        return setTimeout(resolve, delay);\n      });\n    }\n    await this.drop(target, data);\n    await this.up();\n  }\n}\n\n/**\n * @internal\n */\nexport class CDPTouchscreen extends Touchscreen {\n  #client: CDPSession;\n  #keyboard: CDPKeyboard;\n\n  /**\n   * @internal\n   */\n  constructor(client: CDPSession, keyboard: CDPKeyboard) {\n    super();\n    this.#client = client;\n    this.#keyboard = keyboard;\n  }\n\n  override async tap(x: number, y: number): Promise<void> {\n    await this.touchStart(x, y);\n    await this.touchEnd();\n  }\n\n  override async touchStart(x: number, y: number): Promise<void> {\n    const touchPoints = [{x: Math.round(x), y: Math.round(y)}];\n    await this.#client.send('Input.dispatchTouchEvent', {\n      type: 'touchStart',\n      touchPoints,\n      modifiers: this.#keyboard._modifiers,\n    });\n  }\n\n  override async touchMove(x: number, y: number): Promise<void> {\n    const movePoints = [{x: Math.round(x), y: Math.round(y)}];\n    await this.#client.send('Input.dispatchTouchEvent', {\n      type: 'touchMove',\n      touchPoints: movePoints,\n      modifiers: this.#keyboard._modifiers,\n    });\n  }\n\n  override async touchEnd(): Promise<void> {\n    await this.#client.send('Input.dispatchTouchEvent', {\n      type: 'touchEnd',\n      touchPoints: [],\n      modifiers: this.#keyboard._modifiers,\n    });\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {KeyInput} from '../common/USKeyboardLayout.js';\n\nimport {Point} from './ElementHandle.js';\n\n/**\n * @public\n */\nexport interface KeyDownOptions {\n  /**\n   * @deprecated Do not use. This is automatically handled.\n   */\n  text?: string;\n  /**\n   * @deprecated Do not use. This is automatically handled.\n   */\n  commands?: string[];\n}\n\n/**\n * @public\n */\nexport interface KeyboardTypeOptions {\n  delay?: number;\n}\n\n/**\n * @public\n */\nexport type KeyPressOptions = KeyDownOptions & KeyboardTypeOptions;\n\n/**\n * Keyboard provides an api for managing a virtual keyboard.\n * The high level api is {@link Keyboard.\"type\"},\n * which takes raw characters and generates proper keydown, keypress/input,\n * and keyup events on your page.\n *\n * @remarks\n * For finer control, you can use {@link Keyboard.down},\n * {@link Keyboard.up}, and {@link Keyboard.sendCharacter}\n * to manually fire events as if they were generated from a real keyboard.\n *\n * On macOS, keyboard shortcuts like `\u2318 A` -\\> Select All do not work.\n * See {@link https://github.com/puppeteer/puppeteer/issues/1313 | #1313}.\n *\n * @example\n * An example of holding down `Shift` in order to select and delete some text:\n *\n * ```ts\n * await page.keyboard.type('Hello World!');\n * await page.keyboard.press('ArrowLeft');\n *\n * await page.keyboard.down('Shift');\n * for (let i = 0; i < ' World'.length; i++)\n *   await page.keyboard.press('ArrowLeft');\n * await page.keyboard.up('Shift');\n *\n * await page.keyboard.press('Backspace');\n * // Result text will end up saying 'Hello!'\n * ```\n *\n * @example\n * An example of pressing `A`\n *\n * ```ts\n * await page.keyboard.down('Shift');\n * await page.keyboard.press('KeyA');\n * await page.keyboard.up('Shift');\n * ```\n *\n * @public\n */\nexport class Keyboard {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Dispatches a `keydown` event.\n   *\n   * @remarks\n   * If `key` is a single character and no modifier keys besides `Shift`\n   * are being held down, a `keypress`/`input` event will also generated.\n   * The `text` option can be specified to force an input event to be generated.\n   * If `key` is a modifier key, `Shift`, `Meta`, `Control`, or `Alt`,\n   * subsequent key presses will be sent with that modifier active.\n   * To release the modifier key, use {@link Keyboard.up}.\n   *\n   * After the key is pressed once, subsequent calls to\n   * {@link Keyboard.down} will have\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/repeat | repeat}\n   * set to true. To release the key, use {@link Keyboard.up}.\n   *\n   * Modifier keys DO influence {@link Keyboard.down}.\n   * Holding down `Shift` will type the text in upper case.\n   *\n   * @param key - Name of key to press, such as `ArrowLeft`.\n   * See {@link KeyInput} for a list of all key names.\n   *\n   * @param options - An object of options. Accepts text which, if specified,\n   * generates an input event with this text. Accepts commands which, if specified,\n   * is the commands of keyboard shortcuts,\n   * see {@link https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/core/editing/commands/editor_command_names.h | Chromium Source Code} for valid command names.\n   */\n  async down(key: KeyInput, options?: Readonly<KeyDownOptions>): Promise<void>;\n  async down(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `keyup` event.\n   *\n   * @param key - Name of key to release, such as `ArrowLeft`.\n   * See {@link KeyInput | KeyInput}\n   * for a list of all key names.\n   */\n  async up(key: KeyInput): Promise<void>;\n  async up(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `keypress` and `input` event.\n   * This does not send a `keydown` or `keyup` event.\n   *\n   * @remarks\n   * Modifier keys DO NOT effect {@link Keyboard.sendCharacter | Keyboard.sendCharacter}.\n   * Holding down `Shift` will not type the text in upper case.\n   *\n   * @example\n   *\n   * ```ts\n   * page.keyboard.sendCharacter('\u55E8');\n   * ```\n   *\n   * @param char - Character to send into the page.\n   */\n  async sendCharacter(char: string): Promise<void>;\n  async sendCharacter(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Sends a `keydown`, `keypress`/`input`,\n   * and `keyup` event for each character in the text.\n   *\n   * @remarks\n   * To press a special key, like `Control` or `ArrowDown`,\n   * use {@link Keyboard.press}.\n   *\n   * Modifier keys DO NOT effect `keyboard.type`.\n   * Holding down `Shift` will not type the text in upper case.\n   *\n   * @example\n   *\n   * ```ts\n   * await page.keyboard.type('Hello'); // Types instantly\n   * await page.keyboard.type('World', {delay: 100}); // Types slower, like a user\n   * ```\n   *\n   * @param text - A text to type into a focused element.\n   * @param options - An object of options. Accepts delay which,\n   * if specified, is the time to wait between `keydown` and `keyup` in milliseconds.\n   * Defaults to 0.\n   */\n  async type(\n    text: string,\n    options?: Readonly<KeyboardTypeOptions>\n  ): Promise<void>;\n  async type(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Shortcut for {@link Keyboard.down}\n   * and {@link Keyboard.up}.\n   *\n   * @remarks\n   * If `key` is a single character and no modifier keys besides `Shift`\n   * are being held down, a `keypress`/`input` event will also generated.\n   * The `text` option can be specified to force an input event to be generated.\n   *\n   * Modifier keys DO effect {@link Keyboard.press}.\n   * Holding down `Shift` will type the text in upper case.\n   *\n   * @param key - Name of key to press, such as `ArrowLeft`.\n   * See {@link KeyInput} for a list of all key names.\n   *\n   * @param options - An object of options. Accepts text which, if specified,\n   * generates an input event with this text. Accepts delay which,\n   * if specified, is the time to wait between `keydown` and `keyup` in milliseconds.\n   * Defaults to 0. Accepts commands which, if specified,\n   * is the commands of keyboard shortcuts,\n   * see {@link https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/core/editing/commands/editor_command_names.h | Chromium Source Code} for valid command names.\n   */\n  async press(\n    key: KeyInput,\n    options?: Readonly<KeyPressOptions>\n  ): Promise<void>;\n  async press(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n}\n\n/**\n * @public\n */\nexport interface MouseOptions {\n  /**\n   * Determines which button will be pressed.\n   *\n   * @defaultValue `'left'`\n   */\n  button?: MouseButton;\n  /**\n   * @deprecated Use {@link MouseClickOptions.count}.\n   *\n   * Determines the click count for the mouse event. This does not perform\n   * multiple clicks.\n   *\n   * @defaultValue `1`\n   */\n  clickCount?: number;\n}\n\n/**\n * @public\n */\nexport interface MouseClickOptions extends MouseOptions {\n  /**\n   * Time (in ms) to delay the mouse release after the mouse press.\n   */\n  delay?: number;\n  /**\n   * Number of clicks to perform.\n   *\n   * @defaultValue `1`\n   */\n  count?: number;\n}\n\n/**\n * @public\n */\nexport interface MouseWheelOptions {\n  deltaX?: number;\n  deltaY?: number;\n}\n\n/**\n * @public\n */\nexport interface MouseMoveOptions {\n  /**\n   * Determines the number of movements to make from the current mouse position\n   * to the new one.\n   *\n   * @defaultValue `1`\n   */\n  steps?: number;\n}\n\n/**\n * Enum of valid mouse buttons.\n *\n * @public\n */\nexport const MouseButton = Object.freeze({\n  Left: 'left',\n  Right: 'right',\n  Middle: 'middle',\n  Back: 'back',\n  Forward: 'forward',\n}) satisfies Record<string, Protocol.Input.MouseButton>;\n\n/**\n * @public\n */\nexport type MouseButton = (typeof MouseButton)[keyof typeof MouseButton];\n\n/**\n * The Mouse class operates in main-frame CSS pixels\n * relative to the top-left corner of the viewport.\n * @remarks\n * Every `page` object has its own Mouse, accessible with [`page.mouse`](#pagemouse).\n *\n * @example\n *\n * ```ts\n * // Using \u2018page.mouse\u2019 to trace a 100x100 square.\n * await page.mouse.move(0, 0);\n * await page.mouse.down();\n * await page.mouse.move(0, 100);\n * await page.mouse.move(100, 100);\n * await page.mouse.move(100, 0);\n * await page.mouse.move(0, 0);\n * await page.mouse.up();\n * ```\n *\n * **Note**: The mouse events trigger synthetic `MouseEvent`s.\n * This means that it does not fully replicate the functionality of what a normal user\n * would be able to do with their mouse.\n *\n * For example, dragging and selecting text is not possible using `page.mouse`.\n * Instead, you can use the {@link https://developer.mozilla.org/en-US/docs/Web/API/DocumentOrShadowRoot/getSelection | `DocumentOrShadowRoot.getSelection()`} functionality implemented in the platform.\n *\n * @example\n * For example, if you want to select all content between nodes:\n *\n * ```ts\n * await page.evaluate(\n *   (from, to) => {\n *     const selection = from.getRootNode().getSelection();\n *     const range = document.createRange();\n *     range.setStartBefore(from);\n *     range.setEndAfter(to);\n *     selection.removeAllRanges();\n *     selection.addRange(range);\n *   },\n *   fromJSHandle,\n *   toJSHandle\n * );\n * ```\n *\n * If you then would want to copy-paste your selection, you can use the clipboard api:\n *\n * ```ts\n * // The clipboard api does not allow you to copy, unless the tab is focused.\n * await page.bringToFront();\n * await page.evaluate(() => {\n *   // Copy the selected content to the clipboard\n *   document.execCommand('copy');\n *   // Obtain the content of the clipboard as a string\n *   return navigator.clipboard.readText();\n * });\n * ```\n *\n * **Note**: If you want access to the clipboard API,\n * you have to give it permission to do so:\n *\n * ```ts\n * await browser\n *   .defaultBrowserContext()\n *   .overridePermissions('<your origin>', [\n *     'clipboard-read',\n *     'clipboard-write',\n *   ]);\n * ```\n *\n * @public\n */\nexport class Mouse {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Resets the mouse to the default state: No buttons pressed; position at\n   * (0,0).\n   */\n  async reset(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Moves the mouse to the given coordinate.\n   *\n   * @param x - Horizontal position of the mouse.\n   * @param y - Vertical position of the mouse.\n   * @param options - Options to configure behavior.\n   */\n  async move(\n    x: number,\n    y: number,\n    options?: Readonly<MouseMoveOptions>\n  ): Promise<void>;\n  async move(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Presses the mouse.\n   *\n   * @param options - Options to configure behavior.\n   */\n  async down(options?: Readonly<MouseOptions>): Promise<void>;\n  async down(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Releases the mouse.\n   *\n   * @param options - Options to configure behavior.\n   */\n  async up(options?: Readonly<MouseOptions>): Promise<void>;\n  async up(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Shortcut for `mouse.move`, `mouse.down` and `mouse.up`.\n   *\n   * @param x - Horizontal position of the mouse.\n   * @param y - Vertical position of the mouse.\n   * @param options - Options to configure behavior.\n   */\n  async click(\n    x: number,\n    y: number,\n    options?: Readonly<MouseClickOptions>\n  ): Promise<void>;\n  async click(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `mousewheel` event.\n   * @param options - Optional: `MouseWheelOptions`.\n   *\n   * @example\n   * An example of zooming into an element:\n   *\n   * ```ts\n   * await page.goto(\n   *   'https://mdn.mozillademos.org/en-US/docs/Web/API/Element/wheel_event$samples/Scaling_an_element_via_the_wheel?revision=1587366'\n   * );\n   *\n   * const elem = await page.$('div');\n   * const boundingBox = await elem.boundingBox();\n   * await page.mouse.move(\n   *   boundingBox.x + boundingBox.width / 2,\n   *   boundingBox.y + boundingBox.height / 2\n   * );\n   *\n   * await page.mouse.wheel({deltaY: -100});\n   * ```\n   */\n  async wheel(options?: Readonly<MouseWheelOptions>): Promise<void>;\n  async wheel(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `drag` event.\n   * @param start - starting point for drag\n   * @param target - point to drag to\n   */\n  async drag(start: Point, target: Point): Promise<Protocol.Input.DragData>;\n  async drag(): Promise<Protocol.Input.DragData> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `dragenter` event.\n   * @param target - point for emitting `dragenter` event\n   * @param data - drag data containing items and operations mask\n   */\n  async dragEnter(target: Point, data: Protocol.Input.DragData): Promise<void>;\n  async dragEnter(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `dragover` event.\n   * @param target - point for emitting `dragover` event\n   * @param data - drag data containing items and operations mask\n   */\n  async dragOver(target: Point, data: Protocol.Input.DragData): Promise<void>;\n  async dragOver(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Performs a dragenter, dragover, and drop in sequence.\n   * @param target - point to drop on\n   * @param data - drag data containing items and operations mask\n   */\n  async drop(target: Point, data: Protocol.Input.DragData): Promise<void>;\n  async drop(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Performs a drag, dragenter, dragover, and drop in sequence.\n   * @param start - point to drag from\n   * @param target - point to drop on\n   * @param options - An object of options. Accepts delay which,\n   * if specified, is the time to wait between `dragover` and `drop` in milliseconds.\n   * Defaults to 0.\n   */\n  async dragAndDrop(\n    start: Point,\n    target: Point,\n    options?: {delay?: number}\n  ): Promise<void>;\n  async dragAndDrop(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n}\n\n/**\n * The Touchscreen class exposes touchscreen events.\n * @public\n */\nexport class Touchscreen {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Dispatches a `touchstart` and `touchend` event.\n   * @param x - Horizontal position of the tap.\n   * @param y - Vertical position of the tap.\n   */\n  async tap(x: number, y: number): Promise<void>;\n  async tap(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `touchstart` event.\n   * @param x - Horizontal position of the tap.\n   * @param y - Vertical position of the tap.\n   */\n  async touchStart(x: number, y: number): Promise<void>;\n  async touchStart(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `touchMove` event.\n   * @param x - Horizontal position of the move.\n   * @param y - Vertical position of the move.\n   */\n  async touchMove(x: number, y: number): Promise<void>;\n  async touchMove(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Dispatches a `touchend` event.\n   */\n  async touchEnd(): Promise<void>;\n  async touchEnd(): Promise<void> {\n    throw new Error('Not implemented');\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @internal\n */\nexport interface KeyDefinition {\n  keyCode?: number;\n  shiftKeyCode?: number;\n  key?: string;\n  shiftKey?: string;\n  code?: string;\n  text?: string;\n  shiftText?: string;\n  location?: number;\n}\n\n/**\n * All the valid keys that can be passed to functions that take user input, such\n * as {@link Keyboard.press | keyboard.press }\n *\n * @public\n */\nexport type KeyInput =\n  | '0'\n  | '1'\n  | '2'\n  | '3'\n  | '4'\n  | '5'\n  | '6'\n  | '7'\n  | '8'\n  | '9'\n  | 'Power'\n  | 'Eject'\n  | 'Abort'\n  | 'Help'\n  | 'Backspace'\n  | 'Tab'\n  | 'Numpad5'\n  | 'NumpadEnter'\n  | 'Enter'\n  | '\\r'\n  | '\\n'\n  | 'ShiftLeft'\n  | 'ShiftRight'\n  | 'ControlLeft'\n  | 'ControlRight'\n  | 'AltLeft'\n  | 'AltRight'\n  | 'Pause'\n  | 'CapsLock'\n  | 'Escape'\n  | 'Convert'\n  | 'NonConvert'\n  | 'Space'\n  | 'Numpad9'\n  | 'PageUp'\n  | 'Numpad3'\n  | 'PageDown'\n  | 'End'\n  | 'Numpad1'\n  | 'Home'\n  | 'Numpad7'\n  | 'ArrowLeft'\n  | 'Numpad4'\n  | 'Numpad8'\n  | 'ArrowUp'\n  | 'ArrowRight'\n  | 'Numpad6'\n  | 'Numpad2'\n  | 'ArrowDown'\n  | 'Select'\n  | 'Open'\n  | 'PrintScreen'\n  | 'Insert'\n  | 'Numpad0'\n  | 'Delete'\n  | 'NumpadDecimal'\n  | 'Digit0'\n  | 'Digit1'\n  | 'Digit2'\n  | 'Digit3'\n  | 'Digit4'\n  | 'Digit5'\n  | 'Digit6'\n  | 'Digit7'\n  | 'Digit8'\n  | 'Digit9'\n  | 'KeyA'\n  | 'KeyB'\n  | 'KeyC'\n  | 'KeyD'\n  | 'KeyE'\n  | 'KeyF'\n  | 'KeyG'\n  | 'KeyH'\n  | 'KeyI'\n  | 'KeyJ'\n  | 'KeyK'\n  | 'KeyL'\n  | 'KeyM'\n  | 'KeyN'\n  | 'KeyO'\n  | 'KeyP'\n  | 'KeyQ'\n  | 'KeyR'\n  | 'KeyS'\n  | 'KeyT'\n  | 'KeyU'\n  | 'KeyV'\n  | 'KeyW'\n  | 'KeyX'\n  | 'KeyY'\n  | 'KeyZ'\n  | 'MetaLeft'\n  | 'MetaRight'\n  | 'ContextMenu'\n  | 'NumpadMultiply'\n  | 'NumpadAdd'\n  | 'NumpadSubtract'\n  | 'NumpadDivide'\n  | 'F1'\n  | 'F2'\n  | 'F3'\n  | 'F4'\n  | 'F5'\n  | 'F6'\n  | 'F7'\n  | 'F8'\n  | 'F9'\n  | 'F10'\n  | 'F11'\n  | 'F12'\n  | 'F13'\n  | 'F14'\n  | 'F15'\n  | 'F16'\n  | 'F17'\n  | 'F18'\n  | 'F19'\n  | 'F20'\n  | 'F21'\n  | 'F22'\n  | 'F23'\n  | 'F24'\n  | 'NumLock'\n  | 'ScrollLock'\n  | 'AudioVolumeMute'\n  | 'AudioVolumeDown'\n  | 'AudioVolumeUp'\n  | 'MediaTrackNext'\n  | 'MediaTrackPrevious'\n  | 'MediaStop'\n  | 'MediaPlayPause'\n  | 'Semicolon'\n  | 'Equal'\n  | 'NumpadEqual'\n  | 'Comma'\n  | 'Minus'\n  | 'Period'\n  | 'Slash'\n  | 'Backquote'\n  | 'BracketLeft'\n  | 'Backslash'\n  | 'BracketRight'\n  | 'Quote'\n  | 'AltGraph'\n  | 'Props'\n  | 'Cancel'\n  | 'Clear'\n  | 'Shift'\n  | 'Control'\n  | 'Alt'\n  | 'Accept'\n  | 'ModeChange'\n  | ' '\n  | 'Print'\n  | 'Execute'\n  | '\\u0000'\n  | 'a'\n  | 'b'\n  | 'c'\n  | 'd'\n  | 'e'\n  | 'f'\n  | 'g'\n  | 'h'\n  | 'i'\n  | 'j'\n  | 'k'\n  | 'l'\n  | 'm'\n  | 'n'\n  | 'o'\n  | 'p'\n  | 'q'\n  | 'r'\n  | 's'\n  | 't'\n  | 'u'\n  | 'v'\n  | 'w'\n  | 'x'\n  | 'y'\n  | 'z'\n  | 'Meta'\n  | '*'\n  | '+'\n  | '-'\n  | '/'\n  | ';'\n  | '='\n  | ','\n  | '.'\n  | '`'\n  | '['\n  | '\\\\'\n  | ']'\n  | \"'\"\n  | 'Attn'\n  | 'CrSel'\n  | 'ExSel'\n  | 'EraseEof'\n  | 'Play'\n  | 'ZoomOut'\n  | ')'\n  | '!'\n  | '@'\n  | '#'\n  | '$'\n  | '%'\n  | '^'\n  | '&'\n  | '('\n  | 'A'\n  | 'B'\n  | 'C'\n  | 'D'\n  | 'E'\n  | 'F'\n  | 'G'\n  | 'H'\n  | 'I'\n  | 'J'\n  | 'K'\n  | 'L'\n  | 'M'\n  | 'N'\n  | 'O'\n  | 'P'\n  | 'Q'\n  | 'R'\n  | 'S'\n  | 'T'\n  | 'U'\n  | 'V'\n  | 'W'\n  | 'X'\n  | 'Y'\n  | 'Z'\n  | ':'\n  | '<'\n  | '_'\n  | '>'\n  | '?'\n  | '~'\n  | '{'\n  | '|'\n  | '}'\n  | '\"'\n  | 'SoftLeft'\n  | 'SoftRight'\n  | 'Camera'\n  | 'Call'\n  | 'EndCall'\n  | 'VolumeDown'\n  | 'VolumeUp';\n\n/**\n * @internal\n */\nexport const _keyDefinitions: Readonly<Record<KeyInput, KeyDefinition>> = {\n  '0': {keyCode: 48, key: '0', code: 'Digit0'},\n  '1': {keyCode: 49, key: '1', code: 'Digit1'},\n  '2': {keyCode: 50, key: '2', code: 'Digit2'},\n  '3': {keyCode: 51, key: '3', code: 'Digit3'},\n  '4': {keyCode: 52, key: '4', code: 'Digit4'},\n  '5': {keyCode: 53, key: '5', code: 'Digit5'},\n  '6': {keyCode: 54, key: '6', code: 'Digit6'},\n  '7': {keyCode: 55, key: '7', code: 'Digit7'},\n  '8': {keyCode: 56, key: '8', code: 'Digit8'},\n  '9': {keyCode: 57, key: '9', code: 'Digit9'},\n  Power: {key: 'Power', code: 'Power'},\n  Eject: {key: 'Eject', code: 'Eject'},\n  Abort: {keyCode: 3, code: 'Abort', key: 'Cancel'},\n  Help: {keyCode: 6, code: 'Help', key: 'Help'},\n  Backspace: {keyCode: 8, code: 'Backspace', key: 'Backspace'},\n  Tab: {keyCode: 9, code: 'Tab', key: 'Tab'},\n  Numpad5: {\n    keyCode: 12,\n    shiftKeyCode: 101,\n    key: 'Clear',\n    code: 'Numpad5',\n    shiftKey: '5',\n    location: 3,\n  },\n  NumpadEnter: {\n    keyCode: 13,\n    code: 'NumpadEnter',\n    key: 'Enter',\n    text: '\\r',\n    location: 3,\n  },\n  Enter: {keyCode: 13, code: 'Enter', key: 'Enter', text: '\\r'},\n  '\\r': {keyCode: 13, code: 'Enter', key: 'Enter', text: '\\r'},\n  '\\n': {keyCode: 13, code: 'Enter', key: 'Enter', text: '\\r'},\n  ShiftLeft: {keyCode: 16, code: 'ShiftLeft', key: 'Shift', location: 1},\n  ShiftRight: {keyCode: 16, code: 'ShiftRight', key: 'Shift', location: 2},\n  ControlLeft: {\n    keyCode: 17,\n    code: 'ControlLeft',\n    key: 'Control',\n    location: 1,\n  },\n  ControlRight: {\n    keyCode: 17,\n    code: 'ControlRight',\n    key: 'Control',\n    location: 2,\n  },\n  AltLeft: {keyCode: 18, code: 'AltLeft', key: 'Alt', location: 1},\n  AltRight: {keyCode: 18, code: 'AltRight', key: 'Alt', location: 2},\n  Pause: {keyCode: 19, code: 'Pause', key: 'Pause'},\n  CapsLock: {keyCode: 20, code: 'CapsLock', key: 'CapsLock'},\n  Escape: {keyCode: 27, code: 'Escape', key: 'Escape'},\n  Convert: {keyCode: 28, code: 'Convert', key: 'Convert'},\n  NonConvert: {keyCode: 29, code: 'NonConvert', key: 'NonConvert'},\n  Space: {keyCode: 32, code: 'Space', key: ' '},\n  Numpad9: {\n    keyCode: 33,\n    shiftKeyCode: 105,\n    key: 'PageUp',\n    code: 'Numpad9',\n    shiftKey: '9',\n    location: 3,\n  },\n  PageUp: {keyCode: 33, code: 'PageUp', key: 'PageUp'},\n  Numpad3: {\n    keyCode: 34,\n    shiftKeyCode: 99,\n    key: 'PageDown',\n    code: 'Numpad3',\n    shiftKey: '3',\n    location: 3,\n  },\n  PageDown: {keyCode: 34, code: 'PageDown', key: 'PageDown'},\n  End: {keyCode: 35, code: 'End', key: 'End'},\n  Numpad1: {\n    keyCode: 35,\n    shiftKeyCode: 97,\n    key: 'End',\n    code: 'Numpad1',\n    shiftKey: '1',\n    location: 3,\n  },\n  Home: {keyCode: 36, code: 'Home', key: 'Home'},\n  Numpad7: {\n    keyCode: 36,\n    shiftKeyCode: 103,\n    key: 'Home',\n    code: 'Numpad7',\n    shiftKey: '7',\n    location: 3,\n  },\n  ArrowLeft: {keyCode: 37, code: 'ArrowLeft', key: 'ArrowLeft'},\n  Numpad4: {\n    keyCode: 37,\n    shiftKeyCode: 100,\n    key: 'ArrowLeft',\n    code: 'Numpad4',\n    shiftKey: '4',\n    location: 3,\n  },\n  Numpad8: {\n    keyCode: 38,\n    shiftKeyCode: 104,\n    key: 'ArrowUp',\n    code: 'Numpad8',\n    shiftKey: '8',\n    location: 3,\n  },\n  ArrowUp: {keyCode: 38, code: 'ArrowUp', key: 'ArrowUp'},\n  ArrowRight: {keyCode: 39, code: 'ArrowRight', key: 'ArrowRight'},\n  Numpad6: {\n    keyCode: 39,\n    shiftKeyCode: 102,\n    key: 'ArrowRight',\n    code: 'Numpad6',\n    shiftKey: '6',\n    location: 3,\n  },\n  Numpad2: {\n    keyCode: 40,\n    shiftKeyCode: 98,\n    key: 'ArrowDown',\n    code: 'Numpad2',\n    shiftKey: '2',\n    location: 3,\n  },\n  ArrowDown: {keyCode: 40, code: 'ArrowDown', key: 'ArrowDown'},\n  Select: {keyCode: 41, code: 'Select', key: 'Select'},\n  Open: {keyCode: 43, code: 'Open', key: 'Execute'},\n  PrintScreen: {keyCode: 44, code: 'PrintScreen', key: 'PrintScreen'},\n  Insert: {keyCode: 45, code: 'Insert', key: 'Insert'},\n  Numpad0: {\n    keyCode: 45,\n    shiftKeyCode: 96,\n    key: 'Insert',\n    code: 'Numpad0',\n    shiftKey: '0',\n    location: 3,\n  },\n  Delete: {keyCode: 46, code: 'Delete', key: 'Delete'},\n  NumpadDecimal: {\n    keyCode: 46,\n    shiftKeyCode: 110,\n    code: 'NumpadDecimal',\n    key: '\\u0000',\n    shiftKey: '.',\n    location: 3,\n  },\n  Digit0: {keyCode: 48, code: 'Digit0', shiftKey: ')', key: '0'},\n  Digit1: {keyCode: 49, code: 'Digit1', shiftKey: '!', key: '1'},\n  Digit2: {keyCode: 50, code: 'Digit2', shiftKey: '@', key: '2'},\n  Digit3: {keyCode: 51, code: 'Digit3', shiftKey: '#', key: '3'},\n  Digit4: {keyCode: 52, code: 'Digit4', shiftKey: '$', key: '4'},\n  Digit5: {keyCode: 53, code: 'Digit5', shiftKey: '%', key: '5'},\n  Digit6: {keyCode: 54, code: 'Digit6', shiftKey: '^', key: '6'},\n  Digit7: {keyCode: 55, code: 'Digit7', shiftKey: '&', key: '7'},\n  Digit8: {keyCode: 56, code: 'Digit8', shiftKey: '*', key: '8'},\n  Digit9: {keyCode: 57, code: 'Digit9', shiftKey: '(', key: '9'},\n  KeyA: {keyCode: 65, code: 'KeyA', shiftKey: 'A', key: 'a'},\n  KeyB: {keyCode: 66, code: 'KeyB', shiftKey: 'B', key: 'b'},\n  KeyC: {keyCode: 67, code: 'KeyC', shiftKey: 'C', key: 'c'},\n  KeyD: {keyCode: 68, code: 'KeyD', shiftKey: 'D', key: 'd'},\n  KeyE: {keyCode: 69, code: 'KeyE', shiftKey: 'E', key: 'e'},\n  KeyF: {keyCode: 70, code: 'KeyF', shiftKey: 'F', key: 'f'},\n  KeyG: {keyCode: 71, code: 'KeyG', shiftKey: 'G', key: 'g'},\n  KeyH: {keyCode: 72, code: 'KeyH', shiftKey: 'H', key: 'h'},\n  KeyI: {keyCode: 73, code: 'KeyI', shiftKey: 'I', key: 'i'},\n  KeyJ: {keyCode: 74, code: 'KeyJ', shiftKey: 'J', key: 'j'},\n  KeyK: {keyCode: 75, code: 'KeyK', shiftKey: 'K', key: 'k'},\n  KeyL: {keyCode: 76, code: 'KeyL', shiftKey: 'L', key: 'l'},\n  KeyM: {keyCode: 77, code: 'KeyM', shiftKey: 'M', key: 'm'},\n  KeyN: {keyCode: 78, code: 'KeyN', shiftKey: 'N', key: 'n'},\n  KeyO: {keyCode: 79, code: 'KeyO', shiftKey: 'O', key: 'o'},\n  KeyP: {keyCode: 80, code: 'KeyP', shiftKey: 'P', key: 'p'},\n  KeyQ: {keyCode: 81, code: 'KeyQ', shiftKey: 'Q', key: 'q'},\n  KeyR: {keyCode: 82, code: 'KeyR', shiftKey: 'R', key: 'r'},\n  KeyS: {keyCode: 83, code: 'KeyS', shiftKey: 'S', key: 's'},\n  KeyT: {keyCode: 84, code: 'KeyT', shiftKey: 'T', key: 't'},\n  KeyU: {keyCode: 85, code: 'KeyU', shiftKey: 'U', key: 'u'},\n  KeyV: {keyCode: 86, code: 'KeyV', shiftKey: 'V', key: 'v'},\n  KeyW: {keyCode: 87, code: 'KeyW', shiftKey: 'W', key: 'w'},\n  KeyX: {keyCode: 88, code: 'KeyX', shiftKey: 'X', key: 'x'},\n  KeyY: {keyCode: 89, code: 'KeyY', shiftKey: 'Y', key: 'y'},\n  KeyZ: {keyCode: 90, code: 'KeyZ', shiftKey: 'Z', key: 'z'},\n  MetaLeft: {keyCode: 91, code: 'MetaLeft', key: 'Meta', location: 1},\n  MetaRight: {keyCode: 92, code: 'MetaRight', key: 'Meta', location: 2},\n  ContextMenu: {keyCode: 93, code: 'ContextMenu', key: 'ContextMenu'},\n  NumpadMultiply: {\n    keyCode: 106,\n    code: 'NumpadMultiply',\n    key: '*',\n    location: 3,\n  },\n  NumpadAdd: {keyCode: 107, code: 'NumpadAdd', key: '+', location: 3},\n  NumpadSubtract: {\n    keyCode: 109,\n    code: 'NumpadSubtract',\n    key: '-',\n    location: 3,\n  },\n  NumpadDivide: {keyCode: 111, code: 'NumpadDivide', key: '/', location: 3},\n  F1: {keyCode: 112, code: 'F1', key: 'F1'},\n  F2: {keyCode: 113, code: 'F2', key: 'F2'},\n  F3: {keyCode: 114, code: 'F3', key: 'F3'},\n  F4: {keyCode: 115, code: 'F4', key: 'F4'},\n  F5: {keyCode: 116, code: 'F5', key: 'F5'},\n  F6: {keyCode: 117, code: 'F6', key: 'F6'},\n  F7: {keyCode: 118, code: 'F7', key: 'F7'},\n  F8: {keyCode: 119, code: 'F8', key: 'F8'},\n  F9: {keyCode: 120, code: 'F9', key: 'F9'},\n  F10: {keyCode: 121, code: 'F10', key: 'F10'},\n  F11: {keyCode: 122, code: 'F11', key: 'F11'},\n  F12: {keyCode: 123, code: 'F12', key: 'F12'},\n  F13: {keyCode: 124, code: 'F13', key: 'F13'},\n  F14: {keyCode: 125, code: 'F14', key: 'F14'},\n  F15: {keyCode: 126, code: 'F15', key: 'F15'},\n  F16: {keyCode: 127, code: 'F16', key: 'F16'},\n  F17: {keyCode: 128, code: 'F17', key: 'F17'},\n  F18: {keyCode: 129, code: 'F18', key: 'F18'},\n  F19: {keyCode: 130, code: 'F19', key: 'F19'},\n  F20: {keyCode: 131, code: 'F20', key: 'F20'},\n  F21: {keyCode: 132, code: 'F21', key: 'F21'},\n  F22: {keyCode: 133, code: 'F22', key: 'F22'},\n  F23: {keyCode: 134, code: 'F23', key: 'F23'},\n  F24: {keyCode: 135, code: 'F24', key: 'F24'},\n  NumLock: {keyCode: 144, code: 'NumLock', key: 'NumLock'},\n  ScrollLock: {keyCode: 145, code: 'ScrollLock', key: 'ScrollLock'},\n  AudioVolumeMute: {\n    keyCode: 173,\n    code: 'AudioVolumeMute',\n    key: 'AudioVolumeMute',\n  },\n  AudioVolumeDown: {\n    keyCode: 174,\n    code: 'AudioVolumeDown',\n    key: 'AudioVolumeDown',\n  },\n  AudioVolumeUp: {keyCode: 175, code: 'AudioVolumeUp', key: 'AudioVolumeUp'},\n  MediaTrackNext: {\n    keyCode: 176,\n    code: 'MediaTrackNext',\n    key: 'MediaTrackNext',\n  },\n  MediaTrackPrevious: {\n    keyCode: 177,\n    code: 'MediaTrackPrevious',\n    key: 'MediaTrackPrevious',\n  },\n  MediaStop: {keyCode: 178, code: 'MediaStop', key: 'MediaStop'},\n  MediaPlayPause: {\n    keyCode: 179,\n    code: 'MediaPlayPause',\n    key: 'MediaPlayPause',\n  },\n  Semicolon: {keyCode: 186, code: 'Semicolon', shiftKey: ':', key: ';'},\n  Equal: {keyCode: 187, code: 'Equal', shiftKey: '+', key: '='},\n  NumpadEqual: {keyCode: 187, code: 'NumpadEqual', key: '=', location: 3},\n  Comma: {keyCode: 188, code: 'Comma', shiftKey: '<', key: ','},\n  Minus: {keyCode: 189, code: 'Minus', shiftKey: '_', key: '-'},\n  Period: {keyCode: 190, code: 'Period', shiftKey: '>', key: '.'},\n  Slash: {keyCode: 191, code: 'Slash', shiftKey: '?', key: '/'},\n  Backquote: {keyCode: 192, code: 'Backquote', shiftKey: '~', key: '`'},\n  BracketLeft: {keyCode: 219, code: 'BracketLeft', shiftKey: '{', key: '['},\n  Backslash: {keyCode: 220, code: 'Backslash', shiftKey: '|', key: '\\\\'},\n  BracketRight: {keyCode: 221, code: 'BracketRight', shiftKey: '}', key: ']'},\n  Quote: {keyCode: 222, code: 'Quote', shiftKey: '\"', key: \"'\"},\n  AltGraph: {keyCode: 225, code: 'AltGraph', key: 'AltGraph'},\n  Props: {keyCode: 247, code: 'Props', key: 'CrSel'},\n  Cancel: {keyCode: 3, key: 'Cancel', code: 'Abort'},\n  Clear: {keyCode: 12, key: 'Clear', code: 'Numpad5', location: 3},\n  Shift: {keyCode: 16, key: 'Shift', code: 'ShiftLeft', location: 1},\n  Control: {keyCode: 17, key: 'Control', code: 'ControlLeft', location: 1},\n  Alt: {keyCode: 18, key: 'Alt', code: 'AltLeft', location: 1},\n  Accept: {keyCode: 30, key: 'Accept'},\n  ModeChange: {keyCode: 31, key: 'ModeChange'},\n  ' ': {keyCode: 32, key: ' ', code: 'Space'},\n  Print: {keyCode: 42, key: 'Print'},\n  Execute: {keyCode: 43, key: 'Execute', code: 'Open'},\n  '\\u0000': {keyCode: 46, key: '\\u0000', code: 'NumpadDecimal', location: 3},\n  a: {keyCode: 65, key: 'a', code: 'KeyA'},\n  b: {keyCode: 66, key: 'b', code: 'KeyB'},\n  c: {keyCode: 67, key: 'c', code: 'KeyC'},\n  d: {keyCode: 68, key: 'd', code: 'KeyD'},\n  e: {keyCode: 69, key: 'e', code: 'KeyE'},\n  f: {keyCode: 70, key: 'f', code: 'KeyF'},\n  g: {keyCode: 71, key: 'g', code: 'KeyG'},\n  h: {keyCode: 72, key: 'h', code: 'KeyH'},\n  i: {keyCode: 73, key: 'i', code: 'KeyI'},\n  j: {keyCode: 74, key: 'j', code: 'KeyJ'},\n  k: {keyCode: 75, key: 'k', code: 'KeyK'},\n  l: {keyCode: 76, key: 'l', code: 'KeyL'},\n  m: {keyCode: 77, key: 'm', code: 'KeyM'},\n  n: {keyCode: 78, key: 'n', code: 'KeyN'},\n  o: {keyCode: 79, key: 'o', code: 'KeyO'},\n  p: {keyCode: 80, key: 'p', code: 'KeyP'},\n  q: {keyCode: 81, key: 'q', code: 'KeyQ'},\n  r: {keyCode: 82, key: 'r', code: 'KeyR'},\n  s: {keyCode: 83, key: 's', code: 'KeyS'},\n  t: {keyCode: 84, key: 't', code: 'KeyT'},\n  u: {keyCode: 85, key: 'u', code: 'KeyU'},\n  v: {keyCode: 86, key: 'v', code: 'KeyV'},\n  w: {keyCode: 87, key: 'w', code: 'KeyW'},\n  x: {keyCode: 88, key: 'x', code: 'KeyX'},\n  y: {keyCode: 89, key: 'y', code: 'KeyY'},\n  z: {keyCode: 90, key: 'z', code: 'KeyZ'},\n  Meta: {keyCode: 91, key: 'Meta', code: 'MetaLeft', location: 1},\n  '*': {keyCode: 106, key: '*', code: 'NumpadMultiply', location: 3},\n  '+': {keyCode: 107, key: '+', code: 'NumpadAdd', location: 3},\n  '-': {keyCode: 109, key: '-', code: 'NumpadSubtract', location: 3},\n  '/': {keyCode: 111, key: '/', code: 'NumpadDivide', location: 3},\n  ';': {keyCode: 186, key: ';', code: 'Semicolon'},\n  '=': {keyCode: 187, key: '=', code: 'Equal'},\n  ',': {keyCode: 188, key: ',', code: 'Comma'},\n  '.': {keyCode: 190, key: '.', code: 'Period'},\n  '`': {keyCode: 192, key: '`', code: 'Backquote'},\n  '[': {keyCode: 219, key: '[', code: 'BracketLeft'},\n  '\\\\': {keyCode: 220, key: '\\\\', code: 'Backslash'},\n  ']': {keyCode: 221, key: ']', code: 'BracketRight'},\n  \"'\": {keyCode: 222, key: \"'\", code: 'Quote'},\n  Attn: {keyCode: 246, key: 'Attn'},\n  CrSel: {keyCode: 247, key: 'CrSel', code: 'Props'},\n  ExSel: {keyCode: 248, key: 'ExSel'},\n  EraseEof: {keyCode: 249, key: 'EraseEof'},\n  Play: {keyCode: 250, key: 'Play'},\n  ZoomOut: {keyCode: 251, key: 'ZoomOut'},\n  ')': {keyCode: 48, key: ')', code: 'Digit0'},\n  '!': {keyCode: 49, key: '!', code: 'Digit1'},\n  '@': {keyCode: 50, key: '@', code: 'Digit2'},\n  '#': {keyCode: 51, key: '#', code: 'Digit3'},\n  $: {keyCode: 52, key: '$', code: 'Digit4'},\n  '%': {keyCode: 53, key: '%', code: 'Digit5'},\n  '^': {keyCode: 54, key: '^', code: 'Digit6'},\n  '&': {keyCode: 55, key: '&', code: 'Digit7'},\n  '(': {keyCode: 57, key: '(', code: 'Digit9'},\n  A: {keyCode: 65, key: 'A', code: 'KeyA'},\n  B: {keyCode: 66, key: 'B', code: 'KeyB'},\n  C: {keyCode: 67, key: 'C', code: 'KeyC'},\n  D: {keyCode: 68, key: 'D', code: 'KeyD'},\n  E: {keyCode: 69, key: 'E', code: 'KeyE'},\n  F: {keyCode: 70, key: 'F', code: 'KeyF'},\n  G: {keyCode: 71, key: 'G', code: 'KeyG'},\n  H: {keyCode: 72, key: 'H', code: 'KeyH'},\n  I: {keyCode: 73, key: 'I', code: 'KeyI'},\n  J: {keyCode: 74, key: 'J', code: 'KeyJ'},\n  K: {keyCode: 75, key: 'K', code: 'KeyK'},\n  L: {keyCode: 76, key: 'L', code: 'KeyL'},\n  M: {keyCode: 77, key: 'M', code: 'KeyM'},\n  N: {keyCode: 78, key: 'N', code: 'KeyN'},\n  O: {keyCode: 79, key: 'O', code: 'KeyO'},\n  P: {keyCode: 80, key: 'P', code: 'KeyP'},\n  Q: {keyCode: 81, key: 'Q', code: 'KeyQ'},\n  R: {keyCode: 82, key: 'R', code: 'KeyR'},\n  S: {keyCode: 83, key: 'S', code: 'KeyS'},\n  T: {keyCode: 84, key: 'T', code: 'KeyT'},\n  U: {keyCode: 85, key: 'U', code: 'KeyU'},\n  V: {keyCode: 86, key: 'V', code: 'KeyV'},\n  W: {keyCode: 87, key: 'W', code: 'KeyW'},\n  X: {keyCode: 88, key: 'X', code: 'KeyX'},\n  Y: {keyCode: 89, key: 'Y', code: 'KeyY'},\n  Z: {keyCode: 90, key: 'Z', code: 'KeyZ'},\n  ':': {keyCode: 186, key: ':', code: 'Semicolon'},\n  '<': {keyCode: 188, key: '<', code: 'Comma'},\n  _: {keyCode: 189, key: '_', code: 'Minus'},\n  '>': {keyCode: 190, key: '>', code: 'Period'},\n  '?': {keyCode: 191, key: '?', code: 'Slash'},\n  '~': {keyCode: 192, key: '~', code: 'Backquote'},\n  '{': {keyCode: 219, key: '{', code: 'BracketLeft'},\n  '|': {keyCode: 220, key: '|', code: 'Backslash'},\n  '}': {keyCode: 221, key: '}', code: 'BracketRight'},\n  '\"': {keyCode: 222, key: '\"', code: 'Quote'},\n  SoftLeft: {key: 'SoftLeft', code: 'SoftLeft', location: 4},\n  SoftRight: {key: 'SoftRight', code: 'SoftRight', location: 4},\n  Camera: {keyCode: 44, key: 'Camera', code: 'Camera', location: 4},\n  Call: {key: 'Call', code: 'Call', location: 4},\n  EndCall: {keyCode: 95, key: 'EndCall', code: 'EndCall', location: 4},\n  VolumeDown: {\n    keyCode: 182,\n    key: 'VolumeDown',\n    code: 'VolumeDown',\n    location: 4,\n  },\n  VolumeUp: {keyCode: 183, key: 'VolumeUp', code: 'VolumeUp', location: 4},\n};\n", "/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst DEFAULT_TIMEOUT = 30000;\n\n/**\n * @internal\n */\nexport class TimeoutSettings {\n  #defaultTimeout: number | null;\n  #defaultNavigationTimeout: number | null;\n\n  constructor() {\n    this.#defaultTimeout = null;\n    this.#defaultNavigationTimeout = null;\n  }\n\n  setDefaultTimeout(timeout: number): void {\n    this.#defaultTimeout = timeout;\n  }\n\n  setDefaultNavigationTimeout(timeout: number): void {\n    this.#defaultNavigationTimeout = timeout;\n  }\n\n  navigationTimeout(): number {\n    if (this.#defaultNavigationTimeout !== null) {\n      return this.#defaultNavigationTimeout;\n    }\n    if (this.#defaultTimeout !== null) {\n      return this.#defaultTimeout;\n    }\n    return DEFAULT_TIMEOUT;\n  }\n\n  timeout(): number {\n    if (this.#defaultTimeout !== null) {\n      return this.#defaultTimeout;\n    }\n    return DEFAULT_TIMEOUT;\n  }\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport {CDPSession} from './Connection.js';\nimport {getReadableAsBuffer, getReadableFromProtocolStream} from './util.js';\n\n/**\n * @public\n */\nexport interface TracingOptions {\n  path?: string;\n  screenshots?: boolean;\n  categories?: string[];\n}\n\n/**\n * The Tracing class exposes the tracing audit interface.\n * @remarks\n * You can use `tracing.start` and `tracing.stop` to create a trace file\n * which can be opened in Chrome DevTools or {@link https://chromedevtools.github.io/timeline-viewer/ | timeline viewer}.\n *\n * @example\n *\n * ```ts\n * await page.tracing.start({path: 'trace.json'});\n * await page.goto('https://www.google.com');\n * await page.tracing.stop();\n * ```\n *\n * @public\n */\nexport class Tracing {\n  #client: CDPSession;\n  #recording = false;\n  #path?: string;\n\n  /**\n   * @internal\n   */\n  constructor(client: CDPSession) {\n    this.#client = client;\n  }\n\n  /**\n   * Starts a trace for the current page.\n   * @remarks\n   * Only one trace can be active at a time per browser.\n   *\n   * @param options - Optional `TracingOptions`.\n   */\n  async start(options: TracingOptions = {}): Promise<void> {\n    assert(\n      !this.#recording,\n      'Cannot start recording trace while already recording trace.'\n    );\n\n    const defaultCategories = [\n      '-*',\n      'devtools.timeline',\n      'v8.execute',\n      'disabled-by-default-devtools.timeline',\n      'disabled-by-default-devtools.timeline.frame',\n      'toplevel',\n      'blink.console',\n      'blink.user_timing',\n      'latencyInfo',\n      'disabled-by-default-devtools.timeline.stack',\n      'disabled-by-default-v8.cpu_profiler',\n    ];\n    const {path, screenshots = false, categories = defaultCategories} = options;\n\n    if (screenshots) {\n      categories.push('disabled-by-default-devtools.screenshot');\n    }\n\n    const excludedCategories = categories\n      .filter(cat => {\n        return cat.startsWith('-');\n      })\n      .map(cat => {\n        return cat.slice(1);\n      });\n    const includedCategories = categories.filter(cat => {\n      return !cat.startsWith('-');\n    });\n\n    this.#path = path;\n    this.#recording = true;\n    await this.#client.send('Tracing.start', {\n      transferMode: 'ReturnAsStream',\n      traceConfig: {\n        excludedCategories,\n        includedCategories,\n      },\n    });\n  }\n\n  /**\n   * Stops a trace started with the `start` method.\n   * @returns Promise which resolves to buffer with trace data.\n   */\n  async stop(): Promise<Buffer | undefined> {\n    const contentDeferred = Deferred.create<Buffer | undefined>();\n    this.#client.once('Tracing.tracingComplete', async event => {\n      try {\n        const readable = await getReadableFromProtocolStream(\n          this.#client,\n          event.stream\n        );\n        const buffer = await getReadableAsBuffer(readable, this.#path);\n        contentDeferred.resolve(buffer ?? undefined);\n      } catch (error) {\n        if (isErrorLike(error)) {\n          contentDeferred.reject(error);\n        } else {\n          contentDeferred.reject(new Error(`Unknown error: ${error}`));\n        }\n      }\n    });\n    await this.#client.send('Tracing.end');\n    this.#recording = false;\n    return contentDeferred.valueOrThrow();\n  }\n}\n", "/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Protocol} from 'devtools-protocol';\n\nimport {Deferred} from '../util/Deferred.js';\n\nimport {CDPSession} from './Connection.js';\nimport {ConsoleMessageType} from './ConsoleMessage.js';\nimport {EventEmitter} from './EventEmitter.js';\nimport {ExecutionContext} from './ExecutionContext.js';\nimport {CDPJSHandle} from './JSHandle.js';\nimport {EvaluateFunc, HandleFor} from './types.js';\nimport {debugError, withSourcePuppeteerURLIfNone} from './util.js';\n\n/**\n * @internal\n */\nexport type ConsoleAPICalledCallback = (\n  eventType: ConsoleMessageType,\n  handles: CDPJSHandle[],\n  trace: Protocol.Runtime.StackTrace\n) => void;\n\n/**\n * @internal\n */\nexport type ExceptionThrownCallback = (\n  details: Protocol.Runtime.ExceptionDetails\n) => void;\n\n/**\n * This class represents a\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API | WebWorker}.\n *\n * @remarks\n * The events `workercreated` and `workerdestroyed` are emitted on the page\n * object to signal the worker lifecycle.\n *\n * @example\n *\n * ```ts\n * page.on('workercreated', worker =>\n *   console.log('Worker created: ' + worker.url())\n * );\n * page.on('workerdestroyed', worker =>\n *   console.log('Worker destroyed: ' + worker.url())\n * );\n *\n * console.log('Current workers:');\n * for (const worker of page.workers()) {\n *   console.log('  ' + worker.url());\n * }\n * ```\n *\n * @public\n */\nexport class WebWorker extends EventEmitter {\n  #executionContext = Deferred.create<ExecutionContext>();\n\n  #client: CDPSession;\n  #url: string;\n\n  /**\n   * @internal\n   */\n  constructor(\n    client: CDPSession,\n    url: string,\n    consoleAPICalled: ConsoleAPICalledCallback,\n    exceptionThrown: ExceptionThrownCallback\n  ) {\n    super();\n    this.#client = client;\n    this.#url = url;\n\n    this.#client.once('Runtime.executionContextCreated', async event => {\n      const context = new ExecutionContext(client, event.context);\n      this.#executionContext.resolve(context);\n    });\n    this.#client.on('Runtime.consoleAPICalled', async event => {\n      try {\n        const context = await this.#executionContext.valueOrThrow();\n        return consoleAPICalled(\n          event.type,\n          event.args.map((object: Protocol.Runtime.RemoteObject) => {\n            return new CDPJSHandle(context, object);\n          }),\n          event.stackTrace\n        );\n      } catch (err) {\n        debugError(err);\n      }\n    });\n    this.#client.on('Runtime.exceptionThrown', exception => {\n      return exceptionThrown(exception.exceptionDetails);\n    });\n\n    // This might fail if the target is closed before we receive all execution contexts.\n    this.#client.send('Runtime.enable').catch(debugError);\n  }\n\n  /**\n   * @internal\n   */\n  async executionContext(): Promise<ExecutionContext> {\n    return this.#executionContext.valueOrThrow();\n  }\n\n  /**\n   * The URL of this web worker.\n   */\n  url(): string {\n    return this.#url;\n  }\n\n  /**\n   * The CDP session client the WebWorker belongs to.\n   */\n  get client(): CDPSession {\n    return this.#client;\n  }\n\n  /**\n   * If the function passed to the `worker.evaluate` returns a Promise, then\n   * `worker.evaluate` would wait for the promise to resolve and return its\n   * value. If the function passed to the `worker.evaluate` returns a\n   * non-serializable value, then `worker.evaluate` resolves to `undefined`.\n   * DevTools Protocol also supports transferring some additional values that\n   * are not serializable by `JSON`: `-0`, `NaN`, `Infinity`, `-Infinity`, and\n   * bigint literals.\n   * Shortcut for `await worker.executionContext()).evaluate(pageFunction, ...args)`.\n   *\n   * @param pageFunction - Function to be evaluated in the worker context.\n   * @param args - Arguments to pass to `pageFunction`.\n   * @returns Promise which resolves to the return value of `pageFunction`.\n   */\n  async evaluate<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<Awaited<ReturnType<Func>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluate.name,\n      pageFunction\n    );\n    const context = await this.#executionContext.valueOrThrow();\n    return context.evaluate(pageFunction, ...args);\n  }\n\n  /**\n   * The only difference between `worker.evaluate` and `worker.evaluateHandle`\n   * is that `worker.evaluateHandle` returns in-page object (JSHandle). If the\n   * function passed to the `worker.evaluateHandle` returns a `Promise`, then\n   * `worker.evaluateHandle` would wait for the promise to resolve and return\n   * its value. Shortcut for\n   * `await worker.executionContext()).evaluateHandle(pageFunction, ...args)`\n   *\n   * @param pageFunction - Function to be evaluated in the page context.\n   * @param args - Arguments to pass to `pageFunction`.\n   * @returns Promise which resolves to the return value of `pageFunction`.\n   */\n  async evaluateHandle<\n    Params extends unknown[],\n    Func extends EvaluateFunc<Params> = EvaluateFunc<Params>,\n  >(\n    pageFunction: Func | string,\n    ...args: Params\n  ): Promise<HandleFor<Awaited<ReturnType<Func>>>> {\n    pageFunction = withSourcePuppeteerURLIfNone(\n      this.evaluateHandle.name,\n      pageFunction\n    );\n    const context = await this.#executionContext.valueOrThrow();\n    return context.evaluateHandle(pageFunction, ...args);\n  }\n}\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {TargetFilterCallback} from '../api/Browser.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\n\nimport {CDPSession, Connection} from './Connection.js';\nimport {EventEmitter} from './EventEmitter.js';\nimport {CDPTarget} from './Target.js';\nimport {\n  TargetFactory,\n  TargetInterceptor,\n  TargetManagerEmittedEvents,\n  TargetManager,\n} from './TargetManager.js';\n\n/**\n * FirefoxTargetManager implements target management using\n * `Target.setDiscoverTargets` without using auto-attach. It, therefore, creates\n * targets that lazily establish their CDP sessions.\n *\n * Although the approach is potentially flaky, there is no other way for Firefox\n * because Firefox's CDP implementation does not support auto-attach.\n *\n * Firefox does not support targetInfoChanged and detachedFromTarget events:\n *\n * - https://bugzilla.mozilla.org/show_bug.cgi?id=1610855\n * - https://bugzilla.mozilla.org/show_bug.cgi?id=1636979\n *   @internal\n */\nexport class FirefoxTargetManager\n  extends EventEmitter\n  implements TargetManager\n{\n  #connection: Connection;\n  /**\n   * Keeps track of the following events: 'Target.targetCreated',\n   * 'Target.targetDestroyed'.\n   *\n   * A target becomes discovered when 'Target.targetCreated' is received.\n   * A target is removed from this map once 'Target.targetDestroyed' is\n   * received.\n   *\n   * `targetFilterCallback` has no effect on this map.\n   */\n  #discoveredTargetsByTargetId = new Map<string, Protocol.Target.TargetInfo>();\n  /**\n   * Keeps track of targets that were created via 'Target.targetCreated'\n   * and which one are not filtered out by `targetFilterCallback`.\n   *\n   * The target is removed from here once it's been destroyed.\n   */\n  #availableTargetsByTargetId = new Map<string, CDPTarget>();\n  /**\n   * Tracks which sessions attach to which target.\n   */\n  #availableTargetsBySessionId = new Map<string, CDPTarget>();\n  /**\n   * If a target was filtered out by `targetFilterCallback`, we still receive\n   * events about it from CDP, but we don't forward them to the rest of Puppeteer.\n   */\n  #ignoredTargets = new Set<string>();\n  #targetFilterCallback: TargetFilterCallback | undefined;\n  #targetFactory: TargetFactory;\n\n  #targetInterceptors = new WeakMap<\n    CDPSession | Connection,\n    TargetInterceptor[]\n  >();\n\n  #attachedToTargetListenersBySession = new WeakMap<\n    CDPSession | Connection,\n    (event: Protocol.Target.AttachedToTargetEvent) => Promise<void>\n  >();\n\n  #initializeDeferred = Deferred.create<void>();\n  #targetsIdsForInit = new Set<string>();\n\n  constructor(\n    connection: Connection,\n    targetFactory: TargetFactory,\n    targetFilterCallback?: TargetFilterCallback\n  ) {\n    super();\n    this.#connection = connection;\n    this.#targetFilterCallback = targetFilterCallback;\n    this.#targetFactory = targetFactory;\n\n    this.#connection.on('Target.targetCreated', this.#onTargetCreated);\n    this.#connection.on('Target.targetDestroyed', this.#onTargetDestroyed);\n    this.#connection.on('sessiondetached', this.#onSessionDetached);\n    this.setupAttachmentListeners(this.#connection);\n  }\n\n  addTargetInterceptor(\n    client: CDPSession | Connection,\n    interceptor: TargetInterceptor\n  ): void {\n    const interceptors = this.#targetInterceptors.get(client) || [];\n    interceptors.push(interceptor);\n    this.#targetInterceptors.set(client, interceptors);\n  }\n\n  removeTargetInterceptor(\n    client: CDPSession | Connection,\n    interceptor: TargetInterceptor\n  ): void {\n    const interceptors = this.#targetInterceptors.get(client) || [];\n    this.#targetInterceptors.set(\n      client,\n      interceptors.filter(currentInterceptor => {\n        return currentInterceptor !== interceptor;\n      })\n    );\n  }\n\n  setupAttachmentListeners(session: CDPSession | Connection): void {\n    const listener = (event: Protocol.Target.AttachedToTargetEvent) => {\n      return this.#onAttachedToTarget(session, event);\n    };\n    assert(!this.#attachedToTargetListenersBySession.has(session));\n    this.#attachedToTargetListenersBySession.set(session, listener);\n    session.on('Target.attachedToTarget', listener);\n  }\n\n  #onSessionDetached = (session: CDPSession) => {\n    this.removeSessionListeners(session);\n    this.#targetInterceptors.delete(session);\n    this.#availableTargetsBySessionId.delete(session.id());\n  };\n\n  removeSessionListeners(session: CDPSession): void {\n    if (this.#attachedToTargetListenersBySession.has(session)) {\n      session.off(\n        'Target.attachedToTarget',\n        this.#attachedToTargetListenersBySession.get(session)!\n      );\n      this.#attachedToTargetListenersBySession.delete(session);\n    }\n  }\n\n  getAvailableTargets(): Map<string, CDPTarget> {\n    return this.#availableTargetsByTargetId;\n  }\n\n  dispose(): void {\n    this.#connection.off('Target.targetCreated', this.#onTargetCreated);\n    this.#connection.off('Target.targetDestroyed', this.#onTargetDestroyed);\n  }\n\n  async initialize(): Promise<void> {\n    await this.#connection.send('Target.setDiscoverTargets', {\n      discover: true,\n      filter: [{}],\n    });\n    this.#targetsIdsForInit = new Set(this.#discoveredTargetsByTargetId.keys());\n    await this.#initializeDeferred.valueOrThrow();\n  }\n\n  #onTargetCreated = async (\n    event: Protocol.Target.TargetCreatedEvent\n  ): Promise<void> => {\n    if (this.#discoveredTargetsByTargetId.has(event.targetInfo.targetId)) {\n      return;\n    }\n\n    this.#discoveredTargetsByTargetId.set(\n      event.targetInfo.targetId,\n      event.targetInfo\n    );\n\n    if (event.targetInfo.type === 'browser' && event.targetInfo.attached) {\n      const target = this.#targetFactory(event.targetInfo, undefined);\n      target._initialize();\n      this.#availableTargetsByTargetId.set(event.targetInfo.targetId, target);\n      this.#finishInitializationIfReady(target._targetId);\n      return;\n    }\n\n    const target = this.#targetFactory(event.targetInfo, undefined);\n    if (this.#targetFilterCallback && !this.#targetFilterCallback(target)) {\n      this.#ignoredTargets.add(event.targetInfo.targetId);\n      this.#finishInitializationIfReady(event.targetInfo.targetId);\n      return;\n    }\n    target._initialize();\n    this.#availableTargetsByTargetId.set(event.targetInfo.targetId, target);\n    this.emit(TargetManagerEmittedEvents.TargetAvailable, target);\n    this.#finishInitializationIfReady(target._targetId);\n  };\n\n  #onTargetDestroyed = (event: Protocol.Target.TargetDestroyedEvent): void => {\n    this.#discoveredTargetsByTargetId.delete(event.targetId);\n    this.#finishInitializationIfReady(event.targetId);\n    const target = this.#availableTargetsByTargetId.get(event.targetId);\n    if (target) {\n      this.emit(TargetManagerEmittedEvents.TargetGone, target);\n      this.#availableTargetsByTargetId.delete(event.targetId);\n    }\n  };\n\n  #onAttachedToTarget = async (\n    parentSession: Connection | CDPSession,\n    event: Protocol.Target.AttachedToTargetEvent\n  ) => {\n    const targetInfo = event.targetInfo;\n    const session = this.#connection.session(event.sessionId);\n    if (!session) {\n      throw new Error(`Session ${event.sessionId} was not created.`);\n    }\n\n    const target = this.#availableTargetsByTargetId.get(targetInfo.targetId);\n\n    assert(target, `Target ${targetInfo.targetId} is missing`);\n\n    this.setupAttachmentListeners(session);\n\n    this.#availableTargetsBySessionId.set(\n      session.id(),\n      this.#availableTargetsByTargetId.get(targetInfo.targetId)!\n    );\n\n    for (const hook of this.#targetInterceptors.get(parentSession) || []) {\n      if (!(parentSession instanceof Connection)) {\n        assert(this.#availableTargetsBySessionId.has(parentSession.id()));\n      }\n      await hook(\n        target,\n        parentSession instanceof Connection\n          ? null\n          : this.#availableTargetsBySessionId.get(parentSession.id())!\n      );\n    }\n  };\n\n  #finishInitializationIfReady(targetId: string): void {\n    this.#targetsIdsForInit.delete(targetId);\n    if (this.#targetsIdsForInit.size === 0) {\n      this.#initializeDeferred.resolve();\n    }\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @internal\n */\nexport class TaskQueue {\n  #chain: Promise<void>;\n\n  constructor() {\n    this.#chain = Promise.resolve();\n  }\n\n  postTask<T>(task: () => Promise<T>): Promise<T> {\n    const result = this.#chain.then(task);\n    this.#chain = result.then(\n      () => {\n        return undefined;\n      },\n      () => {\n        return undefined;\n      }\n    );\n    return result;\n  }\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Gets the global version if we're in the browser, else loads the node-fetch module.\n *\n * @internal\n */\nexport const getFetch = async (): Promise<typeof fetch> => {\n  return (globalThis as any).fetch;\n};\n", "export const DEFAULT_VIEWPORT = Object.freeze({width: 800, height: 600});\n\nimport {CDPBrowser} from '../common/Browser.js';\nimport {BrowserConnectOptions} from '../common/BrowserConnector.js';\nimport {Connection} from '../common/Connection.js';\nimport {ConnectionTransport} from '../common/ConnectionTransport.js';\nimport {ConnectOptions} from '../common/Puppeteer.js';\n/**\n * Users should never call this directly; it's called when calling\n * `puppeteer.connect` with `protocol: 'cdp'`.\n *\n *\n */\nexport async function connectToCDPBrowser(\n  connectionTransport: ConnectionTransport,\n  options: BrowserConnectOptions & ConnectOptions & {sessionId?: string}\n): Promise<CDPBrowser> {\n  const {\n    ignoreHTTPSErrors = false,\n    defaultViewport = DEFAULT_VIEWPORT,\n    targetFilter,\n    _isPageTarget: isPageTarget,\n    slowMo = 0,\n    protocolTimeout,\n    sessionId = 'unknown',\n  } = options;\n\n  const connection = new Connection(\n    '',\n    connectionTransport,\n    slowMo,\n    protocolTimeout\n  );\n\n  const version = await connection.send('Browser.getVersion');\n  const product = version.product.toLowerCase().includes('firefox')\n    ? 'firefox'\n    : 'chrome';\n\n  const {browserContextIds} = await connection.send(\n    'Target.getBrowserContexts'\n  );\n  const browser = await CDPBrowser._create(\n    product || 'chrome',\n    connection,\n    browserContextIds,\n    ignoreHTTPSErrors,\n    defaultViewport,\n    undefined,\n    () => {\n      return connection.send('Browser.close').catch(console.log);\n    },\n    targetFilter,\n    isPageTarget,\n    true,\n    sessionId\n  );\n  return browser;\n}\n", "import {ConnectionTransport} from '../common/ConnectionTransport.js';\n\nimport {BrowserWorker} from './BrowserWorker.js';\nimport {messageToChunks, chunksToMessage} from './chunking.js';\n\nconst FAKE_HOST = 'https://fake.host';\n\nexport class WorkersWebSocketTransport implements ConnectionTransport {\n  ws: WebSocket;\n  pingInterval: NodeJS.Timer;\n  chunks: Uint8Array[] = [];\n  onmessage?: (message: string) => void;\n  onclose?: () => void;\n  sessionId: string;\n\n  static async create(\n    endpoint: BrowserWorker,\n    sessionid: string\n  ): Promise<WorkersWebSocketTransport> {\n    const path = `${FAKE_HOST}/v1/connectDevtools?browser_session=${sessionid}`;\n    const response = await endpoint.fetch(path, {\n      headers: {Upgrade: 'websocket'},\n    });\n    response.webSocket!.accept();\n    return new WorkersWebSocketTransport(response.webSocket!, sessionid);\n  }\n\n  constructor(ws: WebSocket, sessionid: string) {\n    this.pingInterval = setInterval(() => {\n      return this.ws.send('ping');\n    }, 1000); // TODO more investigation\n    this.ws = ws;\n    this.sessionId = sessionid;\n    this.ws.addEventListener('message', event => {\n      this.chunks.push(new Uint8Array(event.data as ArrayBuffer));\n      const message = chunksToMessage(this.chunks, sessionid);\n      if (message && this.onmessage) {\n        this.onmessage!(message);\n      }\n    });\n    this.ws.addEventListener('close', () => {\n      clearInterval(this.pingInterval as NodeJS.Timeout);\n      if (this.onclose) {\n        this.onclose();\n      }\n    });\n    this.ws.addEventListener('error', e => {\n      console.error(`Websocket error: SessionID: ${sessionid}`, e);\n      clearInterval(this.pingInterval as NodeJS.Timeout);\n    });\n  }\n\n  send(message: string): void {\n    for (const chunk of messageToChunks(message)) {\n      this.ws.send(chunk);\n    }\n  }\n\n  close(): void {\n    clearInterval(this.pingInterval as NodeJS.Timeout);\n    this.ws.close();\n  }\n\n  toString(): string {\n    return this.sessionId;\n  }\n}\n", "const HEADER_SIZE = 4; // Uint32\nconst MAX_MESSAGE_SIZE = 1048575; // Workers size is < 1MB\nconst FIRST_CHUNK_DATA_SIZE = MAX_MESSAGE_SIZE - HEADER_SIZE;\n\nexport const messageToChunks = (data: string): Uint8Array[] => {\n  const encoder = new TextEncoder();\n  const encodedUint8Array = encoder.encode(data);\n\n  // We only include the header into the first chunk\n  const firstChunk = new Uint8Array(\n    Math.min(MAX_MESSAGE_SIZE, HEADER_SIZE + encodedUint8Array.length)\n  );\n  const view = new DataView(firstChunk.buffer);\n  view.setUint32(0, encodedUint8Array.length, true);\n  firstChunk.set(\n    encodedUint8Array.slice(0, FIRST_CHUNK_DATA_SIZE),\n    HEADER_SIZE\n  );\n\n  const chunks: Uint8Array[] = [firstChunk];\n  for (let i = FIRST_CHUNK_DATA_SIZE; i < data.length; i += MAX_MESSAGE_SIZE) {\n    chunks.push(encodedUint8Array.slice(i, i + MAX_MESSAGE_SIZE));\n  }\n  return chunks;\n};\n\nexport const chunksToMessage = (\n  chunks: Uint8Array[],\n  sessionid: string\n): string | null => {\n  if (chunks.length === 0) {\n    return null;\n  }\n\n  const emptyBuffer = new Uint8Array(0);\n  const firstChunk = chunks[0] || emptyBuffer;\n  const view = new DataView(firstChunk.buffer);\n  const expectedBytes = view.getUint32(0, true);\n\n  let totalBytes = -HEADER_SIZE;\n  for (let i = 0; i < chunks.length; ++i) {\n    const curChunk = chunks[i] || emptyBuffer;\n    totalBytes += curChunk.length;\n\n    if (totalBytes > expectedBytes) {\n      throw new Error(\n        `Should have gotten the exact number of bytes but we got more.  SessionID: ${sessionid}`\n      );\n    }\n    if (totalBytes === expectedBytes) {\n      const chunksToCombine = chunks.splice(0, i + 1);\n      chunksToCombine[0] = firstChunk.subarray(HEADER_SIZE);\n\n      const combined = new Uint8Array(expectedBytes);\n      let offset = 0;\n      for (let j = 0; j <= i; ++j) {\n        const chunk = chunksToCombine[j] || emptyBuffer;\n        combined.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const decoder = new TextDecoder();\n      // return decoder.decode(combined)\n      const message = decoder.decode(combined);\n      return message;\n    }\n  }\n  return null;\n};\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './Browser.js';\nexport * from './BrowserContext.js';\nexport * from './Dialog.js';\nexport * from './Page.js';\nexport * from './JSHandle.js';\nexport * from './ElementHandle.js';\nexport * from './Input.js';\nexport * from './Frame.js';\nexport * from './HTTPResponse.js';\nexport * from './HTTPRequest.js';\nexport * from './locators/locators.js';\nexport * from './Target.js';\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './Accessibility.js';\nexport * from './AriaQueryHandler.js';\nexport * from './Browser.js';\nexport * from './BrowserConnector.js';\nexport * from './BrowserWebSocketTransport.js';\nexport * from './ChromeTargetManager.js';\nexport * from './Configuration.js';\nexport * from './Connection.js';\nexport * from './ConnectionTransport.js';\nexport * from './ConsoleMessage.js';\nexport * from './Coverage.js';\nexport * from './CustomQueryHandler.js';\nexport * from './Debug.js';\nexport * from './Device.js';\nexport * from './DeviceRequestPrompt.js';\nexport * from './Dialog.js';\nexport * from './ElementHandle.js';\nexport * from './EmulationManager.js';\nexport * from './Errors.js';\nexport * from './EventEmitter.js';\nexport * from './ExecutionContext.js';\nexport * from './fetch.js';\nexport * from './FileChooser.js';\nexport * from './FirefoxTargetManager.js';\nexport * from './FrameManager.js';\nexport * from './FrameTree.js';\nexport * from './Input.js';\nexport * from './IsolatedWorld.js';\nexport * from './IsolatedWorlds.js';\nexport * from './JSHandle.js';\nexport * from './LazyArg.js';\nexport * from './LifecycleWatcher.js';\nexport * from './NetworkEventManager.js';\nexport * from './NetworkManager.js';\nexport * from './NodeWebSocketTransport.js';\nexport * from './Page.js';\nexport * from './PDFOptions.js';\nexport * from './PredefinedNetworkConditions.js';\nexport * from './Product.js';\nexport * from './Puppeteer.js';\nexport * from './PuppeteerViewport.js';\nexport * from './SecurityDetails.js';\nexport * from './Target.js';\nexport * from './TargetManager.js';\nexport * from './TaskQueue.js';\nexport * from './TimeoutSettings.js';\nexport * from './Tracing.js';\nexport * from './types.js';\nexport * from './USKeyboardLayout.js';\nexport * from './util.js';\nexport * from './WaitTask.js';\nexport * from './WebWorker.js';\nexport * from './QueryHandler.js';\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Product} from './Product.js';\n\n/**\n * Defines experiment options for Puppeteer.\n *\n * See individual properties for more information.\n *\n * @public\n */\nexport type ExperimentsConfiguration = Record<string, never>;\n\n/**\n * Defines options to configure Puppeteer's behavior during installation and\n * runtime.\n *\n * See individual properties for more information.\n *\n * @public\n */\nexport interface Configuration {\n  /**\n   * Specifies a certain version of the browser you'd like Puppeteer to use.\n   *\n   * Can be overridden by `PUPPETEER_BROWSER_REVISION`.\n   *\n   * See {@link PuppeteerNode.launch | puppeteer.launch} on how executable path\n   * is inferred.\n   *\n   * @defaultValue A compatible-revision of the browser.\n   */\n  browserRevision?: string;\n  /**\n   * Defines the directory to be used by Puppeteer for caching.\n   *\n   * Can be overridden by `PUPPETEER_CACHE_DIR`.\n   *\n   * @defaultValue `path.join(os.homedir(), '.cache', 'puppeteer')`\n   */\n  cacheDirectory?: string;\n  /**\n   * Specifies the URL prefix that is used to download the browser.\n   *\n   * Can be overridden by `PUPPETEER_DOWNLOAD_BASE_URL`.\n   *\n   * @remarks\n   * This must include the protocol and may even need a path prefix.\n   *\n   * @defaultValue Either https://edgedl.me.gvt1.com/edgedl/chrome/chrome-for-testing or\n   * https://archive.mozilla.org/pub/firefox/nightly/latest-mozilla-central,\n   * depending on the product.\n   */\n  downloadBaseUrl?: string;\n  /**\n   * Specifies the path for the downloads folder.\n   *\n   * Can be overridden by `PUPPETEER_DOWNLOAD_PATH`.\n   *\n   * @defaultValue `<cacheDirectory>`\n   */\n  downloadPath?: string;\n  /**\n   * Specifies an executable path to be used in\n   * {@link PuppeteerNode.launch | puppeteer.launch}.\n   *\n   * Can be overridden by `PUPPETEER_EXECUTABLE_PATH`.\n   *\n   * @defaultValue **Auto-computed.**\n   */\n  executablePath?: string;\n  /**\n   * Specifies which browser you'd like Puppeteer to use.\n   *\n   * Can be overridden by `PUPPETEER_PRODUCT`.\n   *\n   * @defaultValue `chrome`\n   */\n  defaultProduct?: Product;\n  /**\n   * Defines the directory to be used by Puppeteer for creating temporary files.\n   *\n   * Can be overridden by `PUPPETEER_TMP_DIR`.\n   *\n   * @defaultValue `os.tmpdir()`\n   */\n  temporaryDirectory?: string;\n  /**\n   * Tells Puppeteer to not download during installation.\n   *\n   * Can be overridden by `PUPPETEER_SKIP_DOWNLOAD`.\n   */\n  skipDownload?: boolean;\n  /**\n   * Tells Puppeteer to log at the given level.\n   *\n   * @defaultValue `warn`\n   */\n  logLevel?: 'silent' | 'error' | 'warn';\n  /**\n   * Defines experimental options for Puppeteer.\n   */\n  experiments?: ExperimentsConfiguration;\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @public\n */\nexport interface ConnectionTransport {\n  send(message: string): void;\n  close(): void;\n  onmessage?: (message: string) => void;\n  onclose?: () => void;\n}\n", "/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Viewport} from './PuppeteerViewport.js';\n\n/**\n * @public\n */\nexport interface Device {\n  userAgent: string;\n  viewport: Viewport;\n}\n\nconst knownDevices = [\n  {\n    name: 'Blackberry PlayBook',\n    userAgent:\n      'Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+',\n    viewport: {\n      width: 600,\n      height: 1024,\n      deviceScaleFactor: 1,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Blackberry PlayBook landscape',\n    userAgent:\n      'Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+',\n    viewport: {\n      width: 1024,\n      height: 600,\n      deviceScaleFactor: 1,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'BlackBerry Z30',\n    userAgent:\n      'Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'BlackBerry Z30 landscape',\n    userAgent:\n      'Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Galaxy Note 3',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Galaxy Note 3 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Galaxy Note II',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Galaxy Note II landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Galaxy S III',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Galaxy S III landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Galaxy S5',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Galaxy S5 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Galaxy S8',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36',\n    viewport: {\n      width: 360,\n      height: 740,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Galaxy S8 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36',\n    viewport: {\n      width: 740,\n      height: 360,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Galaxy S9+',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36',\n    viewport: {\n      width: 320,\n      height: 658,\n      deviceScaleFactor: 4.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Galaxy S9+ landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36',\n    viewport: {\n      width: 658,\n      height: 320,\n      deviceScaleFactor: 4.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Galaxy Tab S4',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36',\n    viewport: {\n      width: 712,\n      height: 1138,\n      deviceScaleFactor: 2.25,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Galaxy Tab S4 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36',\n    viewport: {\n      width: 1138,\n      height: 712,\n      deviceScaleFactor: 2.25,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPad',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1',\n    viewport: {\n      width: 768,\n      height: 1024,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPad landscape',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1',\n    viewport: {\n      width: 1024,\n      height: 768,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPad (gen 6)',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 768,\n      height: 1024,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPad (gen 6) landscape',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 1024,\n      height: 768,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPad (gen 7)',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 810,\n      height: 1080,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPad (gen 7) landscape',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 1080,\n      height: 810,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPad Mini',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1',\n    viewport: {\n      width: 768,\n      height: 1024,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPad Mini landscape',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1',\n    viewport: {\n      width: 1024,\n      height: 768,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPad Pro',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1',\n    viewport: {\n      width: 1024,\n      height: 1366,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPad Pro landscape',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1',\n    viewport: {\n      width: 1366,\n      height: 1024,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPad Pro 11',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 834,\n      height: 1194,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPad Pro 11 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 1194,\n      height: 834,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 4',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53',\n    viewport: {\n      width: 320,\n      height: 480,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 4 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53',\n    viewport: {\n      width: 480,\n      height: 320,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 5',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1',\n    viewport: {\n      width: 320,\n      height: 568,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 5 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1',\n    viewport: {\n      width: 568,\n      height: 320,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 6',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 375,\n      height: 667,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 6 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 667,\n      height: 375,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 6 Plus',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 414,\n      height: 736,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 6 Plus landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 736,\n      height: 414,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 7',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 375,\n      height: 667,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 7 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 667,\n      height: 375,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 7 Plus',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 414,\n      height: 736,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 7 Plus landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 736,\n      height: 414,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 8',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 375,\n      height: 667,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 8 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 667,\n      height: 375,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 8 Plus',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 414,\n      height: 736,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 8 Plus landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 736,\n      height: 414,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone SE',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1',\n    viewport: {\n      width: 320,\n      height: 568,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone SE landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1',\n    viewport: {\n      width: 568,\n      height: 320,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone X',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 375,\n      height: 812,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone X landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n    viewport: {\n      width: 812,\n      height: 375,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone XR',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 414,\n      height: 896,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone XR landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 896,\n      height: 414,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 11',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 414,\n      height: 828,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 11 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 828,\n      height: 414,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 11 Pro',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 375,\n      height: 812,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 11 Pro landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 812,\n      height: 375,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 11 Pro Max',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 414,\n      height: 896,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 11 Pro Max landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 896,\n      height: 414,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 12',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 390,\n      height: 844,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 12 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 844,\n      height: 390,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 12 Pro',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 390,\n      height: 844,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 12 Pro landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 844,\n      height: 390,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 12 Pro Max',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 428,\n      height: 926,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 12 Pro Max landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 926,\n      height: 428,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 12 Mini',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 375,\n      height: 812,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 12 Mini landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 812,\n      height: 375,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 13',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 390,\n      height: 844,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 13 landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 844,\n      height: 390,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 13 Pro',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 390,\n      height: 844,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 13 Pro landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 844,\n      height: 390,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 13 Pro Max',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 428,\n      height: 926,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 13 Pro Max landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 926,\n      height: 428,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'iPhone 13 Mini',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 375,\n      height: 812,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'iPhone 13 Mini landscape',\n    userAgent:\n      'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1',\n    viewport: {\n      width: 812,\n      height: 375,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'JioPhone 2',\n    userAgent:\n      'Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5',\n    viewport: {\n      width: 240,\n      height: 320,\n      deviceScaleFactor: 1,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'JioPhone 2 landscape',\n    userAgent:\n      'Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5',\n    viewport: {\n      width: 320,\n      height: 240,\n      deviceScaleFactor: 1,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Kindle Fire HDX',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true',\n    viewport: {\n      width: 800,\n      height: 1280,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Kindle Fire HDX landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true',\n    viewport: {\n      width: 1280,\n      height: 800,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'LG Optimus L70',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 384,\n      height: 640,\n      deviceScaleFactor: 1.25,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'LG Optimus L70 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 640,\n      height: 384,\n      deviceScaleFactor: 1.25,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Microsoft Lumia 550',\n    userAgent:\n      'Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Microsoft Lumia 950',\n    userAgent:\n      'Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 4,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Microsoft Lumia 950 landscape',\n    userAgent:\n      'Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 4,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nexus 10',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n    viewport: {\n      width: 800,\n      height: 1280,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nexus 10 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n    viewport: {\n      width: 1280,\n      height: 800,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nexus 4',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 384,\n      height: 640,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nexus 4 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 640,\n      height: 384,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nexus 5',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nexus 5 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nexus 5X',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 412,\n      height: 732,\n      deviceScaleFactor: 2.625,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nexus 5X landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 732,\n      height: 412,\n      deviceScaleFactor: 2.625,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nexus 6',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 412,\n      height: 732,\n      deviceScaleFactor: 3.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nexus 6 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 732,\n      height: 412,\n      deviceScaleFactor: 3.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nexus 6P',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 412,\n      height: 732,\n      deviceScaleFactor: 3.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nexus 6P landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 732,\n      height: 412,\n      deviceScaleFactor: 3.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nexus 7',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n    viewport: {\n      width: 600,\n      height: 960,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nexus 7 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n    viewport: {\n      width: 960,\n      height: 600,\n      deviceScaleFactor: 2,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nokia Lumia 520',\n    userAgent:\n      'Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)',\n    viewport: {\n      width: 320,\n      height: 533,\n      deviceScaleFactor: 1.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nokia Lumia 520 landscape',\n    userAgent:\n      'Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)',\n    viewport: {\n      width: 533,\n      height: 320,\n      deviceScaleFactor: 1.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Nokia N9',\n    userAgent:\n      'Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13',\n    viewport: {\n      width: 480,\n      height: 854,\n      deviceScaleFactor: 1,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Nokia N9 landscape',\n    userAgent:\n      'Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13',\n    viewport: {\n      width: 854,\n      height: 480,\n      deviceScaleFactor: 1,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Pixel 2',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 411,\n      height: 731,\n      deviceScaleFactor: 2.625,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Pixel 2 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 731,\n      height: 411,\n      deviceScaleFactor: 2.625,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Pixel 2 XL',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 411,\n      height: 823,\n      deviceScaleFactor: 3.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Pixel 2 XL landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n    viewport: {\n      width: 823,\n      height: 411,\n      deviceScaleFactor: 3.5,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Pixel 3',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36',\n    viewport: {\n      width: 393,\n      height: 786,\n      deviceScaleFactor: 2.75,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Pixel 3 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36',\n    viewport: {\n      width: 786,\n      height: 393,\n      deviceScaleFactor: 2.75,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Pixel 4',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36',\n    viewport: {\n      width: 353,\n      height: 745,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Pixel 4 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36',\n    viewport: {\n      width: 745,\n      height: 353,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Pixel 4a (5G)',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36',\n    viewport: {\n      width: 353,\n      height: 745,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Pixel 4a (5G) landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36',\n    viewport: {\n      width: 745,\n      height: 353,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Pixel 5',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36',\n    viewport: {\n      width: 393,\n      height: 851,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Pixel 5 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36',\n    viewport: {\n      width: 851,\n      height: 393,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n  {\n    name: 'Moto G4',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36',\n    viewport: {\n      width: 360,\n      height: 640,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: false,\n    },\n  },\n  {\n    name: 'Moto G4 landscape',\n    userAgent:\n      'Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36',\n    viewport: {\n      width: 640,\n      height: 360,\n      deviceScaleFactor: 3,\n      isMobile: true,\n      hasTouch: true,\n      isLandscape: true,\n    },\n  },\n] as const;\n\nconst knownDevicesByName = {} as Record<\n  (typeof knownDevices)[number]['name'],\n  Device\n>;\n\nfor (const device of knownDevices) {\n  knownDevicesByName[device.name] = device;\n}\n\n/**\n * A list of devices to be used with {@link Page.emulate}.\n *\n * @example\n *\n * ```ts\n * import {KnownDevices} from 'puppeteer';\n * const iPhone = KnownDevices['iPhone 6'];\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.emulate(iPhone);\n *   await page.goto('https://www.google.com');\n *   // other actions...\n *   await browser.close();\n * })();\n * ```\n *\n * @public\n */\nexport const KnownDevices = Object.freeze(knownDevicesByName);\n\n/**\n * @deprecated Import {@link KnownDevices}\n *\n * @public\n */\nexport const devices = KnownDevices;\n", "/**\n * Copyright 2021 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {NetworkConditions} from './NetworkManager.js';\n\n/**\n * A list of network conditions to be used with\n * {@link Page.emulateNetworkConditions}.\n *\n * @example\n *\n * ```ts\n * import {PredefinedNetworkConditions} from 'puppeteer';\n * const slow3G = PredefinedNetworkConditions['Slow 3G'];\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.emulateNetworkConditions(slow3G);\n *   await page.goto('https://www.google.com');\n *   // other actions...\n *   await browser.close();\n * })();\n * ```\n *\n * @public\n */\nexport const PredefinedNetworkConditions = Object.freeze({\n  'Slow 3G': {\n    download: ((500 * 1000) / 8) * 0.8,\n    upload: ((500 * 1000) / 8) * 0.8,\n    latency: 400 * 5,\n  } as NetworkConditions,\n  'Fast 3G': {\n    download: ((1.6 * 1000 * 1000) / 8) * 0.9,\n    upload: ((750 * 1000) / 8) * 0.9,\n    latency: 150 * 3.75,\n  } as NetworkConditions,\n});\n\n/**\n * @deprecated Import {@link PredefinedNetworkConditions}.\n *\n * @public\n */\nexport const networkConditions = PredefinedNetworkConditions;\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Supported products.\n * @public\n */\nexport type Product = 'chrome' | 'firefox';\n", "export {};\n//# sourceMappingURL=PuppeteerViewport.js.map", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Protocol} from 'devtools-protocol';\n\nimport {CDPSession} from './Connection.js';\nimport {EventEmitter} from './EventEmitter.js';\nimport {CDPTarget} from './Target.js';\n\n/**\n * @internal\n */\nexport type TargetFactory = (\n  targetInfo: Protocol.Target.TargetInfo,\n  session?: CDPSession\n) => CDPTarget;\n\n/**\n * @internal\n */\nexport type TargetInterceptor = (\n  createdTarget: CDPTarget,\n  parentTarget: CDPTarget | null\n) => void;\n\n/**\n * TargetManager encapsulates all interactions with CDP targets and is\n * responsible for coordinating the configuration of targets with the rest of\n * Puppeteer. Code outside of this class should not subscribe `Target.*` events\n * and only use the TargetManager events.\n *\n * There are two implementations: one for Chrome that uses CDP's auto-attach\n * mechanism and one for Firefox because Firefox does not support auto-attach.\n *\n * @internal\n */\nexport interface TargetManager extends EventEmitter {\n  getAvailableTargets(): Map<string, CDPTarget>;\n  initialize(): Promise<void>;\n  dispose(): void;\n  addTargetInterceptor(\n    session: CDPSession,\n    interceptor: TargetInterceptor\n  ): void;\n  removeTargetInterceptor(\n    session: CDPSession,\n    interceptor: TargetInterceptor\n  ): void;\n}\n\n/**\n * @internal\n */\nexport const enum TargetManagerEmittedEvents {\n  TargetDiscovered = 'targetDiscovered',\n  TargetAvailable = 'targetAvailable',\n  TargetGone = 'targetGone',\n  /**\n   * Emitted after a target has been initialized and whenever its URL changes.\n   */\n  TargetChanged = 'targetChanged',\n}\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type {ElementHandle} from '../api/ElementHandle.js';\nimport type {JSHandle} from '../api/JSHandle.js';\n\nimport type {LazyArg} from './LazyArg.js';\n\n/**\n * @internal\n */\nexport interface BindingPayload {\n  type: string;\n  name: string;\n  seq: number;\n  args: unknown[];\n  /**\n   * Determines whether the arguments of the payload are trivial.\n   */\n  isTrivial: boolean;\n}\n\n/**\n * @internal\n */\nexport type AwaitableIterator<T> = Iterator<T> | AsyncIterator<T>;\n\n/**\n * @public\n */\nexport type AwaitableIterable<T> = Iterable<T> | AsyncIterable<T>;\n\n/**\n * @public\n */\nexport type Awaitable<T> = T | PromiseLike<T>;\n\n/**\n * @public\n */\nexport type HandleFor<T> = T extends Node ? ElementHandle<T> : JSHandle<T>;\n\n/**\n * @public\n */\nexport type HandleOr<T> = HandleFor<T> | JSHandle<T> | T;\n\n/**\n * @public\n */\nexport type FlattenHandle<T> = T extends HandleOr<infer U> ? U : never;\n\n/**\n * @internal\n */\nexport type FlattenLazyArg<T> = T extends LazyArg<infer U> ? U : T;\n\n/**\n * @internal\n */\nexport type InnerLazyParams<T extends unknown[]> = {\n  [K in keyof T]: FlattenLazyArg<T[K]>;\n};\n\n/**\n * @public\n */\nexport type InnerParams<T extends unknown[]> = {\n  [K in keyof T]: FlattenHandle<T[K]>;\n};\n\n/**\n * @public\n */\nexport type ElementFor<\n  TagName extends keyof HTMLElementTagNameMap | keyof SVGElementTagNameMap,\n> = TagName extends keyof HTMLElementTagNameMap\n  ? HTMLElementTagNameMap[TagName]\n  : TagName extends keyof SVGElementTagNameMap\n  ? SVGElementTagNameMap[TagName]\n  : never;\n\n/**\n * @public\n */\nexport type EvaluateFunc<T extends unknown[]> = (\n  ...params: InnerParams<T>\n) => Awaitable<unknown>;\n\n/**\n * @public\n */\nexport type EvaluateFuncWith<V, T extends unknown[]> = (\n  ...params: [V, ...InnerParams<T>]\n) => Awaitable<unknown>;\n\n/**\n * @public\n */\nexport type NodeFor<ComplexSelector extends string> =\n  TypeSelectorOfComplexSelector<ComplexSelector> extends infer TypeSelector\n    ? TypeSelector extends\n        | keyof HTMLElementTagNameMap\n        | keyof SVGElementTagNameMap\n      ? ElementFor<TypeSelector>\n      : Element\n    : never;\n\ntype TypeSelectorOfComplexSelector<ComplexSelector extends string> =\n  CompoundSelectorsOfComplexSelector<ComplexSelector> extends infer CompoundSelectors\n    ? CompoundSelectors extends NonEmptyReadonlyArray<string>\n      ? Last<CompoundSelectors> extends infer LastCompoundSelector\n        ? LastCompoundSelector extends string\n          ? TypeSelectorOfCompoundSelector<LastCompoundSelector>\n          : never\n        : never\n      : unknown\n    : never;\n\ntype TypeSelectorOfCompoundSelector<CompoundSelector extends string> =\n  SplitWithDelemiters<\n    CompoundSelector,\n    BeginSubclassSelectorTokens\n  > extends infer CompoundSelectorTokens\n    ? CompoundSelectorTokens extends [infer TypeSelector, ...any[]]\n      ? TypeSelector extends ''\n        ? unknown\n        : TypeSelector\n      : never\n    : never;\n\ntype Last<Arr extends NonEmptyReadonlyArray<unknown>> = Arr extends [\n  infer Head,\n  ...infer Tail,\n]\n  ? Tail extends NonEmptyReadonlyArray<unknown>\n    ? Last<Tail>\n    : Head\n  : never;\n\ntype NonEmptyReadonlyArray<T> = [T, ...(readonly T[])];\n\ntype CompoundSelectorsOfComplexSelector<ComplexSelector extends string> =\n  SplitWithDelemiters<\n    ComplexSelector,\n    CombinatorTokens\n  > extends infer IntermediateTokens\n    ? IntermediateTokens extends readonly string[]\n      ? Drop<IntermediateTokens, ''>\n      : never\n    : never;\n\ntype SplitWithDelemiters<\n  Input extends string,\n  Delemiters extends readonly string[],\n> = Delemiters extends [infer FirstDelemiter, ...infer RestDelemiters]\n  ? FirstDelemiter extends string\n    ? RestDelemiters extends readonly string[]\n      ? FlatmapSplitWithDelemiters<Split<Input, FirstDelemiter>, RestDelemiters>\n      : never\n    : never\n  : [Input];\n\ntype BeginSubclassSelectorTokens = ['.', '#', '[', ':'];\n\ntype CombinatorTokens = [' ', '>', '+', '~', '|', '|'];\n\ntype Drop<\n  Arr extends readonly unknown[],\n  Remove,\n  Acc extends unknown[] = [],\n> = Arr extends [infer Head, ...infer Tail]\n  ? Head extends Remove\n    ? Drop<Tail, Remove>\n    : Drop<Tail, Remove, [...Acc, Head]>\n  : Acc;\n\ntype FlatmapSplitWithDelemiters<\n  Inputs extends readonly string[],\n  Delemiters extends readonly string[],\n  Acc extends string[] = [],\n> = Inputs extends [infer FirstInput, ...infer RestInputs]\n  ? FirstInput extends string\n    ? RestInputs extends readonly string[]\n      ? FlatmapSplitWithDelemiters<\n          RestInputs,\n          Delemiters,\n          [...Acc, ...SplitWithDelemiters<FirstInput, Delemiters>]\n        >\n      : Acc\n    : Acc\n  : Acc;\n\ntype Split<\n  Input extends string,\n  Delimiter extends string,\n  Acc extends string[] = [],\n> = Input extends `${infer Prefix}${Delimiter}${infer Suffix}`\n  ? Split<Suffix, Delimiter, [...Acc, Prefix]>\n  : [...Acc, Input];\n", "/**\n * Copyright 2020 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @internal\n */\nexport const PUPPETEER_REVISIONS = Object.freeze({\n  chrome: '116.0.5845.96',\n  firefox: 'latest',\n});\n", "/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './assert.js';\nexport * from './DebuggableDeferred.js';\nexport * from './Deferred.js';\nexport * from './ErrorLike.js';\nexport * from './AsyncIterableUtil.js';\n", "export {};\n//# sourceMappingURL=BrowserWorker.js.map", "import type { R2Bucket } from '@cloudflare/workers-types';\n\n// R2 public URLs\nconst R2_PUBLIC_URLS = {\n  production: 'https://pub-3418eafd6df5417cb410190a4436d31a.r2.dev',\n  dev: 'https://pub-cf6f1212fb854353acb8f920bd45ff9a.r2.dev',\n};\n\n// TTL configuration (disabled by default, easy to enable later)\nconst ENABLE_TTL = false;\nconst TTL_DAYS = 90;\n\n/**\n * Detect which R2 bucket is being used (production or dev)\n * Returns the appropriate public URL base\n */\nfunction getR2PublicUrl(isDev: boolean): string {\n  return isDev ? R2_PUBLIC_URLS.dev : R2_PUBLIC_URLS.production;\n}\n\nexport interface UploadResult {\n  key: string;\n  publicUrl: string;\n  expiresAt?: Date;\n}\n\n/**\n * Upload PDF buffer to R2 storage with public access\n * @param bucket - R2 bucket binding\n * @param buffer - PDF buffer to upload\n * @param prefix - Folder prefix in bucket (default: 'converted')\n * @param isDev - Whether using dev bucket (default: false, auto-detected from ENV)\n * @returns Object with key and public URL\n */\nexport async function uploadPdfToR2(\n  bucket: R2Bucket,\n  buffer: ArrayBuffer | Buffer,\n  prefix: string = 'converted',\n  isDev: boolean = false\n): Promise<UploadResult> {\n  // Generate unique filename\n  const filename = `${Date.now()}-${crypto.randomUUID()}.pdf`;\n  const key = `${prefix}/${filename}`;\n\n  // Upload to R2\n  await bucket.put(key, buffer, {\n    httpMetadata: {\n      contentType: 'application/pdf',\n    },\n    customMetadata: {\n      uploadedAt: new Date().toISOString(),\n      ...(ENABLE_TTL && { expiresAt: getExpirationDate().toISOString() }),\n    },\n  });\n\n  // Generate public URL (use correct bucket URL)\n  const baseUrl = getR2PublicUrl(isDev);\n  const publicUrl = `${baseUrl}/${key}`;\n\n  return {\n    key,\n    publicUrl,\n    ...(ENABLE_TTL && { expiresAt: getExpirationDate() }),\n  };\n}\n\n/**\n * Upload image buffer to R2 storage with public access\n * @param bucket - R2 bucket binding\n * @param buffer - Image buffer to upload\n * @param format - Image format (png, jpg, webp)\n * @param prefix - Folder prefix in bucket (default: 'converted')\n * @param isDev - Whether using dev bucket (default: false)\n * @returns Object with key and public URL\n */\nexport async function uploadImageToR2(\n  bucket: R2Bucket,\n  buffer: ArrayBuffer | Buffer,\n  format: 'png' | 'jpg' | 'webp',\n  prefix: string = 'converted',\n  isDev: boolean = false\n): Promise<UploadResult> {\n  // Generate unique filename\n  const filename = `${Date.now()}-${crypto.randomUUID()}.${format}`;\n  const key = `${prefix}/${filename}`;\n\n  // Map format to MIME type\n  const contentTypeMap = {\n    png: 'image/png',\n    jpg: 'image/jpeg',\n    webp: 'image/webp',\n  };\n\n  // Upload to R2\n  await bucket.put(key, buffer, {\n    httpMetadata: {\n      contentType: contentTypeMap[format],\n    },\n    customMetadata: {\n      uploadedAt: new Date().toISOString(),\n      ...(ENABLE_TTL && { expiresAt: getExpirationDate().toISOString() }),\n    },\n  });\n\n  // Generate public URL (use correct bucket URL)\n  const baseUrl = getR2PublicUrl(isDev);\n  const publicUrl = `${baseUrl}/${key}`;\n\n  return {\n    key,\n    publicUrl,\n    ...(ENABLE_TTL && { expiresAt: getExpirationDate() }),\n  };\n}\n\n/**\n * Calculate expiration date based on TTL_DAYS\n */\nfunction getExpirationDate(): Date {\n  const expiry = new Date();\n  expiry.setDate(expiry.getDate() + TTL_DAYS);\n  return expiry;\n}\n", "import type { Bindings } from '../mcp/types';\nimport { launchBrowser, closeBrowser, generateScreenshotFromHtml, generateScreenshotFromUrl } from '../lib/browser-client';\nimport { uploadImageToR2 } from '../lib/r2-storage';\n\n// Type definitions for handler arguments\nexport interface HtmlToScreenshotArgs {\n  html: string;\n  format?: 'png' | 'jpeg' | 'webp';\n  fullPage?: boolean;\n  viewport?: {\n    width?: number;\n    height?: number;\n  };\n}\n\nexport interface UrlToScreenshotArgs {\n  url: string;\n  format?: 'png' | 'jpeg' | 'webp';\n  fullPage?: boolean;\n  viewport?: {\n    width?: number;\n    height?: number;\n  };\n}\n\n/**\n * Convert HTML/CSS to screenshot image\n * @param args - HTML content and screenshot options\n * @param env - Worker bindings\n * @returns Public URL to generated screenshot\n */\nexport async function htmlToScreenshot(args: HtmlToScreenshotArgs, env: Bindings): Promise<{ imageUrl: string }> {\n  const { html, format = 'png', fullPage = true, viewport } = args;\n\n  // Validate HTML is not empty\n  if (!html || html.trim().length === 0) {\n    throw new Error('HTML content cannot be empty');\n  }\n\n  const browser = await launchBrowser(env.BROWSER);\n\n  try {\n    // Set custom viewport if provided\n    if (viewport) {\n      const page = await browser.newPage();\n      await page.setViewport({\n        width: viewport.width || 1280,\n        height: viewport.height || 720,\n        deviceScaleFactor: 2, // High DPI for sharp images\n      });\n      await page.close();\n    }\n\n    // Generate screenshot with specified options\n    const imageBuffer = await generateScreenshotFromHtml(browser, html, format, fullPage);\n\n    // Upload to R2 (detect dev mode)\n    const isDev = true; // For now, set to true in dev mode\n    const { publicUrl } = await uploadImageToR2(env.R2_BUCKET, imageBuffer, format, 'converted/html-screenshot', isDev);\n\n    return { imageUrl: publicUrl };\n  } catch (error: any) {\n    if (error.message.includes('timeout')) {\n      throw new Error('Screenshot generation timed out. Try simpler HTML or increase timeout.');\n    }\n    throw new Error(`Failed to generate screenshot from HTML: ${error.message}`);\n  } finally {\n    await closeBrowser(browser);\n  }\n}\n\n/**\n * Convert webpage to screenshot image by URL\n * @param args - URL and screenshot options\n * @param env - Worker bindings\n * @returns Public URL to generated screenshot\n */\nexport async function urlToScreenshot(args: UrlToScreenshotArgs, env: Bindings): Promise<{ imageUrl: string }> {\n  const { url, format = 'png', fullPage = true, viewport } = args;\n\n  // Validate URL format\n  try {\n    new URL(url);\n  } catch {\n    throw new Error('Invalid URL provided. Must be a valid HTTP/HTTPS URL.');\n  }\n\n  const browser = await launchBrowser(env.BROWSER);\n\n  try {\n    // Set custom viewport if provided\n    if (viewport) {\n      const page = await browser.newPage();\n      await page.setViewport({\n        width: viewport.width || 1280,\n        height: viewport.height || 720,\n        deviceScaleFactor: 2, // High DPI for sharp images\n      });\n      await page.close();\n    }\n\n    // Generate screenshot from URL\n    const imageBuffer = await generateScreenshotFromUrl(browser, url, format, fullPage);\n\n    // Upload to R2\n    const isDev = true; // For now, set to true in dev mode\n    const { publicUrl } = await uploadImageToR2(env.R2_BUCKET, imageBuffer, format, 'converted/url-screenshot', isDev);\n\n    return { imageUrl: publicUrl };\n  } catch (error: any) {\n    if (error.message.includes('timeout')) {\n      throw new Error('Screenshot generation timed out. The webpage may be too complex or slow to load.');\n    }\n    if (error.message.includes('net::')) {\n      throw new Error('Failed to load URL. Check that the URL is publicly accessible.');\n    }\n    throw new Error(`Failed to generate screenshot from URL: ${error.message}`);\n  } finally {\n    await closeBrowser(browser);\n  }\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n"],
  "mappings": "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",
  "names": ["s", "m", "h", "d", "w", "y", "match", "n", "i", "debug", "match", "v", "c", "match", "r", "v", "require_browser", "NodeWebSocket", "i", "match", "i", "j", "v", "i", "a", "raw", "c", "k", "v", "v2", "c", "p", "m", "app", "r", "a", "b", "Node", "k", "c", "Node", "i", "m", "j", "_", "_", "i", "j", "h", "e", "k", "a", "b", "p", "re", "m", "r", "i", "i2", "e", "Node", "m", "i", "p", "v", "a", "i2", "j", "k", "b", "Node", "i", "Hono", "c", "_getDefaults", "_defaults", "changeDefaults", "newDefaults", "noopTest", "edit", "regex", "opt", "source", "obj", "name", "val", "valSource", "other", "bull", "indent", "newline", "blockCode", "fences", "hr", "heading", "bullet", "lheadingCore", "lheading", "lheadingGfm", "_paragraph", "blockText", "_blockLabel", "def", "list", "_tag", "_comment", "html", "paragraph", "blockquote", "blockNormal", "gfmTable", "blockGfm", "blockPedantic", "escape", "inlineCode", "br", "inlineText", "_punctuation", "_punctuationOrSpace", "_notPunctuationOrSpace", "punctuation", "_punctuationGfmStrongEm", "_punctuationOrSpaceGfmStrongEm", "_notPunctuationOrSpaceGfmStrongEm", "blockSkip", "emStrongLDelimCore", "emStrongLDelim", "emStrongLDelimGfm", "emStrongRDelimAstCore", "emStrongRDelimAst", "emStrongRDelimAstGfm", "emStrongRDelimUnd", "anyPunctuation", "autolink", "_inlineComment", "tag", "_inlineLabel", "link", "reflink", "nolink", "reflinkSearch", "_caseInsensitiveProtocol", "inlineNormal", "inlinePedantic", "inlineGfm", "inlineBreaks", "block", "inline", "escapeReplacements", "getEscapeReplacement", "ch", "encode", "cleanUrl", "href", "splitCells", "tableRow", "count", "row", "match", "offset", "str", "escaped", "curr", "cells", "i", "rtrim", "c", "invert", "l", "suffLen", "currChar", "findClosingBracket", "b", "level", "outputLink", "cap", "raw", "lexer", "rules", "title", "text", "token", "indentCodeCompensation", "matchIndentToCode", "indentToCode", "node", "matchIndentInNode", "indentInNode", "_Tokenizer", "options", "src", "trimmed", "lines", "tokens", "inBlockquote", "currentLines", "currentRaw", "currentText", "top", "lastToken", "oldToken", "newText", "newToken", "isordered", "itemRegex", "endsWithBlankLine", "endEarly", "itemContents", "line", "t", "nextLine", "blankLine", "nextBulletRegex", "hrRegex", "fencesBeginRegex", "headingBeginRegex", "htmlBeginRegex", "rawLine", "nextLineWithoutTabs", "istask", "ischecked", "lastItem", "spacers", "hasMultipleLineBreaks", "headers", "aligns", "rows", "item", "align", "cell", "trimmedUrl", "rtrimSlash", "lastParenIndex", "linkLen", "links", "linkString", "maskedSrc", "prevChar", "lLength", "rDelim", "rLength", "delimTotal", "midDelimTotal", "endReg", "lastCharLength", "hasNonSpaceChars", "hasSpaceCharsOnBothEnds", "prevCapZero", "_Lexer", "__Lexer", "next", "lastParagraphClipped", "extTokenizer", "cutSrc", "startIndex", "tempSrc", "tempStart", "getStartIndex", "errMsg", "keepPrevChar", "_Renderer", "lang", "langString", "code", "depth", "ordered", "start", "body", "j", "type", "startAttr", "itemBody", "checkbox", "checked", "header", "k", "content", "cleanHref", "out", "_TextRenderer", "_Parser", "__Parser", "anyToken", "genericToken", "ret", "textToken", "renderer", "_Hooks", "markdown", "Marked", "args", "callback", "values", "tableToken", "listToken", "childTokens", "extensions", "pack", "opts", "ext", "prevRenderer", "extLevel", "prop", "rendererProp", "rendererFunc", "tokenizer", "tokenizerProp", "tokenizerFunc", "prevTokenizer", "hooks", "hooksProp", "hooksFunc", "prevHook", "arg", "walkTokens", "packWalktokens", "blockType", "origOpt", "throwError", "processedSrc", "processedTokens", "e", "silent", "async", "msg", "markedInstance", "marked", "setOptions", "use", "parseInline", "parser", "_Parser", "lexer", "_Lexer", "n", "t", "e", "i", "Buffer", "fn", "iterator", "size", "selector", "visible", "_", "QueryHandler", "QueryHandler", "_", "elements", "results", "element", "visibility", "tagName", "values", "threshold", "propertyName", "quad", "x", "y", "i", "_", "addEventListener", "addEventListener", "Buffer", "x", "r", "TargetType", "Buffer", "InterceptResolutionAction", "value", "HTTPRequest", "Buffer", "HTTPResponse", "match", "Buffer", "error", "requestWillBeSentEvent", "HTTPRequest", "request", "HTTPResponse", "n", "t", "r", "e", "o", "i", "u", "s", "c", "l", "a", "f", "h", "n", "t", "r", "v", "e", "c", "s", "l", "f", "p", "d", "y", "m", "b", "u", "o", "w", "x", "P", "I", "_", "S", "E", "i", "T", "j", "k", "z", "L", "U", "C", "D", "N", "q", "F", "M", "G", "V", "B", "J", "K", "Q", "W", "X", "$", "a", "LocatorEmittedEvents", "j", "G", "_", "x", "value", "G", "r", "fs", "fn", "error", "addEventListener", "a", "b", "exceptionDetails", "remoteObject", "rewriteError", "QueryHandler", "fs", "Deferred", "type", "content", "addEventListener", "fn", "createFunction", "document", "Frame", "url", "referrerPolicy", "error", "Frame", "f", "x", "y", "i", "source", "urls", "name", "history", "Buffer", "clip", "x", "y", "InitializationStatus", "target", "target", "process", "i", "j", "e", "FAKE_HOST", "e", "Hono", "c", "e"]
}
